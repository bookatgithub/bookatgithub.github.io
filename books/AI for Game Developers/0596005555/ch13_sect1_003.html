<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>13.3 Treasure?</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch13_sect1_002.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch13_sect1_004.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch13_sect1_003"></A>
<H3 class="docSection1Title">13.3 Treasure?</H3>
<P class="docText">In this next example, we're going to build on the simple Bayesian network we used in the previous example. Specifically, we want to allow the NPC to consider the likelihood of a chest containing treasure in addition to the likelihood of it being trapped before deciding whether to open it. To this end, let's add a new event node to the network from the previous problem to yield a three-node chain. The new event node is the <span class="docEmphasis">Treasure</span> event—that is, <span class="docEmphasis">Treasure</span> is <span class="docEmphasis">TRUE</span> if the chest contains treasure and <span class="docEmphasis">Treasure</span> is <span class="docEmphasis">FALSE</span> if it does not. <A class="docLink" HREF="#ch13_fig06">Figure 13-6</A> shows the new network.</P>
<A NAME="ch13_fig06"></A><p><CENTER>
<H5 class="docFigureTitle">Figure 13-6. Three-node chain</H5>
<IMG BORDER="0" id="" SRC="images/0596005555/figs/ch13_fig06.jpg" ALT="figs/ch13_fig06.jpg">
</CENTER></p><br>
<P class="docText">In this case, we're assuming that whether a chest is locked is an indication of the state of the chest being trapped and the state of the chest being trapped is an indication of whether the chest contains treasure.</P>
<P class="docText">Each event—<span class="docEmphasis">Treasure</span>, <span class="docEmphasis">Trapped</span>, and <span class="docEmphasis">Locked</span>—can take on one of two discrete states: true or false. Therefore, we have the following probability tables, <A class="docLink" HREF="#ch13_tab04">Tables 13-4</A>, <A class="docLink" HREF="#ch13_tab05">13-5</A> and <A class="docLink" HREF="#ch13_tab06">13-6</A>, associated with each event node.</P>
<A NAME="ch13_tab04"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 13.4. Treasure probabilities</h5></CAPTION><COLGROUP><COL><COL></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="center" colspan="2"><P class="docText">P(Treasure)</P></TH></TR><TR><TH class="thead"><P class="docText">True</P></TH><TH class="thead"><P class="docText">False</P></TH></TR></THEAD><TR><TD class="docTableCell"><P class="docText">p<SUB><span class="docEmphasis">T</span>r</SUB></P></TD><TD class="docTableCell"><P class="docText">(1-p<SUB><span class="docEmphasis">T</span>r</SUB>)</P></TD></TR></TABLE></P><br>
<A NAME="ch13_tab05"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 13.5. Trapped conditional probabilities</h5></CAPTION><COLGROUP><COL><COL><COL></COLGROUP><THEAD><TR><TH class="thead">&nbsp;</TH><TH class="bottomBorder thead" align="center" colspan="2"><P class="docText">P(Trapped | Treasure)</P></TH></TR><TR><TH class="thead"><P class="docText">Treasure</P></TH><TH class="thead"><P class="docText">True</P></TH><TH class="thead"><P class="docText">False</P></TH></TR></THEAD><TR><TD class="docTableCell"><P class="docText">True</P></TD><TD class="docTableCell"><P class="docText">p<SUB><span class="docEmphasis">T</span>t</SUB></P></TD><TD class="docTableCell"><P class="docText">(1-p<SUB><span class="docEmphasis">T</span>t</SUB>)</P></TD></TR><TR><TD class="docTableCell"><P class="docText">False</P></TD><TD class="docTableCell"><P class="docText">p<SUB><span class="docEmphasis">T</span>f</SUB></P></TD><TD class="docTableCell"><P class="docText">(1-p<SUB><span class="docEmphasis">T</span>f</SUB>)</P></TD></TR></TABLE></P><br>
<A NAME="ch13_tab06"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 13.6. Locked conditional probabilities</h5></CAPTION><COLGROUP><COL><COL><COL></COLGROUP><THEAD><TR><TH class="thead">&nbsp;</TH><TH class="bottomBorder thead" align="center" colspan="2"><P class="docText">P(Locked | Trapped)</P></TH></TR><TR><TH class="thead"><P class="docText">Trapped</P></TH><TH class="thead"><P class="docText">True</P></TH><TH class="thead"><P class="docText">False</P></TH></TR></THEAD><TR><TD class="docTableCell"><P class="docText">True</P></TD><TD class="docTableCell"><P class="docText">p<SUB><span class="docEmphasis">L</span>t</SUB></P></TD><TD class="docTableCell"><P class="docText">(1-p<SUB><span class="docEmphasis">L</span>t</SUB>)</P></TD></TR><TR><TD class="docTableCell"><P class="docText">False</P></TD><TD class="docTableCell"><P class="docText">p<SUB><span class="docEmphasis">L</span>f</SUB></P></TD><TD class="docTableCell"><P class="docText">(1-p<SUB><span class="docEmphasis">L</span>f</SUB>)</P></TD></TR></TABLE></P><br>
<P class="docText">Notice that in this case, the table for the probabilities of the chest being trapped is a conditional probability table dependent on the states of the chest containing treasure. For the <span class="docEmphasis">Locked</span> event, the table is basically the same as in the previous example.</P>
<A NAME="ch13_sect2_007"></A>
<H4 class="docSection2Title">13.2.7 Alternative Model</H4>
<P class="docText">We should point out that the model shown in <A class="docLink" HREF="#ch13_fig06">Figure 13-6</A> is a simplified model. It is plausible that a chest can be locked given that it contains treasure independent of whether the chest is trapped. This implies a causal link from the <span class="docEmphasis">Treasure</span> node to the <span class="docEmphasis">Locked</span> node as well. This is illustrated in <A class="docLink" HREF="#ch13_fig07">Figure 13-7</A>.</P>
<A NAME="ch13_fig07"></A><p><CENTER>
<H5 class="docFigureTitle">Figure 13-7. Alternative model</H5>
<IMG BORDER="0" id="" SRC="images/0596005555/figs/ch13_fig07.jpg" ALT="figs/ch13_fig07.jpg">
</CENTER></p><br>
<P class="docText">In this alternative case, you also have to set up conditional probabilities of the chest being locked given the various states of it containing treasure. Although you easily can do this and still solve the network by hand calculations, we're going to stick with the simple model in our discussion.</P>

<A NAME="ch13_sect2_008"></A>
<H4 class="docSection2Title">13.2.8 Making Inferences</H4>
<P class="docText">We're going to stick with the model shown in <A class="docLink" HREF="#ch13_fig06">Figure 13-6</A> for the remainder of this example. To determine the probability that the chest is trapped given it is locked, we proceed in a manner similar to the previous example. However, now we have conditional probabilities for the <span class="docEmphasis">Trapped</span> event—namely, the probabilities that the chest is trapped given that it contains treasure and that it does not contain treasure. With this in mind, we apply Bayes' rule as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq08.jpg" ALT="figs/ch13_ueq08.jpg">
<P class="docText"><span class="docEmphasis">P(L|T)</span>, the probability that the chest is locked given it is trapped, comes from the conditional probability table for the <span class="docEmphasis">Locked</span> event. This time, however, <span class="docEmphasis">P(T)</span> is not given, but we can calculate it as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq09.jpg" ALT="figs/ch13_ueq09.jpg">
<P class="docText">In words, the probability of the chest being trapped is equal to the probability of it being trapped given it contains treasure plus the probability it is trapped given it does not contain treasure. Now, <span class="docEmphasis">P(L)</span> is as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq10.jpg" ALT="figs/ch13_ueq10.jpg">
<P class="docText">We've already calculated <span class="docEmphasis">P(T)</span>, and <span class="docEmphasis">P(~T)</span> is simply <span class="docEmphasis">1-P(T)</span>, so all we need to do now is look up <span class="docEmphasis">P(L|T)</span> and <span class="docEmphasis">P(L|~T)</span> in the conditional probability table for <span class="docEmphasis">Locked</span> to determine <span class="docEmphasis">P(L)</span>. Then we can substitute these values in Bayes' rule to determine <span class="docEmphasis">P(T |L)</span>.</P>
<P class="docText">To find the probability of treasure given that the chest is locked, we need to apply Bayes' rule again as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq11.jpg" ALT="figs/ch13_ueq11.jpg">
<P class="docText">Notice, however, that <span class="docEmphasis">Locked</span> is blocked from <span class="docEmphasis">Treasure</span> given <span class="docEmphasis">Trapped</span>. Therefore, we can write <span class="docEmphasis">P(L|Tr)</span> as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq12.jpg" ALT="figs/ch13_ueq12.jpg">
<P class="docText">This is the case because our simple model assumes that a trapped chest causes a locked chest.</P>
<P class="docText">We've already calculated <span class="docEmphasis">P(L)</span> from the previous step, and <span class="docEmphasis">P(Tr)</span> is given, so we have everything we need to determine <span class="docEmphasis">P(Tr |L)</span>.</P>

<A NAME="ch13_sect2_009"></A>
<H4 class="docSection2Title">13.2.9 Numerical Example</H4>
<P class="docText">Let's consider some numbers now. Say a given NPC in your game has experience opening 100 chests, and of those, 50 of them contained treasure. Out of these 50, 40 of them were trapped and of these 40 trapped chests, 28 were locked. Now, of the 10 untrapped chests, three were locked. Further, of the 50 chests containing no treasure, 20 were trapped. With this information, we can calculate the following probabilities:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq13.jpg" ALT="figs/ch13_ueq13.jpg">
<P class="docText">Let's assume your NPC approaches a chest. Without observing whether the chest is locked, the NPC would believe that there's a 50% chance that the chest contained treasure. Now let's assume the NPC observes that the chest is locked. What is the probability that the chest is trapped and what is the probability that it contains treasure? We can use the formulas shown earlier to determine these probabilities. In this case, we have:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq14.jpg" ALT="figs/ch13_ueq14.jpg">
<P class="docText">Now we can find <span class="docEmphasis">P(Tr |L)</span> as follows:</P>
<IMG BORDER="0" id="" ALIGN="center" SRC="images/0596005555/figs/ch13_ueq15.jpg" ALT="figs/ch13_ueq15.jpg">
<P class="docText">In this example, we see that the observation of the chest being locked raises the probability of the chest being trapped from 60% to 78%. Further, the probability of the chest containing treasure is raised from 50% to 57%.</P>
<P class="docText">With this information, you can use fuzzy logic in a manner similar to the previous example to decide for the NPC whether to open the chest. For example, you can set up fuzzy membership functions for the events that the chest is trapped and has treasure and then construct a set of rules along these lines:</P>
<UL><LI><P class="docList">If High Probability Trapped and High Probability Treasure and Low Health then don't open.</P></LI><LI><P class="docList">If Low Probability Trapped and High Probability Treasure and not Low Health then open.</P></LI></UL>
<P class="docText">These are just a couple of the cases you'd probably want to include in your rules set. Using this approach, your NPC can make decisions considering several factors, even in the face of uncertainty.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch13_sect1_002.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch13_sect1_004.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
