<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Hack 2 Useful tcsh Shell Configuration File Options</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="bsdhks-CHP-1-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="bsdhks-CHP-1-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="bsdhks-CHP-1-SECT-3"></A>
<H3 class="docSection1Title">Hack 2 Useful tcsh Shell Configuration File Options</H3><P class="docText"><IMG BORDER="0" ALIGN="absmiddle" width="14" height="36" SRC="images/0596006799/figs/beginner.gif" ALT="figs/beginner.gif"> <IMG BORDER="0" ALIGN="absmiddle" width="36" height="36" SRC="images/0596006799/figs/hack2.gif" ALT="figs/hack2.gif"></P>

<P class="docText"><span class="docEmphBold">Make the shell a friendly place to work
in</span>.</P>

<P class="docText">Now that you've had a chance to make friends with
the shell, let's use its configuration file to
create an environment you'll enjoy working in. Your
prompt is an excellent place to start.</P>

<A NAME="bsdhks-CHP-1-SECT-3.1"></A>

<H4 class="docSection2Title">1.3.1 Making Your Prompt More Useful</H4>

<P class="docText">The default <TT>tcsh</TT><A NAME="bsdhks-CHP-1-ITERM-1698"></A>

<A NAME="bsdhks-CHP-1-ITERM-1699"></A>
 prompt displays <TT>%</TT>
when you're logged in as a regular user and
<TT>hostname#</TT> when you're logged in
as the superuser. That's a fairly useful way to
figure out who you're logged in as, but we can do
much better than that.</P>

<P class="docText">Each user on the system, including the superuser, has a
<A NAME="bsdhks-CHP-1-ITERM-1700"></A>
<I>.cshrc</I> file in his
home directory. Here are my current prompt settings:</P>

<PRE>dru@~:<B>grep prompt ~/.cshrc</B>
if ($?prompt) then
        set prompt = "%B%n@%~%b: "</PRE><BR>


<P class="docText">That isn't the default <TT>tcsh</TT>
prompt, as I've been using my favorite customized
prompt for the past few years. The possible prompt formatting
sequences are easy to understand if you have a list of possibilities
in front of you. That list is buried deeply within <TT>man
cshrc</TT>, so here's a quick way to zero in on
it:</P>

<PRE>dru@~:<B>man cshrc</B>
<B>/prompt may include</B></PRE><BR>


<P class="docText">Here I've used the <TT>/</TT> to invoke
the <A NAME="bsdhks-CHP-1-ITERM-1701"></A>

<A NAME="bsdhks-CHP-1-ITERM-1702"></A>
manpage search utility. The search string
<TT>prompt may include</TT> brings you to the right
section, and is intuitive enough that even my rusty old brain can
remember it.</P>

<P class="docText">If you compare the formatting sequences shown in the manpage to my
prompt string, it reads as follows:</P>

<PRE>set prompt = "%B%n@%~%b: "</PRE><BR>


<P class="docText">That's a <A NAME="bsdhks-CHP-1-ITERM-1703"></A>
little dense. <A class="docLink" HREF="#bsdhks-CHP-1-TABLE-1">Table 1-1</A> dissects the options.</P>

<A NAME="bsdhks-CHP-1-TABLE-1"></A>
<P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 1-1. Prompt characters</h5></CAPTION><COLGROUP><COL><COL></COLGROUP><THEAD><TR><TH class="docTableHeader">
<P class="docText">Character</P>
</TH><TH class="docTableHeader">
<P class="docText">Explanation</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText">"</P>
</TD><TD class="docTableCell">
<P class="docText">Starts the prompt string.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><TT>%B</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Turns on bold.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><TT>%n</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Shows the login name in the prompt.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><TT>@</TT></P>
</TD><TD class="docTableCell">
<P class="docText">I use this as a separator to make my prompt more visually appealing.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><TT>%~</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Shows the current working directory. It results in a shorter prompt
than <TT>%/</TT>, as my home directory is shortened from
<TT>/usr/home/myusername</TT> to <TT>~</TT></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><TT>%b</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Turns off bold.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">:</P>
</TD><TD class="docTableCell">
<P class="docText">Again, this is an extra character I use to separate my prompt from
the cursor.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">"</P>
</TD><TD class="docTableCell">
<P class="docText">Ends the prompt string.</P>
</TD></TR></TABLE></P><br>

<P class="docText">With this prompt, I always know who I am and where I am. If I also
needed to know what machine I was logged into (useful for remote
administration), I could also include <TT>%M</TT> or
<TT>%m</TT> somewhere within the prompt string.</P>

<A NAME="bsdhks-CHP-1-SIDEBAR-1"></A>
<P><TABLE CELLSPACING="0" WIDTH="90%" BORDER="1" cellpadding="5"><TR><TD>
<H2 class="docSidebarTitle">Switching to the Superuser</H2>

<P class="docText">The <A NAME="bsdhks-CHP-1-ITERM-1704"></A>
 <A NAME="bsdhks-CHP-1-ITERM-1705"></A>
superuser's
<A NAME="bsdhks-CHP-1-ITERM-1706"></A>
<I>.cshrc</I> file (in
<I>/root</I>, the superuser's home
directory) has an identical prompt string. This is very fortunate, as
it reveals something you might not know about the
<TT>su</TT> command, which is used to switch users. Right
now I'm logged in as the user <TT>dru</TT>
and my prompt looks like this:</P>

<PRE>dru@/usr/ports/net/ethereal:</PRE><BR>


<P class="docText">Watch the shell output carefully after I use <TT>su</TT> to
switch to the root user:</P>

<PRE>dru@/usr/ports/net/ethereal: <B>su</B>
Password:
dru@/usr/ports/net/ethereal:</PRE><BR>


<P class="docText">Things seem even more confusing if I use the
<TT>whoami</TT> command:</P>

<PRE>dru@/usr/ports/net/ethereal: <B>whoami</B>
dru</PRE><BR>


<P class="docText">However, the <TT>id</TT> command doesn't
lie:</P>

<PRE>dru@/usr/ports/net/ethereal: <B>id</B>
uid=0(root) gid=0(wheel) groups=0(wheel), 5(operator)</PRE><BR>


<P class="docText">It turns out that the default invocation of <TT>su</TT>
doesn't actually log you in as the superuser. It
simply gives you superuser privileges while retaining your original
login shell.</P>

<P class="docText">If you really want to log in as the superuser, include the login
(<TT>-l</TT>) switch:</P>

<PRE>dru@/usr/ports/net/ethereal: <B>su -l</B>
Password:
root@~: <B>whoami</B>
root
root@~: <B>id</B>
uid=0(root) gid=0(wheel) groups=0(wheel), 5(operator)</PRE><BR>

</TD></TR></TABLE></P><br>

<P class="docText">I highly recommend you take some time to experiment with the various
formatting sequences and hack a prompt that best meets your needs.
You can add other features, including customized time and date
strings and command history numbers  <A class="docLink" HREF="bsdhks-CHP-1-SECT-2.html#bsdhks-CHP-1-SECT-2"><span class="docEmphBold">[Hack #1]</span></A>, as well as flashing or
underlining the prompt.</P>


<A NAME="bsdhks-CHP-1-SECT-3.2"></A>

<H4 class="docSection2Title">1.3.2 Setting Shell Variables</H4>

<P class="docText">Your prompt is an example of a
<A NAME="bsdhks-CHP-1-ITERM-1707"></A>

<A NAME="bsdhks-CHP-1-ITERM-1708"></A>

<A NAME="bsdhks-CHP-1-ITERM-1709"></A>
shell variable. There are dozens of
other shell variables you can set in <A NAME="bsdhks-CHP-1-ITERM-1710"></A>
<I>.cshrc</I>. My
trick for finding the shell variables section in the manpage is:</P>

<PRE>dru@~:<B>man cshrc</B>
<B>/variables described</B></PRE><BR>


<P class="docText">As the name implies, shell variables affect only the commands that
are built into the shell itself. Don't confuse these
with environment variables, which affect your entire working
environment and every command you invoke.</P>

<P class="docText">If you take a look at your <I>~/.cshrc</I> file,
environment variables are the ones written in uppercase and are
preceded with the <A NAME="bsdhks-CHP-1-ITERM-1711"></A>
<TT>setenv</TT> command. Shell
variables are written in lowercase and are preceded with the
<TT>set</TT> command.</P>

<P class="docText">You can also enable a shell variable by using the
<A NAME="bsdhks-CHP-1-ITERM-1712"></A>
<TT>set</TT> command at your
command prompt. (Use <TT>unset</TT> to disable it.) Since
the variable affects only your current login session and its
children, you can experiment with setting and unsetting variables to
your heart's content. If you get into trouble, log
out of that session and log in again.</P>

<P class="docText">If you find a variable you want to keep permanently, add it to your
<I>~/.cshrc</I> file in the section that contains the
default <TT>set</TT> commands. Let's take
a look at some of the most useful ones.</P>

<P class="docText">If you enjoyed Ctrl-d from  <A class="docLink" HREF="bsdhks-CHP-1-SECT-2.html#bsdhks-CHP-1-SECT-2"><span class="docEmphBold">[Hack #1]</span></A>, you'll like
this even better:</P>

<PRE>set autolist</PRE><BR>


<P class="docText">Now whenever you use the Tab key and the shell isn't
sure what you want, it won't beep at you. Instead,
the shell will show you the applicable possibilities. You
don't even have to press Ctrl-d first!</P>

<P class="docText">The next variable might save you from possible future peril:</P>

<PRE>set rmstar</PRE><BR>


<P class="docText">I'll test this variable by quickly making a
<I>test</I> directory and some files:</P>

<PRE>dru@~:<B>mkdir test</B>
dru@~:<B>cd test</B>
dru@~/test:<B>touch a b c d e</B></PRE><BR>


<P class="docText">Then, I'll try to remove the files from that
<I>test</I> directory:</P>

<PRE>dru@~/test:<B>rm *</B>
Do you really want to delete all files? [n/y]</PRE><BR>


<P class="docText">Since my prompt tells me what directory I'm in, this
trick gives me one last chance to double-check that I really am
deleting the files I want to delete.</P>

<P class="docText">If you're prone to typos, consider this one:</P>

<PRE>set correct=all</PRE><BR>


<P class="docText">This is how the shell will respond to typos at the command line:</P>

<PRE>dru@~:<B>cd /urs/ports</B>
CORRECT&gt;cd /usr/ports (y|n|e|a)?</PRE><BR>


<P class="docText">Pressing <TT>y</TT> will correct the spelling and execute
the command. Pressing <TT>n</TT> will execute the
misspelled command, resulting in an error message. If I press
<TT>e</TT>, I can edit my command (although, in this case,
it would be much quicker for the shell to go with its correct
spelling). And if I completely panic at the thought of all of these
choices, I can always press <TT>a</TT> to abort and just
get my prompt back.</P>

<P class="docText">If you like to save keystrokes, try:</P>

<PRE>set implicitcd</PRE><BR>


<P class="docText">You'll never have to type <TT>cd</TT>
again. Instead, simply type the name of the directory and the shell
will assume you want to go there.</P>



<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="bsdhks-CHP-1-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="bsdhks-CHP-1-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
