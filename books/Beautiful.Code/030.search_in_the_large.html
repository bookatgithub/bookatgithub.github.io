<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="styles/globalstyle.css" type="text/css" rel="stylesheet"/>
<link title="medium" href="styles/two.css" type="text/css" rel="stylesheet"/>
<script src="scripts/main.js" type="text/javascript" language="javascript"></script>
<title>Section 4.4. Search in the Large</title>
</head><body>
<DIV class=h3 style="MARGIN-TOP: 0px; PADDING-BOTTOM: 1em; WIDTH: 100%; PADDING-TOP: 0px"><SPAN>Finding Things</SPAN><SPAN> &gt; Search in the Large</SPAN></DIV>
<DIV></DIV>
<DIV>
<DIV><A name=search_in_the_large></A>
<H3 class=docSection1Title id=-100000>4.4. Search in the Large</H3>
<P class=docText><A name="When most"></A>When most people think of search they think of <A name=idx-CHP-4-0211></A><A name="by Yahoo"></A>web search, as offered by Yahoo!, Google, and their competitors. While ubiquitous web search is a new thing, the <A name=idx-CHP-4-0212></A>discipline of <A name=idx-CHP-4-0213></A><A name="it is"></A>full-text search upon which it is based is not. Most of the seminal papers were written by Gerald Salton at Cornell as far back as the early 1960s. The basic techniques for indexing and searching large volumes of text have not changed dramatically since then. What <SPAN class=docEmphasis>has</SPAN><A name="how result"></A> changed is how result ranking is done.<SUP class=docFootnote><A class=docLink href="javascript:moveTo('CHP-4-FNOTE-3');">[<IMG alt="double dagger" src="images/U2021.GIF">]</A></SUP></P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=CHP-4-FNOTE-3>[<IMG alt="double dagger" src="images/U2021.GIF">]</A></SUP><A name="search borrows"></A> This discussion of full-text search borrows heavily from my 2003 series, <SPAN class=docEmphasis>On Search</SPAN>, available online at <A name=idx-CHP-4-0214></A><A class=docLink href="http://www.tbray.org/ongoing/When/200x/2003/07/30/OnSearchTOC" target=_blank>http://www.tbray.org/ongoing/When/200x/2003/07/30/OnSearchTOC</A><A name="of user"></A>. The series covers the topic of search quite broadly, including issues of user experience, quality control, natural language processing, intelligence, internationalization, and so on.</P></BLOCKQUOTE><A name=searching_with_postings></A>
<H4 class=docSection2Title id=title-ID0EWWCK>4.4.1. Searching with Postings</H4>
<P class=docText><A name="approach to"></A>The standard approach to full-text search is based on the notion of a <SPAN class=docEmphasis>posting</SPAN><A name="build an"></A>, which is a small, fixed-size record. To build an index, you read all the documents and, for each word, create a posting that says word <SPAN class=docEmphasis>x</SPAN> appears in document <SPAN class=docEmphasis>y</SPAN> at position <SPAN class=docEmphasis>z</SPAN><A name="words together"></A>. Then you sort all the words together, so that for each unique word you have a list of <A name=idx-CHP-4-0215></A><A name="each a"></A>postings, each a pair of numbers consisting of a document ID and the text's offset in that document.<A name=idx-CHP-4-0216></A><A name=idx-CHP-4-0217></A></P>
<P class=docText><A name="small and"></A>Because postings are small and fixed in size, and because you tend to have a huge number of them, a natural approach is to use binary search. I have no idea of the details of how Google or Yahoo! do things, but I'd be really unsurprised to hear that those tens of thousands of computers spend a whole lot of their time binary-searching big arrays of postings.</P>
<P class=docText><A name="knowledgeable about"></A>People who are knowledgeable about search shared a collective snicker a few years ago when the number of documents Google advertised as searching, after having been stuck at two billion and change for some years, suddenly became much larger and then kept growing. Presumably they had switched the document ID in all those postings from 32-bit to 64-bit numbers.</P><A name=ranking_results></A>
<H4 class=docSection2Title id=title-ID0E5XCK>4.4.2. Ranking Results</H4>
<P class=docText><A name="searching a"></A>Given a word, searching a list of postings to figure out which documents contain it is not rocket science. A little thought shows that combining the lists to do AND and OR queries and phrase search is also simple, conceptually at least. What's hard is sorting the result list so that the good results show up near the top. Computer science has a <A name=idx-CHP-4-0218></A><A name="Retrieval "></A>subdiscipline called Information Retrieval (IR for short) that focuses almost entirely on this problem. Historically, the results had been very poor, up until recently.<A name=idx-CHP-4-0219></A><A name=idx-CHP-4-0220></A></P><A name=searching_the_web></A>
<H4 class=docSection2Title id=title-ID0EZYCK>4.4.3. Searching the Web</H4>
<P class=docText><A name="results in"></A>Google and its competitors have been able to produce good results in the face of unimaginably huge data sets and populations of users. When I say "good," I mean that <A name=idx-CHP-4-0221></A><A name="near the"></A>high-quality results appear near the top of the result list, and that the result list appears quickly.<A name=idx-CHP-4-0222></A></P>
<P class=docText><A name="is a"></A>The promotion of high-quality results is a result of many factors, the most notable of which is what Google calls <SPAN class=docEmphasis>PageRank</SPAN>, based largely on <A name=idx-CHP-4-0223></A><A name="hyperlinks pointing"></A>link counting: pages with lots of hyperlinks pointing at them are deemed to be more popular and thus, by popular vote, winners.<A name=idx-CHP-4-0224></A></P>
<P class=docText><A name="In practice"></A>In practice, this seems to work well. A couple of interesting observations follow. First, until the rise of PageRank, the leaders in the search-engine space were offerings such as Yahoo! and DMoz, which worked by categorizing results; so, the evidence seems to suggest that it's more useful to know how popular something is than to know what it's about.</P>
<P class=docText><A name="only to"></A>Second, PageRank is applicable only to document collections that are richly populated with links back and forth between the documents. At the moment, two document collections qualify: the World Wide Web and the corpus of peer-reviewed academic publications (which have applied PageRank-like methods for decades).</P>
<P class=docText><A name="large search"></A>The ability of large search engines to scale up with the size of data and number of users has been impressive. It is based on the massive <A name=idx-CHP-4-0225></A><A name="attacking big"></A>application of parallelism: attacking big problems with large numbers of small computers, rather than a few big ones. One of the nice things about postings is that each posting is independent of all the others, so they naturally lend themselves to parallel approaches.</P>
<P class=docText>For example, <A name=idx-CHP-4-0226></A><A name="on doing"></A>an index based on doing binary search in arrays of postings is fairly straight-forward to partition. In an index containing only English words, you could easily create 26 partitions (the term used in the industry is <SPAN class=docEmphasis>shards</SPAN><A name="as many"></A>), one for words beginning with each letter. Then you can make as many copies as you need of each shard. Then, a huge volume of word-search queries can be farmed out across an arbitrarily large collection of cooperating search nodes.<A name=idx-CHP-4-0227></A></P>
<P class=docText><A name="the problem"></A>This leaves the problem of combining search results for multiword or phrase searches, and this requires some real innovation, but it's easy to see how the basic word-search function could be parallelized.</P>
<P class=docText><A name="little unfair"></A>This discussion is a little unfair in that it glosses over a huge number of important issues, notably including fighting the Internet miscreants who continually try to outsmart search-engine algorithms for commercial gain.</P></DIV></DIV>
<p>&nbsp;</p><p>&nbsp;</p><!-- 仁·义 -->
</body></html>
