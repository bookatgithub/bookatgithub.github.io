<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="styles/globalstyle.css" type="text/css" rel="stylesheet"/>
<link title="medium" href="styles/two.css" type="text/css" rel="stylesheet"/>
<script src="scripts/main.js" type="text/javascript" language="javascript"></script>
<title>Section 11.6. The Functioning Prototype</title>
</head><body>
<DIV class=h3 style="MARGIN-TOP: 0px; PADDING-BOTTOM: 1em; WIDTH: 100%; PADDING-TOP: 0px"><SPAN>Secure Communication: The Technology Of Freedom</SPAN><SPAN> &gt; The Functioning Prototype</SPAN></DIV>
<DIV></DIV>
<DIV>
<DIV><A name=the_functioning_prototype></A>
<H3 class=docSection1Title id=-100000>11.6. The Functioning Prototype</H3>
<P class=docText><A name="For the"></A>For the first prototype, I used a simple object persistence module, Persistence::Object::Simple (which my friend Vipul had written for a project we'd worked on earlier) to whip up a basic user database. Using persistent objects helped keep the code clean and intuitive, and also provided a straightforward upgrade path to production database engines (simply create or derive a compatible Persistence::Object::<SUP class=docFootnote><A class=docLink href="javascript:moveTo('CHP-11-FNOTE-4');">[§]</A></SUP><A name="database engine"></A> class for the database engine).<A name=idx-CHP-11-0757></A></P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=CHP-11-FNOTE-4>[§]</A></SUP><A name="Way To"></A> "There's More Than One Way To Do It," a central tenet of the Perl way of life.</P></BLOCKQUOTE>
<P class=docText><A name="Matt Sergeant"></A>In late 2002, Matt Sergeant created another simple <A name=idx-CHP-11-0758></A>prototype-to-production path for Perl hackers, <A name=idx-CHP-11-0759></A><A name="a DBI"></A>DBD::SQLite module, a "self-contained RDBMS in a DBI driver," which can be used for rapid prototyping of <A name=idx-CHP-11-0760></A><A name="during development"></A>database code without the need for a full database engine during development. Personally, though, I prefer the elegance and simplicity of persistent objects to having my <A name=idx-CHP-11-0761></A><A name="with SQL"></A>code littered with SQL queries and DBI calls.</P>
<P class=docText>Mail received into the <A name=idx-CHP-11-0762></A><A name="to regular"></A>Cryptonite system was saved to regular <SPAN class=docEmphasis>mbox</SPAN><A name="Of course"></A> files, which worked fine for the prototype. Of course, a production implementation would have to use a more sophisticated <A name=idx-CHP-11-0763></A><A name="mail store"></A>mail store. I decided to use PGP itself as the <A name=idx-CHP-11-0764></A><A name="rewriting "></A>encryption backend, to avoid rewriting (and maintaining) all the encryption functionality already contained in PGP.<A name=idx-CHP-11-0765></A></P>
<P class=docText><A name=idx-CHP-11-0766></A><A name="and I"></A>GnuPG was coming along, and I kept in mind that I might want to use it for cryptography support in the future. So, I wrote <A name=idx-CHP-11-0767></A><A name="the PGP"></A>Crypt::PGP5 to encapsulate the PGP5 functionality in a Perl module. This module is available from CPAN (though I haven't updated it in ages).</P>
<P class=docText><A name="core of"></A>For the cryptographic core of Crypt::PGP5, I could have used the proprietary PGPSDK library, but I would have had to create a Perl interface to it, which would likely have been more work than just using the PGP binary. So, with a healthy dose of Perlish laziness and keeping in mind that TMTOWTDI,<SUP class=docFootnote><A class=docLink href="javascript:moveTo('CHP-11-FNOTE-5');">[||]</A></SUP><A name="with the"></A> I decided to use the Expect module to automate interactions with the PGP binary, using the same interface that's available to human users of the program. This worked well enough for the first prototype.</P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=CHP-11-FNOTE-5>[||]</A></SUP><A name="One Way"></A> "There's More Than One Way To Do It," a central tenet of the Perl way of life.</P></BLOCKQUOTE>
<P class=docText><A name="was developed"></A>A basic web interface was developed, using the <A name=idx-CHP-11-0768></A>Text::Template module, to populate HTML templates. The <A name=idx-CHP-11-0769></A>Cryptonite::Mail::HTML module contained all web-interface-related code, including session handling.</P>
<P class=docText><A name="after just"></A>The prototype system was ready after just three months of part-time coding. It implemented a full web interface, basic MIME support, OpenPGP encryption, decryption, signing and signature verification, online new user registration, and a new and interesting alternative to login passwords for authentication: PassFaces from ID Arts.</P></DIV></DIV>
<p>&nbsp;</p><p>&nbsp;</p><!-- 仁·义 -->
</body></html>
