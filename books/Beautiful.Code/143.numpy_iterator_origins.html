<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="styles/globalstyle.css" type="text/css" rel="stylesheet"/>
<link title="medium" href="styles/two.css" type="text/css" rel="stylesheet"/>
<script src="scripts/main.js" type="text/javascript" language="javascript"></script>
<title>Section 19.3. NumPy Iterator Origins</title>
</head><body>
<DIV class=h3 style="MARGIN-TOP: 0px; PADDING-BOTTOM: 1em; WIDTH: 100%; PADDING-TOP: 0px"><SPAN>Multidimensional Iterators in NumPy</SPAN><SPAN> &gt; NumPy Iterator Origins</SPAN></DIV>
<DIV></DIV>
<DIV>
<DIV><A name=numpy_iterator_origins></A>
<H3 class=docSection1Title id=-100000>19.3. NumPy Iterator Origins</H3>
<P class=docText><A name="Loops that"></A>Loops that traverse all the elements of an array in compiled code are an essential feature that <A name=idx-CHP-19-1548></A><A name="Python programmer"></A>NumPy offers the Python programmer. The use of an iterator makes it relatively easy to write these loops in a straightforward and readable way that works for the most general (arbitrarily strided) arrays supported by <A name=idx-CHP-19-1549></A><A name="is an"></A>NumPy. The iterator abstraction is an example in my mind of beautiful code because it allows simple expression of a simple idea, even though the underlying implementation details might actually be complicated. This kind of beautiful code does not just drop into existence, but it is often the result of repeated attempts to solve a set of similar problems until a general solution crystallizes.<A name=idx-CHP-19-1550></A><A name=idx-CHP-19-1551></A></P>
<P class=docText><A name="attempt at"></A>My first attempt at writing a general-purpose, <SPAN class=docEmphasis>N</SPAN><A name="around "></A>-dimensional looping construct occurred around 1997 when I was trying to write code for both an <SPAN class=docEmphasis>N</SPAN><A name="on every"></A>-dimensional convolution and a general-purpose arraymap that would perform a Python function on every element of an <SPAN class=docEmphasis>N</SPAN>-dimensional array.</P>
<P class=docText><A name="I arrived"></A>The solution I arrived at then (though not formalized as an iterator) was to keep track of a C array of integers as indices for the <SPAN class=docEmphasis>N</SPAN>-dimensional array. Iteration meant incrementing this <SPAN class=docEmphasis>N</SPAN><A name="to wrap"></A>-index counter with special code to wrap the counter back to zero and increment the next counter by 1 when the index reached the size of the array in a particular dimension.</P>
<P class=docText>While writing <A name=idx-CHP-19-1552></A><A name="more aware"></A>NumPy eight years later, I became more aware of the concept of, and use of, iterator objects in Python. I thus considered adapting the arraymap code as a formal iterator. In the process, I studied how Peter Vevreer (author of <A name=idx-CHP-19-1553></A>SciPy's <SPAN class=docEmphasis>ndimage</SPAN><A name=accomplished></A> package) accomplished <SPAN class=docEmphasis>N</SPAN><A name="an iterator"></A>-dimensional looping and discovered an iterator very similar to what I had already been using. With this boost in confidence, I formalized the iterator, applying ideas from <SPAN class=docEmphasis>ndimage</SPAN><A name="structural elements"></A> to the basic structural elements contained in the arraymap and <SPAN class=docEmphasis>N</SPAN>-dimensional convolution code.</P></DIV></DIV>
<p>&nbsp;</p><p>&nbsp;</p><!-- 仁·义 -->
</body></html>
