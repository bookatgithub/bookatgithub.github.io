<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="styles/globalstyle.css" type="text/css" rel="stylesheet"/>
<link title="medium" href="styles/two.css" type="text/css" rel="stylesheet"/>
<script src="scripts/main.js" type="text/javascript" language="javascript"></script>
<title>Section 32.2. Alike Looking Alike</title>
</head><body>
<DIV class=h3 style="MARGIN-TOP: 0px; PADDING-BOTTOM: 1em; WIDTH: 100%; PADDING-TOP: 0px"><SPAN>Code in Motion</SPAN><SPAN> &gt; Alike Looking Alike</SPAN></DIV>
<DIV></DIV>
<DIV>
<DIV><A name=alike_looking_alike></A>
<H3 class=docSection1Title id=-100000>32.2. Alike Looking Alike</H3>
<P class=docText><A name="The DiffMerge"></A>The DiffMerge snippet in the previous section also illustrates another principle of writing for comprehensibility: code that <SPAN class=docEmphasis>is</SPAN> alike <SPAN class=docEmphasis>looks</SPAN><A name="throughout the"></A> alike. We see this throughout the DiffMerge code. For example:</P><PRE>	while( d.diffs == DD_CONF &amp;&amp; ( bf-&gt;end != bf-&gt;Lines( ) ||
	                               lf1-&gt;end != lf1-&gt;Lines( ) ||
	                               lf2-&gt;end != lf2-&gt;Lines( ) ) )
</PRE><BR>
<P class=docText><A name="how line"></A>The preceding demonstrates how line breaks can create a visual pattern that makes it easier for our brains to recognize a logical pattern. We can tell at a glance that three of the four tests in this <TT>while</TT><A name="essentially the"></A> statement are essentially the same.</P>
<P class=docText><A name="of alike"></A>Here's one more example of alike looking alike. This one illustrates coding that lets our brains do a successful "one of these is not the same" operation:</P>
<DIV class=codeSegmentsExpansionLinks>Code View: <SPAN>Scroll</SPAN> / <A href="javascript:expandCodeSegments()">Show All</A></DIV><PRE class=preFixedHeight>	case MS_BASE:               /* dumping the original */

	    if( selbits = selbitTab[ DL_BASE ][ diffDiff ] )
	    {
	        readFile = bf;
	        readFile-&gt;SeekLine( bf-&gt;start );
	        state = MS_LEG1;
	        break;
	    }

	case MS_LEG1:               /* dumping leg1 */

	    if( selbits = selbitTab[ DL_LEG1 ][ diffDiff ] )
	    {
	        readFile = lf1;
	        readFile-&gt;SeekLine( lf1-&gt;start );
	        state = MS_LEG2;
	        break;
	    }

	case MS_LEG2:               /* dumping leg2 */

	    if( selbits = selbitTab[ DL_LEG2 ][ diffDiff ] )
	    {
	        readFile = lf2;
	        readFile-&gt;SeekLine( lf2-&gt;start );
	    }

	    state = MS_DIFFDIFF;
	    break;


					    </PRE><BR>
<P class=docText><A name="for example"></A>Even if you don't know what this code is about, it's clear to see, for example, that <TT>readfile</TT> and <TT>state</TT><A name="in all"></A> are set in all three cases, but only in the third case is <TT>state</TT><A name="wrote this"></A> set unconditionally. The programmer who wrote this paid attention to making alike look alike; those of us reading it later can see at a glance where the essential logic is.</P></DIV></DIV>
<p>&nbsp;</p><p>&nbsp;</p><!-- 仁·义 -->
</body></html>
