<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link href="styles/globalstyle.css" type="text/css" rel="stylesheet"/>
<link title="medium" href="styles/two.css" type="text/css" rel="stylesheet"/>
<script src="scripts/main.js" type="text/javascript" language="javascript"></script>
<title>Section 32.5. The Tools We Use</title>
</head><body>
<DIV class=h3 style="MARGIN-TOP: 0px; PADDING-BOTTOM: 1em; WIDTH: 100%; PADDING-TOP: 0px"><SPAN>Code in Motion</SPAN><SPAN> &gt; The Tools We Use</SPAN></DIV>
<DIV></DIV>
<DIV>
<DIV><A name=the_tools_we_use></A>
<H3 class=docSection1Title id=-100000>32.5. The Tools We Use</H3>
<P class=docText><A name="Certainly we"></A>Certainly we need code to be understandable when we read the source files directly. We also need the code to be understandable when we encounter it in diffs, merges, patches, debuggers, code inspections, compiler messages, and a variety of other contexts and tools. As it turns out, code written with the Seven Pillars in mind is more readable in more of the tools we use to manage code.</P>
<P class=docText><A name="is human"></A>For example, DiffMerge code is human-readable even without syntax highlighting. In other words, we don't have to depend on context-sensitive source code editors to read it. It's just as readable when displayed as plain text by debuggers, compilers, and web browsers. Here's a snippet of DiffMerge in <SPAN class=docEmphasis>gdb</SPAN>:</P>
<DIV class=codeSegmentsExpansionLinks>Code View: <SPAN>Scroll</SPAN> / <A href="javascript:expandCodeSegments()">Show All</A></DIV><PRE class=preFixedWidth>	Breakpoint 3, DiffMerge::DiffDiff (this=0x80e10c0) at diff/diffmerge.cc:510
	510             Mode initialMode = d.mode;
	(gdb) <B>list 505,515</B>
	505             DiffGrid d = diffGrid
	506                     [ df1-&gt;StartLeg() == 0 ][ df1-&gt;StartBase( ) == 0 ]
	507                     [ df2-&gt;StartLeg() == 0 ][ df2-&gt;StartBase( ) == 0 ]
	508                     [ df3-&gt;StartL1() == 0 ][ df3-&gt;StartL2( ) == 0 ];
	509
	510             Mode initialMode = d.mode;
	511
	512             // Pre-process rules, typically the outer snake information
	513             // contradicts the inner snake, its not perfect, but we use
	514             // the length of the snake to determine the best outcome.
	515
	(gdb) <B>print d</B>
	$1 = {mode = CONF, diffs = DD_CONF}
	(gdb)


					    </PRE><BR>
<P class=docText><A name="code that"></A>When working on code that changes as often as DiffMerge (it has been changed 175 times since it was first written), programmers spend considerable time looking at it in diff and merge tools. What these tools have in common is that they restrict the horizontal view of source files, and they add a certain amount of clutter of their own. Code like DiffMerge's is readable even in these conditions. In command-line diffs, its lines don't wrap. In graphical diff tools, we don't have to fiddle with the horizontal scroll bar to see the bulk of its lines, as <A class=docLink href="javascript:moveTo('diffmerge_code_viewed_in_a_graphical_diff_tool');">Figure 32-1</A> demonstrates.<SUP class=docFootnote><A class=docLink href="javascript:moveTo('CHP-32-FNOTE-4');">[§]</A></SUP></P>
<BLOCKQUOTE>
<P class=docFootnote><SUP><A name=CHP-32-FNOTE-4>[§]</A></SUP><A name="a screenshot"></A> This is a screenshot from P4Merge, a graphical tool built on DiffMerge itself.</P></BLOCKQUOTE><A name=diffmerge_code_viewed_in_a_graphical_diff_tool></A>
<P>
<CENTER>
<H5 class=docFigureTitle><A name="viewed in"></A>Figure 32-1. DiffMerge code viewed in a graphical diff tool</H5><IMG id="" height=185 alt="" src="images/the_tools_we_use.0.png" width=500 border=0> </CENTER>
<P></P><BR>
<P class=docText>And as <A class=docLink href="javascript:moveTo('diffmerge_code_in_an_annotated_history_viewer');">Figure 32-2</A><A name="bookish DiffMerge"></A> shows, a margin-hungry annotated history viewer is positively roomy when displaying the bookish DiffMerge code.</P><A name=diffmerge_code_in_an_annotated_history_viewer></A>
<P>
<CENTER>
<H5 class=docFigureTitle><A name="code in"></A>Figure 32-2. DiffMerge code in an annotated history viewer</H5><IMG id="" height=163 alt="" src="images/the_tools_we_use.1.png" width=500 border=0> </CENTER>
<P></P><BR>
<P class=docText><A name="code more"></A>Bookishness not only makes code more readable in merge tools, it makes the code itself easier to merge. For one thing, the scope of an edit is easier to control when logical blocks are set off by whitespace. And for another, having less nested code means having proportionally fewer instances of inverted and leapfrogged block delimiters to sort out.</P></DIV></DIV>
<p>&nbsp;</p><p>&nbsp;</p><!-- 仁·义 -->
</body></html>
