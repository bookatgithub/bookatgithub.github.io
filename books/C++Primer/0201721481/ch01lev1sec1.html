<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 1.1.&nbsp; Writing a Simple C++ Program</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch01.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch01lev1sec2.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch01lev1sec1"></a>
<h3 class="docSection1Title">1.1. Writing a Simple C++ Program</h3>
<p class="docText">Every C++ program contains one or more <I><a name="ch01term19"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_19">functions</a></I>, one of which must be named <span class="docEmphStrong"><tt>main</tt></span>. A function consists of a sequence of <span class="docEmphBoldItalic"><a name="ch01term41"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_41">statements</a></span> that perform the work of the function. The operating system executes a program by calling the function named <tt>main</tt>. That function executes its constituent statements and returns a value to the operating system.</p>
<p class="docText">Here is a simple version of <tt>main</tt> does nothing but return a value:</P>
<pre>
    int main()
    {
        return 0;
    }
</pre><br>
<p class="docText">The operating system uses the value returned by <tt>main</tt> to determine whether the program succeeded or failed. A return value of 0 indicates success.</p>
<p class="docText">The <tt>main</tt> function is special in various ways, the most important of which are that the function must exist in every C++ program and it is the (only) function that the operating system explicitly calls.</P>
<p class="docText"><a name="idd1e697"></a><a name="idd1e700"></a><a name="idd1e705"></a><a name="idd1e708"></a><a name="idd1e711"></a><a name="idd1e714"></a><a name="idd1e717"></a><a name="idd1e720"></a><a name="idd1e725"></a><a name="idd1e728"></a><a name="idd1e731"></a><a name="idd1e734"></a><a name="idd1e737"></a><a name="idd1e740"></a><a name="idd1e743"></a><a name="idd1e746"></a><a name="idd1e752"></a><a name="idd1e755"></a><a name="idd1e758"></a><a name="idd1e764"></a><a name="idd1e769"></a><a name="idd1e774"></a>We define <tt>main</tt> the same way we define other functions. A function definition specifies four elements: the <span class="docEmphBoldItalic"><a name="ch01term35"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_35">return type</a></span>, the <span class="docEmphBoldItalic"><a name="ch01term21"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_21">function name</a></span>, a (possibly empty) <span class="docEmphBoldItalic"><a name="ch01term33"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_33">parameter list</a></span> enclosed in parentheses, and the <span class="docEmphBoldItalic"><a name="ch01term20"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_20">function body</a></span>. The <tt>main</tt> function may have only a restricted set of parameters. As defined here, the parameter list is empty; <a class="docLink" href="ch07lev1sec2.html#ch07lev2sec11">Section 7.2.6</a> (p. <a class="docLink" href="ch07lev1sec2.html#ch07lev2sec11">243</a>) will cover the other parameters that can be defined for <tt>main</tt>.</P>
<p class="docText">The <tt>main</tt> function is required to have a return type of <tt>int</tt>, which is the type that represents integers. The <tt>int</tt> type is a <b><a name="ch01term4"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_04">built-in type</a></b>, which means that the type is defined by the language.</p>
<p class="docText">The final part of a function definition, the function body, is a <span class="docEmphBoldItalic"><a name="ch01term2"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_02">block</a></span> of statements starting with an open <b><a name="ch01term13"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_13">curly brace</a></b> and ending with a close curly:</p>
<pre>
    {
        return 0;
    }
</pre><br>
<p class="docText">The only statement in our program is a <tt>return</tt>, which is a statement that terminates a function.</P>
<a name="ch01note01"></a><div class="docNote"><p>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><TR><TD width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" SRC="images/0201721481/graphics/note.jpg;400478"></td><td valign="top"><p class="docText"> Note the semicolon at the end of the <tt>return</tt> statement. Semicolons mark the end of most statements in C++. They are easy to overlook, but when forgotten can lead to mysterious compiler error messages.</p></TD></TR></table><br>
</p></div><br>
<p class="docText">When the <tt>return</tt> includes a value such as <tt>0</tt>, that value is the return value of the function. The value returned must have the same type as the return type of the function or be a type that can be converted to that type. In the case of <tt>main</tt> the return type must be <tt>int</tt>, and the value <tt>0</tt> is an <tt>int</tt>.</p>
<p class="docText">On most systems, the return value from <tt>main</tt> is a status indicator. A return value of <tt>0</tt> indicates the successful completion of <tt>main</tt>. Any other return value has a meaning that is defined by the operating system. Usually a nonzero return indicates that an error occurred. Each operating system has its own way of telling the user what <tt>main</tt> returned.</P>
<a name="ch01lev2sec1"></a>
<h4 class="docSection2Title">1.1.1. Compiling and Executing Our Program</h4>
<p class="docText">Having written the program, we need to compile it. How you compile a program depends on your operating system and compiler. For details on how your particular compiler works, you'll need to check the reference manual or ask a knowledgeable colleague.</P>
<p class="docText">Many PC-based compilers are run from an integrated development environment (IDE) that bundles the compiler with associated build and analysis tools. These environments can be a great asset in developing complex programs but require a fair bit of time to learn how to use effectively. Most of these environments include a point-and-click interface that allows the programmer to write a program and use various menus to compile and execute the program. Learning how to use such environments is well beyond the scope of this book.</p>
<p class="docText">Most compilers, including those that come with an IDE, provide a command-line interface. Unless you are already familiar with using your compiler's IDE, <a name="idd1e915"></a><a name="idd1e920"></a><a name="idd1e925"></a><a name="idd1e930"></a><a name="idd1e935"></a><a name="idd1e939"></a><a name="idd1e944"></a><a name="idd1e949"></a><a name="idd1e952"></a><a name="idd1e957"></a><a name="idd1e962"></a><a name="idd1e966"></a><a name="idd1e969"></a><a name="idd1e972"></a><a name="idd1e975"></a><a name="idd1e978"></a><a name="idd1e983"></a>it can be easier to start by using the simpler, command-line interface. Using the command-line interface lets you avoid the overhead of learning the IDE before learning the language.</p>
<a name="ch01lev3sec1"></a>
<H5 class="docSection3Title">Program Source File Naming Convention</h5>
<p class="docText">Whether we are using a command-line interface or an IDE, most compilers expect that the program we want to compile will be stored in a file. Program files are referred to as <B><a name="ch01term36"></a><a class="docLink" href="ch01lev1sec8.html#gloss01_36">source files</a></b>. On most systems, a source file has a name that consists of two parts: a file namefor example, <tt>prog1</tt>and a file suffix. By convention, the suffix indicates that the file is a program. The suffix often also indicates what language the program is written in and selects which compiler to run. The system that we used to compile the examples in this book treats a file with a suffix of <tt>.cc</tt> as a C++ program and so we stored this program as</p>
<pre>
    prog1.cc
</pre><br>
<p class="docText">The suffix for C++ program files depends on which compiler you're running. Other conventions include</p>
<pre>
    prog1.cxx
    prog1.cpp
    prog1.cp
    prog1.C
</pre><br>
<a name="ch01sb01"></a><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>
<h2 class="docSidebarTitle">Invoking the GNU or Microsoft Compilers</h2>
<p class="docText"><span class="docEmphStrong">The command used to invoke the C++ compiler varies across compilers and operating systems. The most common compilers are the GNU compiler and the Microsoft Visual Studio compilers. By default the command to invoke the GNU compiler is <tt>g++</tt></span>:</p>
<pre>
    <span class="docEmphStrong">$ g++ prog1.cc -o prog1</span>
</pre><br>
<p class="docText"><span class="docEmphStrong">where <tt>$</tt> is the system prompt. This command generates an executable file named <tt>prog1</tt> or <tt>prog1.exe</tt>, depending on the operating system. On UNIX, executable files have no suffix; on Windows, the suffix is <tt>.exe</tt>. The <tt>-o prog1</tt> is an argument to the compiler and names the file in which to put the executable file. If the <tt>-o prog1</tt> is omitted, then the compiler generates an executable named <tt>a.out</tt> on UNIX systems and <tt>a.exe</tt> on Windows.</span></p>
<p class="docText"><span class="docEmphStrong">The Microsoft compilers are invoked using the command <tt>cl</tt>:</span></p>
<pre>
    <span class="docEmphStrong">C:\directory&gt; cl -GX prog1.cpp</span>
</pre><BR>
<p class="docText"><span class="docEmphStrong">where <tt>C:directory&gt;</tt> is the system prompt and <tt>directory</tt> is the name of the current directory. The command to invoke the compiler is <tt>cl</tt>, and <tt>-GX</tt> is an option that is required for programs compiled using the command-line interface. The Microsoft compiler automatically generates an executable with a name that corresponds to the source file name. The executable has the suffix <tt>.exe</tt> and the same name as the source file name. In this case, the executable is named <tt>prog1.exe</tt>.</span></P>
<p class="docText"><span class="docEmphStrong">For further information consult your compiler's user's guide.</span></p>
</TD></tr></table></p><BR>

<a name="ch01lev3sec2"></a>
<H5 class="docSection3Title">Running the Compiler from the Command Line</h5>
<p class="docText"><a name="idd1e1125"></a><a name="idd1e1128"></a>If we are using a command-line interface, we will typically compile a program in a console window (such as a shell window on a UNIX system or a Command Prompt window on Windows). Assuming that our <tt>main</tt> program is in a file named <tt>prog1.cc</tt>, we might compile it by using a command such as:</p>
<pre>
    <span class="docEmphStrong">$ CC prog1.cc</span>
</pre><br>
<p class="docText">where <tt>CC</tt> names the compiler and <tt>$</tt> represents the system prompt. The output of the compiler is an executable file that we invoke by naming it. On our system, the compiler generates the executable in a file named <tt>a.exe</tt>. UNIX compilers tend to put their executables in a file named <tt>a.out</tt>. To run an executable we supply that name at the command-line prompt:</p>
<pre>
    <span class="docEmphStrong">$ a.exe</span>
</pre><br>
<p class="docText">executes the program we compiled. On UNIX systems you sometimes must also specify which directory the file is in, even if it is in the current directory. In such cases, we would write</P>
<pre>
    <span class="docEmphStrong">$ ./a.exe</span>
</pre><br>
<p class="docText">The &quot;<tt>.</tt>&quot; followed by a slash indicates that the file is in the current directory.</P>
<p class="docText">The value returned from <tt>main</tt> is accessed in a system-dependent manner. On both UNIX and Windows systems, after executing the program, you must issue an appropriate <tt>echo</tt> command. On UNIX systems, we obtain the status by writing</P>
<pre>
    <span class="docEmphStrong">$ echo $?</span>
</pre><br>
<p class="docText">To see the status on a Windows system, we write</p>
<pre>
    <span class="docEmphStrong">C:\directory&gt; echo %ERRORLEVEL%</span>
</pre><br>
<a name="ch01sb02"></a><P><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><td>
<h2 class="docSidebarTitle">Exercises Section 1.1.1</h2>
<blockquote>
<p><table border="0" cellspacing="16" cellpadding="0"><TR valign="top"><td align="right" class="docText" width="50"><a name="ch01qa1q1"></a><b>Exercise 1.1:</b></TD><td><p class="docText">Review the documentation for your compiler and determine what file naming convention it uses. Compile and run the <tt>main</tt> program from page <a class="docLink" href="#ch01lev1sec1">2</a>.</p>
</TD></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch01qa1q2"></a><b>Exercise 1.2:</b></td><td><p class="docText">Change the program to return <tt>-1</tt>. A return value of <tt>-1</tt> is often treated as an indicator that the program failed. However, systems vary as to how (or even whether) they report a failure from <tt>main</tt>. Recompile and rerun your program to see how your system treats a failure indicator from <tt>main</tt>.</p>
</td></tr></table></p>
</blockquote>
</td></tr></table></p><br>



<a href="21001535.html"><img src="images/pixel.gif" alt="" width="1" height="1" border="0"></a><ul></UL></TD></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch01.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch01lev1sec2.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>