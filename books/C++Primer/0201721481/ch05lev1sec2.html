<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 5.2.&nbsp; Relational and Logical Operators</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec1.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec3.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch05lev1sec2"></a>
<h3 class="docSection1Title">5.2. Relational and Logical Operators</h3>
<a name="ch05table02"></a><P><table cellspacing="0" class="allBorders" border="1" RULES="groups" cellpadding="5"><caption><H5 class="docTableTitle">Table 5.2. Relational and Logical Operators</h5></caption><colgroup><col width="175"><col width="175"><col width="150"></colgroup><thead><TR><th class="thead" scope="col" align="center" valign="top" colspan="3"><p class="docText"><a name="idd1e31636"></a><a name="idd1e31641"></a><a name="idd1e31646"></a><a name="idd1e31651"></a><a name="idd1e31656"></a><a name="idd1e31662"></a><a name="idd1e31665"></a><a name="idd1e31671"></a><a name="idd1e31677"></a><a name="idd1e31683"></a><span class="docEmphUl">Each of these operators yields <tt>bool</tt></span></p></th></tr><TR><th class="bottomBorder thead" scope="col" align="center" valign="top"><p class="docText"><span class="docEmphStrong">Operator</span></P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphStrong">Function</span></p></th><th class="bottomBorder thead" scope="col" align="center" valign="top"><p class="docText"><span class="docEmphStrong">Use</span></p></th></tr></thead><tr><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>!</tt></P></td><TD class="bottomBorder" align="left" valign="top"><p class="docText">logical NOT</P></td><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>!expr</tt></p></TD></TR><tr><td class="docTableCell" align="center" valign="top"><p class="docText"><tt>&lt;</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">less than</p></td><TD class="docTableCell" align="center" valign="top"><p class="docText"><tt>expr &lt; expr</tt></p></td></TR><tr><TD class="docTableCell" align="center" valign="top"><p class="docText"><tt>&lt;=</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">less than or equal</p></td><td class="docTableCell" align="center" valign="top"><p class="docText"><tt>expr &lt;= expr</tt></p></td></tr><tr><td class="docTableCell" align="center" valign="top"><p class="docText"><tt>&gt;</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">greater than</P></td><TD class="docTableCell" align="center" valign="top"><p class="docText"><tt>expr &gt; expr</tt></p></td></TR><TR><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>&gt;=</tt></p></td><td class="bottomBorder" align="left" valign="top"><p class="docText">greater than or equal</p></TD><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>expr &gt;= expr</tt></P></TD></tr><tr><td class="docTableCell" align="center" valign="top"><p class="docText"><tt>==</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">equality</p></td><td class="docTableCell" align="center" valign="top"><p class="docText"><tt>expr == expr</tt></P></td></tr><TR><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>!=</tt></p></TD><td class="bottomBorder" align="left" valign="top"><p class="docText">inequality</P></td><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>expr != expr</tt></p></td></tr><tr><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>&amp;&amp;</tt></p></td><td class="bottomBorder" align="left" valign="top"><p class="docText">logical AND</p></td><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>expr &amp;&amp; expr</tt></P></TD></tr><TR><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>||</tt></p></TD><TD class="bottomBorder" align="left" valign="top"><p class="docText">logical OR</p></td><td class="bottomBorder" align="center" valign="top"><p class="docText"><tt>expr || expr</tt></p></td></TR></table></p><BR>
<p class="docText">The relational and logical operators take operands of arithmetic or pointer type and return values of type <tt>bool</tt>.</P>
<a name="ch05lev2sec1"></a>
<h4 class="docSection2Title">Logical AND and OR Operators</h4>
<p class="docText">The logical operators treat their operands as conditions (<a class="docLink" href="ch01lev1sec4.html#ch01lev2sec5">Section 1.4.1</a>, p. <a class="docLink" href="ch01lev1sec4.html#ch01lev2sec5">12</a>). The operand is evaluated; if the result is zero the condition is <tt>false</tt>, otherwise it is <tt>true</tt>. The overall result of the AND operator is <tt>TRue</tt> if and only if both its operands evaluate to <tt>TRue</tt>. The logical OR (<tt>||</tt>) operator evaluates to <tt>true</tt> if either of its operands evaluates to <tt>true</tt>. Given the forms</p>
<pre>
     <span class="docEmphasis">expr1</span> &amp;&amp; <span class="docEmphasis">expr2</span> // <span class="docEmphItalicAlt">logical AND</span>
     <span class="docEmphasis">expr1</span> || <span class="docEmphasis">expr2</span> // <span class="docEmphItalicAlt">logical OR</span>
</pre><br>
<p class="docText"><span class="docEmphasis">expr2</span> is evaluated if and only if <span class="docEmphasis">expr1</span> does not by itself determine the result. In other words, we're guaranteed that <span class="docEmphasis">expr2</span> will be evaluated if and only if</P>
<ul><li><p class="docList">In a logical AND expression, <span class="docEmphasis">expr1</span> evaluates to <tt>TRue</tt>. If <span class="docEmphasis">expr1</span> is <tt>false</tt>, then the expression will be <tt>false</tt> regardless of the value of <span class="docEmphasis">expr2</span>. When <span class="docEmphasis">expr1</span> is <tt>true</tt>, it is possible for the expression to be <tt>true</tt> if <span class="docEmphasis">expr2</span> is also <tt>TRue</tt>.</p></LI><li><p class="docList">In a logical OR expression, <span class="docEmphasis">expr1</span> evaluates to <tt>false</tt>; if <span class="docEmphasis">expr1</span> is <tt>false</tt>, then the expression depends on whether <span class="docEmphasis">expr2</span> is <tt>true</tt>.</p></li></ul>
<a name="ch05note02"></a><div class="docNote"><p>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" SRC="images/0201721481/graphics/note.jpg;400478"></td><td valign="top"><p class="docText"> The logical AND and OR operators always evaluate their left operand before the right. The right operand is evaluated only if the left operand does not determine the result. This evaluation strategy is often referred to as &quot;short-circuit evaluation.&quot;</p></td></tr></table><BR>
</P></div><br>
<p class="docText"><a name="idd1e32022"></a><a name="idd1e32027"></a><a name="idd1e32032"></a><a name="idd1e32037"></a><a name="idd1e32042"></a><a name="idd1e32047"></a><a name="idd1e32053"></a><a name="idd1e32059"></a><a name="idd1e32065"></a><a name="idd1e32071"></a><a name="idd1e32077"></a><a name="idd1e32083"></a><a name="idd1e32089"></a><a name="idd1e32095"></a><a name="idd1e32101"></a><a name="idd1e32107"></a>A valuable use of the logical AND operator is to have <span class="docEmphasis">expr1</span> evaluate to false in the presence of a boundary condition that would make the evaluation of <span class="docEmphasis">expr2</span> dangerous. As an example, we might have a <tt>string</tt> that contains the characters in a sentence and we might want to make the first word in the sentence all uppercase. We could do so as follows:</P>
<pre>
     string s("Expressions in C++ are composed...");
     string::iterator it = s.begin();
     // <span class="docEmphItalicAlt">convert first word in s to uppercase</span>
     while (it != s.end() &amp;&amp; !isspace(*it)) {
         *it = toupper(*it); // <span class="docEmphasis">toupper</span> <span class="docEmphItalicAlt">covered in section 3.2.4 (p. 88)</span>
         ++it;
     }
</pre><br>
<p class="docText">In this case, we combine our two tests in the condition in the <tt>while</tt>. First we test whether <tt>it</tt> has reached the end of the <tt>string</tt>. If not, <tt>it</tt> refers to a character in <tt>s</tt>. Only if that test succeeds is the right-hand operand evaluated. We're guaranteed that <tt>it</tt> refers to an actual character before we test to see whether the character is a space or not. The loop ends either when a space is encountered or, if there are no spaces in <tt>s</tt>, when we reach the end of <tt>s</tt>.</p>

<a name="ch05lev2sec2"></a>
<H4 class="docSection2Title">Logical NOT Operator</H4>
<p class="docText">The logical NOT operator (<tt>!</tt>) treats its operand as a condition. It yields a result that has the opposite truth value from its operand. If the operand evaluates as nonzero, then <tt>!</tt> returns <tt>false</tt>. For example, we might determine that a <tt>vector</tt> has elements by applying the logical NOT operator to the value returned by <tt>empty</tt>:</p>
<pre>
     // <span class="docEmphItalicAlt">assign value of first element in</span> <span class="docEmphasis">vec</span> <span class="docEmphItalicAlt">to</span> <span class="docEmphasis">x</span> <span class="docEmphItalicAlt">if there is one</span>
     int x = 0;
     if (!vec.empty())
         x = *vec.begin();
</pre><br>
<p class="docText">The subexpression</p>
<pre>
     !vec.empty()
</pre><br>
<p class="docText">evaluates to <tt>TRue</tt> if the call to <tt>empty</tt> returns <tt>false</tt>.</p>

<a name="ch05lev2sec3"></a>
<H4 class="docSection2Title">The Relational Operators Do Not Chain Together</H4>
<p class="docText">The relational operators (<tt>&lt;, &lt;=, &gt;, &lt;=</tt>) are left associative. The fact that they are left associative is rarely of any use because the relational operators return <tt>bool</tt> results. If we do chain these operators together, the result is likely to be surprising:</p>
<pre>
     // <span class="docEmphItalicAlt">oops! this condition does not determine if the 3 values are unequal</span>
     if (i &lt; j &lt; k) { /* ... */ }
</pre><br>
<p class="docText">As written, this expression will evaluate as <tt>true</tt> if <tt>k</tt> is greater than one! The reason is that the left operand of the second less-than operator is the <tt>TRue</tt>/ <tt>false</tt> result of the firstthat is, the condition compares <tt>k</tt> to the integer values of 0 or 1. To accomplish the test we intended, we must rewrite the expression as follows:</P>
<pre>
     if (i &lt; j &amp;&amp; j &lt; k) { /* ... */ }
</pre><br>

<a name="ch05lev2sec4"></a>
<h4 class="docSection2Title">Equality Tests and the <tt>bool</tt> Literals</h4>
<p class="docText"><a name="idd1e32287"></a><a name="idd1e32292"></a><a name="idd1e32297"></a><a name="idd1e32300"></a><a name="idd1e32306"></a><a name="idd1e32312"></a><a name="idd1e32318"></a><a name="idd1e32324"></a>As we'll see in <a class="docLink" href="ch05lev1sec12.html#ch05lev2sec26">Section 5.12.2</a> (p. <a class="docLink" href="ch05lev1sec12.html#ch05lev2sec26">180</a>) a <tt>bool</tt> can be converted to any arithmetic typethe <tt>bool</tt> value <tt>false</tt> converts to zero and <tt>true</tt> converts to one.</P>
<a name="ch05note03"></a><div class="docNote"><p>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><TD width="60" valign="top"><img border="0" alt="" align="LEFT" width="57" height="96" SRC="images/0201721481/graphics/beware.jpg;400478"></td><td valign="top"><p class="docText"> Because <tt>bool</tt> converts to one, is almost never right to write an equality test that tests against the <tt>bool</tt> literal <tt>TRue</tt>:</p></TD></tr></table><br>
<pre>
     if (val == true) { /* ... */ }
</pre><br>
</p></div><br>
<p class="docText">Either <tt>val</tt> is itself a <tt>bool</tt> or it is a type to which a <tt>bool</tt> can be converted. If <tt>val</tt> is a <tt>bool</tt>, then this test is equivalent to writing</p>
<pre>
     if (val) { /* ... */ }
</pre><br>
<p class="docText">which is shorter and more direct (although admittedly when first learning the language this kind of abbreviation can be perplexing).</p>
<p class="docText">More importantly, if <tt>val</tt> is not a <tt>bool</tt>, then comparing <tt>val</tt> with <tt>true</tt> is equivalent to writing</p>
<pre>
     if (val == 1) { /* ... */ }
</pre><br>
<p class="docText">which is very different from</p>
<pre>
     // <span class="docEmphItalicAlt">condition succeeds if</span> <span class="docEmphasis">val</span> <span class="docEmphItalicAlt">is any nonzero value</span>
     if (val) { /* ... */ }
</pre><br>
<p class="docText">in which any nonzero value in <tt>val</tt> is true. If we write the comparison explicitly, then we are saying that the condition will succeed only for the specific value 1.</P>
<a name="ch05sb03"></a><P><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>
<h2 class="docSidebarTitle">Exercises Section 5.2</h2>
<blockquote>
<P><table border="0" cellspacing="16" cellpadding="0"><TR valign="top"><td align="right" class="docText" width="50"><a name="ch05qa2q1"></a><b>Exercise 5.5:</b></td><td><p class="docText">Explain when operands are evaluated in the logical AND operator, logical OR operator, and equality operator.</p>
</TD></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch05qa2q2"></a><b>Exercise 5.6:</b></td><td><p class="docText">Explain the behavior of the following <tt>while</tt> condition:</P>
<pre>
     char *cp = "Hello World";
     while (cp &amp;&amp; *cp)
</pre><BR>
</td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch05qa2q3"></a><B>Exercise 5.7:</b></td><td><p class="docText">Write the condition for a <tt>while</tt> loop that would read <tt>int</tt>s from the standard input and stop when the value read is equal to <tt>42</tt>.</P>
</td></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch05qa2q4"></a><B>Exercise 5.8:</b></td><td><p class="docText">Write an expression that tests four values, <tt>a, b, c</tt>, and <tt>d</tt>, and ensures that <tt>a</tt> is greater than <tt>b</tt>, which is greater than <tt>c</tt>, which is greater than <tt>d</tt>.</p>
</td></tr></table></p>
</blockquote>
</td></tr></table></p><br>


<a href="21001535.html"><img src="images/pixel.gif" alt="" width="1" height="1" border="0"></a><ul></ul></td></TR></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec1.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec3.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>