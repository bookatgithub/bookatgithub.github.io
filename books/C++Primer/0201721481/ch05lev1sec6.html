<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 5.6.&nbsp; The Arrow Operator</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec5.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec7.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch05lev1sec6"></a>
<h3 class="docSection1Title">5.6. The Arrow Operator</h3>
<p class="docText">The arrow operator (<tt>-&gt;</tt>) provides a synonym for expressions involving the dot and dereference operators. The dot operator (<a class="docLink" href="ch01lev1sec5.html#ch01lev2sec10">Section 1.5.2</a>, p. <a class="docLink" href="ch01lev1sec5.html#ch01lev2sec10">25</a>) fetches an element from an object of class type:</P>
<pre>
     item1.same_isbn(item2); // <span class="docEmphItalicAlt">run the</span> <span class="docEmphasis">same_isbn</span> <span class="docEmphItalicAlt">member of</span> <span class="docEmphasis">item1</span>
</pre><BR>
<p class="docText">If we had a pointer (or iterator) to a <tt>Sales_item</tt>, we would have to dereference the pointer (or iterator) before applying the dot operator:</p>
<pre>
     Sales_item *sp = &amp;item1;
     (*sp).same_isbn(item2); // <span class="docEmphItalicAlt">run</span> <span class="docEmphasis">same_isbn</span> <span class="docEmphItalicAlt">on object to which</span> <span class="docEmphasis">sp</span> <span class="docEmphItalicAlt">points</span>
</pre><BR>
<p class="docText">Here we dereference <tt>sp</tt> to get the underlying <tt>Sales_item</tt>. Then we use the dot operator to run <tt>same_isbn</tt> on that object. We must parenthesize the dereference because dereference has a lower precedence than dot. If we omit the parentheses, this code means something quite different:</p>
<pre>
     // <span class="docEmphItalicAlt">run the</span> <span class="docEmphasis">same_isbn</span> <span class="docEmphItalicAlt">member of</span> <span class="docEmphasis">sp</span> <span class="docEmphItalicAlt">then dereference the result!</span>
     *sp.same_isbn(item2); // <span class="docEmphItalicAlt">error:</span> <span class="docEmphasis">sp</span> <span class="docEmphItalicAlt">has no member named</span> <span class="docEmphasis">same_isbn</span>
</pre><br>
<p class="docText"><a name="idd1e34832"></a><a name="idd1e34837"></a><a name="idd1e34843"></a>This expression attempts to fetch the <tt>same_isbn</tt> member of the object <tt>sp</tt>. It is equivalent to</P>
<pre>
     *(sp.same_isbn(item2));  // <span class="docEmphItalicAlt">equivalent to</span> <span class="docEmphasis">*sp.same_isbn(item2);</span>
</pre><BR>
<p class="docText">However, <tt>sp</tt> is a pointer, which has no members; this code will not compile.</p>
<p class="docText">Because it is easy to forget the parentheses and because this kind of code is a common usage, the language defines the arrow operator as a synonym for a dereference followed by the dot operator. Given a pointer (or iterator) to an object of class type, the following expressions are equivalent:</p>
<pre>
     (*p).foo; // <span class="docEmphItalicAlt">dereference</span> <span class="docEmphasis">p</span> <span class="docEmphItalicAlt">to get an object and fetch its member named</span> <span class="docEmphasis">foo</span>
     p-&gt;foo;   // <span class="docEmphItalicAlt">equivalent way to fetch the</span> <span class="docEmphasis">foo</span> <span class="docEmphItalicAlt">from the object to which</span> <span class="docEmphasis">p</span> <span class="docEmphItalicAlt">points</span>
</pre><br>
<p class="docText">More concretely, we can rewrite the call to <tt>same_isbn</tt> as</p>
<pre>
     sp-&gt;same_isbn(item2); // <span class="docEmphItalicAlt">equivalent to</span> <span class="docEmphasis">(*sp).same_isbn(item2)</span>
</pre><br>
<a name="ch05sb10"></a><P><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>
<H2 class="docSidebarTitle">Exercises Section 5.6</h2>
<blockquote>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch05qa7q1"></a><B>Exercise 5.18:</b></td><td><p class="docText">Write a program that defines a <tt>vector</tt> of pointers to <tt>string</tt>s. Read the <tt>vector</tt>, printing each <tt>string</tt> and its corresponding size.</p>
</td></TR><tr valign="top"><td align="right" class="docText" width="50"><a name="ch05qa7q2"></a><B>Exercise 5.19:</b></td><td><p class="docText">Assuming that <tt>iter</tt> is a <tt>vector&lt;string&gt;::iterator</tt>, indicate which, if any, of the following expressions is legal. Explain the behavior of the legal expressions.</P>
<pre>
     (a) *iter++;         (b) (*iter)++;
     (c) *iter.empty()    (d) iter-&gt;empty();
     (e) ++*iter;         (f) iter++-&gt;empty();
</pre><br>
</TD></tr></table></p>
</blockquote>
</td></tr></table></p><br>

<a href="21001535.html"><img src="images/pixel.gif" alt="" width="1" height="1" border="0"></a><ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec5.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec7.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>