<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 5.8.&nbsp; The sizeof Operator</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec7.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec9.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch05lev1sec8"></a>
<h3 class="docSection1Title" id="432172-829">5.8. The <tt>sizeof</tt> Operator</h3>
<p class="docText"><a name="idd1e35257"></a><a name="idd1e35263"></a><a name="idd1e35272"></a>The <tt>sizeof</tt> operator returns a value of type <tt>size_t</tt> (<a class="docLink" href="ch03lev1sec5.html#ch03lev2sec16">Section 3.5.2</a>, p. <a class="docLink" href="ch03lev1sec5.html#ch03lev2sec16">104</a>) that is the size, in bytes (<a class="docLink" href="ch02lev1sec1.html#ch02lev1sec1">Section 2.1</a>, p. <a class="docLink" href="ch02lev1sec1.html#ch02lev1sec1">35</a>), of an object or type name. The result of <tt>sizeof</tt> expression is a compile-time constant. The <tt>sizeof</tt> operator takes one of the following forms:</P>
<pre>
     sizeof <span class="docEmphasis">(type name)</span>;
     sizeof <span class="docEmphasis">(expr)</span>;
     sizeof <span class="docEmphasis">expr</span>;
</pre><BR>
<p class="docText">Applying <tt>sizeof</tt> to an <span class="docEmphasis">expr</span> returns the size of the result type of that expression:</p>
<pre>
     Sales_item item, *p;
     // <span class="docEmphItalicAlt">three ways to obtain size required to hold an object of type</span> <span class="docEmphasis">Sales_item</span>
     sizeof(Sales_item); // <span class="docEmphItalicAlt">size required to hold an object of type</span> <span class="docEmphasis">Sales_item</span>
     sizeof item; // <span class="docEmphItalicAlt">size of</span> <span class="docEmphasis">item</span><span class="docEmphItalicAlt">'s type, e.g.,</span> <span class="docEmphasis">sizeof(Sales_item)</span>
     sizeof *p;   // <span class="docEmphItalicAlt">size of type to which</span> <span class="docEmphasis">p</span> <span class="docEmphItalicAlt">points, e.g.,</span> <span class="docEmphasis">sizeof(Sales_item)</span>
</pre><BR>
<p class="docText">Evaluating <tt>sizeof</tt> <span class="docEmphasis">expr</span> does not evaluate the expression. In particular, in <tt>sizeof *p</tt>, the pointer <tt>p</tt> may hold an invalid address, because <tt>p</tt> is not dereferenced.</p>
<p class="docText">The result of applying <tt>sizeof</tt> depends in part on the type involved:</p>
<UL><LI><p class="docList"><tt>sizeof char</tt> or an expression of type <tt>char</tt> is guaranteed to be 1</p></li><li><p class="docList"><tt>sizeof</tt> a reference type returns the size of the memory necessary to contain an object of the referenced type</p></li><LI><p class="docList"><tt>sizeof</tt> a pointer returns the size needed hold a pointer; to obtain the size of the object to which the pointer points, the pointer must be dereferenced</p></LI><LI><p class="docList"><tt>sizeof</tt> an array is equivalent to taking the <tt>sizeof</tt> the element type times the number of elements in the array</p></li></ul>
<p class="docText">Because <tt>sizeof</tt> returns the size of the entire array, we can determine the number of elements by dividing the <tt>sizeof</tt> the array by the <tt>sizeof</tt> an element:</P>
<pre>
     // sizeof(ia)/sizeof(*ia) <span class="docEmphItalicAlt">returns the number of elements in</span> <span class="docEmphasis">ia</span>
     int sz = sizeof(ia)/sizeof(*ia);
</pre><BR>
<a name="ch05sb12"></a><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>
<h2 class="docSidebarTitle">Exercises Section 5.8</H2>
<blockquote>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch05qa9q1"></a><b>Exercise 5.22:</b></td><TD><p class="docText">Write a program to print the size of each of the built-in types.</p>
</TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch05qa9q2"></a><b>Exercise 5.23:</b></td><td><p class="docText">Predict the output of the following program and explain your reasoning. Now run the program. Is the output what you expected? If not, figure out why.</p>
<pre>
     int x[10];   int *p = x;
     cout &lt;&lt; sizeof(x)/sizeof(*x) &lt;&lt; endl;
     cout &lt;&lt; sizeof(p)/sizeof(*p) &lt;&lt; endl;
</pre><br>
</td></tr></table></p>
</blockquote>
</td></tr></table></P><BR>

<ul></UL></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec7.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch05lev1sec9.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>