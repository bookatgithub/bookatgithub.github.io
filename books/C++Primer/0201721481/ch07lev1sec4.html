<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 7.4.&nbsp; Function Declarations</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec3.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch07lev1sec5.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch07lev1sec4"></a>
<h3 class="docSection1Title" id="432172-871">7.4. Function Declarations</h3>
<p class="docText">Just as variables must be declared before they are used, a function must be declared before it is called. As with a variable definition (<a class="docLink" href="ch02lev1sec3.html#ch02lev2sec14">Section 2.3.5</a>, p. <a class="docLink" href="ch02lev1sec3.html#ch02lev2sec14">52</a>), we can declare a function separately from its definition; a function may be defined only once but may be declared multiple times.</P>
<p class="docText">A function declaration consists of a return type, the function name, and parameter list. The parameter list must contain the types of the parameters but need not name them. These three elements are referred to as the <B><a name="ch07term14"></a><a class="docLink" href="ch07lev1sec11.html#gloss07_14">function prototype</a></b>. A function prototype describes the interface of the function.</p>
<a name="ch07note20"></a><div class="docNote"><P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><img border="0" alt="" id="195131139046" align="LEFT" width="50" height="54" SRC="images/0201721481/graphics/note.jpg;400478"></TD><TD valign="top"><p class="docText"> Function prototypes provide the interface between the programmer who defines the function and programmers who use it. When we use a function, we program to the function's prototype.</p></td></tr></table><br>
</p></div><BR>
<p class="docText"><a name="idd1e52499"></a><a name="idd1e52504"></a>Parameter names in a function declaration are ignored. If a name is given in a declaration, it should serve as a documentation aid:</p>
<pre>
     void print(int *array, int size);
</pre><BR>
<a name="ch07lev2sec16"></a>
<H4 class="docSection2Title">Function Declarations Go in Header Files</h4>
<p class="docText">Recall that variables are declared in header files (<a class="docLink" href="ch02lev1sec9.html#ch02lev1sec9">Section 2.9</a>, p. <a class="docLink" href="ch02lev1sec9.html#ch02lev1sec9">67</a>) and defined in source files. For the same reasons, functions should be declared in header files and defined in source files.</p>
<p class="docText">It may be temptingand would be legalto put a function declaration directly in each source file that uses the function. The problem with this approach is that it is tedious and error-prone. By putting function declarations into header files, we can ensure that all the declarations for a given function agree. If the interface to the function changes, only one declaration must be changed.</p>
<a name="ch07note21"></a><div class="docNote"><P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><TR><td width="60" valign="top"><img border="0" alt="" id="195131139046" align="LEFT" width="116" height="74" SRC="images/0201721481/graphics/bestpractices.jpg;400478"></td><td valign="top"><p class="docText"> The source file that <span class="docEmphasis">defines</span> the function should include the header that <span class="docEmphasis">declares</span> the function.</p></TD></tr></table><br>
</P></div><br>
<p class="docText">Including the header that contains a function's declaration in the same file that defines the function lets the compiler check that the definition and declaration are the same. In particular, if the definition and declaration agree as to parameter list but differ as to return type, the compiler will issue a warning or error message indicating the discrepancy.</p>
<a name="ch07sb08"></a><P><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><TD>
<h2 class="docSidebarTitle">Exercises Section 7.4</h2>
<blockquote>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch07qa8q1"></a><b>Exercise 7.22:</b></td><td><p class="docText">Write the prototypes for each of the following functions:</p>
<div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">A function named <tt>compare</tt> with two parameters that are references to a class named <tt>matrix</tt> and with a return value of type <tt>bool</tt>.</p></div></li><li><div style="font-weight:normal"><p class="docList">A function named <tt>change_val</tt> that returns a <tt>vector&lt;int&gt;</tt> iterator and takes two parameters: one is an <tt>int</tt> and the other is an iterator for a <tt>vector&lt;int&gt;</tt>.</P></div></LI></ol></div>
<p class="docText">Hint: When you write these prototypes, use the name of the function as an indicator as to what the function does. How does this hint affect the types you use?</p>
</TD></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch07qa8q2"></a><B>Exercise 7.23:</b></td><td><p class="docText">Given the following declarations, determine which calls are legal and which are illegal. For those that are illegal, explain why.</p>
<pre>
     double calc(double);
     int count(const string &amp;, char);
     int sum(vector&lt;int&gt;::iterator, vector&lt;int&gt;::iterator, int);
     vector&lt;int&gt; vec(10);

     (a) calc(23.4, 55.1);
     (b) count("abcda", 'a');
     (c) calc(66);
     (d) sum(vec.begin(), vec.end(), 3.8);
</pre><br>
</td></TR></table></p>
</blockquote>
</TD></TR></table></p><br>

<a name="ch07lev2sec17"></a>
<h4 class="docSection2Title">7.4.1. Default Arguments</H4>
<p class="docText"><a name="idd1e52633"></a><a name="idd1e52638"></a><a name="idd1e52641"></a>A default argument is a value that, although not universally applicable, is the argument value that is expected to be used most of the time. When we call the function, we may omit any argument that has a default. The compiler will supply the default value for any argument we omit.</P>
<p class="docText">A default argument is specified by providing an explicit initializer for the parameter in the parameter list. We may define defaults for one or more parameters. However, if a parameter has a default argument, all the parameters that follow it must also have default arguments.</p>
<p class="docText">For example, a function to create and initialize a <tt>string</tt> intended to simulate a window can provide default arguments for the height, width, and background character of the screen:</p>
<pre>
     string screenInit(string::size_type height = 24,
                       string::size_type width = 80,
                       char background = ' ' );
</pre><br>
<p class="docText">A function that provides a default argument for a parameter can be invoked with or without an argument for this parameter. If an argument is provided, it overrides the default argument value; otherwise, the default argument is used. Each of the following calls of <tt>screenInit</tt> is correct:</p>
<pre>
     string screen;
     screen = screenInit();       // <span class="docEmphItalicAlt">equivalent to</span> <span class="docEmphasis">screenInit (24,80,' ')</span>
     screen = screenInit(66);     // <span class="docEmphItalicAlt">equivalent to</span> <span class="docEmphasis">screenInit (66,80,' ')</span>
     screen = screenInit(66, 256);       // <span class="docEmphasis">screenInit(66,256,' ')</span>
     screen = screenInit(66, 256, '#');
</pre><BR>
<p class="docText">Arguments to the call are resolved by position, and default arguments are used to substitute for the <span class="docEmphasis">trailing</span> arguments of a call. If we want to specify an argument for <tt>background</tt>, we must also supply arguments for <tt>height</tt> and <tt>width</tt>:</p>
<pre>
     screen = screenInit(, , '?'); // <span class="docEmphItalicAlt">error, can omit only trailing arguments</span>
     screen = screenInit( '?');    // <span class="docEmphItalicAlt">calls</span> <span class="docEmphasis">screenInit('?',80,' ')</span>
</pre><br>
<p class="docText">Note that the second call, which passes a single character value, is legal. Although legal, it is unlikely to be what the programmer intended. The call is legal because <tt>'?'</tt> is a <tt>char</tt>, and a <tt>char</tt> can be promoted to the type of the leftmost parameter. That parameter is <tt>string::size_type</tt>, which is an <tt>unsigned</tt> integral type. In this call, the <tt>char</tt> argument is implicitly promoted to <tt>string::size_type</tt>, and passed as the argument to <tt>height</tt>.</P>
<a name="ch07note22"></a><div class="docNote"><p>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><TD width="60" valign="top"><img border="0" alt="" id="195131139046" align="LEFT" width="57" height="96" SRC="images/0201721481/graphics/beware.jpg;400478"></td><TD valign="top"><p class="docText"> Because <tt>char</tt> is an integral type (<a class="docLink" href="ch02lev1sec1.html#ch02lev2sec1">Section 2.1.1</a>, p. <a class="docLink" href="ch02lev1sec1.html#ch02lev2sec1">34</a>), it is legal to pass a <tt>char</tt> to an <tt>int</tt> parameter and vice versa. This fact can lead to various kinds of confusion, one of which arises in functions that take both <tt>char</tt> and <tt>int</tt> parametersit can be easy for callers to pass the arguments in the wrong order. Using default arguments can compound this problem.</p></td></tr></table><br>
</p></div><br>
<p class="docText">Part of the work of designing a function with default arguments is ordering the parameters so that those least likely to use a default value appear first and those most likely to use a default appear last.</p>
<a name="ch07lev3sec23"></a>
<h5 class="docSection3Title">Default Argument Initializers</h5>
<p class="docText"><a name="idd1e52787"></a><a name="idd1e52792"></a><a name="idd1e52797"></a><a name="idd1e52800"></a><a name="idd1e52805"></a><a name="idd1e52808"></a><a name="idd1e52813"></a><a name="idd1e52816"></a><a name="idd1e52821"></a>A default argument can be any expression of an appropriate type:</p>
<pre>
     string::size_type screenHeight();
     string::size_type screenWidth(string::size_type);
     char screenDefault(char = ' ');
     string screenInit(
         string::size_type height = screenHeight(),
         string::size_type width = screenWidth(screenHeight()),
         char background = screenDefault());
</pre><br>
<p class="docText">When the default argument is an expression, and the default is used as the argument, then the expression is evaluated at the time the function is called. For example, <tt>screenDefault</tt> is called to obtain a value for <tt>background</tt> every time <tt>screenInit</tt> is called without a third argument.</p>

<a name="ch07lev3sec24"></a>
<h5 class="docSection3Title">Constraints on Specifying Default Arguments</H5>
<p class="docText">We can specify default argument(s) in either the function definition or declaration. However, a parameter can have its default argument specified only once in a file. The following is an error:</P>
<pre>
     // <span class="docEmphItalicAlt">ff.h</span>
     int ff(int = 0);

     // <span class="docEmphItalicAlt">ff.cc</span>
     #include "ff.h"
     int ff(int i = 0) { /* ... */ } // <span class="docEmphItalicAlt">error</span>
</pre><br>
<a name="ch07note23"></a><div class="docNote"><P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><img border="0" alt="" id="195131139046" align="LEFT" width="50" height="54" SRC="images/0201721481/graphics/note.jpg;400478"></TD><TD valign="top"><p class="docText"> Default arguments ordinarily should be specified with the declaration for the function and placed in an appropriate header.</p></td></tr></table><br>
</p></div><BR>
<p class="docText">If a default argument is provided in the parameter list of a function definition, the default argument is available only for function calls in the source file that contains the function definition.</p>



<UL></UL></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec3.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch07lev1sec5.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>