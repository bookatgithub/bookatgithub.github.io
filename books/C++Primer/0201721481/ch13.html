<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Chapter 13.&nbsp; Copy Control</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch12lev1sec8.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch13lev1sec1.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch13"></a>
<h2 class="docChapterTitle">Chapter 13. Copy Control</h2>
<p class="docText"><span class="docEmphStrong">C<span class="docEmphSmaller">ONTENTS</span></span></P>
<P><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup><col width="375"><col width="100"></colgroup><thead></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec1.html#ch13lev1sec1">Section 13.1</a></span> <span class="docEmphStrong">The Copy Constructor</span></p></td><TD class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec1.html#ch13lev1sec1">476</a></span></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec2.html#ch13lev1sec2">Section 13.2</a></span> <span class="docEmphStrong">The Assignment Operator</span></p></TD><td class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec2.html#ch13lev1sec2">482</a></span></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec3.html#ch13lev1sec3">Section 13.3</a></span> <span class="docEmphStrong">The Destructor</span></P></TD><td class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec3.html#ch13lev1sec3">484</a></span></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec4.html#ch13lev1sec4">Section 13.4</a></span> <span class="docEmphStrong">A Message-Handling Example</span></p></TD><td class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec4.html#ch13lev1sec4">486</a></span></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec5.html#ch13lev1sec5">Section 13.5</a></span> <span class="docEmphStrong">Managing Pointer Members</span></p></td><td class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec5.html#ch13lev1sec5">492</a></span></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec6.html#ch13lev1sec6">Chapter Summary</a></span></p></td><td class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec6.html#ch13lev1sec6">502</a></span></p></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec7.html#ch13lev1sec7">Defined Terms</a></span></p></td><TD class="docTableCell" align="right" valign="top"><p class="docText"><span class="docEmphStrong"><a class="docLink" href="ch13lev1sec7.html#ch13lev1sec7">502</a></span></P></td></tr></table></p><br>
<p class="docText">Each type, whether a built-in or class type, defines the meaning of a (possibly empty) set of operations on objects of that type. We can add two <tt>int</tt> values, run <tt>size</tt> on a <tt>vector</tt>, and so on. These operations define what can be done with objects of the given type.</p>
<p class="docText">Each type also defines what happens when objects of the type are created. Initialization of objects of class type is defined by constructors. Types also control what happens when objects of the type are copied, assigned, or destroyed. Classes control these actions through special member functions: the copy constructor, the assignment operator, and the destructor. This chapter covers these operations.</P>
<p class="docText"><a name="idd1e98799"></a><a name="idd1e98807"></a><a name="idd1e98814"></a><a name="idd1e98822"></a><a name="idd1e98827"></a><a name="idd1e98832"></a><a name="idd1e98835"></a><a name="idd1e98838"></a><a name="idd1e98841"></a><a name="idd1e98844"></a><a name="idd1e98849"></a><span class="docEmphasis">When we define a new type,</span> we specifyexplicitly or implicitlywhat happens when objects of that type are copied, assigned, and destroyed. We do so by defining special members: the copy constructor, the assignment operator, and the destructor. If we do not explicitly define the copy constructor or the assignment operator, the compiler will (usually) define them for us.</p>
<p class="docText">The <B><a name="ch13term2"></a><a class="docLink" href="ch13lev1sec7.html#gloss13_02">copy constructor</a></b> is a special constructor that has a single parameter that is a (usually <tt>const</tt>) reference to the class type. The copy constructor is used explicitly when we define a new object and initialize it from an object of the same type. It is used implicitly when we pass or return objects of that type to or from functions.</P>
<p class="docText">The <b><a name="ch13term4"></a><a class="docLink" href="ch13lev1sec7.html#gloss13_04">destructor</a></b> is complementary to the constructors: It is applied automatically when an object goes out of scope or when a dynamically allocated object is deleted. The destructor is used to free resources acquired when the object was constructed or during the lifetime of the object. Regardless of whether a class defines its own destructor, the compiler automatically executes the destructors for the non<tt>static</tt> data members of the class.</p>
<p class="docText">We'll learn more about operator overloading in the next chapter, but in this chapter we cover the <b><a name="ch13term1"></a><a class="docLink" href="ch13lev1sec7.html#gloss13_01">assignment operator</a></b>. Like constructors, the assignment operator may be overloaded by specifying different types for the right-hand operand. The version whose right-hand operand is of the class type is special: If we do not write one, the compiler will synthesize one for us.</P>
<p class="docText">Collectively, the copy constructor, assignment operator, and destructor are referred to as <B><a name="ch13term3"></a><a class="docLink" href="ch13lev1sec7.html#gloss13_03">copy control</a></b>. The compiler automatically implements these operations, but the class may define its own versions.</p>
<a name="ch13note01"></a><div class="docNote"><p>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><img border="0" alt="" align="LEFT" width="57" height="96" SRC="images/0201721481/graphics/beware.jpg;400478"></TD><td valign="top"><p class="docText"> Copy control is an essential part of defining any C++ class. Programmers new to C++ are often confused by having to define what happens when objects are copied, assigned, or destroyed. This confusion is compounded because if we do not explicitly define these operations, the compiler defines them for usalthough they might not behave as we intend.</p></TD></tr></table><br>
</P></div><br>
<p class="docText">Often the compiler-synthesized copy-control functions are finethey do exactly the work that needs to be done. But for some classes, relying on the default definitions leads to disaster. Frequently, the most difficult part of implementing the copy-control operations is recognizing when we need to override the default versions. One especially common case that requires the class to define its own the copy-control members is if the class has a pointer member.</P>

<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch12lev1sec8.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch13lev1sec1.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>