<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 14.5.&nbsp; Subscript Operator</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec4.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch14lev1sec6.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch14lev1sec5"></a>
<h3 class="docSection1Title">14.5. Subscript Operator</h3>
<p class="docText"><a name="idd1e106735"></a><a name="idd1e106742"></a><a name="idd1e106751"></a><a name="idd1e106758"></a><a name="idd1e106767"></a><a name="idd1e106775"></a>Classes that represent containers from which individual elements can be retrieved usually define the subscript operator, <tt>operator[]</tt>. The library classes, <tt>string</tt> and <tt>vector</tt>, are examples of classes that define the subscript operator.</P>
<a name="ch14note15"></a><div class="docNote"><P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><TD width="60" valign="top"><img border="0" alt="" align="LEFT" width="50" height="54" SRC="images/0201721481/graphics/note.jpg;400478"></td><td valign="top"><p class="docText"> The subscript operator must be defined as a class member function.</P></TD></tr></table><br>
</p></div><br>
<a name="ch14lev2sec14"></a>
<h4 class="docSection2Title">Providing Read and Write Access</H4>
<p class="docText">One complication in defining the subscript operator is that we want it to do the right thing when used as either the left- or right-hand operand of an assignment. To appear on the left-hand side, it must yield an lvalue, which we can achieve by specifying the return type as a reference. As long as subscript returns a reference, it can be used on either side of an assignment.</p>
<p class="docText">It is also a good idea to be able to subscript <tt>const</tt> and non<tt>const</tt> objects. When applied to a <tt>const</tt> object, the return should be a <tt>const</tt> reference so that it is not usable as the target of an assignment.</P>
<a name="ch14note16"></a><div class="docNote"><P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><img border="0" alt="" align="LEFT" width="116" height="74" SRC="images/0201721481/graphics/bestpractices.jpg;400478"></td><TD valign="top"><p class="docText"> Ordinarily, a class that defines subscript needs to define two versions: one that is a non<tt>const</tt> member and returns a reference and one that is a <tt>const</tt> member and returns a <tt>const</tt> reference.</P></td></tr></table><br>
</p></div><BR>

<a name="ch14lev2sec15"></a>
<h4 class="docSection2Title">Prototypical Subscript Operator</h4>
<p class="docText">The following class defines the subscript operator. For simplicity, we assume the data <tt>Foo</tt> holds are stored in a <tt>vector&lt;int&gt;:</tt></P>
<pre>
     class Foo {
     public:
         int &amp;operator[] (const size_t);
         const int &amp;operator[] (const size_t) const;
         // <span class="docEmphasis">other interface members</span>
     private:
         vector&lt;int&gt; data;
         // <span class="docEmphasis">other member data and private utility functions</span>
      };
</pre><br>
<p class="docText">The subscript operators themselves would look something like:</p>
<pre>
     int&amp; Foo::operator[] (const size_t index)
     {
         return data[index];  // <span class="docEmphasis">no range checking on index</span>
     }
     const int&amp; Foo::operator[] (const size_t index) const
     {
         return data[index];  // <span class="docEmphasis">no range checking on index</span>
     }
</pre><BR>
<a name="ch14sb08"></a><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><td>
<h2 class="docSidebarTitle">Exercises Section 14.5</h2>
<blockquote>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch14qa7q1"></a><b>Exercise 14.17:</b></td><td><p class="docText"><a name="idd1e106902"></a><a name="idd1e106906"></a><a name="idd1e106912"></a>Define a subscript operator that returns a name from the waiting list for the <tt>CheckoutRecord</tt> class from the exercises to <a class="docLink" href="ch14lev1sec2.html#ch14sb04">Section 14.2.1</a> (p. <a class="docLink" href="ch14lev1sec2.html#ch14sb04">515</a>).</p>
</td></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch14qa7q2"></a><B>Exercise 14.18:</b></td><TD><p class="docText">Discuss the pros and cons of implementing this operation using the subscript operator.</p>
</td></TR><TR valign="top"><td align="right" class="docText" width="50"><a name="ch14qa7q3"></a><b>Exercise 14.19:</b></td><td><p class="docText">Suggest alternative ways to define this operation.</p>
</TD></tr></table></P>
</blockquote>
</TD></tr></table></p><br>


<a href="21001535.html"><img src="images/pixel.gif" alt="" width="1" height="1" border="0"></a><UL></UL></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec4.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=ch14lev1sec6.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>