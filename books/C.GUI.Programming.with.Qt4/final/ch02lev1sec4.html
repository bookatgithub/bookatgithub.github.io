<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>ch02lev1sec4.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec3.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch02lev1sec5.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="ch02lev1sec4"></a>
<h3 class="docSection1Title" id="-100000">Shape-Changing Dialogs</h3>
<p class="docText"><a name="We have"></a>&#87;e have see&#110; h&#111;w t&#111; create di&#97;logs that always show the same widgets w&#104;eneve&#114; they a&#114;e used. &#73;n some ca&#115;es, it is &#100;esirable &#116;o provide di&#97;logs that can change shape. The two most common k&#105;nds of shape-changing dialogs are <span class="docEmphasis">extens&#105;on dialogs</span> and <span class="docEmphasis">multi-page dialogs</span><a name="of dialog"></a>. Both types o&#102; dialog can be implemented in Qt, either p&#117;rely in co&#100;e &#111;r u&#115;ing <span class="docEmphasis">Qt Designer</span>.</p>
<p class="docText"><a name="dialogs usually"></a>E&#120;tension dialogs &#117;sually pr&#101;se&#110;t &#97; simple appear&#97;nce but ha&#118;e a toggle button that &#97;llows the user to swi&#116;ch between the dialog's &#115;imple and extended a&#112;pearances. Extension dialogs are commonl&#121; used for applications that are trying to cater t&#111; bo&#116;h casual &#97;nd power u&#115;ers, hiding the adv&#97;nced options unless the user expli&#99;itly asks to &#115;ee them. &#73;n thi&#115; section, w&#101; wi&#108;l use <span class="docEmphasis">Qt Designer</span> to &#99;reate the extension d&#105;alog shown in <a class="docLink" href="#ch02fig11">Figure 2.11</a>.</p>
<a name="ch02fig11"></a><p><center>

<h5 class="docFigureTitle">Figure 2.11. Th&#101; Sort dialog with simple and exten&#100;ed appearances</h5>

<p class="docText">
<img border="0" id="" width="500" height="283" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nMXAyZ2MwLjE-.jpg" alt="" /></p>



</center></p><br />
<p class="docText"><a name="where the"></a>The dialog is a Sort &#100;ialog in a spreadsheet application, where th&#101; us&#101;r c&#97;n select o&#110;e or seve&#114;al columns on which to sort. The di&#97;log's simp&#108;e appearan&#99;e allows the &#117;ser to enter a &#115;ingle s&#111;rt key, and its &#101;xtend&#101;d appearance provide&#115; for two extra sort keys. A <span class="docEmphRomanAlt">More</span><a name="between the"></a> button lets &#116;he user switch between the simple and extende&#100; appearances.</p>
<p class="docText"><a name="iddle2957"></a><a name="iddle3493"></a><a name="iddle3497"></a><a name="iddle6114"></a><a name="in"></a>We will create the widget with its ext&#101;nd&#101;d a&#112;pea&#114;ance in <span class="docEmphasis">Qt Designe&#114;</span><a name="keys at"></a>, and hide the seconda&#114;y and t&#101;rt&#105;ary key&#115; at run-time as ne&#101;de&#100;. The widg&#101;t look&#115; complicated, but it's fairly easy to do &#105;n <span class="docEmphasis">Qt Designer</span><a name="part first"></a>. The trick is to do &#116;he primary key part first, then duplicate it twice to ob&#116;ain the secondary and tertiary keys:</p>
<a name="ch02pro05"></a>












<table border="0" class="docText"><tr><td width="25" valign="top"><div class="docText"><b>1. </b></div></td><td><div class="docText">Click <span class="docEmphRomanAlt">File|New Form</span> and choose the &quot;Dialog without Buttons&quot; template.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>2. </b></div></td><td><div class="docText">Create an <span class="docEmphRomanAlt">OK</span> button and drag it to the top right of the form. Change its <tt>objectName</tt> to &quot;okButton&quot; and set its <tt>default</tt> property to &quot;true&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>3. </b></div></td><td><div class="docText">Create a <span class="docEmphRomanAlt">Cancel</span> button, and drag it below the <span class="docEmphRomanAlt">OK</span> button. Change its <tt>objectName</tt> to &quot;cancelButton&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>4. </b></div></td><td><div class="docText">Create a vertical spacer and drag it below the <span class="docEmphRomanAlt">Cancel</span> button, then create a <span class="docEmphRomanAlt">More</span> button and drag it below the vertical spacer. Change the <span class="docEmphRomanAlt">More</span> button's <tt>objectName</tt> to &quot;moreButton&quot;, set its <tt>text</tt> property to &quot;&amp;More&quot;, and its <tt>checkable</tt> property to &quot;true&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>5. </b></div></td><td><div class="docText"><span class="docEmphRomanAlt">Click</span> the <span class="docEmphRomanAlt">OK</span> button, then <span class="docEmphRomanAlt">Shift+Click</span> the <span class="docEmphRomanAlt">Cancel</span> button, the vertical spacer, and the <span class="docEmphRomanAlt">More</span> button, then click <span class="docEmphRomanAlt">Form|Lay Out Vertically</span>.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>6. </b></div></td><td><div class="docText">Create a group box, two labels, two comboboxes, and one horizontal spacer, and put them anywhere on the form.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>7. </b></div></td><td><div class="docText">Drag the bottom-right corner of the group box to make it larger. Then move the other widgets into the group box and position them approximately as shown in <a class="docLink" href="#ch02fig12">Figure 2.12 (a)</a>.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>8. </b></div></td><td><div class="docText">Drag the right edge of the second combobox to make it about twice as wide as the first combobox.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>9. </b></div></td><td><div class="docText">Set the group box's <tt>title</tt> property to &quot;&amp;Primary Key&quot;, the first label's <tt>text</tt> property to &quot;Column:&quot;, and the second label's <tt>text</tt> property to &quot;Order:&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>10. </b></div></td><td><div class="docText">Right-click the first combobox and choose <span class="docEmphRomanAlt">Edit Items</span> from the context menu to pop up <span class="docEmphasis">Qt Designer</span>'s combobox editor. Create one item with the text &quot;None&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>11. </b></div></td><td><div class="docText">Right-click the second combobox and choose <span class="docEmphRomanAlt">Edit Items</span>. Create an &quot;Ascending&quot; item and a &quot;Descending&quot; item.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>12. </b></div></td><td><div class="docText">Click the group box, then click <span class="docEmphRomanAlt">Form|Lay Out in a Grid</span>. Click the group box again and click <span class="docEmphRomanAlt">Form|Adjust Size</span>. This will produce the layout shown in <a class="docLink" href="#ch02fig12">Figure 2.12 (b)</a>.<br /><br />
</div></td></tr></table>
<a name="ch02fig12"></a><p><center>

<h5 class="docFigureTitle"><a name="Laying out"></a>Figure 2.12. Laying ou&#116; the grou&#112; box'&#115; childr&#101;n in a grid</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3BpYWZpc2gvLjJ0bDJnYzBfMXBq.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="138" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nMnAyZ2MwLjE-.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="iddle2958"></a><a name="iddle3494"></a><a name="iddle3498"></a><a name="iddle6115"></a><a name="iddle7489"></a><a name="iddle7591"></a><a name="make a"></a>I&#102; a layout doesn't turn out qui&#116;e right o&#114; if you &#109;ake a mistak&#101;, you can alway&#115; click <span class="docEmphRomanAlt">E&#100;it|Undo</span><a name="or"></a> or <span class="docEmphRomanAlt">F&#111;rm|Break Lay&#111;ut</span><a name="the widgets"></a>, then reposition the widg&#101;ts and try again.</p>
<p class="docText"><a name="will now"></a>We will now add the <span class="docEmphRomanAlt">Secon&#100;ary Key</span> and <span class="docEmphRomanAlt">Tertiary Key</span> group bo&#120;es:</p>
<a name="ch02pro06"></a>







<table border="0" class="docText"><tr><td width="25" valign="top"><div class="docText"><b>1. </b></div></td><td><div class="docText">Make the dialog window tall enough for the extra parts.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>2. </b></div></td><td><div class="docText">Hold down the <span class="docEmphRomanAlt">Ctrl</span> key (<span class="docEmphRomanAlt">Alt</span> on the Mac) and click and drag the <span class="docEmphRomanAlt">Primary Key</span> group box to create a copy of the group box (and its contents) on top of the original. Drag the copy below the original group box, while still pressing <span class="docEmphRomanAlt">Ctrl</span> (or <span class="docEmphRomanAlt">Alt</span>). Repeat this process to create a third group box, dragging it below the second group box.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>3. </b></div></td><td><div class="docText">Change their <tt>title</tt> properties to &quot;&amp;Secondary Key&quot; and &quot;&amp;Tertiary Key&quot;.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>4. </b></div></td><td><div class="docText">Create one vertical spacer and place it between the primary key group box and the secondary key group box.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>5. </b></div></td><td><div class="docText">Arrange the widgets in the grid-like pattern shown in <a class="docLink" href="#ch02fig13">Figure 2.13 (a)</a>.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>6. </b></div></td><td><div class="docText">Click the form to deselect any selected widgets, then click <span class="docEmphRomanAlt">Form|Lay Out in a Grid</span>. Now drag the form's bottom-right corner up and left to make the form as small as it will go. The form should now match <a class="docLink" href="#ch02fig13">Figure 2.13 (b)</a>.<br /><br />
</div></td></tr><tr><td width="25" valign="top"><div class="docText"><b>7. </b></div></td><td><div class="docText">Set the two vertical spacer items' <tt>sizeHint</tt> property to [20, 0].<br /><br />
</div></td></tr></table>
<a name="ch02fig13"></a><p><center>

<h5 class="docFigureTitle">Figure 2.13. Laying out the form's children in a &#103;rid</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3BpYWZpc2gvLjN0bDJnYzBfMXBq.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="312" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nM3AyZ2MwLjE-.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="giving a"></a>T&#104;e resu&#108;ting grid l&#97;yout has two columns and f&#111;ur rows, giving a total of e&#105;ght cel&#108;s. The <span class="docEmphRomanAlt">Prima&#114;y Key</span><a name="the"></a> g&#114;oup box, t&#104;e left&#109;ost vertical spacer ite&#109;, the <span class="docEmphRomanAlt">Secondary Key</span> g&#114;oup box, and the <span class="docEmphRomanAlt">Terti&#97;ry Key</span><a name="that contains"></a> group box each occupy a single ce&#108;l. The vertical layout that contains the <span class="docEmphRomanAlt">OK</span>, <span class="docEmphRomanAlt">Cancel</span>, and <span class="docEmphRomanAlt">More</span> &#98;uttons occupies two cells.</p>
<p class="docText"><a name="iddle1762"></a><a name="iddle7454"></a><a name="iddle7461"></a><a name="iddle7527"></a><a name="iddle7533"></a><a name="the bottom"></a>That leaves two empty cell&#115; in the b&#111;tt&#111;m r&#105;ght of the dialog. I&#102; this isn't what you have, undo the la&#121;ou&#116;, reposit&#105;on the w&#105;dgets, and &#116;ry again.</p>
<p class="docText"><a name="to "></a>&#82;ename the form &quot;So&#114;tDialog&quot; a&#110;d change the window t&#105;tle to &quot;Sort&quot;. Set the names of the chi&#108;d widgets to those shown in <a class="docLink" href="#ch02fig14">Figure 2.14</a>.</p>
<a name="ch02fig14"></a><p><center>

<h5 class="docFigureTitle"><a name="Naming the"></a>Figure 2.14. N&#97;ming the form's widgets</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3BpYWZpc2gvLjR0bDJnYzBfMXBq.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="317" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nNHAyZ2MwLjE-.jpg" alt="" /></p>
</center></p><br />
<p class="docText">Click <span class="docEmphRomanAlt">Edit|Edit Tab Order</span><a name="the"></a>. Click e&#97;ch combob&#111;x i&#110; t&#117;rn from topmost to botto&#109;most, then click the <span class="docEmphRomanAlt">OK</span>, <span class="docEmphRomanAlt">Cancel</span><a name="and"></a>, and <span class="docEmphRomanAlt">More</span><a name="the right"></a> bu&#116;tons on t&#104;e righ&#116; side. Cli&#99;k <span class="docEmphRomanAlt">Edit|Edit Widgets</span><a name="leave tab"></a> t&#111; le&#97;ve tab order m&#111;de.</p>
<p class="docText"><a name="to make"></a>Now that the &#102;orm has been desi&#103;ned, we are ready to make it funct&#105;onal by setting up some signal–slot connections. <span class="docEmphasis">Qt Des&#105;gner</span><a name="between widgets"></a> allows us to establish connections between widgets &#116;hat are p&#97;rt of the s&#97;me form. We &#110;eed to es&#116;ablish two connections.</p>
<p class="docText">Click <span class="docEmphRomanAlt">Edit|&#69;dit Signals/&#83;lots</span> &#116;o enter <span class="docEmphasis">Q&#116; Designer</span><a name="as shown"></a>'s conn&#101;ct&#105;on mode. Connectio&#110;s are repres&#101;nted by blue arrows b&#101;tween the form's widgets, as shown &#105;n <a class="docLink" href="#ch02fig15">Figure 2.15</a>, and they are also listed in <span class="docEmphasis">Qt Designer</span><a name="two widgets"></a>'s signal/sl&#111;t editor window. To establish a connection betw&#101;en &#116;wo widge&#116;s, click t&#104;e sender widget an&#100; drag the red arrow l&#105;ne to th&#101; re&#99;eiver widge&#116;, then releas&#101;. Th&#105;s pops up a di&#97;log that allows you to &#99;hoose the signal and the slot t&#111; connect.</p>
<a name="ch02fig15"></a><p><center>

<h5 class="docFigureTitle">Figure 2.15. C&#111;nnecting the form's widgets</h5>

<p class="docText">
<img border="0" id="" width="334" height="398" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nNXAyZ2MwLjE-.jpg" alt="" /></p>



</center></p><br />
<p class="docText"><a name="the"></a>The fir&#115;t connection to be made is between the <tt>okButton</tt><a name="the form"></a> and t&#104;e form'&#115; <tt>accept()</tt> &#115;lot. Dra&#103; the red arrow li&#110;e from the <tt>okButton</tt><a name="up the"></a> to an e&#109;pty part of t&#104;e form, &#116;hen rele&#97;se to pop up the &#67;onfigure &#67;onnection d&#105;alog shown &#105;n <a class="docLink" href="#ch02fig16">Figure 2.16</a><a name="Choose"></a>. Choose <tt>clicked()</tt><a name="signal and"></a> as the signa&#108; and <tt>accept()</tt><a name="the slot"></a> as the slot, then click <span class="docEmphRomanAlt">OK</span>.</p>

<p class="docText"></p><a name="ch02fig16"></a><p><center>

<h5 class="docFigureTitle">Figure 2.16. <span class="docEmphasis">Qt D&#101;signer</span>'s connection editor</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3BpYWZpc2gvLjZ0bDJnYzBfMXBq.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="286" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nNnAyZ2MwLjE-.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="iddle5651"></a><a name="iddle6608"></a><a name="iddle7376"></a><a name="iddle8137"></a><a name="the"></a>For the se&#99;ond connection, drag the red arrow line from the <tt>canc&#101;lB&#117;tton</tt><a name="the form"></a> to an &#101;mp&#116;y part of the form, and &#105;n the Configure Conn&#101;ct&#105;on dial&#111;g c&#111;nnect &#116;he butto&#110;'s <tt>clicked()</tt> sign&#97;l to the form's <tt>rej&#101;ct()</tt> slot.</p>
<p class="docText">The third conne&#99;tion to establish is between the <tt>moreButton</tt> and t&#104;e <tt>secondaryGroupBox</tt><a name="choose"></a>. Drag the red arr&#111;w line between these two widgets, then choose <tt>toggled(b&#111;ol)</tt> &#97;s the sign&#97;l and <tt>setV&#105;sible(bool)</tt> as the slot. &#66;y default, <span class="docEmphasis">Qt De-</span> <a name="iddle4927"></a><a name="iddle5260"></a><a name="iddle7155"></a><a name="iddle7319"></a><a name="iddle7563"></a><a name="iddle7567"></a><a name="iddle7568"></a><a name="iddle7834"></a><a name="iddle7876"></a><a name="iddle8266"></a><span class="docEmphasis">signer</span> doesn'&#116; list <tt>set&#86;isible(b&#111;ol)</tt><a name="will appear"></a> &#105;n the list of slo&#116;s, but it w&#105;ll appear if you en&#97;ble the <span class="docEmphRomanAlt">Show a&#108;l signals and slots</span> option.</p>
<p class="docText">The f&#111;urth and last connection is between the <tt>&#109;oreButton</tt>'s <tt>toggled(bool)</tt> signal and the <tt>terti&#97;ryGroupBox</tt>'s <tt>setVisible(bool)</tt> slot. Once the connections have be&#101;n m&#97;de, click <span class="docEmphRomanAlt">E&#100;i&#116;|Edit Widgets</span> to le&#97;ve connection mode.</p>
<p class="docText">Save the dial&#111;g a&#115; <tt>sortdi&#97;log.ui</tt> in a &#100;irector&#121; ca&#108;led <tt>sort</tt><a name="the same"></a>. To add code to &#116;he form, we wi&#108;l use the same multiple inheri&#116;ance approach that we used for the Go to &#67;ell dialog in the previous section.</p>
<p class="docText"><a name="a"></a>&#70;irst, create a <tt>sortdialog.h</tt> file with the following content&#115;:</p>
<div class="docText"><pre>#ifndef SORTDIALOG_H
#define SORTDIALOG_H

#include &lt;QDialog&gt;

#include "ui_sortdialog.h"

class SortDialog : public QDialog, public Ui::SortDialog
{
    Q_OBJECT

public:
    SortDialog(QWidget *parent = 0);

    void setColumnRange(QChar first, QChar last);
};

#endif</pre></div><br />
<p class="docText">Now cre&#97;te <tt>sortdi&#97;log.cpp</tt>:</p>
<div class="docText"><div class="codeSegmentsExpansionLinks">
              Code View:</div><pre class=""> <span class="docEmphRomanAlt">1</span> #include &lt;QtGui&gt;

 <span class="docEmphRomanAlt">2</span> #include "sortdialog.h"

 <span class="docEmphRomanAlt">3</span> SortDialog::SortDialog(QWidget *parent)
 <span class="docEmphRomanAlt">4</span>     : QDialog(parent)
 <span class="docEmphRomanAlt">5</span> {
 <span class="docEmphRomanAlt">6</span>     setupUi(this);

 <span class="docEmphRomanAlt">7</span>     secondaryGroupBox-&gt;hide();
 <span class="docEmphRomanAlt">8</span>     tertiaryGroupBox-&gt;hide();
 <span class="docEmphRomanAlt">9</span>     layout()-&gt;setSizeConstraint(QLayout::SetFixedSize);

<span class="docEmphRomanAlt">10</span>     setColumnRange('A', 'Z');
<span class="docEmphRomanAlt">11</span> }

<span class="docEmphRomanAlt">12</span> void SortDialog::setColumnRange(QChar first, QChar last)
<span class="docEmphRomanAlt">13</span> {
<span class="docEmphRomanAlt">14</span>     primaryColumnCombo-&gt;clear();
<span class="docEmphRomanAlt">15</span>     secondaryColumnCombo-&gt;clear();
<span class="docEmphRomanAlt">16</span>     tertiaryColumnCombo-&gt;clear();

<span class="docEmphRomanAlt">17</span>     secondaryColumnCombo-&gt;addItem(tr("None"));
<span class="docEmphRomanAlt">18</span>     tertiaryColumnCombo-&gt;addItem(tr("None"));
<span class="docEmphRomanAlt">19</span>     primaryColumnCombo-&gt;setMinimumSize(
<span class="docEmphRomanAlt">20</span>             secondaryColumnCombo-&gt;sizeHint());

<span class="docEmphRomanAlt">21</span>     QChar ch = first;
<span class="docEmphRomanAlt">22</span>     while (ch &lt;= last) {
<span class="docEmphRomanAlt">23</span>         primaryColumnCombo-&gt;addItem(QString(ch));
<span class="docEmphRomanAlt">24</span>         secondaryColumnCombo-&gt;addItem(QString(ch));
<span class="docEmphRomanAlt">25</span>         tertiaryColumnCombo-&gt;addItem(QString(ch));
<span class="docEmphRomanAlt">26</span>         ch = ch.unicode() + 1;
<span class="docEmphRomanAlt">27</span>     }
<span class="docEmphRomanAlt">28</span> }

					  </pre></div><br />
<p class="docText"><a name="iddle1094"></a><a name="iddle3511"></a><a name="iddle3840"></a><a name="iddle4838"></a><a name="iddle5258"></a><a name="iddle6595"></a><a name="iddle6624"></a><a name="iddle7219"></a><a name="iddle7263"></a><a name="iddle7494"></a><a name="iddle7503"></a><a name="iddle8590"></a><a name="It also"></a>Th&#101; constructor h&#105;des the secondary and tert&#105;ary par&#116;s of the d&#105;alog. It &#97;lso sets the <tt>size&#67;onstrain&#116;</tt><a name="property of"></a> property of &#116;he form's layout to <tt>QL&#97;yout::SetFixedSize</tt><a name="dialog non"></a>, making the di&#97;log non-resizable by the user. The layout then tak&#101;s over the responsibility for resi&#122;ing, and resizes the dialog automatically when child widgets a&#114;e show&#110; o&#114; hidde&#110;, ensuring that &#116;he dialog is always displayed a&#116; its opti&#109;al size.</p>
<p class="docText">The <tt>s&#101;tC&#111;lumnRange()</tt><a name="initializes the"></a> slot &#105;nitial&#105;zes the contents of t&#104;e combobo&#120;es based on the sele&#99;ted columns in the spreadsheet. We insert a &quot;&#78;one&quot; item in the comboboxes for the (optional) secondary and t&#101;rtiary keys.</p>
<p class="docText">Lines 19 and 20 present a subtle la&#121;ou&#116; idiom. Th&#101; <tt>QW&#105;dget::sizeHint()</tt><a name="This explains"></a> &#102;unction returns a widg&#101;t's &quot;&#105;deal&quot; si&#122;e, wh&#105;ch the layout syst&#101;m t&#114;ies to honor. T&#104;is explains why di&#102;ferent kinds of widg&#101;ts, or similar widgets with diff&#101;rent contents, may be assigned differ&#101;nt sizes by the layout system. For combobo&#120;e&#115;, this me&#97;ns that th&#101; secondary and tert&#105;ary comboboxes, which contain &quot;None&quot;, &#101;nd &#117;p larger t&#104;an the &#112;rimary combob&#111;x, w&#104;ich cont&#97;ins only single-le&#116;ter entries. To avoid this inco&#110;sistency, we set the primary combobox's &#109;inimum size to the <span class="docEmphasis">secondary</span> combobox's ideal si&#122;e.</p>
<p class="docText">Here is a <tt>main()</tt><a name="range to"></a> test function that sets the range t&#111; in&#99;lude column&#115; 'C' to 'F' an&#100; then shows the dialog:</p>
<div class="docText"><pre>#include &lt;QApplication&gt;

#include "sortdialog.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    SortDialog *dialog = new SortDialog;
    dialog-&gt;setColumnRange('C', 'F');
    dialog-&gt;show();
    return app.exec();
}</pre></div><br />
<p class="docText"><a name="dialog isn"></a>&#84;hat completes the extens&#105;on dial&#111;g. A&#115; the exa&#109;ple illustrates, an ext&#101;ns&#105;on dialog i&#115;n't much more difficu&#108;t to design than a plain dialog: All w&#101; needed was a toggle button, a few &#101;xtra signal–slot connections, and a non-r&#101;sizable layout. In production applications, it i&#115; quite c&#111;mm&#111;n f&#111;r the button t&#104;at controls the extens&#105;on to sh&#111;w t&#104;e text <span class="docEmphRomanAlt">&#65;dvanced &gt;&gt;&gt;</span><a name="visible"></a> w&#104;en onl&#121; the ba&#115;ic dialog i&#115; visible <a name="iddle1731"></a><a name="iddle1952"></a><a name="iddle2319"></a><a name="iddle2748"></a><a name="iddle3586"></a><a name="iddle3600"></a><a name="iddle3819"></a><a name="iddle3937"></a><a name="iddle4489"></a><a name="iddle5028"></a><a name="iddle5286"></a><a name="iddle5292"></a><a name="iddle5458"></a><a name="iddle5650"></a><a name="iddle5889"></a><a name="iddle6124"></a><a name="iddle6180"></a><a name="iddle6400"></a><a name="iddle6429"></a><a name="iddle7172"></a><a name="iddle7346"></a><a name="iddle7687"></a><a name="iddle7913"></a><a name="iddle8218"></a><a name="iddle8270"></a><a name="iddle8279"></a><a name="iddle8363"></a><a name="iddle8470"></a><a name="iddle8541"></a>and <span class="docEmphRomanAlt">Adv&#97;nced &lt;&lt;&lt;</span><a name="achieve in"></a> when the extension is shown. This is eas&#121; to achieve in Qt by calling <tt>setText()</tt><a name="the"></a> &#111;n the <tt>QPushButton</tt> whenever it is clicked.</p>
<p class="docText"><a name="in Qt"></a>The o&#116;her comm&#111;n t&#121;pe &#111;f shape-changing dia&#108;ogs, multi-page dialogs, are even e&#97;sier to cr&#101;at&#101; in &#81;t, either in &#99;ode or using <span class="docEmphasis"><a name="Qt Designer"></a>&#81;t Desi&#103;ner</span><a name="can be"></a>. Such dialog&#115; can be built in many differ&#101;nt ways.</p>
<ul><li><p class="docList">A <tt>QTabWidget</tt><a name="be used"></a> can be used i&#110; its own right. It provides a tab ba&#114; that controls a built-in <tt>QStackedWidget</tt>.</p></li><li><p class="docList">A <tt>QLi&#115;tWidge&#116;</tt> and a <tt>QSt&#97;ckedWidg&#101;t</tt> can be used toge&#116;her, with the <tt>QListWidget</tt>'s current i&#116;em deter&#109;ining which &#112;age &#116;he <tt>QStackedWidget</tt> &#115;hows, by &#99;onnecting the <tt>QLis&#116;Widget::currentRow&#67;hanged()</tt> signal to the <tt>QS&#116;ackedWidget::setCurrentInd&#101;x()</tt> slot.</p></li><li><p class="docList">A <tt>QTreeWidget</tt> can be used w&#105;th a <tt>QStackedWidget</tt> in a similar way to a <tt>QListWidget</tt>.</p></li></ul>
<p class="docText">We c&#111;ve&#114; the <tt>QS&#116;ackedWi&#100;get</tt> class in <a class="docLink" href="ch06.html#ch06">Chapter 6</a>.</p>

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec3.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch02lev1sec5.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>