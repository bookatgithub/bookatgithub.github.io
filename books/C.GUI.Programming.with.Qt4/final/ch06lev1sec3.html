<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>ch06lev1sec3.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec2.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch06lev1sec4.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="ch06lev1sec3"></a>
<h3 class="docSection1Title" id="-100000">Splitters</h3>
<p class="docText"><a name="A"></a>&#65; <tt>QSplit&#116;er</tt><a name="widget that"></a> is a wi&#100;g&#101;t that contains oth&#101;r widgets. The widgets &#105;n a spli&#116;ter are s&#101;pa&#114;ated by sp&#108;itter hand&#108;es. Users can c&#104;ange the size&#115; of a splitter's child widg&#101;ts by dragging the handles. Split&#116;ers can often be used as an alternative to layout managers, to g&#105;ve more control to the user.</p>
<p class="docText"><a name="child widgets"></a>The child widgets o&#102; a <tt>QS&#112;lit&#116;er</tt><a name="in the"></a> are au&#116;omatically placed side by si&#100;e (or one below the ot&#104;er) in t&#104;e orde&#114; in whi&#99;h they are creat&#101;d, w&#105;th splitter bars &#98;etween adjacent widg&#101;ts. Here's the code fo&#114; creating the window depicted i&#110; <a class="docLink" href="#ch06fig07">Figure 6.7</a>:</p>
<div class="docText"><pre>int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QTextEdit *editor1 = new QTextEdit;
    QTextEdit *editor2 = new QTextEdit;
    QTextEdit *editor3 = new QTextEdit;

    QSplitter splitter(Qt::Horizontal);
    splitter.addWidget(editor1);
    splitter.addWidget(editor2);
    splitter.addWidget(editor3);
    ...
    splitter.show();
    return app.exec();
}</pre></div><br />
<a name="ch06fig07"></a><p><center>

<h5 class="docFigureTitle">Figure 6.7. The Splitter application</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcHBpX2xpc2gvdGVsYXB0Y3NydGpnLg--.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="124" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGkubGlzaC9nZXBqcHRjc3J0.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="iddle2605"></a><a name="iddle3413"></a><a name="iddle3653"></a><a name="iddle3654"></a><a name="iddle3988"></a><a name="iddle5797"></a>The exa&#109;ple consists of three <tt>QTextEdit</tt><a name="a"></a>s laid out horizontally by a <tt>&#81;Sp&#108;itter</tt> widg&#101;tâ€”t&#104;is is shown schemati&#99;ally in <a class="docLink" href="#ch06fig08">Figure 6.8</a><a name="and have"></a>. Unlike layout managers, which simp&#108;y lay out a f&#111;rm'&#115; child w&#105;dgets and &#104;ave no &#118;isual represe&#110;tation, <tt>QSpl&#105;tter</tt> is derived from <tt>QWi&#100;get</tt><a name="other widget"></a> and can be used like any othe&#114; widget.</p>
<a name="ch06fig08"></a><p><center>

<h5 class="docFigureTitle">Figure 6.8. The Splitter application's widget&#115;</h5>

<p class="docText">
<img border="0" id="" width="327" height="126" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlnZmlzaC9mOGk2Z2MwLjA-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="and vertical"></a>Complex layouts can be achieved by nesting horizont&#97;l and vert&#105;cal <tt>QSp&#108;itter</tt><a name="the Mail"></a>s. For &#101;xample, the Mail Client app&#108;ication shown in <a class="docLink" href="#ch06fig09">Figure 6.9</a>, consists of a h&#111;ri&#122;ont&#97;l <tt>QSplitt&#101;r</tt> that con&#116;ains a ve&#114;tical <tt>QSp&#108;itter</tt> on its right s&#105;de. The layout is shown schemat&#105;cally in <a class="docLink" href="#ch06fig10">Figure 6.10</a>.</p>
<a name="ch06fig09"></a><p><center>

<h5 class="docFigureTitle">Figure 6.9. The Mail Clien&#116; application</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzdHBpbmlscy9oX2kxdGFjY21lbGwucGdhag--.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="308" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3Bpbmlsc2gvLmkxdGFjY21lbHBq.jpg" alt="" /></p>
</center></p><br />
<a name="ch06fig10"></a><p><center>

<h5 class="docFigureTitle">Figure 6.10. The Mail Client's splitter l&#97;yout</h5>

<p class="docText">
<img border="0" id="" width="325" height="221" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlnZmlzaC9mMGk2Z2MwLjE-.jpg" alt="" /></p>


</center></p><br />
<p class="docText">Here's the code in the constructor of the Mail &#67;lient app&#108;ication's <tt>Q&#77;ainWindo&#119;</tt> subclass:</p>
<div class="docText"><pre>MailClient::MailClient()
{
    ...
    rightSplitter = new QSplitter(Qt::Vertical);
    rightSplitter-&gt;addWidget(messagesTreeWidget);
    rightSplitter-&gt;addWidget(textEdit);
    rightSplitter-&gt;setStretchFactor(1, 1);

    mainSplitter = new QSplitter(Qt::Horizontal);
    mainSplitter-&gt;addWidget(foldersTreeWidget);
    mainSplitter-&gt;addWidget(rightSplitter);
    mainSplitter-&gt;setStretchFactor(1, 1);
    setCentralWidget(mainSplitter);

    setWindowTitle(tr("Mail Client"));
    readSettings();
}</pre></div><br />
<p class="docText"><a name="iddle1514"></a><a name="iddle5319"></a><a name="iddle5802"></a><a name="iddle7331"></a><a name="iddle7783"></a><a name="create a"></a>After creating the t&#104;ree widgets that we wa&#110;t &#116;o displa&#121;, we &#99;reate a vertical spl&#105;tter, <tt>ri&#103;htSplitter</tt><a name="and add"></a>, and a&#100;d the two wi&#100;gets we want on the right. T&#104;en we create a horizontal splitte&#114;, <tt>mainSplitter</tt><a name="the widget"></a>, and add the widget w&#101; want it to display on the left and <tt>rightS&#112;lit&#116;er</tt><a name="widgets we"></a> whose &#119;idgets we wa&#110;t shown on the right. &#87;e make <tt>mainSplitter</tt> the <tt>QM&#97;inWindow</tt>'&#115; centra&#108; widget.</p>
<p class="docText">Whe&#110; the user &#114;esize&#115; a window, <tt>QSplitter</tt><a name="of the"></a> n&#111;rmally distr&#105;butes the space so that the r&#101;lative sizes of the child widg&#101;ts stay the same. In the Mail Client example, we don't w&#97;nt this behavior; instead, we want the <tt>QTreeWidget</tt> and t&#104;e <tt>QTab&#108;eWidget</tt><a name="we want"></a> to &#107;eep their &#115;izes and we wa&#110;t to give any extra space &#116;o the <tt>QTe&#120;t&#69;dit</tt>. This is a&#99;hieved by the tw&#111; <tt>se&#116;StretchFa&#99;tor()</tt><a name="and the"></a> calls. The fi&#114;st argument is the 0-based inde&#120; of the splitter's child w&#105;dget, and the second argument is the str&#101;tch factor we want to set; the default is 0.</p>
<p class="docText">The fi&#114;st <tt>set&#83;tret&#99;hFactor()</tt> cal&#108; is on <tt>rightSplitter</tt><a name="position "></a>, and it &#115;ets the widget at position 1 (<tt>text&#69;dit</tt>) to have a &#115;tretch &#102;act&#111;r of 1. The &#115;econd <tt>s&#101;tStretchFa&#99;tor()</tt> call is on <tt>m&#97;inSplitter</tt>, and it sets t&#104;e widget at position 1 (<tt>rightSpl&#105;tter</tt><a name="that the"></a>) to have a stretch factor of 1. This ensures that t&#104;e <tt>textEdit</tt><a name="get any"></a> will get any additional space that is available.</p>
<p class="docText"><a name="iddle1190"></a><a name="iddle3098"></a><a name="iddle4115"></a><a name="iddle4406"></a><a name="iddle5716"></a><a name="iddle5717"></a><a name="iddle5722"></a><a name="iddle5725"></a><a name="iddle5729"></a><a name="iddle5744"></a><a name="iddle5799"></a><a name="iddle5800"></a><a name="iddle5801"></a><a name="iddle6119"></a><a name="iddle6781"></a><a name="iddle6878"></a><a name="iddle6925"></a><a name="iddle7018"></a><a name="iddle7055"></a><a name="iddle7324"></a><a name="iddle7379"></a><a name="iddle7399"></a><a name="iddle8445"></a><a name="iddle8448"></a><a name="iddle8588"></a><a name="iddle8675"></a>When t&#104;e appl&#105;cation &#105;s start&#101;d, <tt>QSplitter</tt><a name="sizes "></a> gives &#116;he child widgets appropriate siz&#101;s b&#97;sed on the&#105;r initi&#97;l sizes (or based on the&#105;r size h&#105;nt if no initial &#115;ize is speci&#102;ied). We can move the splitter handl&#101;s programmatically by calling <tt>QSplitter::se&#116;Sizes()</tt><a name="The"></a>. The <tt>QSplitter</tt><a name="provides a"></a> class also provide&#115; a means of saving and restoring its stat&#101; th&#101; ne&#120;t &#116;ime the application is run. &#72;ere's the <tt>writeSettings()</tt><a name="that saves"></a> fun&#99;tion that sa&#118;es the Mail &#67;lient's se&#116;tings:</p>
<div class="docText"><pre>void MailClient::writeSettings()
{
    QSettings settings("Software Inc.", "Mail Client");

    settings.beginGroup("mainWindow");
    settings.setValue("geometry", saveGeometry());
    settings.setValue("mainSplitter", mainSplitter-&gt;saveState());
    settings.setValue("rightSplitter", rightSplitter-&gt;saveState());
    settings.endGroup();
}</pre></div><br />
<p class="docText">Here's the &#99;orrespondi&#110;g <tt>readSe&#116;tings()</tt> func&#116;ion:</p>
<div class="docText"><pre>void MailClient::readSettings()
{
    QSettings settings("Software Inc.", "Mail Client");

    settings.beginGroup("mainWindow");
    restoreGeometry(settings.value("geometry").toByteArray());
    mainSplitter-&gt;restoreState(
            settings.value("mainSplitter").toByteArray());
    rightSplitter-&gt;restoreState(
            settings.value("rightSplitter").toByteArray());
    settings.endGroup();
}</pre></div><br />
<p class="docText"><span class="docEmphasis">Qt Designer</span> fully supports <tt>QSp&#108;itter</tt><a name="approximately in"></a>. To put widgets into a splitter, place th&#101; child widgets approximately in their &#100;esired positions, select them, and click <span class="docEmphRomanAlt">Form|Lay Ou&#116; Horizon&#116;ally in S&#112;lit&#116;er</span> or <span class="docEmphRomanAlt">Form|Lay Out Vertically i&#110; Splitter</span>.</p>

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec2.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch06lev1sec4.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>