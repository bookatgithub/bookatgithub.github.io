<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>ch06lev1sec5.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec4.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch06lev1sec6.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="ch06lev1sec5"></a>
<h3 class="docSection1Title" id="-100000">Dock Windows and Toolbars</h3>
<p class="docText"><a name="Dock windows"></a>&#68;ock window&#115; are win&#100;o&#119;s that can be docked inside a <tt>&#81;MainWindow</tt><a name="as independent"></a> or floated as indepe&#110;d&#101;nt &#119;indows. <tt>QMai&#110;Window</tt><a name="four dock"></a> pr&#111;vi&#100;es four do&#99;k window areas: one abov&#101;, one below, one to the le&#102;t, and one to the right of th&#101; central widget. Applications suc&#104; as Microsoft Visual Studio and <span class="docEmphasis">Qt Linguist</span><a name="very flexible"></a> make extensive use of doc&#107; windows t&#111; pr&#111;vi&#100;e a very flexible use&#114; interface. In Qt, dock &#119;indows are i&#110;s&#116;ances of <tt>&#81;DockWidget</tt>. <a class="docLink" href="#ch06fig13">Figure 6.13</a><a name="toolbars and"></a> sho&#119;s a Qt applic&#97;tion with toolbars &#97;nd a dock window.</p>
<a name="ch06fig13"></a><p><center>

<h5 class="docFigureTitle">Fi&#103;ure 6.13. A <tt>QMainWindow</tt> with a dock w&#105;ndow</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzdHBpZWNrcy9oX2RzdG93Y2RnaWwucGdhag--.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="392" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzZ3BpZWNrc2gvLmRzdG93Y2RnaXBq.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="it is"></a>Every dock window has its own t&#105;tle bar, even when it is docked. Users ca&#110; move dock windows from one do&#99;k area to ano&#116;her by dr&#97;gging the &#116;itle bar. They can a&#108;so detach a dock window from an area and l&#101;t t&#104;e dock &#119;indow float &#97;s an independ&#101;nt &#119;indow by dragging &#116;he dock window ou&#116;side of any dock area. Free-f&#108;oating dock windows are always &quot;on t&#111;p&quot; of their main window. Users can close a <tt>QD&#111;ckWidget</tt><a name="the window"></a> by clicking the close button in the window's &#116;itle bar. &#65;ny comb&#105;nation &#111;f these features can &#98;e disabled by calling <tt>QDockWidget::setFeat&#117;res()</tt>.</p>
<p class="docText"><a name="dock windows"></a>In ear&#108;ier versio&#110;s &#111;f Qt, toolbar&#115; were tr&#101;ated l&#105;ke dock windows and s&#104;ared the same dock areas. Star&#116;ing with Qt 4, toolbars occupy their own &#97;reas around the central widget (as shown in <a class="docLink" href="#ch06fig14">Figure 6.14</a><a name="be undocked"></a>) a&#110;d can't be undocked. If a floating toolbar is required, we can simply p&#117;t it insid&#101; a <tt>Q&#68;ockWidget</tt>.</p>
<a name="ch06fig14"></a><p><center>

<h5 class="docFigureTitle">&#70;igure 6.14. <tt>QMainWindo&#119;</tt>'s dock and toolbar areas</h5>

<p class="docText">
<img border="0" id="" width="345" height="365" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlnZmlzaC9mNGk2Z2MwLjE-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="of their"></a>The co&#114;ners i&#110;d&#105;cated w&#105;th dotted l&#105;nes can &#98;elong to either of th&#101;ir two adjoi&#110;ing dock areas. For e&#120;ample, we could make the top-left corner belon&#103; to the left dock area by calling <tt>QMainWindow::se&#116;Corner(Qt::TopLeftCorner, Qt::LeftDockWidgetArea)</tt>.</p>
<p class="docText"><a name="The following"></a>The foll&#111;wi&#110;g &#99;ode snippet &#115;hows how to wrap an existing w&#105;dget (in this case, a <tt>QTreeWidget</tt>) in &#97; <tt>QDockWid&#103;et</tt><a name="it into"></a> an&#100; i&#110;sert &#105;t into t&#104;e right dock are&#97;:</p>
<div class="docText"><pre>    QDockWidget *shapesDockWidget = new QDockWidget(tr("Shapes"));
    shapesDockWidget-&gt;setObjectName("shapesDockWidget");
    shapesDockWidget-&gt;setWidget(treeWidget);
    shapesDockWidget-&gt;setAllowedAreas(Qt::LeftDockWidgetArea
                                         | Qt::RightDockWidgetArea);
    addDockWidget(Qt::RightDockWidgetArea, shapesDockWidget);</pre></div><br />
<p class="docText"><a name="iddle4098"></a><a name="iddle5327"></a><a name="iddle5329"></a><a name="iddle6923"></a><a name="iddle7016"></a><a name="iddle7124"></a><a name="iddle8568"></a>The <tt>setAllowedAreas()</tt><a name="specifies constraints"></a> &#99;all specifies constraints o&#110; which dock areas can accept the dock window. He&#114;e, we only allow the user to drag the dock window into t&#104;e left and right dock areas, where there is enoug&#104; verti&#99;al space for &#105;t to be d&#105;splayed sens&#105;bly. If no allowed areas are explic&#105;tly set, &#116;he user c&#97;n drag the &#100;ock window to a&#110;y &#111;f the four &#97;reas.</p>
<p class="docText">Every <tt>QO&#98;ject</tt><a name="when debugging"></a> can be given an &quot;object name&quot;. This na&#109;e can be useful when debugging and is used by so&#109;e test tools. Normally we do not bother to gi&#118;e widgets object names, but when we create dock windows and tool&#98;ars, doing s&#111; is &#110;e&#99;essary if we want to use <tt>QMainWindow::&#115;aveState()</tt> and <tt>QMainWindow::restoreSta&#116;e()</tt><a name="dock window"></a> to save &#97;nd restor&#101; th&#101; dock window and &#116;oolbar g&#101;ometr&#105;es and states.</p>
<p class="docText">Her&#101;'s how to creat&#101; a toolbar containing a <tt>QComboBox</tt>, a <tt>QSpi&#110;Box</tt>, and a few <tt>QToolButton</tt>s from a <tt>QM&#97;inWindow</tt> subclass's constructor:</p>
<div class="docText"><pre>    QToolBar *fontToolBar = new QToolBar(tr("Font"));
    fontToolBar-&gt;setObjectName("fontToolBar");
    fontToolBar-&gt;addWidget(familyComboBox);
    fontToolBar-&gt;addWidget(sizeSpinBox);
    fontToolBar-&gt;addAction(boldAction);
    fontToolBar-&gt;addAction(italicAction);
    fontToolBar-&gt;addAction(underlineAction);
    fontToolBar-&gt;setAllowedAreas(Qt::TopToolBarArea
                                 | Qt::BottomToolBarArea);
    addToolBar(fontToolBar);</pre></div><br />
<p class="docText"><a name="iddle1191"></a><a name="iddle3719"></a><a name="iddle3733"></a><a name="iddle4407"></a><a name="iddle5328"></a><a name="iddle5330"></a><a name="iddle5743"></a><a name="iddle6783"></a><a name="iddle6924"></a><a name="iddle7017"></a><a name="iddle7400"></a><a name="iddle8677"></a><a name="the dock"></a>If we want to save the posit&#105;on of al&#108; the dock wi&#110;d&#111;ws and toolbars so th&#97;t we can restore them the next &#116;ime the a&#112;pli&#99;ation is run, &#119;e can write code &#116;hat is si&#109;ilar to the code &#119;e used to save a <tt>Q&#83;plitter</tt>'s state, using <tt>QMai&#110;Window</tt>'s <tt>saveState()</tt> and <tt>restor&#101;State()</tt> functions:</p>
<div class="docText"><pre>void MainWindow::writeSettings()
{
    QSettings settings("Software Inc.", "Icon Editor");

    settings.beginGroup("mainWindow");
    settings.setValue("geometry", saveGeometry());
    settings.setValue("state", saveState());
    settings.endGroup();
}

void MainWindow::readSettings()
{
    QSettings settings("Software Inc.", "Icon Editor");

    settings.beginGroup("mainWindow");
    restoreGeometry(settings.value("geometry").toByteArray());
    restoreState(settings.value("state").toByteArray());
    settings.endGroup();
}</pre></div><br />
<p class="docText"><a name="iddle1515"></a><a name="iddle1558"></a><a name="iddle1848"></a><a name="iddle2606"></a><a name="iddle3686"></a><a name="iddle3776"></a><a name="iddle3777"></a><a name="iddle3793"></a><a name="iddle3942"></a><a name="iddle4134"></a><a name="iddle5320"></a><a name="iddle5349"></a><a name="iddle6359"></a><a name="iddle6363"></a><a name="iddle7481"></a><a name="iddle7482"></a><a name="iddle8090"></a><a name="iddle8618"></a><a name="iddle8632"></a>Finally, <tt>QMainWi&#110;dow</tt><a name="all the"></a> provides a context menu that lists all the &#100;o&#99;k windows an&#100; t&#111;olbars. This menu &#105;s shown in <a class="docLink" href="#ch06fig15">Figure 6.15</a><a name="and hide"></a>. The user can close an&#100; r&#101;st&#111;re &#100;ock windows an&#100; h&#105;de and rest&#111;re toolbars &#117;sing this menu.</p>
<a name="ch06fig15"></a><p><center>

<h5 class="docFigureTitle"><a name="A"></a>Figure 6.15. A <tt>QMainWindo&#119;</tt> context menu</h5>

<p class="docText">
<img border="0" id="" width="88" height="104" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGkuY2tzaC9nbnBqb21jZHVl.jpg" alt="" /></p>



</center></p><br />

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec4.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch06lev1sec6.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>