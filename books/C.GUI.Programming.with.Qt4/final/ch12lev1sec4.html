<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>ch12lev1sec4.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch12lev1sec3.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch12lev1sec5.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="ch12lev1sec4"></a>
<h3 class="docSection1Title" id="-100000">Embedding Resources</h3>
<p class="docText"><a name="So far"></a>&#83;o far &#105;n this c&#104;apter, &#119;e have talke&#100; about accessing data in exter&#110;al devices, but with Qt it is also possible to e&#109;bed binary d&#97;ta or text &#105;nside the appl&#105;cation's execut&#97;ble. This is achieved using Qt's &#114;esource system. In other chapters, we used r&#101;source files to embed images in the executable, but i&#116; is possible to embed any kind of file. Embedded files can be read u&#115;ing <tt>QFi&#108;e</tt><a name="normal files"></a> just like &#110;o&#114;mal fi&#108;es in the file system.</p>
<p class="docText"><a name="are converted"></a>Resources are conver&#116;ed into C++ code by <tt>rcc</tt>, Qt's resource compiler. We can t&#101;ll <tt>&#113;make</tt> &#116;o include sp&#101;cial rules to &#114;un <tt>rcc</tt> by adding this line to th&#101; <tt>.pro</tt> file:</p>
<div class="docText"><pre>RESOURCES = myresourcefile.qrc</pre></div><br />
<p class="docText"><a name="iddle1015"></a><a name="iddle1240"></a><a name="iddle1555"></a><a name="iddle1662"></a><a name="iddle1856"></a><a name="iddle1858"></a><a name="iddle2598"></a><a name="iddle2695"></a><a name="iddle3155"></a><a name="iddle3158"></a><a name="iddle3278"></a><a name="iddle3315"></a><a name="iddle3485"></a><a name="iddle4049"></a><a name="iddle4499"></a><a name="iddle4508"></a><a name="iddle5617"></a><a name="iddle5658"></a><a name="iddle6125"></a><a name="iddle6914"></a><a name="iddle6994"></a><a name="iddle7877"></a><a name="iddle8267"></a><a name="iddle8271"></a><a name="iddle8281"></a><a name="iddle8706"></a>The <tt>myresourcefile.qrc</tt><a name="to embed"></a> fi&#108;e is an XML file that lists the files to embed in the execu&#116;able.</p>
<p class="docText"><a name="an application"></a>Let's imagine that we are writing an application t&#104;at kee&#112;s co&#110;t&#97;ct detail&#115;. For the convenience of our users, we &#119;ant to embed the international dialing codes in the e&#120;e&#99;utable. If th&#101; file is in the <tt>d&#97;tafiles</tt><a name="like this"></a> director&#121; in the application's build d&#105;rectory, the resource file migh&#116; look like this:</p>
<div class="docText"><pre>&lt;RCC&gt;
&lt;qresource&gt;
    &lt;file&gt;datafiles/phone-codes.dat&lt;/file&gt;
&lt;/qresource&gt;
&lt;/RCC&gt;</pre></div><br />
<p class="docText">From the application, resour&#99;es are identified by the <tt>:/</tt><a name="has the"></a> path prefix. In this example, the dial&#105;ng code&#115; file ha&#115; the pat&#104; <tt>:/dataf&#105;les/phone-codes.dat</tt><a name="other file"></a> and can be read ju&#115;t like any other file using <tt>QFil&#101;</tt>.</p>
<p class="docText"><a name="in the"></a>Em&#98;edding dat&#97; in the executable has t&#104;e advant&#97;ge that it cannot get lost and makes it poss&#105;ble to create truly stand-alone exe&#99;utables (if static linking is also used). Two disadvant&#97;ges are that if the embedded data needs changing the whole execut&#97;ble must b&#101; re&#112;lac&#101;d, a&#110;d the size of the exe&#99;utable will be larger because it must accommodate the embedd&#101;d d&#97;ta.</p>
<p class="docText"><a name="this example"></a>Qt's res&#111;urce system pro&#118;ides more feat&#117;res than we present&#101;d in this example, including &#115;upport for file name aliases and for l&#111;calization. These facilities are documented at <a class="docLink" target="_blank" href="http://doc.trolltech.com/4.3/resources.html">http://doc.trolltech.com/4.3/resources.html</a>.</p>

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch12lev1sec3.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch12lev1sec5.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>