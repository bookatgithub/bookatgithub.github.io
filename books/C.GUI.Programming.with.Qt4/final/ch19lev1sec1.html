<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>ch19lev1sec1.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch19lev1sec2.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="ch19"></a>

<h2 id="title-ID0EX4OM" class="docChapterTitle">19. Look and Feel Customization</h2>



<p class="docText">
<img border="0" id="" width="150" height="83" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83ZXBwdDlocF9lcl8vMWlzY2Nob25lYS5wZ3Jq.jpg" alt="" /></p>



<ul><li><p class="docList"><a name="iddle1483"></a><a name="iddle1926"></a><a name="iddle3629"></a><a name="iddle5969"></a><a name="iddle7808"></a><a name="iddle7813"></a><a name="iddle8542"></a><span class="docEmphasis"><a class="docLink" href="ch19lev1sec1.html#ch19lev1sec1">Using Qt Style Sheets</a></span></p></li><li><p class="docList"><span class="docEmphasis"><a class="docLink" href="ch19lev1sec2.html#ch19lev1sec2">Subclassing QStyle</a></span></p></li></ul>
<p class="docText"><a name="In some"></a>&#73;n som&#101; ci&#114;cumst&#97;nces, we mi&#103;ht want &#116;o change the look and &#102;eel of Qt's built-in widgets. W&#101; ma&#121; on&#108;y want to do some min&#111;r customizat&#105;ons to tweak the aesthetics slightl&#121;, or we may wish to implement an entirel&#121; new style, to give our application or suite of appl&#105;cations a unique and distinctive appearance. In e&#105;ther ca&#115;e, there &#97;re three m&#97;in approa&#99;hes to redefining th&#101; look of Qt's &#98;uilt-in widgets:</p>
<ul><li><p class="docList"><a name="subclass the"></a>We can subclass th&#101; in&#100;i&#118;idual widget c&#108;asses and reim&#112;lement their paint &#97;nd mouse event handlers. This gives complete con&#116;rol but involves a lot of work. It also mea&#110;s that we must go through all of our code and <span class="docEmphasis">Qt De&#115;igner</span><a name="and change"></a> f&#111;rm&#115; and cha&#110;g&#101; all occurrenc&#101;s of Qt widget cl&#97;sses to use our subclasses.</p></li><li><p class="docList">We can s&#117;bclass <tt>QS&#116;yle</tt> or a p&#114;edefine&#100; style such &#97;s <tt>QWindowsStyle</tt><a name="itself to"></a>. This approach i&#115; very powerful; it is used by Qt itself to pr&#111;vide a native look and feel &#111;n the different platforms it supp&#111;rt&#115;.</p></li><li><p class="docList"><a name="use Qt"></a>Starti&#110;g &#119;ith Qt 4.2, we can &#117;se Qt style sh&#101;ets, a mechani&#115;m inspired by HTML CSS (Cascading Style &#83;heet&#115;). Since s&#116;yle sheets are pla&#105;n text files tha&#116; are interpreted at run-time, &#110;o knowledge of programming is requi&#114;ed to use them.</p></li></ul>
<p class="docText"><a name="first approach"></a>We have already covered the &#116;echniques required for the first approach, in <a class="docLink" href="ch05.html#ch05">Chapters 5</a> a&#110;d <a class="docLink" href="ch07.html#ch07">7</a><a name="In this"></a>, &#97;lthough o&#117;r emphasi&#115; was on c&#114;eating cust&#111;m widgets. In t&#104;is chapter, we will review the last two approache&#115;. We will &#112;res&#101;nt two custo&#109; styles: the Candy style, &#115;pecified as a style sheet, an&#100; the Bronze style, impleme&#110;ted as a <tt>QStyle</tt> subclass (see <a class="docLink" href="#ch19fig01">Figure 19.1</a><a name="on a"></a>). To ke&#101;p the examples to a manageable size, both styles f&#111;cu&#115; on a car&#101;fu&#108;ly chosen s&#117;bset of Qt's widget&#115;.</p>
<a name="ch19fig01"></a><p><center>

<h5 class="docFigureTitle"><a name="styles presented"></a>Figure 19.1. The custom style&#115; presented in this chapter</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83bHB0YWhhbmUveWxjc2NpZHlfdC4tcGpzZw--.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="253" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cHB0YWhqbmUveWxjc2NpZHkuZy1z.jpg" alt="" /></p>
</center></p><br />




<a name="ch19lev1sec1"></a>
<h3 class="docSection1Title" id="-100000">Using Qt Style Sheets</h3>
<p class="docText"><a name="sheets are"></a>Qt style sheets ar&#101; st&#114;ongly &#105;nspired b&#121; CSS but a&#100;apted to work on widgets. A sty&#108;e sheet consists of style rules that affect &#116;he rendering of a widget. These rules are spec&#105;fied as plain text. Since style sheet&#115; are par&#115;ed at ru&#110;-t&#105;me, <a name="iddle1279"></a><a name="iddle4250"></a><a name="iddle4742"></a><a name="iddle5311"></a><a name="iddle5578"></a><a name="iddle5970"></a><a name="iddle7339"></a><a name="iddle7814"></a><a name="we can"></a>we ca&#110; easily expe&#114;iment with different &#100;esigns by specifying a style sheet for &#97; Qt applic&#97;tion usin&#103; the <tt>-styleshee&#116;</tt> <span class="docEmphasis"><tt>file.qss</tt></span> command-line &#111;ption, by using <span class="docEmphasis">Qt Designer</span><a name="or by"></a>'s &#115;tyle sheet editor, or by embedding a <tt>QT&#101;xtEdit</tt><a name="our application"></a> inside our application during de&#118;elopment.</p>
<p class="docText"><a name="active"></a>Style sheets are applied on top of the currently active <tt>QSty&#108;e</tt> (e.g., <tt>QWindo&#119;sVistaStyl&#101;</tt> or <tt>&#81;Pl&#97;stiqueStyle</tt>).<sup class="docFootnote"><a class="docLink" href="#ch19fn01">[*]</a></sup><a name="any subclassing"></a> &#66;ecause creating styl&#101; sheets doesn't involve any subcla&#115;sing, th&#101;y a&#114;e ideal for minor c&#117;stomizations to e&#120;isting widgets. &#70;or example, suppose we want &#116;o use yellow as the background color of all <tt>QLi&#110;eEdit</tt><a name="following style"></a>s in an application. This could be accomplished using &#116;he follo&#119;ing style sh&#101;et:</p><blockquote><p class="docFootnote"><sup><a name="ch19fn01">[*]</a></sup> &#83;tyle &#115;heets are not s&#117;pported for <tt>QMacStyle</tt><a name="will be"></a> i&#110; Qt 4.3. It is expected that thi&#115; will be &#97;ddressed &#105;n a future rele&#97;se.</p></blockquote>
<div class="docText"><pre>QLineEdit {
    background-color: yellow;
}</pre></div><br />
<p class="docText">In CSS-speak, <tt>&#81;LineEdit</tt> is called a &#115;elector, <tt>background-color</tt> is an a&#116;tribute, and <tt>yellow</tt> is a value.</p>
<p class="docText"><a name="results than"></a>For this kind of cu&#115;tomization, using style sheets produces m&#111;re &#114;eliab&#108;e results t&#104;an fid&#100;ling with &#116;he widget's palette. Th&#105;s is because a <tt>QPalette</tt>'s ent&#114;ies (<tt>Ba&#115;e</tt>, <tt>Butto&#110;</tt>, <tt>Highligh&#116;</tt><a name="by different"></a>, etc.) are used diff&#101;rently by different &#115;tyles. For example, <tt>QWindowsStyle</tt> u&#115;es the <tt>Base</tt><a name="to fill"></a> palette entry to fill the backgroun&#100; of a read-only combobox, whereas <tt>QPlastiqueStyle</tt><a name="uses the"></a> &#117;ses the <tt>Bu&#116;ton</tt><a name="this purpose"></a> entr&#121; fo&#114; this p&#117;rpose. Furthermore, &#99;ertain styles use hard-c&#111;ded images to render cert&#97;in elemen&#116;s, by-pass&#105;ng the palette ent&#105;rely. In contrast, sty&#108;e sheets guarantee that no matter which <tt>&#81;Style</tt><a name="the colors"></a> is active, the co&#108;ors specified will be the ones used.</p>
<p class="docText"><tt>QApplication::setStyleSh&#101;et()</tt> sets a style sheet for the entire application:</p>
<div class="docText"><pre>qApp-&gt;setStyleSheet("QLineEdit { background-color: yellow; }");</pre></div><br />
<p class="docText"><a name="iddle1146"></a><a name="iddle1280"></a><a name="iddle2825"></a><a name="iddle2946"></a><a name="iddle4143"></a><a name="iddle4251"></a><a name="iddle4829"></a><a name="iddle6605"></a><a name="iddle6944"></a><a name="iddle6945"></a><a name="iddle7091"></a><a name="iddle7273"></a><a name="iddle7340"></a><a name="iddle8208"></a><a name="widget and"></a>&#87;e can also &#115;et a sty&#108;e sheet on a &#119;idget and it&#115; children u&#115;ing <tt>QWidget::s&#101;tStyleSheet()</tt>. For example:</p>
<div class="docText"><pre>dialog-&gt;setStyleSheet("QLineEdit { background-color: yellow; }");</pre></div><br />
<p class="docText"><a name="sheet directly"></a>If we s&#101;t t&#104;e styl&#101; sheet &#100;irectly &#111;n a <tt>QLineEdit</tt>, we can om&#105;t both the <tt>QLineEdit</tt> selector and th&#101; braces:</p>
<div class="docText"><pre>lineEdit-&gt;setStyleSheet("background-color: yellow;");</pre></div><br />
<p class="docText"><a name="a single"></a>So far, we have set only a single property on &#97; single class of widget. In practice, style &#114;ules a&#114;e ofte&#110; c&#111;mb&#105;ned. For exa&#109;ple, the following &#114;ule sets the foreground a&#110;d &#98;ackground &#99;olors of six widget class&#101;s and &#116;heir subclasses:</p>
<div class="docText"><pre>QCheckBox, QComboBox, QLineEdit, QListView, QRadioButton, QSpinBox {
    color: #050505;
    background-color: yellow;
}</pre></div><br />
<p class="docText"><a name="string in"></a>Colors can be sp&#101;cified by name, by an HTML-style st&#114;ing in <tt>#</tt><span class="docEmphasis"><tt>RRGGBB</tt></span> format, or by an RGB o&#114; RGBA value:</p>
<div class="docText"><pre>QLineEdit {
    color: rgb(0, 88, 152);
    background-color: rgba(97%, 80%, 9%, 50%);
}</pre></div><br />
<p class="docText"><a name="recognized by"></a>When using color names, we can use any name th&#97;t is recog&#110;i&#122;ed b&#121; th&#101; <tt>QColo&#114;::setNamedColor()</tt><a name="specify a"></a> function. For RGB, &#119;e must specify a red, a green, and a blue c&#111;mp&#111;ne&#110;t, eac&#104; on a scale of 0 to 255 or 0% &#116;o 100%. RGBA additionally lets us spec&#105;fy an alpha value as the fourth compon&#101;nt of the color, which corresponds to the col&#111;r's opacity. Instead of a uniform color, we can also speci&#102;y a p&#97;lette ent&#114;y or a g&#114;adien&#116;:</p>
<div class="docText"><pre>QLineEdit {
    color: palette(Base);
    background-color: qlineargradient(x1: 0, y1: 0, x2: 1, y2: 1,
                                      stop: 0 white, stop: 0.4 gray,
                                      stop: 1 green);
}</pre></div><br />
<p class="docText"><a name="types of"></a>The three ty&#112;es of gradi&#101;nts described in <a class="docLink" href="ch08.html#ch08">Chapter 8</a> (p. <a class="docLink" href="ch08lev1sec1.html#ch08fig06">184</a><a name="are available"></a>) are available as <tt>qline&#97;rgradien&#116;()</tt>, <tt>qradial&#103;radient()</tt>, &#97;nd <tt>qconicalgradien&#116;()</tt><a name="is explained"></a>. The syntax is explained in the styl&#101; sheet reference do&#99;umentation.</p>
<p class="docText"><a name="the"></a>Using the <tt>background-image</tt> propert&#121;, we can specify an image for the background:</p>
<div class="docText"><pre>QLineEdit {
    color: rgb(0, 88, 152);
    background-image: url(:/images/yellow-bg.png);
}</pre></div><br />
<p class="docText"><a name="iddle4099"></a><a name="iddle4106"></a><a name="iddle4544"></a><a name="iddle8580"></a><a name="of the"></a>By default, the back&#103;roun&#100; i&#109;age is roote&#100; i&#110; the top-l&#101;ft corner of the widget (exclu&#100;ing any margin specified u&#115;ing <tt>mar&#103;in</tt><a name="vertically to"></a>) an&#100; is repeat&#101;d hori&#122;ontally and vertically to fill th&#101; entire widget. This can be configur&#101;d using the <tt>background-position</tt> and <tt>background-&#114;epeat</tt> attributes. For example:</p>
<div class="docText"><pre>QLineEdit {
    background-image: url(:/images/yellow-bg.png);
    background-position: top right;
    background-repeat: repeat-y;
}</pre></div><br />
<p class="docText"><a name="background color"></a>If we specify both a background image and &#97; backgrou&#110;d &#99;olor, the bac&#107;ground co&#108;or will shine &#116;hrough the semi-transpar&#101;nt areas of the image.</p>
<p class="docText"><a name="used have"></a>So far, all of the sel&#101;ct&#111;rs &#119;e have used have been cl&#97;ss names. There ar&#101; several other selectors that &#119;e can use; they are listed in <a class="docLink" href="#ch19fig02">Figure 19.2</a>. For e&#120;ample, if we want to use specific fore&#103;round colors for <span class="docEmphRomanAlt">OK</span> and <span class="docEmphRomanAlt">Cancel</span> buttons, we ca&#110; w&#114;ite</p>
<a name="ch19fig02"></a><p><table cellspacing="0" class="allBorders" border="1"><caption><h5 class="docTableTitle">Fi&#103;ure 19.2. S&#116;yle shee&#116; selectors</h5></caption><colgroup align="left" span="3"><col width="100" /><col width="100" /><col width="350" /></colgroup><thead><tr><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">Sele&#99;tor</th><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">Example</th><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">Matched Widg&#101;ts</th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Universal</span></td><td class="docTableCell" align="left" valign="top"><tt>*</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Any widget</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Type</span></td><td class="docTableCell" align="left" valign="top"><tt>&#81;Di&#97;l</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Instanc&#101;s of a gi&#118;en class, including subc&#108;asses</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Class</span></td><td class="docTableCell" align="left" valign="top"><tt>.QDial</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Instances of &#97; given class, excluding subclas&#115;es</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">ID</span></td><td class="docTableCell" align="left" valign="top"><tt>QDial#ageDial</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Widgets with the given o&#98;ject name</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Qt property</span></td><td class="docTableCell" align="left" valign="top"><tt>QDial[y="0"]</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Widgets with certain proper&#116;ies set t&#111; gi&#118;en values</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">C&#104;ild</span></td><td class="docTableCell" align="left" valign="top"><tt>QF&#114;ame &gt; QDial</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Widg&#101;ts that are direct ch&#105;ldren of the given widgets</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Descend&#97;nt</span></td><td class="docTableCell" align="left" valign="top"><tt>QFrame &#81;Di&#97;l</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Widgets that are d&#101;scend&#97;nts of the given widgets</span></td></tr></table></p><br />
<div class="docText"><pre>QPushButton[text="OK"] {
    color: green;
}

QPushButton[text="Cancel"] {
    color: red;
}</pre></div><br />
<p class="docText"><a name="bear in"></a>This selecto&#114; syntax works for any Qt p&#114;operty, although we must bear in mind that style sh&#101;ets don't notice when a property changes behind their bac&#107;. Selector&#115; can als&#111; be &#99;ombined in v&#97;rious ways; for exa&#109;ple, to select all <tt>QPushButto&#110;</tt>s called &quot;okButton&quot; whose <tt>x</tt> and <tt>&#121;</tt><a name="that are"></a> pr&#111;pe&#114;ties are 0 and t&#104;at are di&#114;ect children of a <tt>QFrame</tt><a name="can write"></a> ca&#108;led &quot;frame&quot;, we can write</p>
<div class="docText"><pre>QFrame#frame &gt; QPushButton[x="0"][y="0"]#okButton {
    ...
}</pre></div><br />
<p class="docText"><a name="iddle1422"></a><a name="iddle1545"></a><a name="iddle2329"></a><a name="iddle3752"></a><a name="iddle4090"></a><a name="iddle4812"></a><a name="iddle5470"></a><a name="iddle7290"></a><a name="iddle8557"></a><a name="In an"></a>In an applica&#116;ion that presents large forms with lo&#116;s of line editors and comboboxes, such as &#116;hose use&#100; b&#121; va&#114;ious b&#117;reaucracies, it is &#99;ommon to use a yellow background col&#111;r for mandatory fields. Let's suppos&#101; th&#97;t we want t&#111; apply t&#104;is convention to o&#117;r application. First, we would start wi&#116;h this style sheet:</p>
<div class="docText"><pre>*[mandatoryField="true"] {
    background-color: yellow;
}</pre></div><br />
<p class="docText"><a name="is no"></a>Although there &#105;s no <tt>mandatoryField</tt><a name="defined anywhere"></a> property de&#102;ined anywhere in Qt, we can easily create on&#101; by &#99;alling <tt>QObj&#101;ct::&#115;etProp&#101;rty()</tt><a name="dynamically creates"></a>. St&#97;rting with Qt 4.2, setting the v&#97;lue of a non-existent prope&#114;ty dyn&#97;mically c&#114;eates that prop&#101;rty. Fo&#114; example:</p>
<div class="docText"><pre>nameLineEdit-&gt;setProperty("mandatoryField", true);
genderComboBox-&gt;setProperty("mandatoryField", true);
ageSpinBox-&gt;setProperty("mandatoryField", true);</pre></div><br />
<p class="docText"><a name="useful for"></a>Style sheets are not onl&#121; useful for controlling colors. They al&#115;o let us perform various adjustments to th&#101; size and position of widget e&#108;ements. For &#101;xa&#109;ple, the foll&#111;wi&#110;g rules c&#97;n be used to increase the si&#122;e of checkboxes and radio button indi&#99;ators to 20 x 20 pix&#101;ls, &#97;nd ensure that ther&#101; are 8 pi&#120;els between the indicator and the &#97;ssociated text:</p>
<div class="docText"><pre>QCheckBox::indicator, QRadioButton::indicator {
    width: 20px;
    height: 20px;
}
QCheckBox, QRadioButton {
    spacing: 8px;
}</pre></div><br />
<p class="docText"><a name="written only"></a>Notice the sele&#99;tor syntax for the first rule. Had we written only <tt>QCheckBo&#120;</tt> instead of <tt>QCheckBox::indicator</tt><a name="the entire"></a>, w&#101; wo&#117;ld have sp&#101;ci&#102;ied &#116;he dimensions of &#116;he entire widg&#101;t instead of those of t&#104;e indi&#99;ator. The fir&#115;t rule is illust&#114;ated in <a class="docLink" href="#ch19fig03">Figure 19.3</a>.</p>
<a name="ch19fig03"></a><p><center>

<h5 class="docFigureTitle">F&#105;gure 19.3. Setting a <tt>QCheckBox</tt>'s &#105;ndicator size</h5>

<p class="docText">
<img border="0" id="" width="357" height="215" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMDM-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="iddle3066"></a>Subcontrols su&#99;h as <tt>::indicator</tt> can be styled in much the sam&#101; way as widgets. <a class="docLink" href="#ch19fig04">Figure 19.4</a> lists some of the subcontrols su&#112;por&#116;ed by Qt.</p>
<a name="ch19fig04"></a><p><table cellspacing="0" class="allBorders" border="1"><caption><h5 class="docTableTitle">F&#105;gure 19.4. Th&#101; mo&#115;t common c&#117;stomizable subcontrols</h5></caption><colgroup align="left" span="2"><col width="175" /><col width="375" /></colgroup><thead><tr><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">&#83;ubcontrol</th><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">Description</th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><tt>::indicator</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A &#99;heckbox, rad&#105;o butto&#110;, checkab&#108;e menu item, or c&#104;eckable group box's indicator</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::menu-i&#110;dicator</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A push button's menu indicato&#114;</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::item</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A menu, menu bar, or status bar item</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::up-button</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A spi&#110; box or scroll bar's up button</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::down-button</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A spin b&#111;x o&#114; scrol&#108; bar's down b&#117;tton</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::up-ar&#114;ow</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A spin box, sc&#114;oll bar, or heade&#114; view's up arrow</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::down-arrow</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A spin box, s&#99;roll bar, hea&#100;e&#114; view, or combo&#98;ox's down arrow</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::dro&#112;-down</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A combobox's drop-d&#111;wn arrow</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>::title</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">A group box's &#116;itle</span></td></tr></table></p><br />
<p class="docText"><a name="widget states"></a>In addition to subcontrols, a style shee&#116; can refer to specific widget states. For example, we may wa&#110;t &#116;o render &#116;he check&#98;ox's text in &#119;hite when the mo&#117;se hovers over it by s&#112;ecifying the <tt>:hover</tt> state:</p>
<div class="docText"><pre>QCheckBox:hover {
    color: white;
}</pre></div><br />
<p class="docText"><a name="by using"></a>&#83;tate&#115; are sig&#110;ified &#98;y using a sing&#108;e colon, whereas subcontrols are sign&#105;fied by using two colons. We can list &#115;everal states one after another, each separ&#97;ted by a colon. In such cases, the rule will apply only when the widget is &#105;n <span class="docEmphasis">all</span><a name="For example"></a> th&#101; sp&#101;ci&#102;ied &#115;tates. For e&#120;ample, the followi&#110;g rule is applied only if the mouse is hov&#101;ri&#110;g &#111;ver a chec&#107;ed checkbox:</p>
<div class="docText"><pre>QCheckBox:checked:hover {
    color: white;
}</pre></div><br />
<p class="docText"><a name="If we"></a>I&#102; we want the rule to apply when <span class="docEmphasis">&#97;ny</span><a name="states is"></a> of the states is true, we can use multiple sel&#101;ctors, using commas to separate them:</p>
<div class="docText"><pre>QCheckBox:hover, QCheckBox:checked {
    color: white;
}</pre></div><br />
<p class="docText"><a name="negation is"></a>Logical &#110;egation is achieved by using an ex&#99;lamation ma&#114;k:</p>
<div class="docText"><pre>QCheckBox:!checked {
    color: blue;
}</pre></div><br />
<p class="docText"><a name="iddle3549"></a><a name="iddle5266"></a>Stat&#101;s c&#97;n be combi&#110;ed w&#105;th subcontrols:</p>
<div class="docText"><pre>QComboBox::drop-down:hover {
    image: url(:/images/downarrow_bright.png);
}</pre></div><br />
<p class="docText"><a class="docLink" href="#ch19fig05">Figure 19.5</a> li&#115;ts the style sheet states that are available.</p>
<a name="ch19fig05"></a><p><table cellspacing="0" class="allBorders" border="1"><caption><h5 class="docTableTitle">&#70;i&#103;ure 19.5. S&#111;me of t&#104;e widget s&#116;ates accessible to style shee&#116;s</h5></caption><colgroup align="left" span="2"><col width="150" /><col width="350" /></colgroup><thead><tr><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">State</th><th scope="col" class="docTableCell thead" align="center" valign="top" style="background-color:#E6E6E6">Description</th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><tt>:disabled</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">&#84;he widget is disabled</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:enabled</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The wid&#103;et is enabled</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:focus</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The widget has input focus</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:hover</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The &#109;ouse is hove&#114;ing ov&#101;r t&#104;e widg&#101;t</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:pressed</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">&#84;he widget is being press&#101;d using the mouse</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:checked</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The butt&#111;n i&#115; checke&#100;</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:unc&#104;ecked</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The but&#116;on is unchecked</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:indeterminate</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The bu&#116;ton is partially checked</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:o&#112;en</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The widget is in an open or expan&#100;ed state</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:closed</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The widget is in a clo&#115;ed or co&#108;lapsed sta&#116;e</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:on</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">The w&#105;dget is &quot;&#111;n&quot;</span></td></tr><tr><td class="docTableCell" align="left" valign="top"><tt>:off</tt></td><td class="docTableCell" align="left" valign="top"><span class="docEmphRomanAlt">Th&#101; widget i&#115; &quot;off&quot;</span></td></tr></table></p><br />
<p class="docText"><a name="techniques to"></a>Style sheets can also be used toge&#116;her with &#111;th&#101;r tech&#110;iques t&#111; perform more complex cust&#111;mizations. For examp&#108;e, suppose we want to position a tiny &quot;eras&#101;&quot; button inside a <tt>QLineEdit</tt>'s frame, to the ri&#103;ht of &#116;he <tt>QLine&#69;dit</tt>'s text. Th&#105;s invol&#118;es creating an <tt>Er&#97;seButton</tt><a name="of the"></a> class, and placing it on top &#111;f the <tt>QLineEdit</tt><a name="that the"></a> (e.g., using &#108;ayouts), but &#97;lso reser&#118;ing some space for the &#98;utton, so that the type&#100;-in text cannot colli&#100;e with the erase button. Doing this &#98;y subclassing <tt>QStyle</tt><a name="subclass every"></a> would be inconveni&#101;nt, because we would have to subclass every style in Qt &#116;hat migh&#116; be used b&#121; th&#101; ap&#112;lication (<tt>QWin&#100;owsVistaStyle</tt>, <tt>QP&#108;astiqueStyle</tt>, etc.). Using style &#115;heets, t&#104;e foll&#111;wing &#114;ule does t&#104;e trick:</p>
<div class="docText"><pre>QLineEdit {
    padding: 0px 15px 0px 0px;
}</pre></div><br />
<p class="docText">The <tt>padding</tt><a name="The padding"></a> prop&#101;rty lets us specify the top, r&#105;ght, bottom, and left padding of the wi&#100;get. The padding is inserted between &#116;he <tt>QLine&#69;dit</tt><a name="For convenience"></a>'s text an&#100; i&#116;s frame. F&#111;r conv&#101;nience, CS&#83; also defines <tt>padding-top</tt>, <tt>p&#97;dding-rig&#104;t</tt>, <tt>padd&#105;ng-bottom</tt>, a&#110;d <tt>padd&#105;ng-left</tt><a name="we want"></a>, for when we want to set o&#110;ly one padding valu&#101;. For example:</p>
<div class="docText"><pre>QLineEdit {
    padding-right: 15px;
}</pre></div><br />
<p class="docText"><a name="iddle1364"></a><a name="iddle1376"></a><a name="iddle1472"></a><a name="iddle1845"></a><a name="iddle2572"></a><a name="iddle3473"></a><a name="iddle3763"></a><a name="iddle4207"></a><a name="iddle5253"></a><a name="Like most"></a>Like most Qt widgets that are &#99;ustomizable using style sheets, <tt>QLineEdi&#116;</tt><a name="box model"></a> support&#115; the box &#109;odel depict&#101;d i&#110; <a class="docLink" href="#ch19fig06">Figure 19.6</a><a name="model specifies"></a>. This mod&#101;l specifies &#102;our rectangles that affect &#116;he layou&#116; and rend&#101;ring &#111;f a styled w&#105;dget:</p>
<div style="font-weight:bold"><ol class="docList" type="1"><li><div style="font-weight:normal"><p class="docList">The <span class="docEmphasis">content&#115; rectangle</span><a name="of the"></a> is the innermost rectangle. This is wh&#101;re the actual contents of the widget (e.g., the text or im&#97;ge) is painted.</p></div></li><li><div style="font-weight:normal"><p class="docList">The <span class="docEmphasis">padding rectangle</span><a name="into account"></a> encloses the con&#116;ents rec&#116;angle. It &#116;akes int&#111; ac&#99;ount any paddi&#110;g specified u&#115;ing the <tt>padding</tt> property.</p></div></li><li><div style="font-weight:normal"><p class="docList">Th&#101; <span class="docEmphasis">bo&#114;der re&#99;tangle</span> enclose&#115; the paddi&#110;g rectangle. It reserv&#101;s space for the border.</p></div></li><li><div style="font-weight:normal"><p class="docList">T&#104;e <span class="docEmphasis">margin rectangle</span><a name="takes into"></a> is the outermost &#114;ectangle. It encloses the border rectangle and takes into a&#99;count any sp&#101;ci&#102;ied &#109;argin.</p></div></li></ol></div>
<a name="ch19fig06"></a><p><center>

<h5 class="docFigureTitle">Figur&#101; 19.6. The CS&#83; box model</h5>

<p class="docText">
<img border="0" id="" width="310" height="223" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMDY-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="and no"></a>For a plain &#119;idget with no padding, no border, an&#100; n&#111; ma&#114;gin, the fo&#117;r rectangles coincid&#101; exactly.</p>
<p class="docText"><a name="custom style"></a>We will now present &#97; style sheet that implements a custom sty&#108;e called Candy. <a class="docLink" href="#ch19fig07">Figure 19.7</a><a name="of Candy"></a> shows a selection o&#102; Candy-styled widgets. The Candy style &#100;e&#102;ine&#115; a custo&#109; look and fee&#108; for <tt>QLineEdi&#116;</tt>s, <tt>QListView</tt>s, <tt>QPushButto&#110;</tt>s, and <tt>QComboBox</tt><a name="box model"></a>es, using the box mo&#100;e&#108; presented &#105;n <a class="docLink" href="#ch19fig06">Figure 19.6</a><a name="We will"></a>. We will present th&#101; style &#115;heet piece by piece; the ent&#105;re style sheet is available as <tt>qss/&#99;andy.qss</tt><a name="Candy example"></a> in the Candy example's directory &#115;upplied with the book's examples.</p>
<a name="ch19fig07"></a><p><center>

<h5 class="docFigureTitle"><a name="Widgets in"></a>Figure 19.7. Wi&#100;g&#101;ts &#105;n the Ca&#110;d&#121; style</h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83dHRwdWFodGduYnNoL2Njc2lkeXVqb24tYXBwXy5s.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="125" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83dGdwdWFodG4vc2JoaWRjY3N5dW9uLWpwLnA-.jpg" alt="" /></p>
</center></p><br />
<p class="docText">&#84;he widgets are used &#105;n the dialog shown in <a class="docLink" href="ch19.html#ch19fig01">Figure 19.1</a><a name="the following"></a>. The dialog itself has &#97; backgrou&#110;d &#105;mage set by the fo&#108;lowing rule:</p>
<div class="docText"><pre>QDialog {
    background-image: url(:/images/background.png);     <span class="docEmphRomanAlt">[R1]</span>
}</pre></div><br />
<p class="docText">Th&#101; following rule sets the <tt>col&#111;r</tt> and <tt>font</tt> attributes for <tt>QLa&#98;el</tt>s:</p>
<div class="docText"><pre>QLabel {
    font: 9pt;
    color: rgb(0, 0, 127);                              <span class="docEmphRomanAlt">[R2]</span>
}</pre></div><br />
<p class="docText"><a name="iddle1365"></a><a name="iddle3550"></a><a name="iddle3585"></a><a name="iddle4208"></a><a name="iddle5267"></a><a name="iddle5285"></a><a name="look of"></a>The next rule defines the look of the dialog's <tt>QLineEdit</tt> &#97;nd of its <tt>QListView</tt>:</p>
<div class="docText"><pre>QLineEdit,
QListView {
    color: rgb(127, 0, 63);
    background-color: rgb(255, 255, 241);
    selection-color: white;                             <span class="docEmphRomanAlt">[R3]</span>
    selection-background-color: rgb(191, 31, 127);
    border: 2px groove gray;
    border-radius: 10px;
    padding: 2px 4px;
}</pre></div><br />
<p class="docText">To make the <tt>QLineEdit</tt> and <tt>QListView</tt><a name="colors for"></a> really stand ou&#116;, we have s&#112;eci&#102;ied &#99;ustom foreg&#114;ound and &#98;ackground colors for normal an&#100; selected text. In addition, we &#104;ave sp&#101;ci&#102;ied a gray 2-pixe&#108;-wide &quot;grooved&quot; b&#111;rder with the <tt>bord&#101;r</tt> attribute. Instead of using <tt>border</tt>, we co&#117;ld have set <tt>border-width</tt>, <tt>border-style</tt>, and <tt>border-&#99;olor</tt><a name="a"></a> individually. We can round a border's corners by sp&#101;ci&#102;yin&#103; a <tt>bor&#100;e&#114;-radius</tt>, and we h&#97;ve done so here using a rad&#105;us of 10 pixels. <a class="docLink" href="#ch19fig08">Figure 19.8</a><a name="to the"></a> provides a schematic representa&#116;ion of th&#101; ef&#102;ects of our c&#104;anges to the wid&#103;ets' border and &#112;adding attributes. To ensure tha&#116; the widget's contents don't collide <a name="iddle1281"></a><a name="iddle1363"></a><a name="we specify"></a>with the border's &#114;ounded corners, we specify an internal padding of 2 &#112;ixe&#108;s vertical&#108;y and 4 pixel&#115; horizo&#110;tally. For <tt>QL&#105;stView</tt><a name="padding doesn"></a>s, the vertical pad&#100;ing doesn't look qui&#116;e right, s&#111; we &#111;verride i&#116; as follows:</p>
<div class="docText"><pre>QListView {
    padding: 5px 4px;                                   <span class="docEmphRomanAlt">[R4]</span>
}</pre></div><br />
<a name="ch19fig08"></a><p><center>

<h5 class="docFigureTitle"><a name="Figure "></a>Figure 19.8. Str&#117;cture of a <tt>QLineEdit</tt></h5>

<p class="docText">
<img border="0" id="" width="335" height="183" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMDg-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="attribute is"></a>When an a&#116;tribute is set by several rules that hav&#101; the same selector, the last rule is the one th&#97;t is applied.</p>
<p class="docText"><a name="styling"></a>For styling <tt>QPushButton</tt><a name="the button"></a>s, we will use a compl&#101;te&#108;y differen&#116; approac&#104;. Inste&#97;d of drawing &#116;he button using sty&#108;e sheet rules, we will use a ready-ma&#100;e &#105;mage as &#116;he background. A&#108;so, to make the butt&#111;n scalable, the button backgroun&#100; is defined using the CSS <span class="docEmphasis">border &#105;mage</span> mechanism.</p>
<p class="docText"><a name="using"></a>Unlike a background image specifi&#101;d using <tt>background-image</tt><a name="in"></a>, a border image is cut into a 3 x 3 grid, a&#115; shown i&#110; <a class="docLink" href="#ch19fig09">Figure 19.9</a><a name="four corners"></a>. W&#104;en fil&#108;ing the bac&#107;ground of a widget, th&#101; four corners (cells <span class="docEmphasis">A</span>, <span class="docEmphasis">C</span>, <span class="docEmphasis">G</span>, and <span class="docEmphasis">&#73;</span><a name="are stretched"></a> in the diagram) are taken as is, whereas &#116;he other &#102;ive &#99;ells are stretc&#104;ed, or tiled, to f&#105;ll the available space.</p>
<a name="ch19fig09"></a><p><center>

<h5 class="docFigureTitle">Figure 19.9. Border im&#97;ge cuts</h5>

<p class="docText">
<img border="0" id="" width="410" height="187" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMDk-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="specified using"></a>Border images are specified &#117;sing the <tt>border-image</tt><a name="us to"></a> property, which requ&#105;res us to specify an image file name and the four &quot;&#99;uts&quot; that def&#105;ne the n&#105;ne cell&#115;. The cut&#115; are defined as p&#105;xel distances from t&#104;e top, right, bottom, and left edges. A <tt>b&#111;rd&#101;r.p&#110;g</tt><a name="border image"></a> border imag&#101; with cuts at 4, 8, 12, &#97;nd 16 pixels from the top, right, bo&#116;tom, and left edges woul&#100; be specified as</p>
<div class="docText"><pre>border-image: url(border.png) 4 8 12 16;</pre></div><br />
<p class="docText"><a name="a border"></a>When using &#97; border image, we must also set the <tt>border-width</tt> attri&#98;ute explic&#105;tly. Nor&#109;ally, <tt>border-&#119;idth</tt><a name="correspond to"></a> should &#99;orrespond to wh&#101;re the cuts fall; otherw&#105;se, the corner cells will be &#115;tretch&#101;d o&#114; shrunk to fit the <tt>&#98;order-width</tt>. For th&#101; <tt>border.png</tt> example, w&#101; would specify the border wi&#100;ths as follows:</p>
<div class="docText"><pre>border-width: 4px 8px 12px 16px;</pre></div><br />
<p class="docText"><a name="let us"></a>Now that we know how the bord&#101;r image mechanism works, let us see how it is <a name="iddle1282"></a><a name="iddle1436"></a><a name="iddle4574"></a><a name="iddle5645"></a>used for styling &#67;andy <tt>QPus&#104;Butto&#110;</tt><a name="define how"></a>s. &#72;ere &#97;re the rules t&#104;at define how push button&#115; are rendered in their normal st&#97;te:</p>
<div class="docText"><pre>QPushButton {
    color: white;
    font: bold 10pt;
    border-image: url(:/images/button.png) 16;
    border-width: 16px;                                   <span class="docEmphRomanAlt">[R5]</span>
    padding: -16px 0px;
    min-height: 32px;
    min-width: 60px;
}</pre></div><br />
<p class="docText">In the C&#97;ndy style &#115;heet, the fo&#117;r cuts for a <tt>QPushBut&#116;on</tt><a name="of a"></a>'s border image are located at 16 pix&#101;ls from the edges of a 34 x 34 pixe&#108; border image, as shown in <a class="docLink" href="#ch19fig10">Figure 19.10 (a)</a><a name="need to"></a>. Because the four cuts are unif&#111;rm, we only need to write &quot;16&quot; for the cuts and &quot;16px&quot; for the bord&#101;r w&#105;dth.</p>
<p class="docText">In t&#104;e <tt>QPus&#104;Butto&#110;</tt> exa&#109;ple shown in <a class="docLink" href="#ch19fig10">Figure 19.10 (b)</a>, the border image &#99;ells corresponding to <span class="docEmphasis">D</span>, <span class="docEmphasis">E</span>, and <span class="docEmphasis">F</span><a name="to need"></a> were dropped &#98;ecause the &#114;esize&#100; button was n&#111;t tall enough &#116;o need them, and cells <span class="docEmphasis">B</span> and <span class="docEmphasis">H</span><a name="to occupy"></a> w&#101;re horizontally stretched to occup&#121; the extra width.</p>
<a name="ch19fig10"></a><p><center>

<h5 class="docFigureTitle"><a name="image for"></a>Figure 19.10. Bord&#101;r image for <tt>QPushButton</tt></h5>

<p class="docText">
<img border="0" id="" width="494" height="207" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMTA-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="The standard"></a>The standard use o&#102; a bo&#114;der im&#97;ge is to pr&#111;vi&#100;e a border ar&#111;und a widget, with t&#104;e widget inside the bord&#101;r. B&#117;t we have s&#117;bverted the bord&#101;r image mechani&#115;m and used it to create th&#101; background of the widget itself. As a &#114;esult, cell <span class="docEmphasis">E</span><a name="and the"></a> has been dropped, and the paddi&#110;g rectangle has height 0. To make some room for the push &#98;utton's tex&#116;, we speci&#102;y a v&#101;rt&#105;cal paddi&#110;g of -16 pixels. <a class="docLink" href="#ch19fig11">Figure 19.11</a><a name="the situation"></a> il&#108;ustrates the situation. If we had used t&#104;e bord&#101;r i&#109;age mechanism to def&#105;ne an actual bord&#101;r, we probably wouldn't &#119;ant the text to collide with it—but beca&#117;se we are using it to create a scalable back&#103;round, we want the text to go on t&#111;p o&#102; it r&#97;ther than &#105;nside i&#116;.</p>

<p class="docText"></p><a name="ch19fig11"></a><p><center>

<h5 class="docFigureTitle">Figure 19.11. Structure &#111;f a <tt>QPushButto&#110;</tt></h5>

<p class="docText">
<img border="0" id="" width="495" height="135" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMTE-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="iddle1690"></a><a name="iddle3067"></a><a name="iddle4837"></a>Using <tt>min-width</tt> and <tt>min-height</tt><a name="values chosen"></a>, we set the min&#105;mum siz&#101; of &#116;he push button's con&#116;ents. The values chos&#101;n here ensure that th&#101;re is enough room for the bord&#101;r image corners and that an <span class="docEmphRomanAlt">OK</span><a name="wider than"></a> button is made a bit wide&#114; than necessary, to make it look better next &#116;o the <span class="docEmphRomanAlt">Can&#99;el</span> button.</p>
<p class="docText">Th&#101; pr&#101;ce&#100;ing <tt>&#81;PushButton</tt><a name="a few"></a> r&#117;les apply to all push buttons. We will now &#100;e&#102;ine &#97; few extra rules t&#104;at apply only when &#98;uttons are in certain states.</p>
<div class="docText"><pre>QPushButton:hover {
    border-image: url(:/images/button-hover.png) 16;           <span class="docEmphRomanAlt">[R6]</span>
}</pre></div><br />
<p class="docText">When th&#101; mouse pointer hovers over a <tt>QPu&#115;hButton</tt>, the <tt>:hover</tt> state evaluates to <tt>tr&#117;e</tt><a name="rule that"></a> and the specified rule overrides any oth&#101;r r&#117;le that ha&#115; a less s&#112;eci&#102;ic sele&#99;tor. Here, we use this tech&#110;ique to specify a slightly brighter im&#97;ge as the b&#111;rd&#101;r image, to obtai&#110; a ni&#99;e hover effect. The other <tt>QPushButto&#110;</tt> attributes that were specified ea&#114;lier continue to apply; only th&#101; <tt>border-image</tt> attribute changes.</p>
<div class="docText"><pre>QPushButton:pressed {
    color: lightgray;
    border-image: url(:/images/button-pressed.png) 16;         <span class="docEmphRomanAlt">[R7]</span>
    padding-top: -15px;
    padding-bottom: -17px;
}</pre></div><br />
<p class="docText"><a name="color to"></a>When the user p&#114;esses &#97; push butt&#111;n, w&#101; ch&#97;nge the foregrou&#110;d color to light gray, we u&#115;e a darker border image, and we mo&#118;e the push b&#117;tton's tex&#116; down one pixe&#108; by tweaking the p&#97;dding.</p>
<p class="docText"><a name="rules will"></a>Our final style rules will cu&#115;tomize the appearance of <tt>QComboBox</tt><a name="off the"></a>es. To s&#104;ow off the control and precision we &#99;an achieve using style sheets, we will distinguish between read-&#111;nl&#121; an&#100; e&#100;i&#116;able comboboxes, as <a class="docLink" href="#ch19fig12">Figure 19.12</a><a name="comboboxes are"></a> s&#104;ows. Read-only comboboxes are &#114;endered as a <tt>QPushButton</tt><a name="down arrow"></a> with a down a&#114;row on &#116;he right, &#119;hereas editable combo&#98;oxes are made &#117;p of a <tt>QLineEdit</tt><a name="and of"></a>-like comp&#111;nent and of a small rounded button. It tu&#114;ns out that we can reuse most of the &#114;ules that we have already defined for <tt>Q&#76;ineEdit</tt>&#115;, <tt>QListV&#105;ew</tt>s, and <tt>&#81;Pu&#115;hButton</tt>s.</p>
<a name="ch19fig12"></a><p><center>

<h5 class="docFigureTitle">&#70;igure 19.12. <tt>QComboBox</tt> i&#110; the Candy style</h5>

<p class="docText">
<img border="0" id="" width="414" height="65" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83eW9wZWFobC5ub2FkL2Njc2lkeW5vLWMtbXhyb2JianBn.jpg" alt="" /></p>



</center></p><br />
<ul><li><p class="docList">The rul&#101; th&#97;t defines &#116;he look of a <tt>QL&#105;neEdit</tt> can be used to &#115;tyle editable combobo&#120;es:</p><div class="docText"><pre><span class="docEmphStrong">QComboBox:editable,</span>
QLineEdit,
QListView {
    color: rgb(127, 0, 63);
    background-color: rgb(255, 255, 241);
    selection-color: white;                                    <span class="docEmphRomanAlt">[R3´]</span>
    selection-background-color: rgb(191, 31, 127);
    border: 2px groove gray;
    border-radius: 10px;
    padding: 2px 4px;
}</pre></div></li><li><p class="docList"><a name="iddle2302"></a><a name="iddle3068"></a>The rules that define the l&#111;ok of a <tt>QPushButton</tt><a name="to read"></a> in i&#116;s normal state can be extended to apply to read-only com&#98;oboxes:</p><div class="docText"><pre><span class="docEmphStrong">QComboBox:!editable,</span>
QPushButton {
    color: white;
    font: bold 10pt;
    border-image: url(:/images/button.png) 16;                 <span class="docEmphRomanAlt">[R5´]</span>
    border-width: 16px;
    padding: -16px 0px;
    min-height: 32px;
    min-width: 60px;
}</pre></div></li><li><p class="docList"><a name="over the"></a>Hov&#101;ri&#110;g &#111;ve&#114; a read-onl&#121; combobox or over the dr&#111;p-down button of an editable com&#98;obox shoul&#100; c&#104;ange the back&#103;round i&#109;age, just like it already does f&#111;r <tt>QPushButton</tt>:</p><div class="docText"><pre><span class="docEmphStrong">QComboBox:!editable:hover,</span>
<span class="docEmphStrong">QComboBox::drop-down:editable:hover,</span>
QPushButton:hover {
    border-image: url(:/images/button-hover.png) 16;           <span class="docEmphRomanAlt">[R6´]</span>
}</pre></div></li><li><p class="docList">Pressin&#103; a read-only combobox is like pr&#101;ssing a <tt>QPushButton</tt>:</p><div class="docText"><pre><span class="docEmphStrong">QComboBox:!editable:on,</span>
QPushButton:pressed {
    color: lightgray;
    border-image: url(:/images/button-pressed.png) 16;         <span class="docEmphRomanAlt">[R7´]</span>
    padding-top: -15px;
    padding-bottom: -17px;
}</pre></div></li></ul>
<p class="docText"><a name="iddle2303"></a><a name="styling consistent"></a>Reusing rules R3, R5, R6, and &#82;7 sav&#101;s t&#105;me and h&#101;lp&#115; keep our styli&#110;g consistent. But we have n&#111;t defined any &#114;ules t&#104;at wil&#108; draw the drop-d&#111;wn buttons, so w&#101; will create these no&#119;.</p>
<div class="docText"><pre>QComboBox::down-arrow {
    image: url(:/images/down-arrow.png);                       <span class="docEmphRomanAlt">[R8]</span>
}</pre></div><br />
<p class="docText"><a name="so that"></a>We provide our own down arrow image so that it is &#97; bit larger than the standard arrow.</p>
<div class="docText"><pre>QComboBox::down-arrow:on {
    top: 1px;                                                  <span class="docEmphRomanAlt">[R9]</span>
}</pre></div><br />
<p class="docText"><a name="one pixel"></a>If the combo&#98;ox is open, the down arrow is moved down one pixel.</p>
<div class="docText"><pre>QComboBox * {
    font: 9pt;                                                <span class="docEmphRomanAlt">[R10]</span>
}</pre></div><br />
<p class="docText"><a name="clicks a"></a>When the user c&#108;icks a comb&#111;bo&#120;, i&#116; display&#115; a list of ite&#109;s. Rule R10 ensures that the comb&#111;box's pop-up (or any &#111;th&#101;r c&#104;ild widg&#101;t) does&#110;'t inherit the larger font s&#105;ze that applies to the combobox by rule R5´.</p>
<div class="docText"><pre>QComboBox::drop-down:!editable {
    subcontrol-origin: padding;
    subcontrol-position: center right;
    width: 11px;                                              <span class="docEmphRomanAlt">[R11]</span>
    height: 6px;
    background: none;
}</pre></div><br />
<p class="docText">Using th&#101; <tt>subcontrol-origin</tt> and <tt>subcontrol-position</tt><a name="the drop"></a> at&#116;ributes, we position the drop-down arrow vertically cent&#101;re&#100; o&#110; t&#104;e righ&#116;-hand side of &#116;he padding rectan&#103;le used by read-only comboboxes. In a&#100;d&#105;tion, we &#97;lso set its size to &#99;orrespond to th&#101; size of the button's &#99;ontents, the 11 x 6 pixel <tt>down-arrow.png</tt><a name="and we"></a> image, and we di&#115;able its background because our dro&#112;-down button only consists of the drop-down arrow.</p>
<div class="docText"><pre>QComboBox:!editable {
    padding-right: 15px;                                      <span class="docEmphRomanAlt">[R12]</span>
}</pre></div><br />
<p class="docText"><a name="specify a"></a>For r&#101;ad-&#111;nl&#121; co&#109;boboxes, we s&#112;ecify a r&#105;ght padding &#111;f 15 pixels to ensure that the te&#120;t &#115;hown in &#116;he combobox doesn't o&#118;erlap with the drop-d&#111;wn arrow. <a class="docLink" href="#ch19fig13">Figure 19.13</a><a name="how these"></a> shows how these dimen&#115;ions interact with each other.</p>
<a name="ch19fig13"></a><p><center>

<h5 class="docFigureTitle">Figure 19.13. Struct&#117;re of a read-only <tt>QComboBo&#120;</tt></h5>
<p class="docText"><div class="st1"><a target="_blank" href="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83aXBfOWhnZnQvYWwxc2NpaWcuZjEz.jpg">[View full size image]</a></div><img border="0" id="" width="500" height="121" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMTM-.jpg" alt="" /></p>
</center></p><br />
<p class="docText"><a name="that it"></a>For editable comboboxes, we need to config&#117;re the dro&#112;-dow&#110; b&#117;tton so th&#97;t it looks like a tiny <tt>Q&#80;ushButton</tt>:</p>
<div class="docText"><pre>QComboBox::drop-down:editable {
    border-image: url(:/images/button.png) 16;
    border-width: 10px;
    subcontrol-origin: margin;
    subcontrol-position: center right;                        <span class="docEmphRomanAlt">[R13]</span>
    width: 7px;
    height: 6px;
}</pre></div><br />
<p class="docText">W&#101; specify <tt>button.png</tt><a name="specify a"></a> as the bor&#100;e&#114; image. &#72;owever, this tim&#101;, we specify &#97; border width of 10 pixels &#105;nstead of 16, to scale the image dow&#110; a bit, and specify a fixed size of the co&#110;tents of 7 pixels horizontally and 6 pixels vertical&#108;y. <a class="docLink" href="#ch19fig14">Figure 19.14</a> shows a sc&#104;emati&#99; of what we ha&#118;e done.</p>
<a name="ch19fig14"></a><p><center>

<h5 class="docFigureTitle">Figu&#114;e 19.14. The edi&#116;able <tt>QComboBox</tt>'s drop-do&#119;n button's border image</h5>

<p class="docText">
<img border="0" id="" width="409" height="219" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMTQ-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="for the"></a>If the combobo&#120; i&#115; open, we &#117;se a different, da&#114;ker image for the &#100;rop-down button:</p>
<div class="docText"><pre>QComboBox::drop-down:editable:open {
    border-image: url(:/images/button-pressed.png) 16;        <span class="docEmphRomanAlt">[R14]</span>
}</pre></div><br />
<p class="docText"><a name="iddle1988"></a><a name="iddle2379"></a><a name="iddle5971"></a><a name="iddle5993"></a><a name="iddle7858"></a><a name="iddle8602"></a><a name="of "></a>For e&#100;itable comboboxes, we specify a r&#105;ght margin of 29 pixels to provide space for the &#100;rop-down button, as shown on <a class="docLink" href="#ch19fig15">Figure 19.15</a>:</p>
<div class="docText"><pre>QComboBox:editable {
    margin-right: 29px;                                       <span class="docEmphRomanAlt">[R15]</span>
}</pre></div><br />
<a name="ch19fig15"></a><p><center>

<h5 class="docFigureTitle">Figure 19.15. St&#114;uctur&#101; of &#97;n editabl&#101; <tt>QC&#111;mboBo&#120;</tt></h5>

<p class="docText">
<img border="0" id="" width="414" height="182" src="images/NzlkOW1jM2FhMDc4L2lwdHJnZTFnMTRzOXIvMy83cC45aGZpZmcvaXMxaWNnMTU-.jpg" alt="" /></p>


</center></p><br />
<p class="docText"><a name="sheet is"></a>We have now finis&#104;ed creating our Candy style sheet. The st&#121;le &#115;heet is &#97;bout 100 lines long, an&#100; makes use of &#97; few custom images. The result is a highl&#121; distinctive dialog.</p>
<p class="docText"><a name="style using"></a>Creating a cus&#116;om style using style sheets can involv&#101; quite a lot of trial and error, especi&#97;lly for th&#111;se &#119;ho have not u&#115;ed CSS b&#101;fore. One o&#102; the main challenges wi&#116;h style sheets is that CSS conflict resolu&#116;ion and c&#97;scading d&#111;n't always giv&#101; intuitive r&#101;sults. For further details, see th&#101; online documentation at <a class="docLink" target="_blank" href="http://doc.trolltech.com/4.3/stylesheet.html">http://doc.trolltech.com/4.3/stylesheet.html</a><a name="style sheet"></a>. This descr&#105;bes Qt's style sheet support and provides l&#105;nks to the CSS specification.</p>

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch19lev1sec2.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>