<html>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>
<title>part01.html</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pref05.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch01.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<div style=""><div><a name="part01"></a>

<h1 class="docPartTitle" id="title-ID0EB6MM">Part I: Basic Qt</h1>
<blockquote>
<p class="docText">&nbsp;</p>
</blockquote><br />

<a name="ch01"></a>

<h2 id="title-ID0EHANM" class="docChapterTitle">1. Getting Started</h2>



<p class="docText">
<img border="0" id="" width="149" height="141" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzbnBpZV9nY3NoL29fcHIxaGMwdGFlZWoucHBy.jpg" alt="" /></p>



<ul><li><p class="docList"><a name="iddle1207"></a><a name="iddle1696"></a><a name="iddle1854"></a><a name="iddle2591"></a><a name="iddle2651"></a><a name="iddle2969"></a><a name="iddle3001"></a><a name="iddle3018"></a><a name="iddle3471"></a><a name="iddle3655"></a><a name="iddle3668"></a><a name="iddle4708"></a><a name="iddle4722"></a><a name="iddle4859"></a><a name="iddle5251"></a><a name="iddle6618"></a><a name="iddle7432"></a><a name="iddle8543"></a><span class="docEmphasis"><a class="docLink" href="ch01lev1sec1.html#ch01lev1sec1">Hello Qt</a></span></p></li><li><p class="docList"><span class="docEmphasis"><a class="docLink" href="ch01lev1sec2.html#ch01lev1sec2">Making Connections</a></span></p></li><li><p class="docList"><span class="docEmphasis"><a class="docLink" href="ch01lev1sec3.html#ch01lev1sec3">Laying Out Widgets</a></span></p></li><li><p class="docList"><span class="docEmphasis"><a class="docLink" href="ch01lev1sec4.html#ch01lev1sec4">Using the Reference Documentation</a></span></p></li></ul>
<p class="docText"><a name="This chapter"></a>&#84;his ch&#97;pter show&#115; how to c&#111;mbine basic C++ with the fu&#110;ctionality provi&#100;e&#100; b&#121; Qt &#116;o create a few small &#103;raph&#105;cal user inter&#102;ace (GUI) &#97;pplications. This chapter also &#105;ntroduces two key Qt ideas: &quot;signals and slots&quot; a&#110;d layouts. In <a class="docLink" href="ch02.html#ch02">Chapter 2</a><a name="go into"></a>, we will go into more depth, and in <a class="docLink" href="ch03.html#ch03">Chapter 3</a><a name="will start"></a>, &#119;e will start building a more realistic application.</p>
<p class="docText"><a name="experience with"></a>If you already kn&#111;w J&#97;va or C# but &#104;ave li&#109;ited experience wi&#116;h C++, you might want to start b&#121; re&#97;ding the C++ &#105;ntrodu&#99;tion in <a class="docLink" href="app04.html#app04">Appendix D</a>.</p>




<a name="ch01lev1sec1"></a>
<h3 class="docSection1Title" id="-100000">Hello Qt</h3>
<p class="docText"><a name="Qt program"></a>Let's start wi&#116;h a very s&#105;mple Qt prog&#114;am. We will firs&#116; study it line by line, and then see ho&#119; to compile and run it.</p>
<div class="docText"><pre><span class="docEmphRomanAlt">1</span> #include &lt;QApplication&gt;
<span class="docEmphRomanAlt">2</span> #include &lt;QLabel&gt;

<span class="docEmphRomanAlt">3</span> int main(int argc, char *argv[])
<span class="docEmphRomanAlt">4</span> {
<span class="docEmphRomanAlt">5</span>     QApplication app(argc, argv);
<span class="docEmphRomanAlt">6</span>     QLabel *label = new QLabel("Hello Qt!");
<span class="docEmphRomanAlt">7</span>     label-&gt;show();
<span class="docEmphRomanAlt">8</span>     return app.exec();
<span class="docEmphRomanAlt">9</span> }</pre></div><br />
<p class="docText">Lines 1 and 2 include &#116;he definitions of the <tt>QApplication</tt> and <tt>Q&#76;abel</tt><a name="the same"></a> classes. For every Qt class, there is a header file w&#105;th the s&#97;me name (an&#100; c&#97;pitalization) as the cl&#97;ss that contains the class's defin&#105;tion.</p>
<p class="docText">Li&#110;e 5 &#99;reates a <tt>QAp&#112;lication</tt> obje&#99;t to manage a&#112;plication-wide r&#101;sources. The <tt>Q&#65;pplication</tt> constructor requ&#105;res <tt>argc</tt> and <tt>argv</tt><a name="of its"></a> because Qt supports a few co&#109;mand-line arguments of its own.</p>
<p class="docText">Line 6 creates a <tt>QLa&#98;el</tt> widget that displays &quot;Hello Qt!&quot;. In Qt and Unix terminology, a <span class="docEmphasis">wi&#100;g&#101;t</span><a name="term stems"></a> i&#115; a visua&#108; element in a user interface. T&#104;e term stems from <a name="iddle1404"></a><a name="iddle1721"></a><a name="iddle1837"></a><a name="iddle2080"></a><a name="iddle2433"></a><a name="iddle2483"></a><a name="iddle2492"></a><a name="iddle2780"></a><a name="iddle3044"></a><a name="iddle3291"></a><a name="iddle3782"></a><a name="iddle3801"></a><a name="iddle4281"></a><a name="iddle4461"></a><a name="iddle4517"></a><a name="iddle4531"></a><a name="iddle5334"></a><a name="iddle6996"></a><a name="iddle8150"></a><a name="iddle8427"></a><a name="iddle8461"></a><a name="iddle8562"></a><a name="iddle8624"></a><a name="is the"></a>&quot;window ga&#100;g&#101;t&quot; a&#110;d &#105;s the equivalent o&#102; bot&#104; &quot;control&quot; a&#110;d &quot;container&quot; in &#87;indows terminology. Buttons, m&#101;nus, scroll bars, and frames are all examples of w&#105;dgets. Widgets can contain other widgets; f&#111;r example, an application window is usually a widget that cont&#97;ins a <tt>QMen&#117;Bar</tt>, a few <tt>Q&#84;oolBa&#114;</tt>s, a <tt>QStatusBar</tt>, and s&#111;me other widgets. M&#111;st &#97;pplicati&#111;ns &#117;se a <tt>QMainWindow</tt> or a <tt>&#81;Di&#97;log</tt><a name="widget can"></a> as the applicati&#111;n window, bu&#116; Qt is so flexible that any widget c&#97;n be a window. In this example, the <tt>QLab&#101;l</tt><a name="widget is"></a> widget is the application window.</p>
<p class="docText"><a name="the label"></a>Line 7 makes the labe&#108; visible. Widgets are always created hidden so th&#97;t we can cu&#115;tomize &#116;hem befo&#114;e showing them, thereby a&#118;oiding flicker.</p>
<p class="docText"><a name="passes control"></a>Line 8 passes control of t&#104;e appl&#105;cation &#111;n t&#111; Qt. At this p&#111;in&#116;, the program ent&#101;rs the event &#108;oop. This is a kind of stand-by mode where the pro&#103;ram waits for user actions such as mouse c&#108;icks and key presses. User actions &#103;enerate <span class="docEmphasis">events</span><a name="one or"></a> (also called &quot;messages&quot;) to which the progra&#109; can respond, &#117;sually by &#101;xe&#99;uting one or more functions. &#70;or example, when the user clic&#107;s a widget, &#97; &quot;mouse pre&#115;s&quot; and a &quot;m&#111;use re&#108;ease&quot; event &#97;re generated. In thi&#115; respect, GUI appl&#105;cations differ drastically &#102;rom conventional batch programs, which typi&#99;ally process input, produce results, and terminate witho&#117;t human intervention.</p>
<p class="docText">For simplicity, we don't bother call&#105;ng <tt>dele&#116;e</tt> on the <tt>Q&#76;abel</tt><a name="the"></a> obj&#101;ct at the end of the <tt>&#109;ain()</tt><a name="since the"></a> function. This memory &#108;eak is harm&#108;ess in such &#97; small pro&#103;ram, since the &#109;emory will b&#101; reclaimed by th&#101; opera&#116;ing system when the prog&#114;am terminates.</p>
<p class="docText"><a name="the program"></a>It is now possible to try the pr&#111;gram on your own machine. It should look like the one &#115;hown in <a class="docLink" href="#ch01fig01">Figure 1.1</a><a name="Qt "></a>. First, you will need to install Qt 4.3.2 (or a later Qt 4 r&#101;le&#97;se), a proce&#115;s that i&#115; explained i&#110; <a class="docLink" href="app01.html#app01">Appendix A</a><a name="now on"></a>. From now on, we wi&#108;l assume th&#97;t you have &#97; correctl&#121; installed &#99;opy of Qt 4 and &#116;hat Qt's <tt>bin</tt> direc&#116;ory is in you&#114; <tt>PATH</tt><a name="will also"></a> environment variabl&#101;. (On Windows, this is done automatica&#108;ly by the Qt installation program.) You will also need t&#104;e program's code in a file called <tt>hello.cpp</tt><a name="in a"></a> in a directory call&#101;d <tt>h&#101;ll&#111;</tt><a name="type in"></a>. Yo&#117; can type in <tt>hell&#111;.cpp</tt><a name="or copy"></a> yourself or copy i&#116; from the &#101;xa&#109;ples that ac&#99;ompany this book, where i&#116; is avail&#97;ble as <tt>examples/chap01/he&#108;lo/hello.cpp</tt>. (All &#116;he examples are available from the book'&#115; web site, <a class="docLink" target="_blank" href="http://www.informit.com/title/0132354160">http://www.informit.com/title/0132354160</a>.)</p>
<a name="ch01fig01"></a><p><center>

<h5 class="docFigureTitle">Figure 1.1. Hello on &#76;inux</h5>

<p class="docText">
<img border="0" id="" width="91" height="56" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nMXAxZ2MwLjA-.jpg" alt="" /></p>



</center></p><br />
<p class="docText">From a command prompt, change the directory to <tt>hell&#111;</tt>, and type</p>
<div class="docText"><pre>qmake -project</pre></div><br />
<p class="docText">to create a platform-independe&#110;t &#112;roj&#101;ct &#102;ile (<tt>hello.pro</tt>), and t&#104;en type</p>
<div class="docText"><pre>qmake hello.pro</pre></div><br />
<p class="docText"><a name="iddle1431"></a><a name="iddle1674"></a><a name="iddle1704"></a><a name="iddle2042"></a><a name="iddle2839"></a><a name="iddle3072"></a><a name="iddle3738"></a><a name="iddle3743"></a><a name="iddle3817"></a><a name="iddle3822"></a><a name="iddle3834"></a><a name="iddle3928"></a><a name="iddle4022"></a><a name="iddle4457"></a><a name="iddle4459"></a><a name="iddle4519"></a><a name="iddle4570"></a><a name="iddle5640"></a><a name="iddle6850"></a><a name="iddle7599"></a><a name="iddle8152"></a><a name="iddle8358"></a><a name="iddle8468"></a><a name="iddle8474"></a><a name="iddle8628"></a><a name="iddle8697"></a>to create a platform-&#115;pecifi&#99; makefile fr&#111;m t&#104;e project &#102;ile. (&#84;he <tt>qmake</tt> tool is c&#111;vered in m&#111;re detail in <a class="docLink" href="app02.html#app02">Appendix B</a>.) Type <tt>ma&#107;e</tt> to build the program. Run it by typing <tt>hello</tt> on Windo&#119;s, <tt>./hello</tt> on Unix, and <tt>open hello.app</tt><a name="button in"></a> on M&#97;c OS X. To terminate the program, click the cl&#111;se &#98;utton in th&#101; wi&#110;dow's title bar.</p>
<p class="docText"><a name="and have"></a>&#73;f you are using Windows and &#104;ave in&#115;talled &#116;he Qt Ope&#110; Sour&#99;e Edition an&#100; the MinG&#87; compiler, you &#119;ill have a shortcut to an MS-DOS Prom&#112;t window that has all the env&#105;ronment variables correctly set up for &#81;t. If you start this window, you can compile Qt applic&#97;tions wit&#104;in it u&#115;ing <tt>qma&#107;e</tt> and <tt>make</tt> as described p&#114;eviously. The executables pro&#100;u&#99;ed are put in &#116;he appli&#99;ation's <tt>debug</tt> or <tt>re&#108;ease</tt> folde&#114; (e.g., <tt>C:\examples\cha&#112;01\hello\release\h&#101;llo.exe</tt>).</p>
<p class="docText"><a name="version of"></a>If you &#97;re using Microsoft Visual C++ with a commercial version &#111;f Qt, you will need to run <tt>n&#109;ake</tt> instead of <tt>make</tt><a name="project file"></a>. Alternatively, you can create a Visual St&#117;dio proje&#99;t file from <tt>h&#101;ll&#111;.pro</tt> by typing</p>
<div class="docText"><pre>qmake -tp vc hello.pro</pre></div><br />
<p class="docText"><a name="you are"></a>an&#100; then build the program in Visua&#108; Studio. If y&#111;u a&#114;e usin&#103; Xcode on &#77;ac OS X, you &#99;an generate an Xcode pr&#111;ject using the c&#111;mmand</p>
<div class="docText"><pre>qmake -spec macx-xcode hello.pro</pre></div><br />
<p class="docText"><a name="we go"></a>Before we go on to the ne&#120;t example, let's have some fun: Replac&#101; the line</p>
<div class="docText"><pre>QLabel *label = new QLabel("Hello Qt!");</pre></div><br />
<p class="docText">with</p>
<div class="docText"><pre>QLabel *label = new QLabel("&lt;h2&gt;&lt;i&gt;Hello&lt;/i&gt; "
                           "&lt;font color=red&gt;Qt!&lt;/font&gt;&lt;/h2&gt;");</pre></div><br />
<p class="docText">and rebuild the appli&#99;ation. When run, it should look like <a class="docLink" href="#ch01fig02">Figure 1.2</a><a name="interface using"></a>. As the example illustr&#97;tes, it's ea&#115;y to bri&#103;hten &#117;p a Qt application's user in&#116;erface using some simple HTML-sty&#108;e formatti&#110;g.</p>
<a name="ch01fig02"></a><p><center>

<h5 class="docFigureTitle"><a name="Figure "></a>&#70;i&#103;ure 1.2. A label with b&#97;sic HTML f&#111;rmatting</h5>

<p class="docText">
<img border="0" id="" width="124" height="56" src="images/MXJkcjcvYWd0Yy8xMC84bXBlaTlzNzQ5YTk3ZzMzcGlqZmlzaC9nMnAxZ2MwLjA-.jpg" alt="" /></p>



</center></p><br />

</div></div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pref05.html><img src="images/prev.gif" width="20" height="20" border="0" align="absmiddle" alt="Previous Page"></a>
<a href=ch01.html><img src="images/next.gif" width="20" height="20" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>