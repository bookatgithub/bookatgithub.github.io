<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 6.7.&nbsp; Special Features of Strings</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec6.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec8.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch06lev1sec7"></a>
<h3 id="title-IDAFLGZF" class="docSection1Title">6.7. Special Features of Strings</H3>
<a name="ch06lev2sec14"></a>
<h4 id="title-IDAOLGZF" class="docSection2Title">6.7.1. Special or Control Characters</H4>
<p class="docText">Like most other high-level or scripting languages, a backslash paired with another single character indicates the presence of a &quot;special&quot; character, usually a nonprintable character, and that this pair of characters will be substituted by the special character. These are the special characters we discussed above that will not be interpreted if the raw string operator precedes a string containing these characters.</P>
<p class="docText">In addition to the well-known characters such as NEWLINE ( <tt>\n</tt> ) and (horizontal) tab ( <tt>\t</tt> ), specific characters via their ASCII values may be used as well: <span class="docEmphasis"><tt>\OOO</tt></span> or <span class="docEmphasis"><tt>\xXX</tt></span> where <span class="docEmphasis"><tt>OOO</tt></span> and <span class="docEmphasis"><tt>XX</tt></span> are their respective octal and hexadecimal ASCII values. Here are the base 10, 8, and 16 representations of 0, 65, and 255:</P>
<P><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="4"><col width="100"><col width="100"><col width="100"><col width="100"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top">&nbsp;</th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">ASCII</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">ASCII</p></th><th class="thead" scope="col" align="left" valign="bottom"><p class="docText">ASCII</P></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis">Decimal</span></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>0</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>65</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>255</tt></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis">Octal</span></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\000</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\101</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\177</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis">Hexadecimal</span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\x00</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\x41</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\xFF</tt></P></TD></TR></table></P><br>
<p class="docText">Special characters, including the backslash-escaped ones, can be stored in Python strings just like regular characters.</p>
<p class="docText"><a name="iddle4055"></a><a name="iddle4222"></a>Another way that strings in Python are different from those in C is that Python strings are not terminated by the NUL (\000) character (ASCII value 0). NUL characters are just like any of the other special backslash-escaped characters. In fact, not only can NUL characters appear in Python strings, but there can be any number of them in a string, not to mention that they can occur anywhere within the string. They are no more special than any of the other control characters. <a class="docLink" href="#ch06table07">Table 6.7</a> represents a summary of the escape characters supported by most versions of Python.</p>
<a name="ch06table07"></a><P><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 6.7. String Literal Backslash Escape Characters</H5></caption><colgroup align="left" span="6"><col width="50"><col width="70"><col width="70"><col width="90"><col width="50"><col width="50"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">/X</span></P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Oct</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Dec</span></P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Hex</span></P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Char</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Description</span></p></th></tr></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\0</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>000</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x00</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>NUL</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Null character</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\a</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>007</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>7</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x07</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>BEL</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Bell</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\b</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>010</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>8</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x08</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>BS</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Backspace</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\t</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>011</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>9</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x09</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>HT</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Horizontal tab</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\n</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>012</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>10</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x0A</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>LF</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Linefeed/Newline</P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\v</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>013</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>11</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x0B</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>VT</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Vertical tab</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\f</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>014</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>12</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x0C</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>FF</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Form feed</P></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\r</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>015</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>13</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x0D</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>CR</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Carriage return</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\e</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>033</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>27</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x1B</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ESC</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Escape</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\&quot;</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>042</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>34</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x22</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>&quot;</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Double quote</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\'</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>047</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>39</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x27</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>'</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Single quote/apostrophe</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\\</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>134</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>92</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0x5C</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Backslash</p></td></tr></table></p><BR>
<p class="docText">As mentioned before, explicit ASCII octal or hexadecimal values can be given, as well as escaping a NEWLINE to continue a statement to the next line. All valid ASCII character values are between 0 and 255 (octal 0177, hexadecimal 0XFF).</p>
<div class="docText"><pre>\OOO    Octal value OOO (range is 0000 to 0177)
\xXX    'x' plus hexadecimal value XX (range is 0X00 to 0xFF)
\       escape NEWLINE for statement continuation</pre></div><br>
<p class="docText"><a name="iddle2358"></a><a name="iddle4009"></a>One use of control characters in strings is to serve as delimiters. In database or Internet/Web processing, it is more than likely that most printable characters are allowed as data items, meaning that they would not make good delimiters.</P>
<p class="docText">It becomes difficult to ascertain whether or not a character is a delimiter or a data item, and by using a printable character such as a colon ( <tt>:</tt> ) as a delimiter, you are limiting the number of allowed characters in your data, which may not be desirable.</p>
<p class="docText">One popular solution is to employ seldomly used, nonprintable ASCII values as delimiters. These make the perfect delimiters, freeing up the colon and the other printable characters for more important uses.</p>

<a name="ch06lev2sec15"></a>
<h4 id="title-IDAGBHZF" class="docSection2Title">6.7.2. Triple Quotes</H4>
<p class="docText">Although strings can be represented by single or double quote delimitation, it is often difficult to manipulate strings containing special or nonprintable characters, especially the NEWLINE character. Python's triple quotes comes to the rescue by allowing strings to span multiple lines, including verbatim NEWLINEs, tabs, and any other special characters.</P>
<p class="docText">The syntax for triple quotes consists of three consecutive single or double quotes (used in pairs, naturally):</p>
<div class="docText"><pre>&gt;&gt;&gt; hi = '''hi
there'''
&gt;&gt;&gt; hi             # repr()
'hi\nthere'
&gt;&gt;&gt; <span class="docEmphStrong">print</span> hi       # str()
hi
there</pre></div><br>
<p class="docText">Triple quotes lets the developer avoid playing quote and escape character games, all the while bringing at least a small chunk of text closer to WYSIWIG (what you see is what you get) format.</p>
<p class="docText">The most powerful use cases are when you have a large block of HTML or SQL that would be completely inconvenient to use by concanentation or wrapped with backslash escapes:</p>
<div class="docText"><pre>errHTML = '''
&lt;<span class="docEmphStrong">HTML</span>&gt;&lt;HEAD&gt;&lt;<span class="docEmphStrong">TITLE</span>&gt;
Friends CGI Demo&lt;<span class="docEmphStrong">/TITLE</span>&gt;&lt;<span class="docEmphStrong">/HEAD</span>&gt;

&lt;<span class="docEmphStrong">BODY</span>&gt;&lt;<span class="docEmphStrong">H3</span>&gt;ERROR&lt;<span class="docEmphStrong">/H3</span>&gt;
&lt;<span class="docEmphStrong">B</span>&gt;%s&lt;<span class="docEmphStrong">/B</span>&gt;&lt;<span class="docEmphStrong">P</span>&gt;
&lt;<span class="docEmphStrong">FORM</span>&gt;&lt;<span class="docEmphStrong">INPUT</span> TYPE=button VALUE=Back
ONCLICK=&quot;window.history.back()&quot;&gt;&lt;<span class="docEmphStrong">/FORM</span>&gt;
&lt;<span class="docEmphStrong">/BODY</span>&gt;&lt;<span class="docEmphStrong">/HTML</span>&gt;
'''

cursor.execute('''
         CREATE TABLE users (
         login VARCHAR(8),
         uid INTEGER,
         prid INTEGER)
''')
</pre></div><br>

<a name="ch06lev2sec16"></a>
<h4 id="title-IDAKEHZF" class="docSection2Title">6.7.3. String Immutability</h4>
<p class="docText">In <a class="docLink" href="ch04lev1sec9.html#ch04lev2sec21">Section 4.7.2</a>, we discussed how strings are immutable data types, meaning that their values cannot be changed or modified. This means that if you <span class="docEmphasis">do</span> want to update a string, either by taking a substring, concatenating another string on the end, or concatenating the string in question to the end of another string, etc., a new string object must be created for it.</p>
<p class="docText">This sounds more complicated than it really is. Since Python manages memory for you, you won't really notice when this occurs. Any time you modify a string or perform any operation that is contrary to immutability, Python will allocate a new string for you. In the following example, Python allocates space for the strings, <tt>'abc'</tt> and <tt>'def'</tt>. But when performing the addition operation to create the string <tt>'abcdef'</tt>, new space is allocated automatically for the new string.</p>
<div class="docText"><pre>&gt;&gt;&gt; 'abc' + 'def'
'abcdef'</pre></div><br>
<p class="docText">Assigning values to variables is no different:</p>
<div class="docText"><pre>&gt;&gt;&gt; s = 'abc'
&gt;&gt;&gt; s = s + 'def'
&gt;&gt;&gt; s
'abcdef'</pre></div><br>
<p class="docText">In the above example, it looks like we assigned the string '<tt>abc</tt>' to <tt>string</tt>, then appended the string '<tt>def</tt>' to <tt>string</tt>. To the naked eye, strings look mutable. What you cannot see, however, is the fact that a new string was created when the operation &quot;<tt>s + 'def'</tt>&quot; was performed, and that the new object was then assigned back to <tt>s</tt>. The old string of <tt>'abc'</tt>was deallocated.</P>
<p class="docText"><a name="iddle4060"></a><a name="iddle4346"></a>Once again, we can use the <tt>id()</tt> built-in function to help show us exactly what happened. If you recall, <tt>id()</tt> returns the &quot;identity&quot; of an object. This value is as close to a &quot;memory address&quot; as we can get in Python.</p>
<div class="docText"><pre>&gt;&gt; s = 'abc'
&gt;&gt;&gt;
&gt;&gt;&gt; id(s)
135060856
&gt;&gt;&gt;
&gt;&gt;&gt; s += 'def'
&gt;&gt;&gt; id(s)
135057968</pre></div><BR>
<p class="docText">Note how the identities are different for the string before and after the update. Another test of mutability is to try to modify individual characters or substrings of a string. We will now show how any update of a single character or a slice is not allowed:</p>
<div class="docText"><pre>&gt;&gt;&gt; s
'abcdef'
&gt;&gt;&gt;
&gt;&gt;&gt; s[2] = 'C'
Traceback (innermost last):
 File "&lt;stdin&gt;", line 1, in ?
AttributeError: __setitem__
&gt;&gt;&gt;
&gt;&gt;&gt; s[3:6] = 'DEF'
Traceback (innermost last):
  File "&lt;stdin&gt;", line 1, in ?
AttributeError: __setslice__</pre></div><BR>
<p class="docText">Both operations result in an error. In order to perform the actions that we want, we will have to create new strings using substrings of the existing string, then assign those new strings back to <tt>string</tt>:</p>
<div class="docText"><pre>&gt;&gt;&gt; s
'abcdef'
&gt;&gt;&gt;
&gt;&gt;&gt; s = '%sC%s' % (s[0:2], s[3:])
&gt;&gt;&gt; s
'abCdef'
&gt;&gt;&gt;
&gt;&gt;&gt; s[0:3] + 'DEF'
'abCDEF'</pre></div><BR>
<p class="docText"><a name="iddle1121"></a><a name="iddle4335"></a><a name="iddle4348"></a>So for immutable objects like strings, we make the observation that only valid expressions on the left-hand side of an assignment (to the left of the equals sign [ = ]) must be the variable representation of an entire object such as a string, not single characters or substrings. There is no such restriction for the expression on the right-hand side.</p>


<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec6.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch06lev1sec8.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>