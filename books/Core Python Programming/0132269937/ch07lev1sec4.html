<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 7.4.&nbsp; Mapping Type Built-in Methods</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch07lev1sec4"></a>
<h3 id="700181-822" class="docSection1Title">7.4. Mapping Type Built-in Methods</H3>
<p class="docText">Dictionaries have an abundance of methods to help you get the job done, as indicated in <a class="docLink" href="#ch07table02">Table 7.2</a>.</p>
<a name="ch07table02"></a><P><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><H5 class="docTableTitle">Table 7.2. Dictionary Type Methods</H5></caption><colgroup align="left" span="2"><col width="200"><col width="300"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Method Name</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Operation</span></p></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.clear</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna1">[a]</a></sup> <tt>()</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Removes all elements of <span class="docEmphasis"><tt>dict</tt></span></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.clear</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna1">[a]</a></sup> <tt>()</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Returns a (shallow<sup class="docFootnote"><a class="docLink" href="#ch07tna2">[b]</a></sup>) copy of <span class="docEmphasis"><tt>dict</tt></span></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.fromkeys</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna3">[c]</a></sup> <tt>(seq, val=None)</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Creates and returns a new dictionary with the elements of <span class="docEmphasis"><tt>seq</tt></span> as the keys and <span class="docEmphasis"><tt>val</tt></span> as the initial value (defaults to <tt>None</tt> if not given) for all keys</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.get(key, default=None)</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna1">[a]</a></sup></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">For key <span class="docEmphasis"><tt>key</tt></span>, returns value or <span class="docEmphasis"><tt>default</tt></span> if <span class="docEmphasis">key</span> not in <tt>dict</tt> (note that <span class="docEmphasis"><tt>default</tt></span>'s default is <tt>None</tt>)</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.has_key (key)</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns <tt>TRue</tt> if <tt>key</tt> is in <span class="docEmphasis">dict</span>, <tt>False</tt> otherwise; partially deprecated by the <span class="docEmphStrong"><tt>in</tt></span> and <span class="docEmphStrong"><tt>not in</tt></span> operators in 2.2 but still provides a functional interface</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.items()</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns a list of the (key, value) tuple pairs of <span class="docEmphasis"><tt>dict</tt></span></p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.keys()</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns a list of the keys of <span class="docEmphasis"><tt>dict</tt></span></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.iter *</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna4">[d]</a></sup> <span class="docEmphasis"><tt>()</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>iteritems(), iterkeys(), itervalues()</tt> are all methods that behave the same as their non-iterator counterparts but return an iterator instead of a list</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.pop</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna3">[c]</a></sup><span class="docEmphasis"><tt>(key [, default])</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Similar to <tt>get()</tt> but removes and returns <tt>dict[key]</tt> if <tt>key</tt> present and raises <tt>KeyError</tt> if <tt>key</tt> not in <tt>dict</tt> and <tt>default</tt> not given</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.setdefault (key, default=None)</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna5">[e]</a></sup></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Similar to <tt>get()</tt>, but sets <tt>dict[key]=default</tt> if <tt>key</tt> is not already in <span class="docEmphasis"><tt>dict</tt></span></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.update(dict2)</tt></span><sup class="docFootnote"><a class="docLink" href="#ch07tna1">[a]</a></sup></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Add the key-value pairs of <span class="docEmphasis"><tt>dict2</tt></span> to <span class="docEmphasis"><tt>dict</tt></span></p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>dict.values()</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns a list of the values of <span class="docEmphasis"><tt>dict</tt></span></p></td></TR></table></p><BR><blockquote><p class="docFootnote"><sup><a name="ch07tna1">[a]</a></sup> New in Python 1.5.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch07tna2">[b]</a></sup> More information regarding shallow and deep copies can be found in <a class="docLink" href="ch06lev1sec19.html#ch06lev1sec19">Section 6.19</a>.</P></blockquote><blockquote><p class="docFootnote"><sup><a name="ch07tna3">[c]</a></sup> New in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec3">Python 2.3</a>.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch07tna4">[d]</a></sup> New in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec2">Python 2.2</a>.</P></blockquote><blockquote><p class="docFootnote"><sup><a name="ch07tna5">[e]</a></sup> New in Python 2.0.</P></blockquote>
<p class="docText">Below, we showcase some of the more common dictionary methods. We have already seen <tt>has_key()</tt> and its replacements <span class="docEmphStrong"><tt>in</tt></span> and <span class="docEmphStrong"><tt>not in</tt></span> at work above. Attempting to access a nonexistent key will result in an exception (<tt>KeyError</tt>) as we saw in <a class="docLink" href="ch07lev1sec1.html#ch07lev1sec1">Section 7.1</a>.</p>
<p class="docText">Basic dictionary methods focus on their keys and values. These are <tt>keys()</tt>, which returns a list of the dictionary's keys, <tt>values(),</tt> which returns a list of the dictionary's values, and <tt>items()</tt>, which returns a list of (key, value) tuple pairs. These are useful when you wish to iterate through a dictionary's keys or values, albeit in no particular order.</p>
<div class="docText"><pre>&gt;&gt;&gt; dict2.keys()
['port', 'name']
&gt;&gt;&gt;
&gt;&gt;&gt; dict2.values()
[80, 'earth']
&gt;&gt;&gt;
&gt;&gt;&gt; dict2.items()
[('port', 80), ('name', 'earth')]
&gt;&gt;&gt;
&gt;&gt;&gt; <span class="docEmphStrong">for</span> eachKey <span class="docEmphStrong">in</span> dict2.keys():
... <span class="docEmphStrong">print</span> 'dict2 key', eachKey, 'has value', dict2[eachKey]
...
dict2 key port has value 80
dict2 key name has value earth</pre></div><br>
<p class="docText">The <tt>keys()</tt> method is fairly useful when used in conjunction with a <span class="docEmphasis"><tt>for</tt></span> loop to retrieve a dictionary's values as it returns a list of a dictionary's keys. <a name="iddle1542"></a><a name="iddle1660"></a><a name="iddle1668"></a><a name="iddle1696"></a><a name="iddle2614"></a><a name="iddle3883"></a>However, because its items (as with any keys of a hash table) are unordered, imposing some type of order is usually desired.</p>

<p class="docText">
<img border="0" alt="" id="195131084199" width="50" height="47" SRC="images/2_4.jpg"></P>


<p class="docText">In Python versions prior to 2.4, you would have to call a dictionary's <tt>keys()</tt> method to get the list of its keys, then call that list's <tt>sort()</tt> method to get a sorted list to iterate over. Now a built-in function named <tt>sorted()</tt>, made especially for iterators, exists, which returns a sorted iterator:</p>
<div class="docText"><pre>&gt;&gt;&gt; <span class="docEmphStrong">for</span> eachKey <span class="docEmphStrong">in</span> sorted(dict2):
...     <span class="docEmphStrong">print</span> 'dict2 key', eachKey, 'has value',
dict2[eachKey]
...
dict2 key name has value earth
dict2 key port has value 80</pre></div><br>
<p class="docText">The <tt>update()</tt> method can be used to add the contents of one directory to another. Any existing entries with duplicate keys will be overridden by the new incoming entries. Nonexistent ones will be added. All entries in a dictionary can be removed with the <tt>clear()</tt> method.</P>
<div class="docText"><pre>&gt;&gt;&gt; dict2= {'host':'earth', 'port':80}
&gt;&gt;&gt; dict3= {'host':'venus', 'server':'http'}
&gt;&gt;&gt; dict2.update(dict3)
&gt;&gt;&gt; dict2
{'server': 'http', 'port': 80, 'host': 'venus'}
&gt;&gt;&gt; dict3.clear()
&gt;&gt;&gt; dict3
{}</pre></div><br>
<p class="docText">The <tt>copy()</tt> method simply returns a copy of a dictionary. Note that this is a shallow copy only. Again, see <a class="docLink" href="ch06lev1sec19.html#ch06lev1sec19">Section 6.19</a> regarding shallow and deep copies. Finally, the <tt>get()</tt> method is similar to using the key-lookup operator ( [ ] ), but allows you to provide a default value returned if a key does not exist. If a key does not exist and a default value is not given, then <tt>None</tt> is returned. This is a more flexible option than just using key-lookup because you do not have to worry about an exception being raised if a key does not exist.</p>
<div class="docText"><pre>&gt;&gt;&gt; dict4 = dict2.copy()
&gt;&gt;&gt; dict4
{'server': 'http', 'port': 80, 'host': 'venus'}
&gt;&gt;&gt; dict4.get('host')
'venus'
&gt;&gt;&gt; dict4.get('xxx')
&gt;&gt;&gt; type(dict4.get('xxx'))
&lt;type 'None'&gt;
&gt;&gt;&gt; dict4.get('xxx', 'no such key')
'no such key'</pre></div><br>

<p class="docText">
<img border="0" alt="" id="195131084199" width="50" height="47" SRC="images/2_0.jpg"></P>


<p class="docText">The built-in method, <tt>setdefault()</tt>, added in version 2.0, has the sole purpose of making code shorter by collapsing a common idiom: you want to <a name="iddle1458"></a><a name="iddle1674"></a><a name="iddle2102"></a><a name="iddle2603"></a><a name="iddle2610"></a>check if a dictionary has a key. If it does, you want its value. If the dictionary does not have the key you are seeking, you want to set a default value and then return it. That is precisely what <tt>setdefault()</tt> does:</P>
<div class="docText"><pre>&gt;&gt;&gt; myDict = {'host': 'earth', 'port': 80}
&gt;&gt;&gt; myDict.keys()
['host', 'port']
&gt;&gt;&gt; myDict.items()
[('host', 'earth'), ('port', 80)]
&gt;&gt;&gt; myDict.setdefault('port', 8080)
80
&gt;&gt;&gt; myDict.setdefault('prot', 'tcp')
'tcp'
&gt;&gt;&gt; myDict.items()
[('prot', 'tcp'), ('host', 'earth'), ('port', 80)]</pre></div><br>
<p class="docText">Earlier, we took a brief look at the <tt>fromkeys()</tt> method, but here are a few more examples:</p>
<div class="docText"><pre>&gt;&gt;&gt; {}.fromkeys('xyz')
{'y': None, 'x': None, 'z': None}
&gt;&gt;&gt;
&gt;&gt;&gt; {}.fromkeys(('love', 'honor'), True)
{'love': True, 'honor': True}</pre></div><br>
<p class="docText">Currently, the <tt>keys(), items()</tt>, and <tt>values()</tt> methods return lists. This can be unwieldy if such data collections are large, and the main reason why <tt>iteritems(), iterkeys()</tt>, and <tt>itervalues()</tt> were added to Python in 2.2. They function just like their list counterparts only they return iterators, which by lazier evaluation, are more memory-friendly. In future versions of Python, even more flexible and powerful objects will be returned, tentatively called <span class="docEmphasis">views</span>. Views are collection interfaces which give you access to container objects. For example, you may be able to delete a key from a view, which would then alter the corresponding dictionary accordingly.</p>

</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch07lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>