<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 10.6.&nbsp; Raising Exceptions</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec7.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch10lev1sec6"></a>
<h3 id="title-IDAUFLZD" class="docSection1Title">10.6. Raising Exceptions</H3>
<p class="docText">The interpreter was responsible for raising all of the exceptions we have seen so far. These exist as a result of encountering an error during execution. A programmer writing an API may also wish to throw an exception on erroneous input, for example, so Python provides a mechanism for the programmer to explicitly generate an exception: the <span class="docEmphStrong"><tt>raise</tt></span> statement.</p>
<a name="ch10lev2sec17"></a>
<H4 id="title-IDAEGLZD" class="docSection2Title">10.6.1. <tt>raise</tt> Statement</H4>
<a name="ch10lev3sec4"></a>
<H5 id="title-IDAOGLZD" class="docSection3Title">Syntax and Common Usage</H5>
<p class="docText">The <span class="docEmphStrong"><tt>raise</tt></span> statement is quite flexible with the arguments it supports, translating to a large number of different formats supported syntactically. The general syntax for <span class="docEmphStrong"><tt>raise</tt></span> is:</p>
<div class="docText"><pre><span class="docEmphStrong">raise</span> [<span class="docEmphasis">SomeException</span> [, args [, <span class="docEmphasis">traceback</span>]]]</pre></div><br>
<p class="docText">The first argument, <span class="docEmphasis"><tt>SomeException</tt></span>, is the name of the exception to raise. If present, it must either be a string, class, or instance (more below). <span class="docEmphasis"><tt>SomeException</tt></span> must be given if any of the other arguments (<span class="docEmphasis"><tt>args</tt></span> or <span class="docEmphasis"><tt>traceback</tt></span>) are present. A list of all Python standard exceptions is given in <a class="docLink" href="ch10lev1sec8.html#ch10table02">Table 10.2</a>.</P>
<p class="docText">The second expression contains optional <tt>args</tt> (aka parameters, values) for the exception. This value is either a single object or a tuple of objects. When exceptions are detected, the exception arguments are always returned as a tuple. If <tt>args</tt> is a tuple, then that tuple represents the same set of exception arguments that are given to the handler. If <tt>args</tt> is a single object, then the tuple will consist solely of this one object (i.e., a tuple with one element). In most cases, the single argument consists of a string indicating the cause of the error. When a tuple is given, it usually equates to an error string, an error number, and perhaps an error location, such as a file, etc.</p>
<p class="docText">The final argument, <tt>TRaceback</tt>, is also optional (and rarely used in practice), and, if present, is the traceback object used for the exceptionnormally a traceback object is newly created when an exception is raised. This third argument is useful if you want to reraise an exception (perhaps to point to the previous location from the current). Arguments that are absent are represented by the value <tt>None</tt>.</p>
<p class="docText">The most common syntax used is when <span class="docEmphasis"><tt>SomeException</tt></span> is a class. No additional parameters are ever required, but in this case, if they are given, they can be a single object argument, a tuple of arguments, or an exception class instance. If the argument is an instance, then it can be an instance of the given class or a derived class (subclassed from a pre-existing exception class). No additional arguments (i.e., exception arguments) are permitted if the argument is an instance.</P>

<a name="ch10lev3sec5"></a>
<h5 id="title-IDACJLZD" class="docSection3Title">More Exotic/Less Common Usage</H5>
<p class="docText">What happens if the argument is an instance? No problems arise if <tt>instance</tt> is an instance of the given exception class. However, if <tt>instance</tt> is <span class="docEmphasis">not</span> an instance of the class or an instance of a subclass of the class, then a new instance of the exception class will be created with exception arguments copied from the given instance. If <tt>instance</tt>is an instance of a subclass of the exception class, then the new exception will be instantiated from the subclass, not the original exception class.</P>
<p class="docText">If the additional parameter to the <span class="docEmphStrong"><tt>raise</tt></span> statement used with an exception class is not an instanceinstead, it is a singleton or tuplethen the class is instantiated and <tt>args</tt> is used as the argument list to the exception. If the second parameter is not present or <tt>None</tt>, then the argument list is empty.</p>
<p class="docText">If <span class="docEmphasis"><tt>SomeException</tt></span> is an instance, then we do not need to instantiate anything. In this case, additional parameters must not be given or must be <tt>None</tt>. The exception type is the class that <tt>instance</tt>belongs to; in other words, this is equivalent to raising the class with this instance, i.e., <span class="docEmphStrong"><tt>raise</tt></span> <tt>instance.__class__, instance</tt>.</p>
<p class="docText">Use of string exceptions is deprecated in favor of exception classes, but if <span class="docEmphasis"><tt>SomeException</tt></span> is a string, then it raises the exception identified by <tt>string</tt>, with any optional parameters (<tt>args</tt>) as arguments.</p>
<p class="docText">Finally, the <span class="docEmphStrong"><tt>raise</tt></span> statement by itself <span class="docEmphasis">without any parameters</span> is a new construct, introduced in Python 1.5, and causes the last exception raised in the current code block to be reraised. If no exception was previously raised, a <tt>TypeError</tt> exception will occur, because there was no previous exception to reraise.</p>
<p class="docText">Due to the many different valid syntax formats for <span class="docEmphStrong"><tt>raise</tt></span> (i.e., <span class="docEmphasis"><tt>SomeException</tt></span> can be either a class, instance, or a string), we provide <a class="docLink" href="#ch10table01">Table 10.1</a> to illuminate all the different ways which <span class="docEmphStrong"><tt>raise</tt></span> can be used.</P>
<a name="ch10table01"></a><p><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 10.1. Using the <tt>raise</tt> Statement</H5></caption><colgroup align="left" span="2"><col width="150"><col width="300"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>raise</tt></span> <span class="docEmphasis">syntax</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Description</span></p></th></TR></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>exclass</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Raise an exception, creating an instance of <tt>exclass</tt> (without any exception arguments)</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>exclass()</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Same as above since classes are now exceptions; invoking the class name with the function call operator instantiates an instance of <tt>exclass</tt>, also with no arguments</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>exclass</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but also providing exception arguments <span class="docEmphasis"><tt>args</tt></span>, which can be a single argument or a tuple</P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span><span class="docEmphasis"><tt>exclass(args)</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Same as above</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>exclass,args, tb</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but provides traceback object <tt>tb</tt>to use</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>exclass, instance</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Raise exception using <tt>instance</tt> (normally an instance of <tt>exclass</tt>); if <tt>instance</tt> is an instance of a <span class="docEmphasis">subclass</span> of <tt>exclass</tt>, then the new exception will be of the subclass type (not of <tt>exclass</tt>); if <tt>instance</tt> is <span class="docEmphasis">not</span> an instance of <tt>exclass</tt> <span class="docEmphasis">or</span> an instance of a <span class="docEmphasis">subclass</span> of <tt>exclass</tt>, then a new instance of <tt>exclass</tt> will be created with exception arguments copied from <tt>instance</tt></p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><a name="iddle1125"></a><a name="iddle1846"></a><span class="docEmphStrong"><tt>raise</tt></span><span class="docEmphasis"><tt>instance</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Raise exception using <tt>instance</tt>: the exception type is the class that instantiated <tt>instance</tt>; equivalent to <span class="docEmphStrong"><tt>raise</tt></span> <tt>instance.__</tt> <tt>class__</tt>, <tt>instance</tt> (same as above)</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <span class="docEmphasis"><tt>string</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">(<span class="docEmphasis">Archaic</span>) Raises <tt>string</tt> exception</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <tt>string, args</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but raises exception with <tt>args</tt></P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span> <tt>string, args, tb</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but provides traceback object <tt>tb</tt> to use</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphStrong"><tt>raise</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">(<span class="docEmphasis">New in 1.5</span>) Reraises previously raised exception; if no exception was previously raised, a <tt>TypeError</tt>is raised</p></td></tr></table></P><br>



<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch10lev1sec7.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>