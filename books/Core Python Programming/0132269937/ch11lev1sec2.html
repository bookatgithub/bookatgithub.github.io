<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 11.2.&nbsp; Calling Functions</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch11lev1sec2"></a>
<h3 id="title-IDAIKDME" class="docSection1Title">11.2. Calling Functions</H3>
<a name="ch11lev2sec3"></a>
<h4 id="title-IDARKDME" class="docSection2Title">11.2.1. Function Operator</H4>
<p class="docText">Functions are called using the same pair of parentheses that you are used to. In fact, some consider ( <tt>()</tt> ) to be a two-character operator, the function operator. As you are probably aware, any input parameters or arguments must be placed between these calling parentheses. Parentheses are also used as part of function declarations to define those arguments. Although we have yet to formally study classes and object-oriented programming, you will discover that the function operator is also used in Python for class instantiation.</P>

<a name="ch11lev2sec4"></a>
<H4 id="title-IDAALDME" class="docSection2Title">11.2.2. Keyword Arguments</H4>
<p class="docText">The concept of keyword arguments applies only to function invocation. The idea here is for the caller to identify the arguments by parameter name in a function call. This specification allows for arguments to be missing or out-of-order because the interpreter is able to use the provided keywords to match values to parameters.</p>
<p class="docText"><a name="iddle1098"></a><a name="iddle1105"></a><a name="iddle1109"></a><a name="iddle1284"></a><a name="iddle1287"></a><a name="iddle2151"></a><a name="iddle2164"></a><a name="iddle2275"></a>For a simple example, imagine a function <tt>foo(),</tt> which has the following pseudocode definition:</p>
<div class="docText"><pre> <span class="docEmphStrong">def</span> foo(x):
    foo_suite # presumably does some processing with 'x'

<span class="docEmphRomanAlt">Standard calls to</span> foo():     foo(42)    foo('bar')    foo(y)
<span class="docEmphRomanAlt">Keyword  calls to</span> foo():      foo(x=42)   foo(x='bar') foo(x=y)</pre></div><br>
<p class="docText">For a more realistic example, let us assume you have a function called <tt>net_conn()</tt> and you know that it takes two parameters, say, <tt>host</tt> and <tt>port</tt>:</P>
<div class="docText"><pre><span class="docEmphStrong">def</span> net_conn(host, port):
         <span class="docEmphasis">net_conn_suite</span></pre></div><br>
<p class="docText">Naturally, we can call the function, giving the proper arguments in the correct positional order in which they were declared:</P>
<div class="docText"><pre>net_conn('kappa', 8080)</pre></div><br>
<p class="docText">The <tt>host</tt> parameter gets the string <tt>'kappa'</tt> and <tt>port</tt> gets integer 8080. Keyword arguments allow out-of-order parameters, but you must provide the name of the parameter as a &quot;keyword&quot; to have your arguments match up to their corresponding argument names, as in the following:</P>
<div class="docText"><pre>net_conn(port=8080, host='chino')</pre></div><br>
<p class="docText">Keyword arguments may also be used when arguments are allowed to be &quot;missing.&quot; These are related to functions that have default arguments, which we will introduce in the next section.</P>

<a name="ch11lev2sec5"></a>
<H4 id="title-IDAOPDME" class="docSection2Title">11.2.3. Default Arguments</h4>
<p class="docText">Default arguments are those that are declared with default values. Parameters that are not passed on a function call are thus allowed and are assigned the default value. We will cover default arguments more formally in <a class="docLink" href="ch11lev1sec5.html#ch11lev2sec14">Section 11.5.2</a>.</p>

<a name="ch11lev2sec6"></a>
<h4 id="title-IDAFQDME" class="docSection2Title">11.2.4. Grouped Arguments</h4>
<p class="docText">Python also allows the programmer to execute a function without explicitly specifying individual arguments in the call as long as you have grouped the arguments in either a tuple (non-keyword arguments) or a dictionary (keyword arguments), both of which we will explore in this chapter. Basically, you can put all the arguments in either a tuple or a dictionary (or both), and just <a name="iddle1091"></a>call a function with those buckets of arguments and not have to explicitly put them in the function call:</P>
<div class="docText"><pre><span class="docEmphasis">func(*tuple_grp_nonkw_args, **dict_grp_kw_args)</span></pre></div><br>
<p class="docText">The <span class="docEmphasis"><tt>tuple_grp_nonkw_args</tt></span> are the group of non-keyword arguments as a tuple, and the <span class="docEmphasis"><tt>dict_grp_kw_args</tt></span> are a dictionary of keyword arguments. As we already mentioned, we will cover all of these in this chapter, but just be aware of this feature that allows you to stick arguments in tuples and/or dictionaries and be able to call functions without explicitly stating each one by itself in the function call.</p>
<p class="docText">In fact, you can give formal arguments, too! These include the standard positional parameters as well as keyword argument, so the full syntax allowed in Python for making a function call is:</P>
<div class="docText"><pre><span class="docEmphasis">func(positional_args, keyword_args,</span>
<span class="docEmphasis">*tuple_grp_nonkw_args, **dict_grp_kw_args)</span></pre></div><br>
<p class="docText">All arguments in this syntax are optionaleverything is dependent on the individual function call as far as which parameters to pass to the function. This syntax has effectively deprecated the <tt>apply()</tt> built-in function. (Prior to Python 1.6, such argument objects could only be passed to <tt>apply()</tt> with the function object for invocation.)</p>
<a name="ch11lev3sec1"></a>
<h5 id="title-IDA4RDME" class="docSection3Title">Example</H5>
<p class="docText">In our math game in <a class="docLink" href="#ch11list01">Example 11.1</a> (<tt>easyMath.py</tt>), we will use the current function calling convention to generate a two-item argument list to send to the appropriate arithmetic function. (We will also show where <tt>apply()</tt> would have come in if it had been used.)</P>
<a name="ch11list01"></a><h5 id="title-IDAYSDME" class="docExampleTitle">Example 11.1. Arithmetic Game (<tt>easyMath.py</tt>)</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<p class="docText"><a name="iddle1117"></a><a name="iddle1285"></a><a name="iddle2155"></a><span class="docEmphasis">Randomly chooses numbers and an arithmetic function, displays the question, and verifies the results. Shows answer after three wrong tries and does not continue until the user enters the correct answer.</span></p>

<pre>1 #!/usr/bin/env python
2
3 <span class="docEmphStrong">from</span> operator <span class="docEmphStrong">import</span> add, sub
4 <span class="docEmphStrong">from</span> random <span class="docEmphStrong">import</span> randint, choice
5
6 ops = {'+': add, '-': sub}
7 MAXTRIES = 2
8
9 <span class="docEmphStrong">def</span> doprob():
10    op = choice('+-')
11    nums = [randint(1,10) <span class="docEmphStrong">for</span> i <span class="docEmphStrong">in</span> range(2)]
12    nums.sort(reverse=True)
13    ans = ops[op](*nums)
14    pr = '%d %s %d = ' % (nums[0], op, nums[1])
15    oops = 0
16    <span class="docEmphStrong">while</span> True:
17        <span class="docEmphStrong">try:</span>
18             <span class="docEmphStrong">if</span> int(raw_input(pr)) == ans:
19                <span class="docEmphStrong">print</span> 'correct'
20                <span class="docEmphStrong">break</span>
21             <span class="docEmphStrong">if</span> oops == MAXTRIES:
22                <span class="docEmphStrong">print</span> 'answer\n%s%d'%(pr, ans)
23             <span class="docEmphStrong">else:</span>
24                <span class="docEmphStrong">print</span> 'incorrect... try again'
25                oops += 1
26        <span class="docEmphStrong">except</span> (KeyboardInterrupt,  \
27                EOFError, ValueError):
28             <span class="docEmphStrong">print</span> 'invalid input... try again'
29
30 <span class="docEmphStrong">def</span> main():
31     <span class="docEmphStrong">while</span> True:
32          doprob()
33         <span class="docEmphStrong">try:</span>
34             opt = raw_input('Again? [y]').lower()
35             <span class="docEmphStrong">if</span> opt <span class="docEmphStrong">and</span> opt[0] == 'n':
36                <span class="docEmphStrong">break</span>
37         <span class="docEmphStrong">except</span> (KeyboardInterrupt, EOFError):
38             <span class="docEmphStrong">break</span>
39
40 <span class="docEmphStrong">if</span> __name__ == '__main__':
41     main()</pre><br>

</td></tr></table></p>
<p class="docText">The <tt>easyMath.py</tt> application is basically an arithmetic math quiz game for children where an arithmetic operationaddition or subtractionis randomly chosen. We use the functional equivalents of these operators, <tt>add()</tt> and <tt>sub()</tt>, both found in the <tt>operator</tt> module. We then generate the list of arguments (two, since these are binary operators/ operations). Then random numbers are chosen as the operands. Since we do not want to support negative numbers in this more elementary edition of this application, we sort our list of two numbers in largest-to-smallest order, then call the corresponding function with this argument list and the randomly chosen arithmetic operator to obtain the correct solution to the posed problem.</p>

<a name="ch11lev3sec2"></a>

<h5 id="title-IDAZXDME" class="docSection3Title">Line-by-Line Explanation</H5>
<a name="ch11lev4sec1"></a>
<h5 id="title-IDAFYDME" class="docSection4Title">Lines 14</H5>
<p class="docText">Our code begins with the usual Unix startup line followed by various imports of the functions that we will be using from the <tt>operator</tt> and <tt>random</tt> modules.</p>

<a name="ch11lev4sec2"></a>
<H5 id="title-IDAWYDME" class="docSection4Title">Lines 67</h5>
<p class="docText">The global variables we use in this application are a set of operations and their corresponding functions, and a value indicating how many times (three: 0, 1, 2) we allow the user to enter an incorrect answer before we reveal the solution. The function dictionary uses the operator's symbol to index into the dictionary, pulling out the appropriate arithmetic function.</P>

<a name="ch11lev4sec3"></a>
<h5 id="title-IDACZDME" class="docSection4Title">Lines 928</H5>
<p class="docText">The <tt>doprob()</tt> function is the core engine of the application. It randomly picks an operation and generates the two operands, sorting them from largest-to-smallest order in order to avoid negative numbers for subtraction problems. It then invokes the math function with the values, calculating the correct solution. The user is then prompted with the equation and given three opportunities to enter the correct answer.</P>
<p class="docText"><a class="docLink" href="#ch11lev4sec3">Line 10</a> uses the <tt>random.choice()</tt> function. Its job is to take a sequencea string of operation symbols in our caseand randomly choose one item and return it.</P>
<p class="docText"><a class="docLink" href="#ch11lev4sec3">Line 11</a> uses a list comprehension to randomly choose two numbers for our exercise. This example is simple enough such that we could have just called <tt>randint()</tt> twice to get our operands, i.e., <tt>nums</tt> <tt>=</tt> <tt>[randint (1,10), randint(1,10)]</tt>, but we wanted to use a list comprehension so that you could see another example of its use as well as in case we wanted to upgrade this problem to take on more than just two numbers, similar to the reason why instead of cutting and pasting the same piece of code, we put it into a <span class="docEmphStrong"><tt>for</tt></span> loop.</P>

<p class="docText">
<img border="0" alt="" width="50" height="47" SRC="images/2_4.jpg"></p>


<p class="docText"><a class="docLink" href="#ch11lev4sec3">Line 12</a> will only work in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec4">Python 2.4</a> and newer because that is when the <tt>reverse</tt> flag was added to the <tt>list.sort()</tt> method (as well as the new <tt>sorted()</tt> built-in function). If you are using an earlier Python version, you need to either:</p>
<ul><LI><p class="docList">Add an inverse comparison function to get a reverse sort, i.e., <span class="docEmphStrong"><tt>lambda</tt></span> <tt>x</tt>,<tt>y:</tt> <tt>cmp(y, x)</tt>, or</p></LI><li><p class="docList">Call <tt>nums.sort()</tt> followed by <tt>nums.reverse()</tt></P></li></UL>
<p class="docText">Don't be afraid of <span class="docEmphStrong"><tt>lambda</tt></span> if you have not seen it before. We will cover it in this chapter, but for now, you can think of it as a one-line anonymous function.</P>
<p class="docText"><a class="docLink" href="#ch11lev4sec3">Line 13</a> is where <tt>apply()</tt> would have been used if you are using Python before 1.6. This call to the appropriate operation function would have been coded as <tt>apply(ops[op], nums)</tt> instead of <tt>ops[op](*nums)</tt>.</p>
<p class="docText"><a class="docLink" href="#ch11lev4sec3">Lines 16-28</a> represent the controlling loop handling valid and invalid user input. The <span class="docEmphStrong"><tt>while</tt></span> loop is &quot;infinite,&quot; running until either the correct answer is given or the number of allowed attempts is exhausted, three in our case. It allows the program to accept erroneous input such as non-numbers, or various keyboard control characters. Once the user exceeds the maximum number of tries, the answer is presented, and the user is &quot;forced&quot; to enter the correct value, not proceeding until that has been done.</p>

<a name="ch11lev4sec4"></a>
<h5 id="title-IDAM3DME" class="docSection4Title">Lines 3041</h5>
<p class="docText">The main driver of the application is <tt>main()</tt>, called from the top level if the script is invoked directly. If imported, the importing function either manages the execution by calling <tt>doprob()</tt>, or calls <tt>main()</tt> for program control. <tt>main()</tt> simply calls <tt>doprob()</tt> to engage the user in the main functionality of the script and prompts the user to quit or to try another problem.</P>
<p class="docText">Since the values and operators are chosen randomly, each execution of <tt>easyMath.py</tt> should be different. Here is what we got today (oh, and your answers may vary as well!):</p>
<div class="docText"><pre>$ easyMath.py
7 - 2 = 5
correct
Again? [y]
7 * 6 = 42
correct
Again? [y]
7 * 3 = 20
incorrect... try again
7 * 3 = 22
incorrect... try again
7 * 3 = 23
sorry... the answer is
7 * 3 = 21
7 * 3 = 21
correct
Again? [y]
7 - 5 = 2
correct
Again? [y] n</pre></div><br>




<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch11lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>