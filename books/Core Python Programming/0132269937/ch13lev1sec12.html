<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 13.12.&nbsp; Built-in Functions for Classes, Instances, and Other Objects</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch13lev1sec11.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch13lev1sec13.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch13lev1sec12"></a>
<h3 id="title-IDAJZXUD" class="docSection1Title">13.12. Built-in Functions for Classes, Instances, and Other Objects</H3>
<a name="ch13lev2sec36"></a>
<h4 id="title-IDASZXUD" class="docSection2Title">13.12.1. <tt>issubclass()</tt></H4>
<p class="docText">The <tt>issubclass()</tt> Boolean function determines if one class is a subclass or descendant of another class. It has the following syntax:</P>
<div class="docText"><pre>    issubclass(<span class="docEmphasis">sub</span>, <span class="docEmphasis">sup</span>)</pre></div><BR>
<p class="docText"><tt>issubclass()</tt> returns <tt>TRue</tt> if the given subclass <span class="docEmphasis"><tt>sub</tt></span> is indeed a subclass of the superclass <span class="docEmphasis"><tt>sup</tt></span> (and <tt>False</tt> otherwise). This function allows for an &quot;improper&quot; subclass, meaning that a class is viewed as a subclass of itself, so the function returns <tt>true</tt> if <tt>sub</tt> is either the same class as <tt>sup</tt> or derived from <tt>sup</tt>. (A &quot;proper&quot; subclass is strictly a derived subclass of a class.)</p>
<p class="docText"><a name="iddle2551"></a>Beginning with <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec3">Python 2.3</a>, the second argument of <tt>issubclass()</tt> can be tuple of possible parent classes for which it will return <tt>true</tt> if the first argument is a subclass of any of the candidate classes in the given tuple.</P>

<p class="docText">
<img border="0" alt="" width="50" height="47" SRC="images/2_3.jpg"></p>



<a name="ch13lev2sec37"></a>
<H4 id="title-IDAF2XUD" class="docSection2Title">13.12.2. <tt>isinstance()</tt></h4>
<p class="docText">The <tt>isinstance()</tt> Boolean function is useful for determining if an object is an instance of a given class. It has the following syntax:</P>
<div class="docText"><pre>    isinstance(<span class="docEmphasis">obj1</span>, <span class="docEmphasis">obj2</span>)</pre></div><br>
<p class="docText"><tt>isinstance()</tt> returns <tt>TRue</tt> if <span class="docEmphasis"><tt>obj1</tt></span> is an instance of class <span class="docEmphasis"><tt>obj2</tt></span> or is an instance of a subclass of <span class="docEmphasis"><tt>obj2</tt></span> (and <tt>False</tt> otherwise), as indicated in the following examples:</P>
<div class="docText"><pre>    &gt;&gt;&gt; <span class="docEmphStrong">class</span> C1(object): <span class="docEmphStrong">pass</span>
    ...
    &gt;&gt;&gt; <span class="docEmphStrong">class</span> C2(object): <span class="docEmphStrong">pass</span>
    ...
    &gt;&gt;&gt; c1 = C1()
    &gt;&gt;&gt; c2 = C2()
    &gt;&gt;&gt; isinstance(c1, C1)
    True
    &gt;&gt;&gt; isinstance(c2, C1)
    False
    &gt;&gt;&gt; isinstance(c1, C2)
    False
    &gt;&gt;&gt; isinstance(c2, C2)
    True
    &gt;&gt;&gt; isinstance(C2, c2)
    Traceback (innermost last):
      File "&lt;stdin&gt;", line 1, in ?
        isinstance(C2, c2)
    TypeError: second argument must be a class</pre></div><br>
<p class="docText">Note that the second argument should be a class; otherwise, you get a <tt>TypeError</tt>. The only exception is if the second argument is a type object. This is allowed because you can also use <tt>isinstance()</tt> to check if an object <span class="docEmphasis"><tt>obj1</tt></span> is of the type <span class="docEmphasis"><tt>obj2</tt></span>, i.e.,</p>
<div class="docText"><pre>   &gt;&gt;&gt; isinstance(4, int)
   True
   &gt;&gt;&gt; isinstance(4, str)
   False
   &gt;&gt;&gt; isinstance('4', str)
   True</pre></div><br>
<p class="docText"><a name="iddle1147"></a><a name="iddle1637"></a><a name="iddle2251"></a><a name="iddle2305"></a><a name="iddle3812"></a>If you are coming from Java, you may be aware of the warning against using its equivalent, <tt>instanceof()</tt>, due to performance reasons. A call to Python's <tt>isinstance()</tt> will not have the same performance hit primarily because it only needs it to perform a quick search up the class hierarchy to determine what classes it is an instance of, and even more importantly, it is written in C!</p>
<p class="docText">Like <tt>issubclass()</tt>, <tt>isinstance()</tt> can also take a tuple as its second argument. This feature was added in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec2">Python 2.2</a>. It will return <tt>TRue</tt> if the first argument is an instance of any of the candidate types and classes in the given tuple. Also be sure to read more about <tt>isinstance()</tt> in <a class="docLink" href="ch13lev1sec16.html#ch13lev2sec50">Section 13.16.1</a> on page <a class="docLink" href="ch13lev1sec16.html#ch13lev2sec50">595</a>.</p>

<p class="docText">
<img border="0" alt="" width="50" height="48" SRC="images/2_2.jpg"></p>



<a name="ch13lev2sec38"></a>
<H4 id="title-IDAZJFVD" class="docSection2Title">13.12.3. <tt>hasattr()</tt>, <tt>getattr()</tt>, <tt>setattr()</tt>, <tt>delattr()</tt></h4>
<p class="docText">The <tt>*attr()</tt> functions can work with all kinds of objects, not just classes and instances. However, since they are most often used with those objects, we present them here. One thing that might throw you off is that when using these functions, you pass in the object you are working on as the first argument, but the attribute name, the second argument to these functions, is the string name of the attribute. In other words, when operating with <span class="docEmphasis"><tt>obj.attr</tt></span>, the function call will be like <tt>*attr(</tt><span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>'attr'</tt></span><tt>...)</tt>this will be clear in the examples that follow.</p>
<p class="docText">The <tt>hasattr()</tt> function is Boolean and its only purpose is to determine whether or not an object has a particular attribute, presumably used as a check before actually <span class="docEmphasis">trying</span> to access that attribute. The <tt>getattr()</tt> and <tt>setattr()</tt> functions retrieve and assign values to object attributes, respectively. <tt>getattr()</tt> will raise an <tt>AttributeError</tt> exception if you attempt to read an object that does not have the requested attribute, unless a third, optional default argument is given. <tt>setattr()</tt> will either add a new attribute to the object or replace a pre-existing one. The <tt>delattr()</tt> function removes an attribute from an object.</p>
<p class="docText">Here are some examples using all the <tt>*attr()</tt> BIFs:</P>
<div class="docText"><pre>    &gt;&gt;&gt; <span class="docEmphStrong">class</span> myClass(object):
    ...     <span class="docEmphStrong">def</span> __init__(self):
    ...         self.foo = 100
    ...
    &gt;&gt;&gt; myInst = myClass()
    &gt;&gt;&gt; hasattr(myInst, 'foo')
    True
    &gt;&gt;&gt; getattr(myInst, 'foo')
    100
    &gt;&gt;&gt; hasattr(myInst, 'bar')
    False
    &gt;&gt;&gt; getattr(myInst, 'bar')
    Traceback (most recent call last):
      File "&lt;stdin&gt;", line 1, in ?
        getattr(myInst, 'bar')
    AttributeError: myClass instance has no attribute 'bar'
    &gt;&gt;&gt; getattr(c, 'bar', 'oops!')
    'oops!'
    &gt;&gt;&gt; setattr(myInst, 'bar', 'my attr')
    &gt;&gt;&gt; dir(myInst)
    ['__doc__', '__module__', 'bar', 'foo']
    &gt;&gt;&gt; getattr(myInst, 'bar')    # same as myInst.bar
    'my attr'
    &gt;&gt;&gt; delattr(myInst, 'foo')
    &gt;&gt;&gt; dir(myInst)
    ['__doc__', '__module__', 'bar']
    &gt;&gt;&gt; hasattr(myInst, 'foo')
    False</pre></div><BR>

<a name="ch13lev2sec39"></a>
<h4 id="title-IDADMFVD" class="docSection2Title">13.12.4. <tt>dir()</tt></h4>
<p class="docText"><a name="iddle1638"></a><a name="iddle1708"></a><a name="iddle1710"></a><a name="iddle1713"></a><a name="iddle1714"></a><a name="iddle2252"></a><a name="iddle2306"></a><a name="iddle3813"></a>We first experienced <tt>dir()</tt> in <a class="docLink" href="ch02lev1sec21.html#ch02qa1q12">Exercises 2-12</a>, <a class="docLink" href="ch02lev1sec21.html#ch02qa1q13">2-13</a>, and <a class="docLink" href="ch04lev1sec10.html#ch04qa1q7">4-7</a>. In those exercises, we used <tt>dir()</tt> to give us information about all the attributes of a module. We now know that <tt>dir()</tt> can be applied to objects as well.</p>
<p class="docText">In <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec2">Python 2.2</a>, <tt>dir()</tt> received a significant upgrade. Because of these changes, the voluntarily implemented <tt>__members__</tt> and <tt>__methods__</tt> data attributes have been deprecated. <tt>dir()</tt> provides more details than the old one. According to the documentation, &quot;In addition to the names of instance variables and regular methods, it also shows the methods that are normally invoked through special notations, like <tt>__iadd__</tt> (<tt>+=</tt>), <tt>__len__</tt> (<tt>len()</tt>), <tt>__ne__</tt> (<tt>!=</tt>).&quot; Here are more specifics from the Python documentation:</p>
<ul><li><p class="docList"><tt>dir()</tt> on an instance (classic or new-style) shows the instance variables as well as the methods and class attributes defined by the instance's class and all its base classes.</p></li><li><p class="docList"><tt>dir()</tt> on a class (classic or new-style) shows the contents of the <tt>__dict__</tt> of the class and all its base classes. It does not show class attributes that are defined by a metaclass.</p></li><li><p class="docList"><tt>dir()</tt> on a module shows the contents of the module's <tt>__dict__</tt>. (This is unchanged.)</P></li><LI><p class="docList"><a name="iddle1712"></a><a name="iddle1965"></a><a name="iddle2727"></a><a name="iddle2855"></a><a name="iddle3092"></a><a name="iddle4089"></a><tt>dir()</tt> without arguments shows the caller's local variables. (Again, unchanged.)</p></LI><li><p class="docList">There are more details; in particular, for objects that override <tt>__dict__</tt> or <tt>__class__</tt>, these are honored, and for backwards compatibility, <tt>__members__</tt> and <tt>__methods__</tt> are honored if they are defined.</P></li></UL>

<a name="ch13lev2sec40"></a>
<H4 id="title-IDAATFVD" class="docSection2Title">13.12.5. <tt>super()</tt></H4>
<p class="docText">The <tt>super()</tt> function was added in 2.2 for new-style classes. The purpose of this function is to help the programmer chase down the appropriate superclass with which the proper method can be invoked. In simple cases, the programmer will likely just call the ancestor class method in an unbound fashion. Using <tt>super()</tt> simplifies the task of search for a suitable ancestor and passes in the instance or type object on your behalf when you call it.</P>

<p class="docText">
<img border="0" alt="" width="50" height="48" SRC="images/2_2.jpg"></p>


<p class="docText">In <a class="docLink" href="ch13lev1sec11.html#ch13lev2sec35">Section 13.11.4</a>, we described the method resolution order (MRO) that is used to chase down attributes in ancestor classes. For each class defined, an attribute named <tt>__mro__</tt> is created as a tuple that lists the classes that need to be searched, in the order they are searched. Here is its syntax:</p>
<div class="docText"><pre>    super(<span class="docEmphasis">type</span>[, <span class="docEmphasis">obj</span>])</pre></div><br>
<p class="docText">Given <span class="docEmphasis"><tt>type</tt></span>, <tt>super()</tt> &quot;returns the superclass&quot; of <span class="docEmphasis"><tt>type</tt></span>. You may also pass in <span class="docEmphasis"><tt>obj</tt></span>, which should be of the type <span class="docEmphasis"><tt>type</tt></span> if you want the superclass to be bound, otherwise it will be unbound. The <span class="docEmphasis"><tt>obj</tt></span> argument can also be a type, but it needs to be a subclass of type. In summary, when <span class="docEmphasis"><tt>obj</tt></span> is given:</P>
<ul><LI><p class="docList">If <span class="docEmphasis"><tt>obj</tt></span> is an instance, then <tt>isinstance</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>type</tt></span>) must be <tt>true</tt></P></li><LI><p class="docList">If <span class="docEmphasis"><tt>obj</tt></span> is a class or type, then <tt>issubclass</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>type</tt></span>) must be <tt>TRue</tt></p></li></ul>
<p class="docText">Actually, <tt>super()</tt> is a factory function that makes a <tt>super</tt> object that uses the <tt>__mro__</tt> attribute for a given class to find the appropriate superclass. Most notably, it searches that MRO starting from the point where the current class is found. For more details, again please see Guido van Rossum's essay on type and class unification, where he even gives a pure Python implementation of <tt>super()</tt> so you can get a better idea of how it works!</p>
<p class="docText">Final thought... <tt>super()</tt>'s primary use is in the lookup of a superclass attribute, e.g., <tt>super(MyClass</tt>, <tt>self).__init__()</tt>. If you are not performing such a lookup, you probably do not need to be using <tt>super()</tt>.</P>
<p class="docText"><a name="iddle1653"></a><a name="iddle4445"></a>There are various examples <span class="docEmphasis">how to use</span> <tt>super()</tt> scattered throughout this chapter. Also be sure to read the important notes about <tt>super()</tt> in <a class="docLink" href="ch13lev1sec11.html#ch13lev2sec33">Section 13.11.2</a>, especially the Core Note in that section.</p>

<a name="ch13lev2sec41"></a>
<h4 id="title-IDAMYFVD" class="docSection2Title">13.12.6. <tt>vars()</tt></H4>
<p class="docText">The <tt>vars()</tt> built-in function is similar to <tt>dir()</tt> except that any object given as the argument must have a <tt>__dict__</tt> attribute. <tt>vars()</tt> will return a dictionary of the attributes (keys) and values of the given object based on the values in its <tt>__dict__</tt> attribute. If the object provided does not have such an attribute, an <tt>TypeError</tt> exception is raised. If no object is provided as an argument to <tt>vars()</tt>, it will display the dictionary of attributes (keys) and the values of the local namespace, i.e., <tt>locals()</tt>. We present an example of calling <tt>vars()</tt> with a class instance:</p>
<div class="docText"><pre><span class="docEmphStrong">class</span> C(object):
     <span class="docEmphStrong">pass</span>

&gt;&gt;&gt; c = C()
&gt;&gt;&gt; c.foo = 100
&gt;&gt;&gt; c.bar = 'Python'
&gt;&gt;&gt; c.__dict__
{'foo': 100, 'bar': 'Python'}
&gt;&gt;&gt; vars(c)
{'foo': 100, 'bar': 'Python'}</pre></div><br>
<p class="docText"><a class="docLink" href="#ch13table03">Table 13.3</a> summarizes the built-in functions for classes and class instances.</p>
<a name="ch13table03"></a><P><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><H5 class="docTableTitle">Table 13.3. <a name="iddle1383"></a><a name="iddle2896"></a><a name="iddle2903"></a>Built-in Functions for Classes, Instances, and Other Objects</h5></caption><colgroup align="left" span="2"><col width="200"><col width="250"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Built-in Function</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Description</span></p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>issubclass</tt>(<span class="docEmphasis"><tt>sub</tt></span>, <span class="docEmphasis"><tt>sup</tt></span>)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Returns <tt>true</tt> if class <span class="docEmphasis"><tt>sub</tt></span> is a subclass of class <span class="docEmphasis"><tt>sup</tt></span>, <tt>False</tt> otherwise</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>isinstance</tt>(<span class="docEmphasis"><tt>obj1</tt></span>, <span class="docEmphasis"><tt>obj2</tt></span>)</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Returns <tt>true</tt> if instance <span class="docEmphasis"><tt>obj1</tt></span> is an instance of class <span class="docEmphasis"><tt>obj2</tt></span> or is an instance of a subclass of <span class="docEmphasis"><tt>obj2</tt></span>; will also return <tt>TRue</tt> if <span class="docEmphasis"><tt>obj1</tt></span> is of type <span class="docEmphasis"><tt>obj2</tt></span>; otherwise it returns <tt>False</tt></P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>hasattr</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>attr</tt></span>)</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns <tt>TRue</tt> if <span class="docEmphasis"><tt>obj</tt></span> has attribute <span class="docEmphasis"><tt>attr</tt></span> (given as a string), <tt>False</tt> otherwise</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>getattr</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>attr</tt></span>[, <span class="docEmphasis"><tt>default</tt></span>])</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Retrieves attribute <span class="docEmphasis"><tt>attr</tt></span> of <span class="docEmphasis"><tt>obj</tt></span>; same as return <span class="docEmphasis"><tt>obj.attr</tt></span>; if <span class="docEmphasis"><tt>attr</tt></span> is not an attribute of <span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>default</tt></span> returned if given; else <tt>AttributeError</tt> exception raised</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>setattr</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>attr</tt></span>, <span class="docEmphasis"><tt>val</tt></span>)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Sets attribute <span class="docEmphasis"><tt>attr</tt></span> of <span class="docEmphasis"><tt>obj</tt></span> to value <tt>val</tt>, over riding any previously existing attribute value; otherwise, attribute is created; same as <span class="docEmphasis"><tt>obj.attr = val</tt></span></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>delattr</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>attr</tt></span>)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Removes attribute <span class="docEmphasis"><tt>attr</tt></span> (given as a string) from <span class="docEmphasis"><tt>obj</tt></span>; same as <span class="docEmphStrong"><tt>del</tt></span> <span class="docEmphasis"><tt>obj.attr</tt></span></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>dir</tt>(<span class="docEmphasis"><tt>obj</tt></span><tt>=None</tt>)</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Returns a list of the attributes of <span class="docEmphasis"><tt>obj</tt></span>; if <span class="docEmphasis"><tt>obj</tt></span> not given, <tt>dir()</tt> displays local namespace attributes, i.e., <tt>locals().keys()</tt></P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>super</tt>(<span class="docEmphasis"><tt>type</tt></span>, <span class="docEmphasis"><tt>obj</tt></span><tt>=None</tt>)<sup class="docFootnote"><a class="docLink" href="#ch13fn01">[a]</a></sup></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Returns a proxy object representing the super class of <span class="docEmphasis"><tt>type</tt></span>; if <span class="docEmphasis"><tt>obj</tt></span> is not passed in, the super object returned is unbound; otherwise if <span class="docEmphasis"><tt>obj</tt></span> is a type <tt>issubclass</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>type</tt></span>) must be <tt>TRue</tt>; otherwise <tt>isinstance</tt>(<span class="docEmphasis"><tt>obj</tt></span>, <span class="docEmphasis"><tt>type</tt></span>) must be <tt>TRue</tt></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vars</tt>(<span class="docEmphasis"><tt>obj</tt></span><tt>=None</tt>)</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Returns a dictionary of the attributes and values of <span class="docEmphasis"><tt>obj</tt></span>; if <span class="docEmphasis"><tt>obj</tt></span> not given, <tt>vars()</tt> displays local namespace dictionary (attributes and values), i.e., <tt>locals()</tt></p></TD></TR></table></p><br><blockquote><p class="docFootnote"><sup><a name="ch13fn01">[a]</a></sup> New in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec2">Python 2.2</a>; only works with new-style classes.</p></blockquote>



<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch13lev1sec11.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch13lev1sec13.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>