<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 14.5.&nbsp; Executing Other (Non-Python) Programs</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec4.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec6.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch14lev1sec5"></a>
<h3 id="title-IDAQBD1D" class="docSection1Title">14.5. Executing Other (Non-Python) Programs</H3>
<p class="docText">We can also execute non-Python programs from within Python. These include binary executables, other shell scripts, etc. All that is required is a valid execution environment, i.e., permissions for file access and execution <a name="iddle3348"></a><a name="iddle3350"></a><a name="iddle3355"></a><a name="iddle3363"></a>must be granted, shell scripts must be able to access their interpreter (Perl, bash, etc.), binaries must be accessible (and be of the local machine's architecture).</p>
<p class="docText">Finally, the programmer must bear in mind whether our Python script is required to communicate with the other program that is to be executed. Some programs require input, others return output as well as an error code upon completion (or both). Depending on the circumstances, Python provides a variety of ways to execute non-Python programs. All of the functions discussed in this section can be found in the <tt>os</tt> module. We provide a summary for you in <a class="docLink" href="#ch14table06">Table 14.6</a> (where appropriate, we annotate those that are available only for certain platforms) as an introduction to the remainder of this section.</P>
<a name="ch14table06"></a><P><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><H5 class="docTableTitle">Table 14.6. <span class="docEmphasis"><tt>os</tt></span> Module Functions for External Program Execution (<span class="docEmphasis"><img border="0" alt="" width="18" height="18" SRC="images/u.jpg"><img border="0" alt="" width="12.5" height="12.5" SRC="images/u.jpg">Unix only</span>, <span class="docEmphasis">Windows only</span>)</H5></caption><colgroup align="left" span="2"><col width="250"><col width="250"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText"><tt>os</tt> <span class="docEmphasis">Module Function</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Description</span></p></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>system(</tt><span class="docEmphasis"><tt>cmd</tt></span><tt>)</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Execute program <tt>cmd</tt> given as string, wait for program completion, and return the exit code (on Windows, the exit code is always 0)</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>fork()</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Create a child process that runs in parallel to the parent process [usually used with <tt>exec*()</tt>]; return twice... once for the parent and once for the child <img border="0" alt="" width="18" height="18" SRC="images/u.jpg"><img border="0" alt="" width="12.5" height="12.5" SRC="images/u.jpg"></p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>execl(</tt><span class="docEmphasis"><tt>file, arg0, arg1, ...</tt></span><tt>)</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Execute <span class="docEmphasis"><tt>file</tt></span> with argument list <span class="docEmphasis"><tt>arg0</tt></span>, <span class="docEmphasis"><tt>arg1</tt></span>, etc.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>execv(</tt><span class="docEmphasis"><tt>file,</tt></span> <span class="docEmphasis"><tt>arglist</tt></span><tt>)</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execl()</tt> except with argument vector (list or tuple) <span class="docEmphasis"><tt>arglist</tt></span></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>execle(</tt><span class="docEmphasis"><tt>file,</tt></span> <span class="docEmphasis"><tt>arg0,</tt></span> <span class="docEmphasis"><tt>arg1, ...</tt></span><span class="docEmphasis"><tt>env</tt></span><tt>)</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execl()</tt> but also providing environment variable dictionary <span class="docEmphasis"><tt>env</tt></span></p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>execve(</tt><span class="docEmphasis"><tt>file,</tt></span> <span class="docEmphasis"><tt>arglist,</tt></span> <span class="docEmphasis"><tt>env</tt></span><tt>)</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execle()</tt> except with argument vector <span class="docEmphasis"><tt>arglist</tt></span></p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>execlp(</tt><span class="docEmphasis"><tt>cmd,</tt></span> <span class="docEmphasis"><tt>arg0,</tt></span> <span class="docEmphasis"><tt>arg1,...</tt></span><tt>)</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execl()</tt> but search for full file pathname of cmd in user search path</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>execvp(cmd, arglist)</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execlp()</tt> except with argument vector <span class="docEmphasis"><tt>arglist</tt></span></p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><a name="iddle3352"></a><a name="iddle3358"></a><a name="iddle3361"></a><tt>execlpe</tt>(<span class="docEmphasis"><tt>cmd,</tt></span> <span class="docEmphasis"><tt>arg0,</tt></span> <span class="docEmphasis"><tt>arg1,...</tt></span><span class="docEmphasis"><tt>env</tt></span><tt>)</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execlp()</tt> but also providing environment variable dictionary <span class="docEmphasis"><tt>env</tt></span></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>execvpe</tt>(<span class="docEmphasis"><tt>cmd,</tt></span> <span class="docEmphasis"><tt>arglist, </tt></span><span class="docEmphasis"><tt>env</tt></span><tt>)</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Same as <tt>execvp()</tt> but also providing environment variable dictionary <span class="docEmphasis"><tt>env</tt></span></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>spawn*</tt><sup class="docFootnote"><a class="docLink" href="#ch14tn1">[a]</a></sup><tt>(mode, file, args[, env])</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>spawn*()</tt></span> family executes path in a new process given <span class="docEmphasis"><tt>args</tt></span> as arguments and possibly an environment variable dictionary <span class="docEmphasis"><tt>env</tt></span>;<span class="docEmphasis"><tt>mode</tt></span> is a magic number indicating various modes of operation</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>wait()</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Wait for child process to complete [usually used with <tt>fork()</tt> and <tt>exec*()</tt>]<img border="0" alt="" width="18" height="18" SRC="images/u.jpg"><img border="0" alt="" width="12.5" height="12.5" SRC="images/u.jpg"></p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>waitpid(</tt><span class="docEmphasis"><tt>pid,</tt></span> <span class="docEmphasis"><tt>options</tt></span><tt>)</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Wait for specific child process to complete [usually used with <tt>fork()</tt> and <tt>exec*()</tt>]<img border="0" alt="" width="18" height="18" SRC="images/u.jpg"><img border="0" alt="" width="12.5" height="12.5" SRC="images/u.jpg"></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>popen(</tt><span class="docEmphasis"><tt>cmd,</tt></span> <span class="docEmphasis"><tt>mode</tt></span>=<tt>'</tt>r <tt>',</tt> <span class="docEmphasis"><tt>buffering</tt></span><tt>=-1)</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Execute <span class="docEmphasis"><tt>cmd</tt></span> string, returning a file-like object as a communication handle to the running program, defaulting to read <span class="docEmphasis"><tt>mode</tt></span> and default system <span class="docEmphasis"><tt>buffering</tt></span></p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>startfile</tt><sup class="docFootnote"><a class="docLink" href="#ch142">[b]</a></sup>
<tt>(path)</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Execute <span class="docEmphasis"><tt>path</tt></span> with its associated application <img border="0" alt="" width="19" height="19" SRC="images/w.jpg"><img border="0" alt="" width="12.5" height="12.2" SRC="images/w.jpg"></p></td></tr></table></p><br><blockquote><p class="docFootnote"><sup><a name="ch14tn1">[a]</a></sup> <tt>spawn*()</tt> functions named similarly to <tt>exec*()</tt> (both families have eight members); <tt>spawnv()</tt> and <tt>spawnve()</tt> new in Python 1.5.2 and the other six <tt>spawn*()</tt> functions new in Python 1.6; also <tt>spawnlp()</tt>, <tt>spawnlpe()</tt>, <tt>spawnvp()</tt> and <tt>spawnvpe()</tt> are Unix-only.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch142">[b]</a></sup> New in Python 2.0.</p></blockquote>
<p class="docText">As we get closer to the operating system layer of software, you will notice that the consistency of executing programs, even Python scripts, across platforms starts to get a little dicey. We mentioned above that the functions described in this section are in the <tt>os</tt> module. Truth is, there are multiple <tt>os</tt> modules. For example, the one for Unix-based systems (i.e., Linux, MacOS X, Solaris, *BSD, etc.) is the <tt>posix</tt> module. The one for Windows is <tt>nt</tt> (regardless of which version of Windows you are running; DOS users get the <tt>dos</tt> module), and the one for old MacOS is the <tt>mac</tt> module. Do not worry, Python will load the correct module when you call <span class="docEmphStrong"><tt>import</tt></span> <tt>os</tt>. You should never need to import a specific operating system module directly.</p>
<p class="docText"><a name="iddle3364"></a>Before we take a look at each of these module functions, we want to point out for those of you using <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec4">Python 2.4</a> and newer, there is a <tt>subprocess</tt> module that pretty much can substitute for all of these functions. We will show you later on in this chapter how to use some of these functions, then at the end give the equivalent using the <tt>subprocess.Popen</tt> class and <tt>subprocess.call()</tt> function.</p>
<a name="ch14lev2sec14"></a>
<h4 id="title-IDAXVD1D" class="docSection2Title">14.5.1. <tt>os.system()</tt></h4>
<p class="docText">The first function on our list is <tt>system()</tt>, a rather simplistic function that takes a system command as a string name and executes it. Python execution is suspended while the command is being executed. When execution has completed, the exit status will be given as the return value from <tt>system()</tt> and Python execution resumes.</P>
<p class="docText"><tt>system()</tt> preserves the current standard files, including standard output, meaning that executing any program or command displaying output will be passed on to standard output. Be cautious here because certain applications such as common gateway interface (CGI) programs will cause Web browser errors if output other than valid Hypertext Markup Language (HTML) strings are sent back to the client via standard output. <tt>system()</tt> is generally used with commands producing no output, some of which include programs to compress or convert files, mount disks to the system, or any other command to perform a specific task that indicates success or failure via its exit status rather than communicating via input and/or output. The convention adopted is an exit status of 0 indicating success and non-zero for some sort of failure.</p>
<p class="docText">For the purpose of providing an example, we will execute two commands that <span class="docEmphasis">do</span> have program output from the interactive interpreter so that you can observe how <tt>system()</tt> works.</P>
<div class="docText"><pre>        &gt;&gt;&gt; <span class="docEmphStrong">import</span> os
        &gt;&gt;&gt; result = os.system('cat /etc/motd')
        Have a lot of fun...
        &gt;&gt;&gt; result
        0
        &gt;&gt;&gt; result = os.system('uname -a')
        Linux solo 2.2.13 #1 Mon Nov 8 15:08:22 CET 1999 i586 unknown
        &gt;&gt;&gt; result
        0</pre></div><br>
<p class="docText">You will notice the output of both commands as well as the exit status of their execution, which we saved in the <tt>result</tt> variable. Here is an example executing a DOS command:</P>
<div class="docText"><pre>&gt;&gt;&gt; <span class="docEmphStrong">import</span> os
&gt;&gt;&gt; result = os.system('dir')

Volume in drive C has no label
Volume Serial Number is 43D1-6C8A
Directory of C:\WINDOWS\TEMP

.              &lt;DIR&gt;        01-08-98  8:39a .
..             &lt;DIR&gt;        01-08-98  8:39a ..
         0 file(s)              0 bytes
         2 dir(s)     572,588,032 bytes free
&gt;&gt;&gt; result
0</pre></div><br>

<a name="ch14lev2sec15"></a>
<H4 id="title-IDAUXD1D" class="docSection2Title">14.5.2. <tt>os.popen()</tt></h4>
<p class="docText"><a name="iddle3359"></a>The <tt>popen()</tt> function is a combination of a file object and the <tt>system()</tt> function. It works in the same way as <tt>system()</tt> does, but in addition, it has the ability to establish a one-way connection to that program and then to access it like a file. If the program requires input, then you would call <tt>popen()</tt> with a mode of <tt>'w'</tt> to &quot;write&quot; to that command. The data that you send to the program will then be received through its standard input. Likewise, a mode of <tt>'r'</tt> will allow you to spawn a command, then as it writes to standard output, you can read that through your file-like handle using the familiar <tt>read*()</tt> methods of file object. And just like for files, you will be a good citizen and <tt>close()</tt> the connection when you are finished.</P>
<p class="docText">In one of the <tt>system()</tt> examples we used above, we called the Unix <tt>uname</tt> program to give us some information about the machine and operating system we are using. That command produced a line of output that went directly to the screen. If we wanted to read that string into a variable and perform internal manipulation or store that string to a log file, we could, using <tt>popen()</tt>. In fact, the code would look like the following:</P>
<div class="docText"><pre>        &gt;&gt;&gt; <span class="docEmphStrong">import</span> os
        &gt;&gt;&gt; f = os.popen('uname -a')
        &gt;&gt;&gt; data = f.readline()
        &gt;&gt;&gt; f.close()
        &gt;&gt;&gt; <span class="docEmphStrong">print</span> data,
        Linux solo 2.2.13 #1 Mon Nov 8 15:08:22 CET 1999 i586 unknown</pre></div><BR>
<p class="docText">As you can see, <tt>popen()</tt> returns a file-like object; also notice that <tt>readline()</tt>, as always, preserves the NEWLINE character found at the end of a line of input text.</P>

<a name="ch14lev2sec16"></a>

<h4 id="title-IDAB0D1D" class="docSection2Title">14.5.3. <tt>os.fork()</tt>,<tt>os.exec*()</tt>,<tt>os.wait*()</tt></h4>
<p class="docText"><a name="iddle3356"></a>Without a detailed introduction to operating systems theory, we present a light introduction to processes in this section. <tt>fork()</tt> takes your single executing flow of control known as a process and creates a &quot;fork in the road,&quot; if you will. The interesting thing is that your system takes <span class="docEmphasis">both</span> forksmeaning that you will have two consecutive and parallel running programs (running the same code no less because both processes resume at the next line of code immediately succeeding the <tt>fork()</tt> call).</p>
<p class="docText">The original process that called <tt>fork()</tt> is called the <span class="docEmphasis">parent process</span>, and the new process created as a result of the call is known as the <span class="docEmphasis">child process</span>. When the child process returns, its return value is always zero; when the parent process returns, its return value is always the process identifier (aka process ID, or PID) of the child process (so the parent can keep tabs on all its children). The PIDs are the only way to tell them apart, too!</P>
<p class="docText">We mentioned that both processes will resume immediately after the call to <tt>fork()</tt>. Because the code is the same, we are looking at identical execution if no other action is taken at this time. This is usually not the intention. The main purpose for creating another process is to run another program, so we need to take divergent action as soon as parent and child return. As we stated above, the PIDs differ, so this is how we tell them apart.</p>
<p class="docText">The following snippet of code will look familiar to those who have experience managing processes. However, if you are new, it may be difficult to see how it works at first, but once you get it, you get it.</P>
<div class="docText"><pre>ret = os.fork()        # spawn 2 processes, both return
<span class="docEmphStrong">if</span> ret == 0:           # child returns with PID of 0
    <span class="docEmphasis">child_suite</span>        # child code
<span class="docEmphStrong">else</span>:                  # parent returns with child's PID
    <span class="docEmphasis">parent_suite</span>       # parent code</pre></div><br>
<p class="docText">The call to <tt>fork()</tt> is made in the first line of code. Now both child and parent processes exist running simultaneously. The child process has its own copy of the virtual memory address space and contains an exact replica of the parent's address spaceyes, both processes are nearly identical. Recall that <tt>fork()</tt> returns twice, meaning that both the parent and the child return. You might ask, how can you tell them apart if they both return? When the parent returns, it comes back with the PID of the child process. When the child returns, it has a return value of 0. This is how we can differentiate the two processes.</P>
<p class="docText"><a name="iddle3351"></a><a name="iddle3353"></a>Using an <span class="docEmphStrong"><tt>if-else</tt></span> statement, we can direct code for the child to execute (i.e., the <span class="docEmphStrong"><tt>if</tt></span> clause) as well as the parent (the <span class="docEmphStrong"><tt>else</tt></span> clause). The code for the child is where we can make a call to any of the <tt>exec*()</tt> functions to run a completely different program or some function in the same program (as long as both child and parent take divergent paths of execution). The general convention is to let the children do all the dirty work while the parent either waits patiently for the child to complete its task or continues execution and checks later to see if the child finished properly.</p>
<p class="docText">All of the <tt>exec*()</tt> functions load a file or command and execute it with an argument list (either individually given or as part of an argument list). If applicable, an environment variable dictionary can be provided for the command. These variables are generally made available to programs to provide a more accurate description of the user's current execution environment. Some of the more well-known variables include the user name, search path, current shell, terminal type, localized language, machine type, operating system name, etc.</P>
<p class="docText">All versions of <tt>exec*()</tt> will replace the Python interpreter running in the current (child) process with the given file as the program to execute now. Unlike <tt>system()</tt>, there is no return to Python (since Python was replaced). An exception will be raised if <tt>exec*()</tt> fails because the program cannot execute for some reason.</P>
<p class="docText">The following code starts up a cute little game called &quot;xbill&quot; in the child process while the parent continues running the Python interpreter. Because the child process never returns, we do not have to worry about any code for the child after calling <tt>exec*()</tt>. Note that the command is also a required first argument of the argument list.</p>
<div class="docText"><pre>ret = os.fork()
<span class="docEmphStrong">if</span> ret == 0:                   # child code
     execvp('xbill', ['xbill'])
<span class="docEmphStrong">else</span>:                          # parent code
     os.wait()</pre></div><br>
<p class="docText">In this code, you also find a call to <tt>wait()</tt>. When children processes have completed, they need their parents to clean up after them. This task, known as &quot;reaping a child,&quot; can be accomplished with the <tt>wait*()</tt> functions. Immediately following a <tt>fork()</tt>, a parent can wait for the child to complete and do the clean-up then and there. A parent can also continue processing and reap the child later, also using one of the <tt>wait*()</tt> functions.</p>
<p class="docText">Regardless of which method a parent chooses, it must be performed. When a child has finished execution but has not been reaped yet, it enters a <a name="iddle2973"></a><a name="iddle3362"></a><a name="iddle4078"></a>limbo state and becomes known as a <span class="docEmphasis">zombie</span> process. It is a good idea to minimize the number of zombie processes in your system because children in this state retain all the system resources allocated in their lifetimes, which do not get freed or released until they have been reaped by the parent.</p>
<p class="docText">A call to <tt>wait()</tt> suspends execution (i.e., waits) until a child process (any child process) has completed, terminating either normally or via a signal. <tt>wait()</tt> will then reap the child, releasing any resources. If the child has already completed, then <tt>wait()</tt> just performs the reaping procedure. <tt>waitpid()</tt> performs the same functionality as <tt>wait()</tt> with the additional arguments' PID to specify the process identifier of a specific child process to wait for plus options (normally zero or a set of optional flags logically OR'd together).</P>

<a name="ch14lev2sec17"></a>
<h4 id="title-IDAQAE1D" class="docSection2Title">14.5.4. <tt>os.spawn*()</tt></h4>
<p class="docText">The <tt>spawn*()</tt> family of functions are similar to <tt>fork()</tt> and <tt>exec*()</tt> in that they execute a command in a new process; however, you do not need to call two separate functions to create a new process and cause it to execute a command. You only need to make one call with the <tt>spawn*()</tt> family. With its simplicity, you give up the ability to &quot;track&quot; the execution of the parent and child processes; its model is more similar to that of starting a function in a thread. Another difference is that you have to know the magic mode parameter to pass to <tt>spawn*()</tt>.</P>
<p class="docText">On some operating systems (especially embedded real-time operating systems [RTOs]), <tt>spawn*()</tt> is much faster than <tt>fork()</tt>. (Those where this is not the case usually use copy-on-write tricks.) Refer to the Python Library Reference Manual for more details (see the Process Management section of the manual on the <tt>os</tt> module) on the <tt>spawn*()</tt> functions. Various members of the <tt>spawn*()</tt> family were added to Python between 1.5 and 1.6 (inclusive).</p>

<p class="docText">
<img border="0" alt="" id="195131084199" width="50" height="47" SRC="images/2_4.jpg"></p>



<a name="ch14lev2sec18"></a>
<h4 id="title-IDAACE1D" class="docSection2Title">14.5.5. <tt>subprocess</tt> Module</H4>
<p class="docText">After <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec3">Python 2.3</a> came out, work was begun on a module named <tt>popen5</tt>. The naming continued the tradition of all the previous <tt>popen*()</tt> functions that came before, but rather than continuing this ominous trend, the module was eventually named <tt>subprocess</tt>, with a class named <tt>Popen</tt> that has functionality to centralize most of the process-oriented functions we have <a name="iddle3360"></a><a name="iddle3365"></a>discussed so far in this chapter. There is also a convenience function named <tt>call()</tt> that can easily slide into where <span class="docEmphStrong"><tt>os.system</tt></span> <tt>()</tt> lives. The <tt>subprocess</tt> module made its debut in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec4">Python 2.4</a>. Below is an example of what it can do:</P>
<a name="ch14lev3sec12"></a>
<h5 id="title-IDADEE1D" class="docSection3Title">Replacing <tt>os.system()</tt></h5>
<p class="docText"><span class="docEmphBoldItalic">Linux Example:</span></p>
<div class="docText"><pre>  &gt;&gt;&gt; <span class="docEmphStrong">from</span> subprocess <span class="docEmphStrong">import</span> call
  &gt;&gt;&gt; <span class="docEmphStrong">import</span> os
  &gt;&gt;&gt; res = call(('cat', '/etc/motd'))
  Linux starship 2.4.18-1-686 #4 Sat Nov 29 10:18:26 EST 2003 i686 GNU/Linux
  &gt;&gt;&gt; res
  0</pre></div><br>
<p class="docText"><span class="docEmphBoldItalic">Win32 Example:</span></p>
<div class="docText"><pre>   &gt;&gt;&gt; res = call(('dir', r'c:\windows\temp'), shell=True)
    Volume in drive C has no label.
    Volume Serial Number is F4C9-1C38

    Directory of c:\windows\temp

   03/11/2006  02:08 AM    &lt;DIR&gt;          .
   03/11/2006  02:08 AM    &lt;DIR&gt;          ..
   02/21/2006  08:45 PM               851 install.log
   02/21/2006  07:02 PM               444 tmp.txt
                  2 File(s)          1,295 bytes
                  3 Dir(s)  55,001,104,384 bytes free</pre></div><br>

<a name="ch14lev3sec13"></a>
<h5 id="title-IDAUFE1D" class="docSection3Title">Replacing <tt>os.popen()</tt></h5>
<p class="docText">The syntax for creating an instance of <tt>Popen</tt> is only slightly more complex than calling the <tt>os.popen()</tt> function:</p>
<div class="docText"><pre>        &gt;&gt;&gt; <span class="docEmphStrong">from</span> subprocess <span class="docEmphStrong">import</span> Popen, PIPE
        &gt;&gt;&gt; f = Popen(('uname', '-a'), stdout=PIPE).stdout
        &gt;&gt;&gt; data = f.readline()
        &gt;&gt;&gt; f.close()
        &gt;&gt;&gt; <span class="docEmphStrong">print</span> data,
        Linux starship 2.4.18-1-686 #4 Sat Nov 29 10:18:26 EST 2003 i686
        GNU/Linux
        &gt;&gt;&gt; f = Popen('who', stdout=PIPE).stdout
        &gt;&gt;&gt; data = [ eachLine.strip() <span class="docEmphStrong">for</span> eachLine <span class="docEmphStrong">in</span> f ]
        &gt;&gt;&gt; f.close()
        &gt;&gt;&gt; <span class="docEmphStrong">for</span> eachLine <span class="docEmphStrong">in</span> data:
        ...  <span class="docEmphStrong">print</span> eachLine
        ...
        wesc     console  Mar 11 12:44
        wesc     ttyp1    Mar 11 16:29
        wesc     ttyp2    Mar 11 16:40  (192.168.1.37)
        wesc     ttyp3    Mar 11 16:49  (192.168.1.37)
        wesc     ttyp4    Mar 11 17:51  (192.168.1.34)</pre></div><br>


<a name="ch14lev2sec19"></a>
<h4 id="title-IDARHE1D" class="docSection2Title">14.5.6. Related Functions</h4>
<p class="docText"><a name="iddle1903"></a><a class="docLink" href="#ch14table07">Table 14.7</a> lists some of the functions (and their modules) that can perform some of the tasks described.</P>
<a name="ch14table07"></a><p><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><H5 class="docTableTitle">Table 14.7. Various Functions for File Execution</h5></caption><colgroup align="left" span="2"><col width="250"><col width="250"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphBoldItalic">File Object Attribute</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphBoldItalic">Description</span></P></th></tr></thead><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>os/popen2.popen2</tt><sup class="docFootnote"><a class="docLink" href="#ch14tn03">[a]</a></sup><tt>()</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Executes a file and open file read and write access from (<tt>stdout</tt>) and to (<tt>stdin</tt>) the newly created running program</p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>os/popen2.popen3</tt><sup class="docFootnote"><a class="docLink" href="#ch14tn03">[a]</a></sup><tt>()</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Executes a file and open file read and write access from (<tt>stdout</tt> and <tt>stderr</tt>) and (<tt>stdin</tt>) to the newly created running program</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>os/popen2.popen4</tt> <sup class="docFootnote"><a class="docLink" href="#ch1405">[b]</a></sup><tt>()</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Executes a file and open file read and write access from (<tt>stdout</tt>and <tt>stderr</tt> combined) and (<tt>stdin</tt>) to the newlycreated running program</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>commands.getoutput()</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Executes a file in a subprocess, returns all output as a string <img border="0" alt="" width="18" height="18" SRC="images/u.jpg"><img border="0" alt="" width="12.5" height="12.5" SRC="images/u.jpg"></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>subprocess.call</tt><sup class="docFootnote"><a class="docLink" href="#ch1406">[c]</a></sup><tt>()</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Convenience function that creates a <tt>subprocess.Popen</tt>, waits for the command to complete, then returns the status code; like <tt>os.system()</tt> but is a more flexible alternative</p></td></tr></table></P><br><blockquote><p class="docFootnote"><sup><a name="ch14tn03">[a]</a></sup> New to os module in Python 2.0.</P></blockquote><blockquote><p class="docFootnote"><sup><a name="ch1405">[b]</a></sup> New (to os and popen2 modules) in Python 2.0.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch1406">[c]</a></sup> New in <a class="docLink" href="ch05lev1sec2.html#ch05lev3sec4">Python 2.4</a></P></blockquote>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec4.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch14lev1sec6.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>