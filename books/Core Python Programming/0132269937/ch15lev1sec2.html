<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 15.2.&nbsp; Special Symbols and Characters</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch15lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch15lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch15lev1sec2"></a>
<h3 id="title-IDAO335H" class="docSection1Title">15.2. Special Symbols and Characters</H3>
<p class="docText">We will now introduce the most popular of the <span class="docEmphasis">metacharacters</span>, special characters and symbols, which give regular expressions their power and flexibility. You will find the most common of these symbols and characters in <a class="docLink" href="#ch15table01">Table 15.1</a>.</p>
<a name="ch15table01"></a><P><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><H5 class="docTableTitle">Table 15.1. Common Regular Expression Symbols and Special Characters</H5></caption><colgroup align="left" span="3"><col width="100"><col width="300"><col width="100"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Notation</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Description</span></p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText"><span class="docEmphasis">Example RE</span></p></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphBoldItalic">Symbols</span></p></TD><td class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top">&nbsp;</td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>literal</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match literal string value <span class="docEmphasis"><tt>literal</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>foo</tt></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis"><tt>re1|re2</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match regular expressions <span class="docEmphasis"><tt>re1</tt></span> or <span class="docEmphasis"><tt>re2</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>foo|bar</tt></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>.</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">any character</span> (except NEWLINE)</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>b.b</tt></p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>^</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">start of string</span></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>^Dear</tt></p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>$</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">end of string</span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>/bin/*sh$</tt></p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>*</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">0 or more</span> occurrences of preceding RE</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[A-Za-z0-9]*</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>+</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">1 or more</span> occurrences of preceding RE</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[a-z]+\.com</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>?</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">0 or 1</span> occurrence(s) of preceding RE</P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>goo?</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>{</tt><span class="docEmphasis"><tt>N</tt></span><tt>}</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis"><tt>N</tt></span> occurrences of preceding RE</P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[0-9]{3}</tt></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>{</tt><span class="docEmphasis"><tt>M,N</tt></span><tt>}</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match from <span class="docEmphasis"><tt>M</tt></span> to <span class="docEmphasis"><tt>N</tt></span> occurrences of preceding RE</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[0-9]{5,9}</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[</tt><span class="docEmphasis"><tt>...</tt></span><tt>]</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match any single character from <span class="docEmphasis">character</span> class</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[aeiou]</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[</tt><span class="docEmphasis"><tt>..x-y..</tt></span><tt>]</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Match any single character in the <span class="docEmphasis">range from</span> <tt>x</tt> to <tt>y</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[0-9],[A-Za-z]</tt></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[^</tt><span class="docEmphasis"><tt>...</tt></span><tt>]</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><span class="docEmphasis">Do not match</span> any character from character class, including any ranges, if present</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[^aeiou], [^A-Za-z0-9_]</tt></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>(*|+|?| {})?</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Apply &quot;non-greedy&quot; versions of above occurrence/repetition symbols ( <tt>*</tt>, <tt>+</tt>, <tt>?</tt>, <tt>{}</tt>)</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>.*?[a-z]</tt></p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>(</tt><span class="docEmphasis"><tt>...</tt></span><tt>)</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match enclosed RE and save as <span class="docEmphasis">subgroup</span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>([0-9]{3})?, f(oo|u)bar</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top" style="background-color:#DDDDDD"><p class="docText"><span class="docEmphBoldItalic">Special Characters</span></P></td><TD class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top">&nbsp;</td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\d</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Match any decimal <span class="docEmphasis">digit</span>, same as <tt>[0-9]</tt>(<tt>\D</tt> is inverse of <tt>\d</tt>: do not match any numeric digit)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>data\d+.txt</tt></P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\w</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Match any <span class="docEmphasis">alphanumeric</span> character, same as <tt>[A-Za-z0-9_]</tt> (<tt>\W</tt> is inverse of <tt>\w</tt>)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[A-Za-z_]\w+</tt></p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\s</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">any whitespace</span> character, same as <tt>[ \n\t\r\v\f]</tt> (<tt>\S</tt> is inverse of <tt>\s</tt>)</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>of\sthe</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\b</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match any <span class="docEmphasis">word boundary</span> (<tt>\B</tt> is inverse of <tt>\b</tt>)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\bThe\b</tt></P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\</tt><span class="docEmphasis"><tt>nn</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Match saved <span class="docEmphasis">subgroup</span> <span class="docEmphasis"><tt>nn</tt></span> (see <tt>(...)</tt> above)</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>price: \16</tt></P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\</tt><span class="docEmphasis"><tt>c</tt></span></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Match any <span class="docEmphasis">special character</span> <span class="docEmphasis"><tt>c</tt></span> verbatim (i.e., with out its special meaning, literal)</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\., \\, \*</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\A (\Z)</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Match <span class="docEmphasis">start (end) of string</span> (also see <tt>^</tt> and <tt>$</tt> above)</P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\ADear</tt></p></TD></TR></table></p><br>
<a name="ch15lev2sec2"></a>

<h4 id="title-IDALBE1D" class="docSection2Title">15.2.1. Matching More Than One RE Pattern with Alternation ( <tt>|</tt> )</h4>
<p class="docText"><a name="iddle1008"></a><a name="iddle1010"></a><a name="iddle1012"></a><a name="iddle1020"></a><a name="iddle1024"></a><a name="iddle1044"></a><a name="iddle1076"></a><a name="iddle1293"></a><a name="iddle1325"></a><a name="iddle1753"></a><a name="iddle1757"></a><a name="iddle2787"></a><a name="iddle2789"></a><a name="iddle2794"></a><a name="iddle2810"></a><a name="iddle3412"></a><a name="iddle3424"></a><a name="iddle3581"></a><a name="iddle3584"></a><a name="iddle3596"></a><a name="iddle3827"></a><a name="iddle4012"></a><a name="iddle4034"></a><a name="iddle4523"></a><a name="iddle4558"></a>The pipe symbol ( <tt>|</tt> ), a vertical bar on your keyboard, indicates an <span class="docEmphasis">alternation</span> operation, meaning that it is used to choose from one of the different regular expressions, which are separated by the pipe symbol. For example, below are some patterns that employ alternation, along with the strings they match:</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="150"><col width="150"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>at|home</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>at, home</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>r2d2|c3po</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>r2d2, c3po</tt></P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>bat|bet|bit</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>bat, bet, bit</tt></P></td></TR></table></P><br>
<p class="docText">With this one symbol, we have just increased the flexibility of our regular expressions, enabling the matching of more than just one string. Alternation is also sometimes called union or logical OR.</p>

<a name="ch15lev2sec3"></a>
<h4 id="title-IDABKE1D" class="docSection2Title">15.2.2. Matching Any Single Character ( <tt>.</tt>)</h4>
<p class="docText">The dot or period ( <tt>.</tt> ) symbol matches any single character except for NEWLINE (Python REs have a compilation flag [<tt>S</tt> or <tt>DOTALL</tt>], which can override this to include NEWLINEs.). Whether letter, number, whitespace not including &quot;<tt>\n</tt>,&quot; printable, non-printable, or a symbol, the dot can match them all.</P>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="100"><col width="250"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></tr></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>f.o</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Any character between &quot;f&quot; and &quot;o&quot;, e.g., <tt>fao</tt>, <tt>f9o</tt>, <tt>f#o</tt>, <tt>etc.</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>..</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Any pair of characters</p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>.end</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Any character before the string <tt>end</tt></P></td></TR></table></P><BR>
<p class="docText"><span class="docEmphStrong">Q:</span> What if I want to match the dot or period character?</P>
<p class="docText"><span class="docEmphStrong">A:</span> In order to specify a dot character explicitly, you must escape its functionality with a backslash, as in &quot;<tt>\.</tt>&quot;.</p>

<a name="ch15lev2sec4"></a>
<h4 id="title-IDA1NE1D" class="docSection2Title">15.2.3. Matching from the Beginning or End of Strings or Word Boundaries ( <tt>^</tt>/<tt>$</tt> /<tt>\b</tt> /<tt>\B</tt>)</h4>
<p class="docText">There are also symbols and related special characters to specify searching for patterns at the beginning and ending of strings. To match a pattern starting from the beginning, you must use the carat symbol ( <tt>^</tt> ) or the special character <tt>\A</tt> (backslash-capital &quot;A&quot;). The latter is primarily for keyboards that do not have the carat symbol, i.e., international. Similarly, the dollar sign ( <tt>$</tt> ) or <tt>\Z</tt> will match a pattern from the end of a string.</P>
<p class="docText"><a name="iddle1011"></a><a name="iddle1039"></a><a name="iddle1189"></a><a name="iddle1226"></a><a name="iddle1328"></a><a name="iddle1754"></a><a name="iddle3585"></a>Patterns that use these symbols differ from most of the others we describe in this chapter since they dictate location or position. In the Core Note above, we noted that a distinction is made between &quot;matching,&quot; attempting matches of entire strings starting at the beginning, and &quot;searching,&quot; attempting matches from anywhere within a string. With that said, here are some examples of &quot;edge-bound&quot; RE search patterns:</p>
<P><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="155"><col width="275"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></TR></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>^From</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Any string that starts with <tt>From</tt></P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>/bin/tcsh$</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Any string that ends with <tt>/bin/tcsh</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>^Subject: hi$</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Any string consisting solely of the string <tt>Subject: hi</tt></p></td></tr></table></p><br>
<p class="docText">Again, if you want to match either (or both) of these characters verbatim, you must use an escaping backslash. For example, if you wanted to match any string that ended with a dollar sign, one possible RE solution would be the pattern &quot;<tt>.*\$$</tt>&quot;.</P>
<p class="docText">The <tt>\b</tt> and <tt>\B</tt> special characters pertain to word boundary matches. The difference between them is that <tt>\b</tt> will match a pattern to a word boundary, meaning that a pattern must be at the beginning of a word, whether there are any characters in front of it (word in the middle of a string) or not (word at the beginning of a line). And likewise, <tt>\B</tt> will match a pattern only if it appears starting in the middle of a word (i.e., not at a word boundary). Here are some examples:</p>
<P><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="185"><col width="325"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>the</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Any string containing <tt>the</tt></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\bthe</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Any word that starts with <tt>the</tt></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\bthe\b</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Matches only the word <tt>the</tt></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\Bthe</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Any string that contains but does not begin with <tt>the</tt></p></td></tr></table></p><br>

<a name="ch15lev2sec5"></a>
<h4 id="title-IDATWE1D" class="docSection2Title">15.2.4. Creating Character Classes ( <tt>[ ]</tt> )</h4>
<p class="docText">While the dot is good for allowing matches of any symbols, there may be occasions where there are specific characters you want to match. For this reason, the bracket symbols ( <tt>[ ]</tt> ) were invented. The regular expression will match any of the enclosed characters. Here are some examples:</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="150"><col width="325"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>b[aeiu]t</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>bat</tt>, <tt>bet</tt>, <tt>bit</tt>, <tt>but</tt></P></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[cr][23][dp][o2]</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">A string of 4 characters: first is &quot;r&quot; or &quot;c,&quot; then &quot;2&quot; or &quot;3,&quot; followed by &quot;d&quot; or &quot;p,&quot; and finally, either &quot;o&quot; or &quot;2,&quot; e.g., <tt>c2do</tt>, <tt>r3p2</tt>, <tt>r2d2</tt>, <tt>c3po</tt>, etc.</p></TD></tr></table></P><br>
<p class="docText"><a name="iddle1005"></a><a name="iddle1009"></a><a name="iddle1018"></a><a name="iddle1143"></a><a name="iddle1431"></a><a name="iddle2790"></a><a name="iddle2796"></a><a name="iddle2797"></a><a name="iddle2799"></a><a name="iddle2801"></a><a name="iddle2802"></a><a name="iddle3053"></a><a name="iddle3240"></a><a name="iddle3246"></a><a name="iddle3533"></a><a name="iddle3534"></a><a name="iddle3600"></a><a name="iddle3601"></a><a name="iddle3603"></a><a name="iddle3608"></a><a name="iddle3638"></a><a name="iddle3947"></a>One side note regarding the RE &quot;<tt>[cr][23][dp][o2]</tt>&quot;a more restrictive version of this RE would be required to allow only &quot;r2d2&quot; or &quot;c3po&quot; as valid strings. Because brackets merely imply &quot;logical OR&quot; functionality, it is not possible to use brackets to enforce such a requirement. The only solution is to use the pipe, as in &quot;<tt>r2d2|c3po</tt>&quot;.</P>
<p class="docText">For single-character REs, though, the pipe and brackets are equivalent. For example, let's start with the regular expression &quot;ab,&quot; which matches only the string with an &quot;a&quot; followed by a &quot;b&quot;. If we wanted either a one-letter string, i.e., either &quot;a&quot; or a &quot;b,&quot; we could use the RE &quot;<tt>[ab]</tt>.&quot; Because &quot;a&quot; and &quot;b&quot; are individual strings, we can also choose the RE &quot;<tt>a|b</tt>&quot;. However, if we wanted to match the string with the pattern &quot;ab&quot; followed by &quot;cd,&quot; we cannot use the brackets because they work only for single characters. In this case, the only solution is &quot;<tt>ab|cd</tt>,&quot; similar to the &quot;<tt>r2d2/c3po</tt>&quot; problem just mentioned.</p>

<a name="ch15lev2sec6"></a>
<H4 id="title-IDAG5E1D" class="docSection2Title">15.2.5. Denoting Ranges ( <tt>-</tt> ) and Negation ( <tt>^</tt> )</H4>
<p class="docText">In addition to single characters, the brackets also support ranges of characters. A hyphen between a pair of symbols enclosed in brackets is used to indicate a range of characters, e.g., A-Z, a-z, or 0-9 for uppercase letters, lowercase letters, and numeric digits, respectively. This is a lexicographic range, so you are not restricted to using just alphanumeric characters. Additionally, if a caret ( <tt>^</tt> ) is the first character immediately inside the open left bracket, this symbolizes a directive <span class="docEmphasis">not</span> to match any of the characters in the given character set.</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="125"><col width="350"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</P></th></tr></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>z.[0-9]</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">&quot;z&quot; followed by any character then followed by a single digit</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[r-u][env-y]</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">&quot;r&quot; &quot;s,&quot; &quot;t&quot; or &quot;u&quot; followed by &quot;e,&quot; &quot;n,&quot; &quot;v,&quot; &quot;w,&quot; &quot;x,&quot; or &quot;y&quot;</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[us]</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">followed by &quot;u&quot; or &quot;s&quot;</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[^aeiou]</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">A non-vowel character (Exercise: Why do we say &quot;non-vowels&quot; rather than &quot;consonants&quot;?)</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[^\t\n]</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Not a TAB or NEWLINE</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>["-a]</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">In an ASCII system, all characters that fall between '"' and &quot;a,&quot; i.e., between ordinals 34 and 97</p></TD></tr></table></p><BR>

<a name="ch15lev2sec7"></a>
<h4 id="title-IDANDF1D" class="docSection2Title">15.2.6. Multiple Occurrence/Repetition Using Closure Operators ( <tt>*</tt>, <tt>+</tt>, <tt>?</tt>, <tt>{ }</tt> )</h4>
<p class="docText">We will now introduce the most common RE notations, namely, the special symbols <tt>*</tt>, <tt>+</tt>, and <tt>?</tt>, all of which can be used to match single, multiple, or no occurrences of string patterns. The asterisk or star operator ( <tt>*</tt> ) will match <a name="iddle1031"></a><a name="iddle1037"></a><a name="iddle1225"></a><a name="iddle3245"></a><a name="iddle3288"></a><a name="iddle3289"></a><a name="iddle3428"></a><a name="iddle3514"></a>zero or more occurrences of the RE immediately to its left (in language and compiler theory, this operation is known as the <span class="docEmphasis">Kleene Closure</span>). The plus operator ( <tt>+</tt> ) will match one or more occurrences of an RE (known as <span class="docEmphasis">Positive Closure</span>), and the question mark operator ( <tt>?</tt> ) will match exactly 0 or 1 occurrences of an RE.</p>
<p class="docText">There are also brace operators ( <tt>{ }</tt> ) with either a single value or a comma-separated pair of values. These indicate a match of exactly <span class="docEmphasis"><tt>N</tt></span> occurrences (for <tt>{</tt><span class="docEmphasis"><tt>N</tt></span><tt>}</tt>) or a range of occurrences, i.e., <tt>{</tt><span class="docEmphasis"><tt>M</tt></span>,<span class="docEmphasis"><tt>N</tt></span><tt>}</tt> will match from <span class="docEmphasis"><tt>M</tt></span> to <span class="docEmphasis"><tt>N</tt></span> occurrences. These symbols may also be escaped with the backslash, i.e., &quot;<tt>\*</tt>&quot; matches the asterisk, etc.</P>
<p class="docText">In the table above, we notice the question mark is used more than once (overloaded), meaning either matching 0 or 1 occurrences, or its other meaning: if it follows any matching using the close operators, it will direct the regular expression engine to match as few repetitions as possible.</P>
<p class="docText">What does that last part mean, &quot;as few ... as possible?&quot; When pattern-matching is employed using the grouping operators, the regular expression engine will try to &quot;absorb&quot; as many characters as possible which match the pattern. This is known as being <span class="docEmphasis">greedy</span>. The question mark tells the engine to lay off and if possible, take as few characters as possible in the current match, leaving the rest to match as many of succeeding characters of the next pattern (if applicable). We will show you a great example where non-greediness is required toward the end of the chapter. For now, let us continue to look at the closure operators:</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="250"><col width="300"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>[dn]ot?</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">&quot;d&quot; or &quot;n,&quot; followed by an &quot;o&quot; and, at most, one &quot;t&quot; after that, i.e., <tt>do</tt>, <tt>no</tt>, <tt>dot</tt>, <tt>not</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>0?[1-9]</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Any numeric digit, possibly prepended with a &quot;0,&quot; e.g., the set of numeric representations of the months January to September, whether single- or double-digits</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[0-9]{15,16}</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Fifteen or sixteen digits, e.g., credit card numbers</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>&lt;/?[^&gt;]+&gt;</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Strings that match all valid (and invalid) HTML tags</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[KQRBNP][a-h][1-8]-[a-h][1-8]</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Legal chess move in &quot;long algebraic&quot; notation (move only, no capture, check, etc.), i.e., strings which start with any of &quot;K,&quot; &quot;Q,&quot; &quot;R,&quot; &quot;B,&quot; &quot;N,&quot; or &quot;P&quot; followed by a hyphenated-pair of chess board grid locations from &quot;a1&quot; to &quot;h8&quot; (and everything in between), with the first coordinate indicating the former position and the second being the new position.</p></td></tr></table></P><BR>

<a name="ch15lev2sec8"></a>

<h4 id="title-IDAKLF1D" class="docSection2Title">15.2.7. Special Characters Representing Character Sets</h4>
<p class="docText"><a name="iddle1335"></a><a name="iddle1338"></a><a name="iddle2276"></a><a name="iddle2792"></a><a name="iddle2798"></a><a name="iddle2808"></a><a name="iddle3535"></a><a name="iddle3591"></a><a name="iddle3602"></a><a name="iddle3616"></a>We also mentioned that there are special characters that may represent character sets. Rather than using a range of &quot;0-9,&quot; you may simply use &quot;<tt>\d</tt>&quot; to indicate the match of any decimal digit. Another special character &quot;<tt>\w</tt>&quot; can be used to denote the entire alphanumeric character class, serving as a shortcut for &quot;<tt>A-Za-z0-9_</tt>&quot;, and &quot;<tt>\s</tt>&quot; for whitespace characters. Uppercase versions of these strings symbolize <span class="docEmphasis">non</span>-matches, i.e., &quot;<tt>\D</tt>&quot; matches any non-decimal digit (same as &quot;<tt>[^0-9]</tt>&quot;), etc.</p>
<p class="docText">Using these shortcuts, we will present a few more complex examples:</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="150"><col width="350"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\w+-\d+</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Alphanumeric string and number separated by a hyphen</P></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>[A-Za-z]\w*</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Alphabetic first character, additional characters (if present) can be alphanumeric (almost equivalent to the set of valid Python identifiers [see exercises])</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\d{3}-\d{3}-\d{4}</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">(American) telephone numbers with an area code prefix, as in 800-555-1212</p></TD></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>\w+@\w+\.com</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Simple e-mail addresses of the form <span class="docEmphasis"><tt>XXX@YYY.com</tt></span></p></TD></tr></table></p><BR>

<a name="ch15lev2sec9"></a>
<h4 id="title-IDAMRF1D" class="docSection2Title">15.2.8. Designating Groups with Parentheses ( <tt>( )</tt> )</h4>
<p class="docText">Now, perhaps we have achieved the goal of matching a string and discarding non-matches, but in some cases, we may also be more interested in the data that we did match. Not only do we want to know whether the entire string matched our criteria, but also whether we can extract any specific strings or substrings that were part of a successful match. The answer is yes. To accomplish this, surround any RE with a pair of parentheses.</p>
<p class="docText">A pair of parentheses ( <tt>( )</tt> ) can accomplish either (or both) of the below when used with regular expressions:</P>
<UL><li><p class="docList">Grouping regular expressions</p></li><li><p class="docList">Matching subgroups</p></li></ul>
<p class="docText">One good example for wanting to group regular expressions is when you have two different REs with which you want to compare a string. Another reason is to group an RE in order to use a repetition operator on the entire RE (as opposed to an individual character or character class).</p>
<p class="docText">One side effect of using parentheses is that the substring that matched the pattern is saved for future use. These subgroups can be recalled for the same match or search, or extracted for post-processing. You will see some examples of pulling out subgroups at the end of <a class="docLink" href="ch15lev1sec3.html#ch15lev2sec18">Section 15.3.9</a>.</p>
<p class="docText">Why are matches of subgroups important? The main reason is that there are times where you want to extract the patterns you match, in addition to making a match. For example, what if we decided to match the pattern &quot;<tt>\w+-\d+</tt>&quot; but wanted save the alphabetic first part and the numeric second part individually? This may be desired because with any successful match, we may want to see just what those strings were that matched our RE patterns.</p>
<p class="docText">If we add parentheses to both subpatterns, i.e., &quot;<tt>(\w+)-(\d+)</tt>,&quot; then we can access each of the matched subgroups individually. Subgrouping is preferred because the alternative is to write code to determine we have a match, then execute another separate routine (which we also had to create) to parse the entire match just to extract both parts. Why not let Python do it, since it is a supported feature of the <tt>re</tt> module, instead of reinventing the wheel?</p>
<p><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="275"><col width="250"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="top"><p class="docText">RE Pattern</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Strings Matched</P></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>\d+(\.\d*)?</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Strings representing simple floating point number, that is, any number of digits followed optionally by a single decimal point and zero or more numeric digits, as in &quot;0.004,&quot; &quot;2,&quot; &quot;75.,&quot; etc.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>(Mr?s?\. )?[A-Z][a-z]* [ A-Za-z-]+</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">First name and last name, with a restricted first name (must start with uppercase; lowercase only for remaining letters, if any), the full name prepended by an optional title of &quot;Mr.,&quot; &quot;Mrs.,&quot; &quot;Ms.,&quot; or &quot;M.,&quot; and a flexible last name, allowing for multiple words, dashes, and uppercase letters</P>
</td></TR></table></p><BR>


<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch15lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch15lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>