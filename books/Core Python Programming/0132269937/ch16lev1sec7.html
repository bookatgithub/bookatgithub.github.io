<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 16.7.&nbsp; Exercises</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch16lev1sec6.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch17.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch16lev1sec7"></a>
<h3 id="title-IDAYUHRF" class="docSection1Title">16.7. Exercises</H3>
<p><table border="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q1"></a><B>16-1.</b></TD><td><p class="docText"><span class="docEmphasis">Sockets</span>. What is the difference between connection-oriented versus connectionless?</p></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q2"></a><b>16-2.</b></TD><td><p class="docText"><span class="docEmphasis">Client</span>/<span class="docEmphasis">Server Architecture</span>. Describe in your own words what this term means and give several examples.</P></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q3"></a><b><a class="docLink" href="app01lev1sec15.html#app01qa15q0a1">16-3.</a></b></TD><td><p class="docText"><span class="docEmphasis">Sockets</span>. Between TCP and UDP, which type of servers accept connections and hands them off to separate sockets for client communication?</p></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q4"></a><B>16-4.</b></TD><td><p class="docText"><span class="docEmphasis">Clients</span>. Update the TCP (<tt>tsTclnt.py</tt>) and UDP (<tt>tsUclnt.py</tt>) clients so that the server name is not hard-coded into the application. Allow the user to specify a hostname and port number, and only use the default values if either or both parameters are missing.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q5"></a><b>16-5.</b></td><td><p class="docText"><span class="docEmphasis">Internetworking and Sockets</span>. Implement Guido van Rossum's sample TCP client/server programs found in <a class="docLink" href="ch07lev1sec2.html#ch07lev2sec3">Section 7.2.2</a> of the Python Library Reference and get them to work. Set up the server, then the client. An online version of the source is also available here:</p>
<div class="docText"><pre>http://www.python.org/doc/current/lib/
    Socket_Example.html</pre></div><br>
<p class="docText">You decide the server is too boring. Update the server so that it can do much more, recognizing the following commands:</p>
<P><table cellspacing="0" FRAME="void" RULES="none" cellpadding="5"><colgroup align="left" span="2"><col width="50"><col width="300"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top">&nbsp;</th><th class="thead" scope="col" align="left" valign="top">&nbsp;</th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>date</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Server will return its current date/timestamp, i.e., <tt>time.ctime(time.time())</tt></P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>os</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Get OS info (<tt>os.name</tt>)</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ls</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Give a listing of the current directory (HINTS: <tt>os.listdir()</tt> lists a directory, <tt>os.curdir</tt> is the current directory.) Extra credit: Accept &quot;<tt>ls</tt><span class="docEmphasis"><tt>dir</tt></span>&quot; and return <span class="docEmphasis"><tt>dir</tt></span>'s file listing.</p></td></tr></table></P><br>
<p class="docText">You do not need a network to do this assignmentyour machine can talk to itself. Note: After the server exits, the binding must be cleared before you can run it again. You may experience &quot;port already bound&quot; errors. The operating system usually clears the binding within 5 minutes, so be patient!</p></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q6"></a><B><a class="docLink" href="app01lev1sec15.html#app01qa15q0a2">16-6.</a></b></TD><td><p class="docText"><span class="docEmphasis">Daytime Service</span>. Use the <tt>socket.getservbyname()</tt> to determine the port number for the &quot;daytime&quot; service under the UDP protocol. Check the documentation for <tt>getservbyname()</tt> to get the exact usage syntax (i.e., <tt>socket.getservbyname.__doc__</tt>). Now write an application that sends a dummy message over and wait for the reply. Once you have received a reply from the server, display it to the screen.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q7"></a><b>16-7.</b></td><td><p class="docText"><span class="docEmphasis">Half-Duplex Chat.</span> Create a simple, half-duplex chat program. By &quot;half-duplex,&quot; we mean that when a connection is made and the service starts, only one person can type. The other participant must wait to get a message before he or she is prompted to enter a message. Once a message is sent, then the sender must wait for a reply before being allowed to send another message. One participant will be on the server side, while the other will be on the client side.</p></td></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q8"></a><B>16-8.</b></td><TD><p class="docText"><span class="docEmphasis">Full-Duplex Chat</span>. Update your solution to the previous problem so that your chat service is now full-duplex, meaning that both parties can send and receive independently of each other.</p></TD></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q9"></a><B>16-9.</b></TD><td><p class="docText"><span class="docEmphasis">Multi-User Full Duplex Chat</span>. Further update your solution so that your chat service is multi-user.</p></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q10"></a><b>16-10.</b></TD><td><p class="docText"><span class="docEmphasis">Multi-User Multi-Room Full Duplex Chat</span>. Now make your chat service multi-user <span class="docEmphasis">and</span> multi-room.</P></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q11"></a><b>16-11.</b></TD><td><p class="docText"><span class="docEmphasis">Web Client.</span> Write a TCP client that connects to port 80 of your favorite Web site (remove the &quot;http://&quot; and any trailing info; use only the hostname). Once a connection has been established, send the HTTP command string &quot;<tt>GET /\n</tt>&quot; and write all the data that the server returns to a file. (The <tt>GET</tt> command retrieves a Web page, the &quot;<tt>/</tt>&quot; file indicates the file to get, and the &quot;<tt>\n</tt>&quot; sends the command to the server.) Examine the contents of the retrieved file. What is it? How can you check to make sure the data you received is correct? (Note: You may have to give one or two NEWLINEs after the command string. One usually works.)</p></TD></tr><tr><td></TD><TD></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q12"></a><b>16-12.</b></td><td><p class="docText"><span class="docEmphasis">Sleep Server.</span> Create a &quot;sleep&quot; server. A client will request to be &quot;put to sleep&quot; for a number of seconds. The server will issue the command on behalf of the client, then return a message to the client indicating success. The client should have slept or should have been idle for the exact time requested. This is a simple implementation of a &quot;remote procedure call&quot; where a client's request invokes commands on another machine across the network.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch16qa1q13"></a><B>16-13.</b></td><TD><p class="docText"><span class="docEmphasis">Name Server.</span> Design and implement a name server. Such a server is responsible for maintaining a database of hostname-port number pairs, perhaps along with the string description of the service that the corresponding servers provide. Take one or more existing servers and have them &quot;register&quot; their service with your name server. (Note that these servers are, in this case, clients of the name server.)</p>
<p class="docText">Every client that starts up has no idea where the server is that it is looking for. Also as clients of the name server, these clients should send a request to the name server indicating what type of service they are seeking. The name server, in reply, returns a hostname-port number pair to this client, which then connects to the appropriate server to process its request.</P>
<p class="docText">Extra credit:</p>
<div style="font-weight:bold"><ol class="docList" type="1"><LI><div style="font-weight:normal"><p class="docList">Add caching to your name server for popular requests;</p></div></LI><LI><div style="font-weight:normal"><p class="docList">Add logging capability to your name server, keeping track of which servers have registered and which services clients are requesting;</P></div></LI><li><div style="font-weight:normal"><p class="docList">Your name server should periodically &quot;ping&quot; the registered hosts at their respective port numbers to ensure that the service is indeed up. Repeated failures will cause a server to be delisted from the list of services.</p></div></li></ol></div>
<p class="docText">You may implement real services for the servers that register for your name service, or just use dummy servers (which merely acknowledge a request).</P></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q14"></a><b>16-14.</b></TD><TD><p class="docText"><span class="docEmphasis">Error Checking and Graceful Shutdown</span>. All of our sample client/server code in this chapter is poor in terms of error-checking. We do not handle when users press <tt>^C</tt> to exit out of a server or <tt>^D</tt> to terminate client input, nor do we check other improper input to <tt>raw_input()</tt> or handle network errors. Because of this weakness, quite often we terminate an application without closing our sockets, potentially losing data. Choose a client/server pair of one of our examples, and add enough error-checking so that each application properly shuts down, i.e., closes network connections.</p></td></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q15"></a><b>16-15.</b></td><TD><p class="docText"><span class="docEmphasis">Asynchronicity and <tt>SocketServer</tt></span>. Take the example TCP server example and use either mix-in class to support an asynchronous server. To test your server, create and run multiple clients simultaneously and show output that your server is serving requests from both interleaved.</p></td></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch16qa1q16"></a><b>16-16.</b></td><td><p class="docText">*<span class="docEmphasis">Extending <tt>SocketServer</tt> Classes</span>. In the <tt>SocketServer</tt> TCP server code, we had to change our client from the original base TCP client because the <tt>SocketServer</tt> class does not maintain the connection between requests.</p>
<div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">Subclass the <tt>TCPServer</tt> and <tt>StreamRequestHandler</tt> classes and rearchitect the server so that it maintains and uses a single connection for each client (not one per request).</p></div></li><li><div style="font-weight:normal"><p class="docList">Integrate your solution for the previous problem with your solution to part (a) such that multiple clients are being serviced in parallel.</p></div></li></ol></div>
</td></tr></table></P>

<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch16lev1sec6.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch17.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>