<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 17.6.&nbsp; Exercises</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch17lev1sec5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch18.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch17lev1sec6"></a>
<h3 id="700181-819" class="docSection1Title">17.6. Exercises</H3>
<a name="ch17lev2sec31"></a>
<h4 id="title-IDAWBD1D" class="docSection2Title">FTP</H4>
<P><table border="0" cellspacing="16" cellpadding="0"><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa1q1"></a><b>17-1.</b></td><td><p class="docText"><span class="docEmphasis">Simple FTP Client</span>. Given the FTP examples from this chapter, write a small FTP client program that goes to your favorite Web sites and downloads the latest versions of the applications you use. This may be a script that you run every few months to make sure you're using the &quot;latest and greatest.&quot; You should probably keep some sort of table with FTP location, login, and password for your convenience.</P></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa1q2"></a><b>17-2.</b></TD><TD><p class="docText"><span class="docEmphasis">Simple FTP Client and Pattern-Matching</span>. Use your solution to the previous exercise as a starting point for creating another simple FTP client that either pushes or pulls a set of files from a remote host using patterns. For example, if you want to move a set of Python or PDF files from one host to another, allow users to enter &quot;<tt>*.py</tt>&quot; or &quot;<tt>doc*.pdf</tt>&quot; and only transfer those files whose names match.</p></td></tr><tr><TD></td><td></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q3"></a><B>17-3.</b></TD><td><p class="docText"><span class="docEmphasis">Smart FTP Command-Line Client</span>. Create a command-line FTP application similar to the vanilla Unix <tt>/bin/ftp</tt> program, however, make it a &quot;better FTP client,&quot; meaning it should have additional useful features. You can take a look at the <tt>ncFTP</tt> application as motivation. It can be found at <a class="docLink" target="_blank" href="http://ncftp.com">http://ncftp.com</a>. For example, it has the following features: history, bookmarks (saving FTP locations with log in and password), download progress, etc. You may have to implement <tt>readline</tt> functionality for history and curses for screen control.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q4"></a><b>17-4.</b></td><td><p class="docText"><span class="docEmphasis">FTP and Multithreading</span>. Create an FTP client that uses Python threads to download files. You can either upgrade your existing Smart FTP client as in the previous problem, or just write a more simple client to download files. This can be either a command-line program where you enter multiple files as arguments to the program, or a GUI where you let the user select 1+ file(s) to transfer. Extra credit: Allow patterns, i.e., <tt>*.exe</tt>. Use individual threads to download each file.</p></td></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q5"></a><B>17-5.</b></td><TD><p class="docText"><span class="docEmphasis">FTP and GUI</span>. Take your smart FTP client developed above and add a GUI layer on top of it to form a complete FTP application. You may choose from any of the modern Python GUI toolkits.</p></TD></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa1q6"></a><B>17-6.</b></TD><td><p class="docText"><span class="docEmphasis">Subclassing</span>. Derive <tt>ftplib.FTP</tt> and make a new class FTP2 where you do not need to give &quot;<tt>STOR filename</tt>&quot; and &quot;<tt>RETR filename</tt>&quot; commands with all four (4) <tt>retr*()</tt> and <tt>stor*()</tt> methods ... you only need to pass in the filename. You may choose to either override the existing methods or create new ones with a '<tt>2</tt>' suffix, i.e., <tt>retrlines2()</tt>.</p>
<p class="docText">The file <tt>Tools/scripts/ftpmirror.py</tt> in the Python source distribution is a script that can mirror FTP sites, or portions thereof, using the <tt>ftplib</tt> module. It can be used as an extended example that applies to this module. The next five problems feature creating solutions that revolve around code like <tt>ftpmirror.py</tt>. You may use code in <tt>ftpmirror.py</tt> or implement your own solution with its code as your motivation.</p></TD></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q7"></a><B>17-7.</b></td><TD><p class="docText"><span class="docEmphasis">Recursion</span>. The <tt>ftpmirror.py</tt> script copies a remote directory recursively. Create a simpler FTP client in the spirit of <tt>ftpmirror.py</tt> but one that does <span class="docEmphasis">not</span> recurse by default. Create an &quot;<tt>-r</tt>&quot; option that tells the application to recursively copy subdirectories to the local filesystem.</P></td></tr><tr><td></TD><td></td></TR><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q8"></a><b>17-8.</b></TD><TD><p class="docText"><span class="docEmphasis">Pattern-Matching</span>. The <tt>ftpmirror.py</tt> script has an &quot;<tt>-s</tt>&quot; option that lets users skip files that match the given pattern, i.e., &quot;<tt>.exe</tt>.&quot; Create your own simpler FTP client or update your solution to the previous exercise so that it lets the user supply a pattern and only copy those files matching that pattern. Use your solution to an earlier problem above as a starting point.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa1q9"></a><b>17-9.</b></td><td><p class="docText"><span class="docEmphasis">Recursion and Pattern-Matching</span>. Create an FTP client that integrates both of the previous exercises.</p></td></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa1q10"></a><b>17-10.</b></TD><td><p class="docText"><span class="docEmphasis">Recursion and ZIP files</span>. This problem is similar to the first recursion exercise aboveinstead of copying the remote files to the local filesystem, either update your existing FTP client or create a new one to download remote files and compress them into a ZIP (or TGZ or BZ2) file. This &quot;<tt>-z</tt>&quot; option allows your users to back up an FTP site in an automated manner.</P></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa1q11"></a><B>17-11.</b></TD><TD><p class="docText"><span class="docEmphasis">Kitchen Sink</span>. Implement a single, final, all-encompassing FTP application that has all the solutions to the exercises above, i.e., &quot;<tt>-r</tt>&quot;, &quot;<tt>-s</tt>&quot;, and &quot;<tt>-z</tt>&quot; options.</p></td></tr></table></P>

<a name="ch17lev2sec32"></a>
<h4 id="title-IDAJHD1D" class="docSection2Title">NNTP</H4>
<p><table border="0" cellspacing="16" cellpadding="0"><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa2q1"></a><B>17-12.</b></TD><td><p class="docText"><span class="docEmphasis">Introduction to NNTP</span>. Change <a class="docLink" href="ch17lev1sec3.html#ch17list02">Example 17.2</a> (<tt>getLatestNNTP.py</tt>) so that instead of the most recent article, it displays the first available article meaningfully.</p>
</td></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa2q2"></a><b>17-13.</b></TD><td><p class="docText"><span class="docEmphasis">Improving Code</span>. Fix the flaw in <tt>getLatestNNTP.py</tt> where triple-quoted lines show up in the output. This is because we want to display Python interactive interpreter lines but not triple-quoted text. Solve this problem by checking whether the stuff that comes after the &quot;&gt;&gt;&gt;&quot; is real Python code. If so, display it as a line of data; if not, do not display this quoted text. Extra credit: Use your solution to solve another minor problem: leading whitespace is not stripped from the body because it may represent indented Python code. If it really is code, display it; otherwise, it is text so <tt>lstrip()</tt> that before displaying.</p></td></TR><TR><td></td><td></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa2q3"></a><b>17-14.</b></td><td><p class="docText"><span class="docEmphasis">Finding Articles</span>. Create an NNTP client application that lets the user log in and choose a newsgroup of interest. Once that has been accomplished, prompt the user for keywords to search article Subject lines for. Bring up the list of articles that match the requirement and display them to the user. The user should then be allowed to choose an article to read from that listdisplay them and provide simple navigation like pagination, etc. If no search field is entered, bring up all current articles.</p></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa2q4"></a><b>17-15.</b></TD><td><p class="docText"><span class="docEmphasis">Searching Bodies</span>. Upgrade your solution to the previous problem by searching both Subject lines and article bodies. Allow for AND or OR searching of keywords. Also allow for AND or OR searching of Subject lines and article bodies, i.e., keyword(s) must be in Subject lines only, article bodies only, either, or both.</P></td></TR><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa2q5"></a><B>17-16.</b></td><td><p class="docText"><span class="docEmphasis">Threaded Newsreader</span>. This doesn't mean write a multithreaded newsreaderit means organize related postings into &quot;article threads.&quot; In other words, group related articles together, independent of when the individual articles were posted. All the articles belonging to individual threads should be listed chronologically though. Allow the user to:</p>
<div style="font-weight:bold"><ol class="docList" type="a"><LI><div style="font-weight:normal"><p class="docList">select individual articles (bodies) to view, then have the option to go back to the list view or to previous or next article either sequentially or related to the current thread.</p></div></LI><li><div style="font-weight:normal"><p class="docList">allow replies to threads, option to copy and quote previous article, reply to the entire newsgroup via another post. Extra credit: Allow personal reply to individual via e-mail.</P></div></li><LI><div style="font-weight:normal"><p class="docList">permanently delete threadsno future related articles should show up in the article list. For this, you will have to temporarily keep a persistent list of deleted threads so that they don't show up again. You can assume a thread is dead if no one posts an article with the same Subject line after several months.</P></div></li></ol></div></td></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa2q6"></a><b>17-17.</b></td><TD><p class="docText"><span class="docEmphasis">GUI Newsreader</span>. Similar to an FTP exercise above, choose a Python GUI toolkit to implement a complete standalone GUI newsreader application.</p></td></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa2q7"></a><b>17-18.</b></td><td><p class="docText"><span class="docEmphasis">Refactoring</span>. Like <tt>ftpmirror.py</tt> for FTP, there is a demo script for NNTP: <tt>Demo/scripts/newslist.py</tt>. Run it. This script was written a long time ago and can use a facelift. For this exercise, you are to refactor this program using features of the latest versions of Python as well as your developing skills in Python to perform the same task but run and complete in less time. This can include using list comprehensions or generator expressions, using smarter string concatenation, not calling unnecessary functions, etc.</p></td></tr><tr><td></td><td></td></tr><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa2q8"></a><B>17-19.</b></td><TD><p class="docText"><span class="docEmphasis">Caching</span>. Another problem with <tt>newslist.py</tt> is that, according to its author, &quot;I should really keep a list of ignored empty groups and re-check them for articles on every run, but I haven't got around to it yet.&quot; Make this improvement a reality. You may use the default version as-is or your newly improved one from the previous exercise.</p></TD></tr></table></P>

<a name="ch17lev2sec33"></a>
<H4 id="title-IDAJLD1D" class="docSection2Title">E-MAIL</H4>
<P><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa3q1"></a><b><a class="docLink" href="app01lev1sec16.html#app01qa16q0a1">17-20.</a></b></TD><td><p class="docText"><span class="docEmphasis">Identifiers</span>. The POP3 method <tt>pass_()</tt> is used to send the password to the server after giving it the login name using <tt>login()</tt>. Can you give any reasons why you believe this method was named with a trailing underscore, i.e., &quot;<tt>pass_()</tt>&quot;, instead of just plain old &quot;<tt>pass()</tt>&quot;?</P></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa3q2"></a><B>17-21.</b></td><td><p class="docText"><span class="docEmphasis">IMAP</span>. Now that you are familiar with how POP works, your experience will help you with an IMAP client. Study the IMAP protocol RFC document, and use the Python <tt>imaplib</tt> module to help you.</p>
<p class="docText">The next set of exercises deal with the <tt>myMail.py</tt> application found in this chapter (<a class="docLink" href="ch17lev1sec4.html#ch17list03">Example 17.3</a>).</p>
</TD></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa3q3"></a><b>17-22.</b></td><td><p class="docText"><span class="docEmphasis">E-mail Headers</span>. In <tt>myMail.py</tt>, the last few lines compared the originally sent body with the body in the received e-mail. Create similar code to assert the original headers. Hint: Ignore newly added headers.</P></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa3q4"></a><b>17-23.</b></td><td><p class="docText"><span class="docEmphasis">Error Checking</span>. Add SMTP and POP3 error-checking.</p></td></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa3q5"></a><b>17-24.</b></TD><td><p class="docText"><span class="docEmphasis">SMTP and IMAP</span>. Take our simple <tt>myMail.py</tt>, and added support for IMAP. Extra credit: Support both mail download protocols, letting the user choose which to use.</P></td></TR><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa3q6"></a><b>17-25.</b></TD><TD><p class="docText"><span class="docEmphasis">E-mail Composition</span>. Further develop your solution to the previous problem by giving the users of your application the ability to compose and send e-mail.</P></TD></tr><tr valign="top"><td align="right" class="docText" width="50"><a name="ch17qa3q7"></a><B>17-26.</b></td><TD><p class="docText"><span class="docEmphasis">E-mail Application</span>. Further develop your e-mail application, turning it into something more useful by adding in mailbox management. Your application should be able to read in the current set of e-mail messages in a user's imbeds and display their Subject lines. Users should be able to select messages to view. Extra credit: Add support to view attachments via external applications.</p></TD></tr><TR valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa3q8"></a><b>17-27.</b></td><td><p class="docText"><span class="docEmphasis">GUI</span>. Add a GUI layer on top of your solution to the previous problem to make it practically a full e-mail application.</p></TD></tr><tr><TD></td><td></td></TR><TR valign="top"><td align="right" class="docText" width="50"><a name="ch17qa3q9"></a><b>17-28.</b></td><td><p class="docText"><span class="docEmphasis">Elements of SPAM</span>. Unsolicited junk e-mail, or <span class="docEmphasis">spam</span>, is a very real and significant problem today. There are many good solutions out there, validating this market. We do not want you to (necessarily) reinvent the wheel but we would like you to get a taste of some of the elements of spam.</p>
<div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">&quot;<span class="docEmphasis">mbox</span>&quot; <span class="docEmphasis">format</span>. Before we can get started, we should convert any e-mail messages you want to work on to a common format, such as the &quot;mbox&quot; format. (There are others that you can use if you prefer. Once you have several (or all) work messages in mbox format, merge them all into a single file.</p></div></li><li><div style="font-weight:normal"><p class="docList"><span class="docEmphasis">Headers</span>. Most of the clues of spam lie in the e-mail headers. (You may wish to use the email package or parse them manually yourself.) Write code that answers questions such as:</p><dl><dd><p class="docList">- What e-mail client appears to have originated this message? (Check out the <tt>X-Mailer</tt> header.)</p></dd><dd><p class="docList">- Is the message ID (<tt>Message-ID</tt> header) format valid?</p></dd><dd><p class="docList">- Are there domain name mismatches between the <tt>From</tt>, <tt>Received</tt>, and perhaps <tt>Return-Path</tt> headers? What about domain name and IP address mismatches? Is there an <tt>X-Authentication-Warning</tt> header? If so, what does it report?</P></dd></dl></div></li><LI><div style="font-weight:normal"><p class="docList"><span class="docEmphasis">Information Servers</span>. Based on an IP address or domain, servers such as WHOIS, SenderBase.org, etc., may be able to help you identify the location where a piece of bulk e-mail originated. Find one or more of these services and build code to the find the country of origin, and optionally the city, network owner name, contact info, etc.</p></div></LI><li><div style="font-weight:normal"><p class="docList"><span class="docEmphasis">Keywords</span>. Certain words keep popping up in spam. You have no doubt seen them before, and in all of their variations, including using a number resembling a letter, capitalizing random letters, etc. Build a list of frequent words that you have seen definitely tied to spam, and quarantine such messages as possible spam. Extra credit: Develop an algorithm or add keyword variations to spot such trickery in messages.</P></div></li><LI><div style="font-weight:normal"><p class="docList"><span class="docEmphasis">Phishing</span>. These spam messages attempt to disguise themselves as valid e-mail from major banking institutions or well-known Internet Web sites. They contain links that lure readers to Web sites in an attempt to harvest private and extremely sensitive information such as login names, passwords, and credit card numbers. These fakers do a pretty good job of giving their fraudulent messages an accurate look-and-feel. However, they cannot hide the fact that the actual link that they direct users to does not belong to the company they are masquerading as. Many of them are obvious giveaways, i.e., horrible-looking domain names, raw IP addresses, and even IP addresses in 32-bit integer format rather than in octets. Develop code that can determine whether e-mail that looks like official communication is real or bogus.</P></div></LI></ol></div>
</TD></tr></table></p>

<a name="ch17lev2sec34"></a>
<h4 id="title-IDAURD1D" class="docSection2Title">Miscellaneous</H4>
<p class="docText">A list of various Internet protocols, including the three highlighted in this chapter, can be found at <a class="docLink" target="_blank" href="http://www.networksorcery.com/enp/topic/ipsuite.htm#">http://www.networksorcery.com/enp/topic/ipsuite.htm#</a> Application%20layer%20protocols. A list of specific Internet protocols supported by Python (currently), can be found at <a class="docLink" target="_blank" href="http://docs.python.org/lib/internet.html">http://docs.python.org/lib/internet.html</a></p>
<P><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa4q1"></a><b>17-29.</b></TD><TD><p class="docText"><span class="docEmphasis">Developing Alternate Internet Clients</span>. Now that you have seen four examples of how Python can help you develop Internet clients, choose another protocol with client support in a Python standard library module and write a client application for it.</p></td></tr><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch17qa4q2"></a><b>17-30.</b></td><TD><p class="docText"><sup>*</sup><span class="docEmphasis">Developing New Internet Clients</span>. Much more difficult: find an uncommon or upcoming protocol <span class="docEmphasis">without</span> Python support and implement it. Be serious enough that you will consider writing and submitting a PEP to have your module included in the standard library distribution of a future Python release.</p></td></tr></table></P>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch17lev1sec5.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch18.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>