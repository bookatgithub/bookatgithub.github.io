<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 19.3.&nbsp; Tkinter Examples</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch19lev1sec3"></a>

<h3 id="title-IDA30HVD" class="docSection1Title">19.3. Tkinter Examples</H3>
<a name="ch19lev2sec8"></a>
<h4 id="title-IDAG1HVD" class="docSection2Title">19.3.1. <tt>Label</tt> Widget</H4>
<p class="docText"><a name="iddle2321"></a><a name="iddle4197"></a>In <a class="docLink" href="#ch19list01">Example 19.1</a>, we present <tt>tkhello1.py</tt>, the Tkinter version of &quot;Hello World!&quot; In particular, it shows you how a Tkinter application is set up and highlights the <tt>Label</tt> widget.</P>
<a name="ch19list01"></a><H5 id="title-IDAL2HVD" class="docExampleTitle">Example 19.1. <tt>Label</tt> Widget Demo (<tt>tkhello1.py</tt>)</H5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<p class="docText"><span class="docEmphasis">Our first Tkinter example is ... what else? &quot;Hello World!&quot;In particular, we introduce our first widget, the</span> <tt>Label</tt>.</P>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">import</span> Tkinter
4
5  top = Tkinter.Tk()
6  label = Tkinter.Label(top, text='Hello World!')
7  label.pack()
8  Tkinter.mainloop()</pre><br>

</TD></tr></table></P>
<p class="docText">In the first line, we create our top-level window. That is followed by our <tt>Label</tt> widget containing the all-too-famous string. We instruct the packer to manage and display our widget, and finally call <tt>mainloop()</tt> to run our GUI application. <a class="docLink" href="#ch19fig01">Figure 19-1</a> shows what you will see when you run this GUI application.</p>
<a name="ch19fig01"></a><P><center>

<H5 class="docFigureTitle">Figure 19-1. Tkinter <tt>Label</tt> widget (<tt>tkhello1.py</tt>)</h5>

<p class="docText">
<img border="0" alt="" width="393" height="129" SRC="images/chun_fig19_01.jpg"></p>


</center></p><br>

<a name="ch19lev2sec9"></a>
<H4 id="title-IDAR4HVD" class="docSection2Title">19.3.2. <tt>Button</tt> Widget</h4>
<p class="docText">The next example is pretty much the same as the first. However, instead of a simple text label, we will create a button instead. In <a class="docLink" href="#ch19list02">Example 19-2</a> is the source code for <tt>tkhello2.py</tt>.</p>

<p class="docText"></P><a name="ch19list02"></a><h5 id="title-IDAK5HVD" class="docExampleTitle">Example 19.2. <tt>Button</tt> Widget Demo (<tt>tkhello2.py</tt>)</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><TD>


<p class="docText"><span class="docEmphasis">This example is exactly the same as <span class="docEmphRoman"><tt>tkhello1.py</tt></span> <span class="docEmphasis">except that rather than using a </span><span class="docEmphRoman"><tt>Label</tt> </span><span class="docEmphasis">widget, we create a</span> <span class="docEmphRoman"><tt>Button</tt></span> widget.</span></p>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">import</span> Tkinter
4
5  top = Tkinter.Tk()
6  quit = Tkinter.Button(top, text='Hello World!',
7      command=top.quit)
8  quit.pack()
9  Tkinter.mainloop()</pre><br>

</td></tr></table></p>
<p class="docText">The first few lines are identical. Things differ only when we create the <tt>Button</tt> widget. Our button has one additional parameter, the <tt>Tkinter.quit()</tt> method. This installs a callback to our button so that if it is pressed (and released), the entire application will exit. The final two lines are the usual <tt>pack()</tt> and entering of the <tt>mainloop()</tt>. This simple button application is shown in <a class="docLink" href="#ch19fig02">Figure 19-2</a>.</p>
<a name="ch19fig02"></a><p><center>

<h5 class="docFigureTitle">Figure 19-2. Tkinter <tt>Label</tt> widget (<tt>tkhello1.py</tt>)</h5>

<p class="docText">
<img border="0" alt="" width="419" height="144" SRC="images/chun_fig19_02.jpg"></p>


</center></p><br>

<a name="ch19lev2sec10"></a>
<H4 id="title-IDAESPJ" class="docSection2Title">19.3.3. <tt>Label</tt> and <tt>Button</tt> Widgets</h4>
<p class="docText">We combine <tt>tkhello1.py</tt> and <tt>tkhello2.py</tt> into <tt>tkhello3.py</tt>, a script that has both a label and a button. In addition, we are providing more parameters now than before when we were comfortable using all the default arguments that are automatically set for us. The source for <tt>tkhello3.py</tt> is given in <a class="docLink" href="#ch19list03">Example 19.3</a>.</P>
<a name="ch19list03"></a><h5 id="title-IDAFTPJ" class="docExampleTitle">Example 19.3. <tt>Label</tt> and <tt>Button</tt> Widget Demo (<tt>tkhello3.py</tt>)</H5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><td>


<p class="docText"><span class="docEmphasis">This example features both a <span class="docEmphRoman"><tt>Label</tt></span> and a <span class="docEmphRoman"><tt>Button</tt></span> widget. Rather than primarily using default arguments when creating the widget, we are able to specify more now that we know more about <span class="docEmphRoman"><tt>Button</tt></span> widgets and how to configure them.</span></P>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">import</span> Tkinter
4  top = Tkinter.Tk()
5
6  hello = Tkinter.Label(top, text='Hello World!')
7  hello.pack()
8
9  quit = Tkinter.Button(top, text='QUIT',
10     command=top.quit, bg='red', fg='white')
11 quit.pack(fill=Tkinter.X, expand=1)
12
13 Tkinter.mainloop()</pre><BR>

</TD></TR></table></p>
<p class="docText">Besides additional parameters for the widgets, we also see some arguments for the packer. The <tt>fill</tt> parameter tells the packer to let the QUIT button take up the rest of the horizontal real estate, and the <tt>expand</tt> parameter directs the packer to visually fill out the entire horizontal landscape, stretching the button to the left and right sides of the window.</p>
<p class="docText">As you can see in <a class="docLink" href="#ch19fig03">Figure 19-3</a>, without any other instructions to the packer, the widgets are placed vertically (on top of each other). Horizontal placement requires creating a new <tt>Frame</tt> object with which to add the buttons. That frame will take the place of the parent object as a single child object (see the buttons in the <tt>listdir.py</tt> module, <a class="docLink" href="#ch19list06">Example 19.6</a> in <a class="docLink" href="#ch19lev2sec13">Section 19.3.6</a>).</p>
<a name="ch19fig03"></a><P><center>

<h5 class="docFigureTitle">Figure 19-3. Tkinter <tt>Label</tt> and <tt>Button</tt> widgets (<tt>tkhello3.py</tt>)</H5>

<p class="docText">
<img border="0" alt="" width="379" height="185" SRC="images/chun_fig19_03.jpg"></p>


</center></P><br>

<a name="ch19lev2sec11"></a>

<H4 id="title-IDAQWPJ" class="docSection2Title">19.3.4. <tt>Label</tt>, <tt>Button</tt>, and <tt>Scale</tt> Widgets</H4>
<p class="docText"><a name="iddle3679"></a>Our final trivial example, <tt>tkhello4.py</tt>, involves the addition of a <tt>Scale</tt> widget. In particular, the <tt>Scale</tt> is used to interact with the <tt>Label</tt> widget. The <tt>Scale</tt> slider is a tool which controls the size of the text font in the <tt>Label</tt> widget. The greater the slider position, the larger the font, and the same goes for a lesser position, meaning a smaller font. The code for <a class="docLink" href="#ch19list04">Example 19.4</a></p>
<a name="ch19list04"></a><h5 id="title-IDAZXPJ" class="docExampleTitle">Example 19.4. <tt>Label</tt>, <tt>Button</tt>, and <tt>Scale</tt> Demo (<tt>tkhello4.py</tt>)</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><td>


<p class="docText"><span class="docEmphasis">Our final introductory widget example introduces the <span class="docEmphRoman"><tt>Scale</tt></span> widget and highlights how widgets can &quot;communicate&quot; with each other using callbacks [such as <span class="docEmphRoman"><tt>resize()</tt></span>]. The text in the <span class="docEmphRoman"><tt>Label</tt></span> widget is affected by actions taken on the <span class="docEmphRoman"><tt>Scale</tt></span> widget.</span></p>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">from</span> Tkinter <span class="docEmphStrong">import</span> *
4
5  <span class="docEmphStrong">def</span> resize(ev=None):
6      label.config(font='Helvetica -%d bold' % \
7          scale.get())
8
9  top = Tk()
10 top.geometry('250x150')
11
12 label = Label(top, text='Hello World!',
13     font='Helvetica -12 bold')
14 label.pack(fill=Y, expand=1)
15
16 scale = Scale(top, from_=10, to=40,
17     orient=HORIZONTAL, command=resize)
18 scale.set(12)
19 scale.pack(fill=X, expand=1)
20
21 quit = Button(top, text='QUIT',
22     command=top.quit, activeforeground='white',
23     activebackground='red')
24 quit.pack()
25
26 mainloop()</pre><BR>

</td></tr></table></p>
<p class="docText">New features of this script include a <tt>resize()</tt> callback function (lines 5-7), which is attached to the <tt>Scale</tt>. This is the code that is activated when the slider on the <tt>Scale</tt> is moved, resizing the size of the text in the <tt>Label</tt>.</P>
<p class="docText">We also define the size (250 x 150) of the top-level window (line 10). The final difference between this script and the first three is that we import the attributes from the <tt>Tkinter</tt> module into our namespace with &quot;<span class="docEmphStrong"><tt>from</tt></span> <tt>Tkinter</tt> <span class="docEmphStrong"><tt>import</tt></span> *.&quot; Although not recommended because it &quot;pollutes&quot; your namespace, we do it here mainly because this application involves a great number of references to Tkinter attributes. This would require use of their fully qualified names for each and every attribute access. By using the undesired shortcut, we are able to access attributes with less typing and have code that is easier to read, at some cost.</P>
<p class="docText">As you can see from <a class="docLink" href="#ch19fig04">Figure 19-4</a>, both the slider mechanism as well as the current set value show up in the main part of the window. <a class="docLink" href="#ch19fig04">Figure 19-4</a> shows the state of the GUI after the user moves the scale/slider to avalue of 36.</p>
<a name="ch19fig04"></a><p><center>

<h5 class="docFigureTitle">Figure 19-4. Tkinter <tt>Label, Button,</tt> and <tt>Scale</tt> widgets (<tt>tkhello4.py</tt>)</h5>

<p class="docText">
<img border="0" alt="" width="330" height="384" SRC="images/chun_fig19_04.jpg"></p>


</center></p><br>
<p class="docText"><a name="iddle1275"></a><a name="iddle2291"></a><a name="iddle3395"></a><a name="iddle4200"></a>As you can see from the code, the initial setting for the scale when the application starts is 12 (line 18).</p>

<a name="ch19lev2sec12"></a>
<h4 id="title-IDAZ2PJ" class="docSection2Title">19.3.5. Partial Function Application Example</h4>
<p class="docText">Before looking a longer GUI application, we wanted to review the Partial Function Application (PFA) as introduced back in <a class="docLink" href="ch11lev1sec7.html#ch11lev2sec20">Section 11.7.3</a> of <a class="docLink" href="ch11.html#ch11">Chapter 11</a>.</p>
<p class="docText">PFAs were added to Python in version 2.5 and are one piece in a series of significant improvements in functional programming.</p>

<p class="docText">
<img border="0" alt="" width="50" height="47" SRC="images/2_5.jpg"></P>


<p class="docText">PFAs allow you to &quot;cache&quot; function parameters by effectively &quot;freezing&quot; those predetermined arguments, and then at runtime, when you have the remaining arguments you need, you can thaw them out, send in the final arguments, and have that function called with all parameters.</p>
<p class="docText">Best of all, PFAs are not limited to just functions. They will work with any &quot;callable,&quot; any object that has a functional interface just by using parentheses, i.e., classes, methods, or callable instances. The use of PFAs fits perfectly into a situation where there are many callables and many of the calls feature the same arguments over and over again.</P>
<p class="docText">GUI programming makes a great use case because there is good probability that you want some consistency in GUI widget look-and-feel, and this consistency comes about when the same parameters are used to create like objects. We are now going to present an application where multiple buttons will have the same foreground and background colors. It would be a waste of typing to give the same arguments to the same instantiators every time we wanted a slightly different button: the foreground and background colors are the same, but only the text is slightly different.</p>
<p class="docText">We are going to use traffic road signs as our example with our application attempts creating textual versions of road signs by dividing them up into various categories of sign types like critical, warning, or informational (just like logging levels). The type of the sign determines their color layout when the signs are created. For example, critical signs have the text in bright red with a white backdrop, warning signs are in black text on a goldenrod background, and informational or regulatory signs feature black text on a white background. We have the &quot;Do Not Enter&quot; and &quot;Wrong Way&quot; signs, which are both &quot;critical,&quot; plus &quot;Merging Traffic&quot; and &quot;Railroad Crossing,&quot; both of which are warnings. Finally, we have the regulatory &quot;Speed Limit&quot; and &quot;One Way&quot; signs.</P>
<p class="docText">The application creates the &quot;signs,&quot; which are just buttons. When users press the buttons, they just pop up the corresponding Tk dialog, critical/error, warning, or informational. It is not too exciting, but how the buttons are built is. You will find our application featured here in <a class="docLink" href="#ch19list05">Example 19.5</a>.</p>

<p class="docText"></P><a name="ch19list05"></a><h5 id="title-IDAW4PJ" class="docExampleTitle">Example 19.5. Road Signs PFA GUI Application (<tt>pfaGUI2.py</tt>)</H5><P><table cellspacing="0" width="90%" border="1" cellpadding="5"><TR><TD>


<p class="docText"><span class="docEmphasis">Create road signs with the appropriate foreground and background colors based on sign type. Use PFAs to help &quot;templatize&quot; common GUI parameters.</span></p>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">from</span> functools <span class="docEmphStrong">import</span> partial <span class="docEmphStrong">as</span> pto
4  <span class="docEmphStrong">from</span> Tkinter <span class="docEmphStrong">import</span> Tk, Button, X
5  <span class="docEmphStrong">from</span> tkMessageBox <span class="docEmphStrong">import</span> showinfo, showwarning, showerror
6
7  WARN = 'warn'
8  CRIT = 'crit'
9  REGU = 'regu'
10
11 SIGNS = {
12    'do not enter': CRIT,
13    'railroad crossing': WARN,
14    '55\nspeed limit': REGU,
15    'wrong way': CRIT,
16    'merging traffic': WARN,
17    'one way': REGU,
18 }
19
20 critCB = <span class="docEmphStrong">lambda</span>: showerror('Error', 'Error Button Pressed!')
21 warnCB = <span class="docEmphStrong">lambda</span>: showwarning('Warning',
22    'Warning Button Pressed!')
23 infoCB = <span class="docEmphStrong">lambda</span>: showinfo('Info', 'Info Button Pressed!')
24
25 top = Tk()
26 top.title('Road Signs')
27 Button(top, text='QUIT', command=top.quit,
28    bg='red', fg='white').pack()
29
30 MyButton = pto(Button, top)
31 CritButton = pto(MyButton, command=critCB, bg='white', fg='red')
32 WarnButton = pto(MyButton, command=warnCB, bg='goldenrod1')
33 ReguButton = pto(MyButton, command=infoCB, bg='white')
34
35 <span class="docEmphStrong">for</span> eachSign <span class="docEmphStrong">in</span> SIGNS:
36   signType = SIGNS[eachSign]
37   cmd = '%sButton(text=%r%s).pack(fill=X, expand=True)' % (
38       signType.title(), eachSign,
39       '.upper()' <span class="docEmphStrong">if</span> signType == CRIT <span class="docEmphStrong">else</span> '.title()')
40   eval(cmd)
41
42 top.mainloop()</pre><br>

</td></TR></table></p>
<p class="docText">When you execute this application, you will get a GUI that will look something like <a class="docLink" href="#ch19fig05">Figure 19.5</a>.</P>
<a name="ch19fig05"></a><p><center>

<H5 class="docFigureTitle">Figure 19-5. Road signs PFA GUI application on XDarwin in MacOS X (<tt>pfaGUI2.py</tt>)</h5>

<p class="docText">
<img border="0" alt="" width="133" height="235" SRC="images/chun_fig19_05.jpg"></P>



</center></P><br>
<a name="ch19lev3sec1"></a>
<h5 id="title-IDAJCQJ" class="docSection3Title">Line-by-Line Explanation</h5>
<a name="ch19lev4sec1"></a>
<h5 id="title-IDASCQJ" class="docSection4Title">Lines 118</H5>
<p class="docText">We begin our application by importing <tt>functional.partial()</tt>, a few <tt>Tkinter</tt> attributes, and the Tk dialogs (lines 1-5). Next, we define some signs along with their categories (lines 7-18).</p>

<a name="ch19lev4sec2"></a>
<h5 id="title-IDADDQJ" class="docSection4Title">Lines 2028</H5>
<p class="docText">The Tk dialogs are assigned as button callbacks, which we will use for each button created (lines 20-23). We then launch Tk, set the title, and create a QUIT button (lines 25-28).</p>

<a name="ch19lev4sec3"></a>
<h5 id="title-IDAPDQJ" class="docSection4Title">Lines 3033</h5>
<p class="docText">These lines represent our PFA magic. We use two levels of PFA. The first templatizes the <tt>Button</tt> class and the root window <tt>top</tt>. What this does is that every time we call <tt>MyButton</tt>, it will call <tt>Button (Tkinter.Button()</tt> creates a button.) with <tt>top</tt> as its first argument. We have &quot;frozen&quot; this into <tt>MyButton</tt>.</P>
<p class="docText">The second level of PFA is where we use our first one, <tt>MyButton</tt>, and templatize <span class="docEmphasis">that</span>. We create separate button types for each of our sign categories. When users create a critical button <tt>CritButton</tt> (by calling it, e.g., <tt>CritButton())</tt>, it will then call <tt>MyButton</tt> along with the appropriate button callback and background and foreground colors, which means calling <tt>Button</tt> with <tt>top</tt>, callback, and colors. Do you see how it unwinds and goes down the layers until at the very bottom, it has the call that you would have <a name="iddle2286"></a><a name="iddle4198"></a>originally had to make if this feature did not exist yet? We repeat with <tt>Warn-Button</tt> and <tt>ReguButton</tt>.</P>

<a name="ch19lev4sec4"></a>
<h5 id="title-IDANFQJ" class="docSection4Title">Lines 3542</h5>
<p class="docText">With the setup completed, we look at our list of signs and create them. We put together a Python evaluatable string consisting of the correct button name, pass in the button label as the text argument, and <tt>pack()</tt> it. If it is a critical sign, then we CAPITALIZE the button text, otherwise we titlecase it. This last bit is done in line 39, demonstrating another feature introduced in Python 2.5, the temporary operator. Then we take each button creation string and execute it with <tt>eval()</tt>, creating the buttons one at a time and resulting in the graphic seen previously. Finally, we start the GUI by entering the main event loop.</p>
<p class="docText">This application uses several Python 2.5 features, so you will not be able to run this with an older version.</p>



<a name="ch19lev2sec13"></a>
<h4 id="title-IDACGQJ" class="docSection2Title">19.3.6. Intermediate Tkinter Example</h4>
<p class="docText">We conclude this section with a larger example, <tt>listdir.py</tt>. This application is a directory tree traversal tool. It starts in the current directory and provides a file listing. Double-clicking on any other directory in the list causes the tool to change to the new directory as well as replace the original file listing with the files from the new directory. The source code is given as <a class="docLink" href="#ch19list06">Example 19.6</a>.</p>
<a name="ch19list06"></a><h5 id="title-IDA1GQJ" class="docExampleTitle">Example 19.6. File System Traversal GUI (<tt>listdir.py</tt>)</h5><p><table cellspacing="0" width="90%" border="1" cellpadding="5"><tr><td>


<p class="docText"><span class="docEmphasis">This slightly more advanced GUI expands on the use of widgets, adding listboxes, text entry fields, and scrollbars to our repertoire. There are also a good number of callbacks such as mouse clicks, key presses, and scrollbar action.</span></P>

<pre>1  #!/usr/bin/env python
2
3  <span class="docEmphStrong">import</span> os
4  <span class="docEmphStrong">from</span> time <span class="docEmphStrong">import</span> sleep
5  <span class="docEmphStrong">from</span> Tkinter <span class="docEmphStrong">import</span> *
6
7  <span class="docEmphStrong">class</span> DirList(object):
8
9      <span class="docEmphStrong">def</span> __init__(self, initdir=None):
10         self.top = Tk()
11         self.label = Label(self.top,
12             text='Directory Lister v1.1')
13         self.label.pack()
14
15 self.cwd = StringVar(self.top)
16

17 self.dirl = Label(self.top, fg='blue',
18             font=('Helvetica', 12, 'bold'))
19         self.dirl.pack()
20
21         self.dirfm = Frame(self.top)
22         self.dirsb = Scrollbar(self.dirfm)
23         self.dirsb.pack(side=RIGHT, fill=Y)
24         self.dirs = Listbox(self.dirfm, height=15,
25             width=50, yscrollcommand=self.dirsb.set)
26         self.dirs.bind('&lt;Double-1&gt;', self.setDirAndGo)
27         self.dirsb.config(command=self.dirs.yview)
28         self.dirs.pack(side=LEFT, fill=BOTH)
29         self.dirfm.pack()
30
31         self.dirn = Entry(self.top, width=50,
32             textvariable=self.cwd)
33         self.dirn.bind('&lt;Return&gt;', self.doLS)
34         self.dirn.pack()
35
36         self.bfm = Frame(self.top)
37         self.clr = Button(self.bfm, text='Clear',
38              command=self.clrDir,
39              activeforeground='white',
40              activebackground='blue')
41         self.ls = Button(self.bfm,
42             text='List Directory',
43             command=self.doLS,
44             activeforeground='white',
45             activebackground='green')
46         self.quit = Button(self.bfm, text='Quit',
47             command=self.top.quit,
48             activeforeground='white',
49             activebackground='red')
50         self.clr.pack(side=LEFT)
51         self.ls.pack(side=LEFT)
52         self.quit.pack(side=LEFT)
53         self.bfm.pack()
54
55         <span class="docEmphStrong">if</span> initdir:
56            self.cwd.set(os.curdir)
57            self.doLS()
58
59     <span class="docEmphStrong">def</span> clrDir(self, ev=None):
60         self.cwd.set('')
61
62     <span class="docEmphStrong">def</span> setDirAndGo(self, ev=None):
63         self.last = self.cwd.get()
64         self.dirs.config(selectbackground='red')
65         check = self.dirs.get(self.dirs.curselection())
66         <span class="docEmphStrong">if not</span> check:

67                  check = os.curdir
68              self.cwd.set(check)
69              self.doLS()
70
71          <span class="docEmphStrong">def</span> doLS(self, ev=None):
72              error = ''
73              tdir = self.cwd.get()
74              <span class="docEmphStrong">if not</span> tdir: tdir = os.curdir
75
76              <span class="docEmphStrong">if not</span> os.path.exists(tdir):
77                  error = tdir + ': no such file'
78              <span class="docEmphStrong">elif not</span> os.path.isdir(tdir):
79                  error = tdir + ': not a directory'
80
81              <span class="docEmphStrong">if</span> error:
82                  self.cwd.set(error)
83                  self.top.update()
84                  sleep(2)
85                  <span class="docEmphStrong">if not</span> (hasattr(self, 'last') \
86                     <span class="docEmphStrong">and</span> self.last):
87                      self.last = os.curdir
88                  self.cwd.set(self.last)
89                  self.dirs.config(\
90                      selectbackground='LightSkyBlue')
91                  self.top.update()
92                  <span class="docEmphStrong">return</span>
93
94              self.cwd.set(\
95                  'FETCHING DIRECTORY CONTENTS...')
96              self.top.update()
97              dirlist = os.listdir(tdir)
98              dirlist.sort()
99              os.chdir(tdir)
100             self.dirl.config(text=os.getcwd())
101             self.dirs.delete(0, END)
102             self.dirs.insert(END, os.curdir)
103             self.dirs.insert(END, os.pardir)
104             <span class="docEmphStrong">for</span> eachFile <span class="docEmphStrong">in</span> dirlist:
105                 self.dirs.insert(END, eachFile)
106             self.cwd.set(os.curdir)
107             self.dirs.config(\
108                 selectbackground='LightSkyBlue')
109
110 <span class="docEmphStrong">def</span> main():
111     d = DirList(os.curdir)
112     mainloop()
113
114 <span class="docEmphStrong">if</span> __name__ == '__main__':
115     main()</pre><br>

</TD></tr></table></P>
<p class="docText">In <a class="docLink" href="#ch19fig06">Figure 19-6</a>, we present what this GUI looks like in a Windows environment.</p>
<a name="ch19fig06"></a><P><center>

<h5 class="docFigureTitle">Figure 19-6. List directory GUI application in Windows (<tt>listdir.py</tt>)</H5>

<p class="docText">
<img border="0" alt="" width="374" height="364" SRC="images/chun_fig19_06.jpg"></P>


</center></P><BR>
<p class="docText">The Unix version of this application is given in <a class="docLink" href="#ch19fig07">Figure 19-7</a>.</p>
<a name="ch19fig07"></a><p><center>

<h5 class="docFigureTitle">Figure 19-7. List directory GUI application in Unix (<tt>listdir.py</tt>)</H5>

<p class="docText">
<img border="0" alt="" width="421" height="392" SRC="images/chun_fig19_07.jpg"></p>


</center></P><br>
<a name="ch19lev3sec2"></a>
<H5 id="title-IDA1MQJ" class="docSection3Title">Line-by-Line Explanation</h5>
<a name="ch19lev4sec5"></a>
<H5 id="title-IDAENQJ" class="docSection4Title">Lines 15</H5>
<p class="docText">These first few lines contain the usual Unix startup line and importation of the <tt>os</tt> module, the <tt>time.sleep()</tt> function, and all attributes of the <tt>Tkinter</tt> module.</p>

<a name="ch19lev4sec6"></a>
<h5 id="title-IDAXNQJ" class="docSection4Title">Lines 913</h5>
<p class="docText">These lines define the constructor for the <tt>DirList</tt> class, an object that represents our application. The first <tt>Label</tt> we create contains the main title of the application and the version number.</p>

<a name="ch19lev4sec7"></a>

<H5 id="title-IDAKOQJ" class="docSection4Title">Lines 1519</h5>
<p class="docText">We declare a Tk variable named <tt>cwd</tt> to hold the name of the directory we are onwe will see where this comes in handy later. Another <tt>Label</tt> is created to display the name of the current directory.</p>

<a name="ch19lev4sec8"></a>
<H5 id="title-IDA1OQJ" class="docSection4Title">Lines 2129</h5>
<p class="docText">This section defines the core part of our GUI, (the <tt>Listbox) dirs</tt>, which contain the list of files of the directory that is being listed. A <tt>Scrollbar</tt> is employed to allow the user to move through a listing if the number of files exceeds the size of the <tt>Listbox</tt>. Both of these widgets are contained in a <tt>Frame</tt> widget. <tt>Listbox</tt> entries have a callback (<tt>setDirAndGo</tt>) tied to them using the <tt>Listbox bind()</tt> method.</p>
<p class="docText"><span class="docEmphasis">Binding</span> means to tie a keystroke, mouse action, or some other event to a callback to be executed when such an event is generated by the user. <tt>setDirAndGo()</tt> will be called if any item in the <tt>Listbox</tt> is doubleclicked. The <tt>Scrollbar</tt> is tied to the <tt>Listbox</tt> by calling the <tt>Scrollbar</tt>.config() method.</P>

<a name="ch19lev4sec9"></a>

<H5 id="title-IDAJYQJ" class="docSection4Title">Lines 3134</h5>
<p class="docText">We then create a text <tt>Entry</tt> field for the user to enter the name of the directory he or she wants to traverse and see its files listed in the <tt>Listbox</tt>. We add a RETURN or Enter key binding to this text entry field so that the user can hit RETURN as an alternative to pressing a button. The same applies for the mouse binding we saw above in the <tt>Listbox</tt>. When the user doubleclicks on a <tt>Listbox</tt> item, it has the same effect as the user's entering the directory name manually into the text <tt>Entry</tt> field and pressing the &quot;go&quot; button.</p>

<a name="ch19lev4sec10"></a>
<h5 id="title-IDAAZQJ" class="docSection4Title">Lines 3653</h5>
<p class="docText">We then define a <tt>Button</tt> frame (<tt>bfm</tt>) to hold our three buttons, a &quot;clear&quot; button (<tt>clr</tt>), a &quot;go&quot; button (<tt>ls</tt>), and a &quot;quit&quot; button (<tt>quit</tt>). Each button has its own different configuration and callbacks, if pressed.</p>

<a name="ch19lev4sec11"></a>
<h5 id="title-IDAXZQJ" class="docSection4Title">Lines 5557</h5>
<p class="docText">The final part of the constructor initializes the GUI program, starting with the current working directory.</p>

<a name="ch19lev4sec12"></a>
<h5 id="title-IDAD0QJ" class="docSection4Title">Lines 5960</h5>
<p class="docText">The <tt>clrDir()</tt> method clears the <tt>cwd</tt> Tk string variable, which contains the current directory that is &quot;active.&quot; This variable is used to keep track of what directory we are in and, more important, helps keep track of the previous directory in case errors arise. You will notice the <tt>ev</tt> variables in the callback functions with a default value of <tt>None</tt>. Any such values would be passed in by the windowing system. They may or may not be used in your callback.</P>

<a name="ch19lev4sec13"></a>
<h5 id="title-IDAY0QJ" class="docSection4Title">Lines 6269</H5>
<p class="docText">The <tt>setDirAndGo()</tt> method sets the directory to traverse to and issues the call to the method that makes it all happen, <tt>doLS()</tt>.</p>

<a name="ch19lev4sec14"></a>
<H5 id="title-IDAJ1QJ" class="docSection4Title">Lines 71108</h5>
<p class="docText"><tt>doLS()</tt> is, by far, the key to this entire GUI application. It performs all the safety checks (e.g., is the destination a directory and does it exist?). If there is an error, the last directory is reset to be the current directory. If all goes well, it calls <tt>os.listdir()</tt> to get the actual set of files and replaces the listing in the <tt>Listbox</tt>. While the background work is going on to pull in the new directory's information, the highlighted blue bar becomes bright red. When the new directory has been installed, it reverts to blue.</P>

<a name="ch19lev4sec15"></a>

<h5 id="title-IDA31QJ" class="docSection4Title">Lines 110115</H5>
<p class="docText"><a name="iddle2279"></a><a name="iddle2288"></a><a name="iddle2290"></a><a name="iddle2292"></a><a name="iddle2297"></a><a name="iddle2300"></a><a name="iddle3429"></a><a name="iddle3486"></a><a name="iddle3500"></a><a name="iddle4187"></a><a name="iddle4541"></a><a name="iddle4544"></a>The last pieces of code in <tt>listdir.py</tt> represent the main part of the code. <tt>main()</tt> is executed only if this script is invoked directly, and when <tt>main()</tt> runs, it creates the GUI application, then calls <tt>mainloop()</tt> to start the GUI, which is passed control of the application.</P>
<p class="docText">We leave all other aspects of the application as an exercise to the reader, recommending that it is easier to view the entire application as a combination of a set of widgets and functionality. If you see the individual pieces clearly, then the entire script will not appear as daunting.</P>
<p class="docText">We hope that we have given you a good introduction to GUI programming with Python and Tkinter. Remember that the best way to get familiar with Tkinter programming is by practicing and stealing a few examples! The Python distribution comes with a large number of demonstration applications that you can study.</P>
<p class="docText">If you download the source code, you will find Tkinter demo code in <tt>Lib/lib-tk, Lib/idlelib</tt>, and <tt>Demo/tkinter</tt>. If you have installed the Win32 version of Python and <tt>C:\Python2x</tt>, then you can get access to the demo code in <tt>Lib\lib-tk</tt> and <tt>Lib\idlelib</tt>. The latter directory contains the most significant sample Tkinter application: the IDLE IDE itself. For further reference, there are several books on Tk programming, one specifically on Tkinter.</p>




<a href="14051536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>