<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Practice Questions</title>
<link rel="STYLESHEET" type="text/css" href="images/css1.css">
<link rel="STYLESHEET" type="text/css" href="images/css2.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=BBL0054.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=BBL0056.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><div class="chapter">
<a name=""></a>
<div class="section">
<h2 class="first-section-title">
<a name="891"></a><a name="ch07le"></a>Practice Questions</h2>
<a name="892"></a><a name=""></a>
<div class="qandaset">
<table border="0" cellpadding="0">
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>1.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Application A holds an Exclusive lock on table TAB1 and needs to acquire an Exclusive lock on table TAB2. Application B holds an Exclusive lock on table TAB2 and needs to acquire an Exclusive lock on table TAB1. If lock timeout is set to -1 and both applications are using the Read Stability isolation level, which of the following will occur?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Applications A and B will cause a deadlock situation</p>
</li>
<li class="listitem">
<p class="first-para">B. Application B will read the copy of table TAB1 that was loaded into memory when Application A first read it</p>
</li>
<li class="listitem">
<p class="first-para">C. Application B will read the data in table TAB1 and see uncommitted changes made by Application A</p>
</li>
<li class="listitem">
<p class="first-para">D. Application B will be placed in a lock-wait state until Application A releases its lock</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>2.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Two applications have created a deadlock cycle in the locking subsystem. If lock timeout is set to 30 and both applications were started at the same time, what action will the deadlock detector take when it "wakes up" and discovers the deadlock?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. It will randomly pick an application and rollback its current transaction</p>
</li>
<li class="listitem">
<p class="first-para">B. It will rollback the current transactions of both applications</p>
</li>
<li class="listitem">
<p class="first-para">C. It will wait 30 seconds, then rollback the current transactions of both applications if the deadlock has not been resolved</p>
</li>
<li class="listitem">
<p class="first-para">D. It will go back to sleep for 30 seconds, then if the deadlock still exists, it will randomly pick an application and rollback its current transaction</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>3.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Application A is running under the Repeatable Read isolation level and holds an Update lock on table TAB1. Application B wants to query table TAB1 and cannot wait for Application A to release its lock. Which isolation level should Application B run under to achieve this objective?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Repeatable Read</p>
</li>
<li class="listitem">
<p class="first-para">B. Read Stability</p>
</li>
<li class="listitem">
<p class="first-para">C. Cursor Stability</p>
</li>
<li class="listitem">
<p class="first-para">D. Uncommitted Read</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>4.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Application A holds a lock on a row in table TAB1. If lock timeout is set to 20, what will happen when Application B attempts to acquire a compatible lock on the same row?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Application B will acquire the lock it needs</p>
</li>
<li class="listitem">
<p class="first-para">B. Application A will be rolled back if it still holds its lock after 20 seconds have elapsed</p>
</li>
<li class="listitem">
<p class="first-para">C. Application B will be rolled back if Application A still holds its lock after 20 seconds have elapsed</p>
</li>
<li class="listitem">
<p class="first-para">D. Both applications will be rolled back if Application A still holds its lock after 20 seconds have elapsed</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>5.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">To which of the following resources can a lock NOT be applied?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Tablespaces</p>
</li>
<li class="listitem">
<p class="first-para">B. Buffer pools</p>
</li>
<li class="listitem">
<p class="first-para">C. Tables</p>
</li>
<li class="listitem">
<p class="first-para">D. Rows</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="The correct answer is B . Locks can only be acquired for tablespaces, tables, and rows. " id="IMG_2" src="images/question.gif" height="24" width="24" title="The correct answer is B . Locks can only be acquired for tablespaces, tables, and rows. " border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>6.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Which of the following modes, when used with the LOCK TABLE statement, will cause the DB2 Database Manager to acquire a table-level lock that prevents other concurrent transactions from accessing data stored in the table while the owning transaction is active?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. SHARE MODE</p>
</li>
<li class="listitem">
<p class="first-para">B. ISOLATED MODE</p>
</li>
<li class="listitem">
<p class="first-para">C. EXCLUSIVE MODE</p>
</li>
<li class="listitem">
<p class="first-para">D. RESTRICT MODE</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>7.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">An application has acquired a Share lock on a row in a table and now wishes to update the row. Which of the following statements is true?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. The application must release the row-level Share lock it holds and acquire an Update lock on the row</p>
</li>
<li class="listitem">
<p class="first-para">B. The application must release the row-level Share lock it holds and acquire an Update lock on the table</p>
</li>
<li class="listitem">
<p class="first-para">C. The row-level Share lock will automatically be converted to a row-level Update lock</p>
</li>
<li class="listitem">
<p class="first-para">D. The row-level Share lock will automatically be escalated to a table-level Update lock</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>8.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Application A wants to read a subset of rows from table TAB1 multiple times. Which of the following isolation levels should Application A use to prevent other users from making modifications and additions to table TAB1 that will affect the subset of rows read?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Repeatable Read</p>
</li>
<li class="listitem">
<p class="first-para">B. Read Stability</p>
</li>
<li class="listitem">
<p class="first-para">C. Cursor Stability</p>
</li>
<li class="listitem">
<p class="first-para">D. Uncommitted Read</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>9.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">A transaction using the Read Stability isolation level scans the same table multiple times before it terminates. Which of the following can occur within this transaction's processing?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Uncommitted changes made by other transactions can be seen from one scan to the next.</p>
</li>
<li class="listitem">
<p class="first-para">B. Rows removed by other transactions that appeared in one scan will no longer appear in subsequent scans.</p>
</li>
<li class="listitem">
<p class="first-para">C. Rows added by other transactions that did not appear in one scan can be seen in subsequent scans.</p>
</li>
<li class="listitem">
<p class="first-para">D. Rows that have been updated can be changed by other transactions from one scan to the next.</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
<tr class="qandaentry">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a name=""><b>10.&nbsp;</b></a>
</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">Application A issues the following SQL statements within a single transaction using the Uncommitted Read isolation level:</p>
<div class="informalexample">
<pre class="literallayout">
SELECT * FROM department WHERE deptno = 'A00';
UPDATE department SET mgrno = '000100' WHERE deptno = 'A00';
</pre>
</div>
<p class="para">As long as the transaction is not committed, which of the following statements is FALSE?</p>
<ul class="itemizedlist">
<li class="first-listitem">
<p class="first-para">A. Other applications not running under the Uncommitted Read isolation level are prohibited from reading the updated row</p>
</li>
<li class="listitem">
<p class="first-para">B. Application A is allowed to read data stored in another table, even if an Exclusive lock is held on that table</p>
</li>
<li class="listitem">
<p class="first-para">C. Other applications running under the Uncommitted Read isolation level are allowed to read the updated row</p>
</li>
<li class="listitem">
<p class="first-para">D. Application A is not allowed to insert new rows into the DEPARTMENT table as long as the current transaction remains active</p>
</li>
</ul>
</td><td class="td" valign="top" width="8%">
<p class="first-para">
<a href="#answer."><img alt="Image from book" id="IMG_2" src="images/question.gif" height="24" width="24" title="Click to view answer" border="0"></a>
</p>
</td>
</tr>
</table>
<p class="bold">Answers</p>
<table border="0" cellpadding="0">
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>1.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">A</b>. If Application B did not already have an Exclusive lock on table <span class="fixed">TAB2</span>, Application B would be placed in a lock-wait state until Application A released its locks. However, because Application B holds an Exclusive lock on table <span class="fixed">TAB2</span>, when Application A tries to acquire an Exclusive lock on table <span class="fixed">TAB2</span> and Application B tries to acquire an Exclusive lock on table <span class="fixed">TAB1,</span> a deadlock will occur - processing by both transactions will be suspended until their second lock request is granted. Because neither lock request can be granted until one of the owning transactions releases the lock it currently holds (by performing a commit or rollback operation), and because neither transaction can perform a commit or rollback operation because they both have been suspended (and are waiting on locks), a deadlock has occurred.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>2.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">A</b>. When a deadlock cycle occurs, all transactions involved will wait indefinitely for a lock to be released unless some outside agent steps in and breaks the cycle. With DB2, this agent is a background process, known as the <i class="emphasis">deadlock detector</i>, and its sole responsibility is to locate and resolve any deadlocks found in the locking subsystem. Each database has its own deadlock detector, which is activated as part of the database initialization process. Once activated, the deadlock detector stays "asleep" most of the time but "wakes up" at preset intervals and examines the locking subsystem to determine whether a deadlock situation exists. If the deadlock detector discovers a deadlock cycle, it randomly selects one of the transactions involved to roll back and terminate; the transaction chosen (referred to as the <i class="emphasis">victim process</i>) is then sent an SQL error code, and every lock it had acquired is released. The remaining transaction(s) can then proceed, because the deadlock cycle has been broken.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>3.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">
<a name="893"></a><a name=""></a>The correct answer is <b class="bold">D</b>. Typically, locks are not acquired during processing when the Uncommitted Read isolation level is used. Therefore, if Application B runs under this isolation level, it will be able to retrieve data from table <span class="fixed">TAB1</span> immediately - lock compatibility is not an issue that will cause Application B to wait for a lock.<a name="894"></a><a name=""></a>
</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>4.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">A</b>. Anytime one transaction holds a lock on a data resource and another transaction attempts to acquire a lock on the same resource, the DB2 Database Manager will examine each lock's state and determine whether they are <i class="emphasis">compatible</i>. If the state of a lock placed on a data resource by one transaction is such that another lock can be placed on the same resource by another transaction before the first lock acquired is released, the locks are said to be compatible and the second lock will be acquired. However, if the locks are not compatible, the transaction requesting the incompatible lock must wait until the transaction holding the first lock is terminated before it can acquire the lock it needs. If the requested lock is not acquired before the time interval specified in the <i class="emphasis">locktimeout</i> configuration parameter has elapsed, the waiting transaction receives an error message and is rolled back.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>5.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">B</b>. Locks can only be acquired for tablespaces, tables, and rows.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>6.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">
<a name="895"></a><a name=""></a>The correct answer is <b class="bold">C</b>. The <span class="fixed">LOCK TABLE</span> statement allows a transaction to explicitly acquire a table-level lock on a particular table in one of two modes: <span class="fixed">SHARE</span> and <span class="fixed">EXCLUSIVE</span>. If a table is locked using the <span class="fixed">SHARE</span> mode, a table-level Share (S) lock is acquired on behalf of the transaction, and other concurrent transactions are allowed to read, but not change, the data stored in the locked table. If a table is locked using the <span class="fixed">EXCLUSIVE</span> mode, a table-level Exclusive (X) lock is acquired, and other concurrent transactions can neither access nor modify data stored in the locked table.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>7.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">C</b>. If a transaction holding a lock on a resource needs to acquire a more restrictive lock on the same resource, the DB2 Database Manager will attempt to change the state of the existing lock to the more restrictive state. The action of changing the state of an existing lock to a more restrictive state is known as <i class="emphasis">lock conversion</i>. Lock conversion occurs because a transaction can hold only one lock on a specific data resource at any given time. In most cases, lock conversion is performed on row-level locks, and the conversion process is fairly straightforward. For example, if an Update (U) lock is held and an Exclusive (X) lock is needed, the Update (U) lock will be converted to an Exclusive (X) lock.<a name="896"></a><a name=""></a>
</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>8.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">A</b>. When the Repeatable Read isolation level is used, the effects of one transaction are completely isolated from the effects of other concurrent transactions; when this isolation level is used, every row that's referenced in any manner by the owning transaction is locked for the duration of that transaction. As a result, if the same <span class="fixed">SELECT</span> SQL statement is issued multiple times within the same transaction, the result data sets produced are guaranteed to be the identical. Other transaction are prohibited from performing insert, update, or delete operations that would affect any row that has been accessed by the owning transaction as long as that transaction remains active.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>9.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">
<a name="897"></a><a name=""></a>The correct answer is <b class="bold">C</b>. When the Read Stability isolation level is used by a transaction that executes a query, locks are acquired on all rows returned to the result data set produced, and other transactions cannot modify or delete the locked rows; however, they can add new rows to the table that meet the query's search criteria. If that happens, and the query is run again, these new rows will appear in the new result data set produced.</p>
</td>
</tr>
<tr class="qandaentry-answer">
<td class="td" valign="top" width="2%">
<p class="first-para">
<a class="internaljump" name="answer." href="#"><b>10.</b></a>&nbsp;</p>
</td><td class="td" valign="top" width="90%">
<p class="first-para">The correct answer is <b class="bold">D</b>. When the Uncommitted Read isolation level is used, rows retrieved by a transaction are only locked if the transaction modifies data associated with one or more rows retrieved or if another transaction attempts to drop or alter the table the rows were retrieved from. As the name implies, transactions running under the uncommitted read isolation level can see changes made to rows by other transactions before those changes have been committed. On the other hand, transactions running under the Repeatable Read, Read Stability, or Cursor Stability isolation level are prohibited from seeing uncommitted data. Therefore, applications running under the Uncommitted Read isolation level can read the row Application A updated while applications running under a different isolation level cannot. Because no locks are needed in order for Application A to read data stored in other tables, it can do so - even if a restrictive lock is held on that table. However, there is nothing that prohibits Application A from performing an insert operation from within the open transaction.</p>
</td>
</tr>
</table>
</div>
<a name="898"></a><a name=""></a><a name="899"></a><a name="IDX-"></a>
</div>
</div>
</div>
</DIV>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=BBL0054.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=BBL0056.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>