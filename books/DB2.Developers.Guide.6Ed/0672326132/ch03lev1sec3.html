<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>The RAISE_ERROR Function</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch03lev1sec2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch03lev1sec4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch03lev1sec3"></A><H3 class="docSection1Title">The <TT>RAISE_ERROR</TT> Function</H3>
<P class="docText">The <TT>RAISE_ERROR</TT> function is a different type of function than we have discussed so far. It is not a column function because it does not take a group of rows and return a single value. Nor is <TT>RAISE_ERROR</TT> truly a scalar function because it does not transform column data from one state to another.<A NAME="ch03index395"></A><A NAME="ch03index396"></A></P>
<P class="docText">Instead, the <TT>RAISE_ERROR</TT> function is used to raise an error condition in the SQLCA. The user supplies the <TT>SQLSTATE</TT> and error description for the error to be raised. The error will be raised with the specified <TT>SQLSTATE</TT> and a <TT>SQLCODE</TT> of <TT>–438</TT>.</P>
<P class="docText">The <TT>RAISE_ERROR</TT> function can be used to signal application program and data problems. One situation where <TT>RAISE_ERROR</TT> may prove useful is in a <TT>CASE</TT> statement such as</P>
<pre>

</pre><BR><pre>
SELECT EMPNO,
  CASE WHEN SEX = 'M' THEN 'MALE  '
       WHEN SEX = 'F' THEN 'FEMALE'
 ELSE  RAISE_ERROR('70SX1', 'INVALID DATA, SEX IS NEITHER F NOR M.')
   END
   FROM DSN8810.EMP;
</pre><BR>
<P class="docText">The value specified for <TT>SQLSTATE</TT> must conform to the following rules:</P>
<UL><LI><P class="docList">The value must be a character string of exactly five characters in length.</P></LI><LI><P class="docList">Only the characters <TT>'0'</TT> through <TT>'9'</TT> and uppercase <TT>'A'</TT> through <TT>'Z'</TT> may be used.</P></LI><LI><P class="docList">The first two characters cannot be <TT>'00'</TT>, <TT>'01'</TT>, or <TT>'02'</TT>.</P></LI><LI><P class="docList">If the first character is <TT>'0'</TT> through <TT>'6'</TT> or <TT>'A'</TT> through <TT>'H'</TT>, the last three characters must start with a letter from <TT>'I'</TT> through <TT>'Z'</TT>.</P></LI><LI><P class="docList">If the first character is <TT>'7'</TT>, <TT>'8'</TT>, <TT>'9'</TT>, or <TT>'I'</TT> though <TT>'Z'</TT>, the last three characters can be any valid character.<A NAME="ch03index397"></A><A NAME="ch03index398"></A></P></LI></UL>
<A NAME="ch03note15"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">Technically, the <TT>RAISE_ERROR</TT> function does return a value. It always returns <TT>NULL</TT> with an undefined data type. You must use the <TT>CAST</TT> function to cast it to a defined data type to return the value to a program.</P></div><br>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch03lev1sec2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch03lev1sec4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
