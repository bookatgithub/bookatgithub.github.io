<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>MQSeries Built-in Functions</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch03lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch03lev1sec5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch03lev1sec4"></A><H3 class="docSection1Title" >MQSeries Built-in Functions</H3>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0"  width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> DB2 Version 7 adds a number of new built-in scalar and table functions for use with IBM's message queuing software, MQSeries. These functions enable MQSeries messages to be received and sent. The MQSeries scalar functions are<A NAME="ch03index399"></A><A NAME="ch03index400"></A><A NAME="ch03index401"></A></P></td></tr></table><br>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQREAD</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accepts two parameters; returns a message (as <TT>VARCHAR(4000)</TT>) from the MQSeries location specified in the first expression, using the quality of service policy defined in the second expression.<A NAME="ch03index402"></A><A NAME="ch03index403"></A><A NAME="ch03index404"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQREADCLOB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accepts two parameters; returns a message (as a <TT>CLOB</TT>) from the MQSeries location specified in the first expression, using the quality of service policy defined in the second expression.<A NAME="ch03index405"></A><A NAME="ch03index406"></A><A NAME="ch03index407"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch03note16"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">When performing either the <TT>MQREAD</TT> or <TT>MQREADCLOB</TT> function the operation does not remove the message from the queue specified in the first expression. Additionally, for both functions, if no messages are available a <TT>NULL</TT> is returned.</P></div><br>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="143"><COL width="407"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQRECEIVE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Same as <TT>MQREAD</TT>, except the operation will remove the messages from the queue.<A NAME="ch03index408"></A><A NAME="ch03index409"></A><A NAME="ch03index410"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQRECEIVECLOB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Same as <TT>MQREADCLOB</TT>, except the operation will remove the messages from the queue.<A NAME="ch03index411"></A><A NAME="ch03index412"></A><A NAME="ch03index413"></A><A NAME="ch03index414"></A><A NAME="ch03index415"></A><A NAME="ch03index416"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch03note17"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">When performing either the <TT>MQRECEIVE</TT> or <TT>MQRECEIVECLOB</TT> function, the operation will remove the message from the queue specified in the first expression. Additionally, for both functions, if no messages are available a <TT>NULL</TT> is returned.</P></div><br>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="110"><COL width="440"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQSEND</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">This function is used to send messages to an MQSeries queue. It returns a value of <TT>1</TT> if successful; <TT>0</TT> if unsuccessful. It accepts three (possibly, four) parameters. The data contained in the first expression will be sent to the MQSeries location specified in the second expression, using the quality of service policy defined in the third expression. A user defined by the message correlation identifier may be specified as an optional fourth expression.<A NAME="ch03index417"></A><A NAME="ch03index418"></A><A NAME="ch03index419"></A></P></TD></TR></TABLE></P><br>
<P class="docText">Using these scalar functions you can easily read, retrieve, and send information from and to MQSeries message queues. The scalar functions operate one message at a time. At times, though, you might want to operate on multiple MQSeries messages. This requires table functions, and DB2 Version 7 supplies several of these as well. The MQSeries table functions are</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="137.5"><COL width="412.5"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQREADALL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns all of the messages (as <TT>VARCHAR</TT>) from the MQSeries location specified in the first expression, using the quality of service policy defined in the second expression. An optional third parameter can be used to limit the number of rows to return.<A NAME="ch03index420"></A><A NAME="ch03index421"></A><A NAME="ch03index422"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQREADALLCLOB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns all of the messages (as <TT>CLOB</TT>) from the MQSeries location specified in the first expression, using the quality of service policy defined in the second expression. An optional third parameter can be used to limit the number of rows to return.<A NAME="ch03index423"></A><A NAME="ch03index424"></A><A NAME="ch03index425"></A><A NAME="ch03index426"></A><A NAME="ch03index427"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQRECEIVEALL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Same as <TT>MQREADALL</TT> except the operation will remove the messages from the queue.<A NAME="ch03index428"></A><A NAME="ch03index429"></A><A NAME="ch03index430"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MQRECEIVECLOBALL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Same as <TT>MQREADALLCLOB</TT> except the operation will remove the messages from the queue.<A NAME="ch03index431"></A><A NAME="ch03index432"></A><A NAME="ch03index433"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch03note18"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">When performing any of the MQSeries functions that read or receive data, an operation returns a table with the following columns:</P>
<UL><LI><p class="docText">
<TT>MSG</TT>— 
Contains the contents of the MQSeries message, either a <TT>VARCHAR(4000)</TT> or <TT>CLOB</TT> based on which function was used.</p></LI><LI><p class="docText">
<TT>CORRELID</TT>— 
Correlation ID used to relate messages—<TT>VARCHAR(24)</TT>.</p></LI><LI><p class="docText">
<TT>TOPIC</TT>— 
The topic that the message was published with, if available—<TT>VARCHAR(40)</TT>.</p></LI><LI><p class="docText">
<TT>QNAME</TT>— 
The queue name where the message was received—<TT>VARCHAR(48)</TT>.</p></LI><LI><p class="docText">
<TT>MSGID</TT>— 
The assigned MQSeries unique identifier for this message—<TT>CHAR(24)</TT>.</p></LI><LI><p class="docText">
<TT>MSGFORMAT</TT>— 
The format (typically MQSTR) of the message, as defined by MQSeries—<TT>VARCHAR(8)</TT>.<A NAME="ch03index434"></A><A NAME="ch03index435"></A><A NAME="ch03index436"></A></p></LI></UL></div><br>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch03lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch03lev1sec5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
