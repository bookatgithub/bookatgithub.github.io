<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>DB2 Extenders</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch09lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch10.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch09lev1sec4"></A><H3 class="docSection1Title" >DB2 Extenders</H3>
<P class="docText">LOB data types (<TT>BLOB</TT>, <TT>CLOB</TT>, and <TT>DBCLOB</TT>) provide an easy way to store large, unstructured data in DB2 databases. But LOBs are nondescript. The only thing you know about them is a general idea of the type of data:</P>
<UL><LI><P class="docList">A <TT>BLOB</TT> is binary data</P></LI><LI><P class="docList">A <TT>CLOB</TT> is character data</P></LI><LI><P class="docList">A <TT>DBCLOB</TT> is double-byte character data</P></LI></UL>
<P class="docText">But DB2 comes equipped with extenders that can be used to provide additional meaning and functionality to LOBs. DB2 Extenders are available for image, audio, video, and text data. A DB2 Extender provides a distinct type for the LOB, and a set of user-defined functions for use with objects of its distinct type. Additionally, the DB2 Extenders automatically capture and maintain attribute information about the objects being stored. They also provide APIs for your applications to use.<A NAME="ch09index123"></A></P>
<P class="docText">Basically, the DB2 Extenders provide the functionality to make LOBs useful for your applications. With the DB2 Extenders, you could store LOBs, but doing anything very useful with them would be difficult and require a lot of work.</P>
<P class="docText">The DB2 Extenders use the <TT>MMDBSYS</TT> schema for all objects, including UDTs and UDFs. The following UDTs are created by the DB2 Extenders to support image, audio, and video data:<A NAME="ch09index124"></A><A NAME="ch09index125"></A></P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="137.5"><COL width="412.5"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2AUDIO</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A variable-length string containing information needed to access an audio object, also called an audio handle.<A NAME="ch09index126"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2IMAGE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A variable-length string containing information needed to access an image object, also called an image handle.<A NAME="ch09index127"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2TEXTH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A variable-length string containing information needed to access a text document, also called a text handle.<A NAME="ch09index128"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2TEXTFH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A variable length string containing information required for indexing an external text file, also referred to as a file handle.<A NAME="ch09index129"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2VIDEO</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A variable-length string containing information needed to access a video object, also known as a video handle.<A NAME="ch09index130"></A><A NAME="ch09index131"></A><A NAME="ch09index132"></A></P></TD></TR></TABLE></P><br>
<P class="docText">The <TT>DB2AUDIO</TT>, <TT>DB2IMAGE</TT>, and <TT>DB2VIDEO</TT> UDTs are based on a <TT>VARCHAR(250)</TT> data type. The <TT>DB2TEXTH</TT> UDT is based on a <TT>VARCHAR(60)</TT> data type with <TT>FOR BIT DATA</TT>.</P>
<P class="docText">The information in a text handle includes a document ID, the name of the server where the text is to be indexed, the name of the index, information about the text file, and information about the location of the file. File handles are stored in columns that Text Extender creates and associates with each group of external files. The audio, image, and video handles are stored in columns created by each specific extender for handling that type of data—audio, image, or video.</P>
<P class="docText">When enabled, each of the DB2 Extenders—audio, image, text, and video—also creates user-defined functions for use on columns defined as the UDT. The UDFs created by each of the DB2 Extenders are outlined in <A class="docLink" HREF="#ch09table04">Tables 9.4</A>, <A class="docLink" HREF="#ch09table05">9.5</A>, <A class="docLink" HREF="#ch09table06">9.6</A>, and <A class="docLink" HREF="#ch09table07">9.7</A>.<A NAME="ch09index133"></A><A NAME="ch09index134"></A></P>
<A NAME="ch09table04"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 9.4. UDFs Created By the Audio Extender</h5></CAPTION><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">UDF Name</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Purpose of the UDF</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>AlignValue</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Gets the bytes per sample value of the audio<A NAME="ch09index135"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>BitsPerSample</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the number of bits used to represent the audio<A NAME="ch09index136"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>BytesPerSec</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the average number of bytes per second of audio<A NAME="ch09index137"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Comment</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies user comments<A NAME="ch09index138"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Content</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the audio content <A NAME="ch09index139"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ContentA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates the audio content with user-supplied attributes<A NAME="ch09index140"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2Audio</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the audio content<A NAME="ch09index141"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2AudioA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the audio content with user-supplied attributes<A NAME="ch09index142"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Duration</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the audio playing time<A NAME="ch09index143"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Filename</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the name of the file that contains the audio<A NAME="ch09index144"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>FindInstrument</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of the audio track that records a specific instrument in an audio<A NAME="ch09index145"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>FindTrackName</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the track number of a named track in an audio recording<A NAME="ch09index146"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Format</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the audio format<A NAME="ch09index147"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>GetInstruments</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the names of the instruments in the audio recording<A NAME="ch09index148"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>GetTrackNames</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the track names in an audio recording<A NAME="ch09index149"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Importer</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the importer of an audio<A NAME="ch09index150"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ImportTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when an audio was imported<A NAME="ch09index151"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumAudioTracks</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of recorded tracks in an audio<A NAME="ch09index152"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumChannels</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of audio channels<A NAME="ch09index153"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Replace</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Modifies the content and user comments for an audio recording<A NAME="ch09index154"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ReplaceA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Modifies the content and user comments for an audio recording with user-supplied attributes<A NAME="ch09index155"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SamplingRate</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the sampling rate of the audio<A NAME="ch09index156"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Size</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the size of an audio in bytes<A NAME="ch09index157"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TicksPerQNote</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of clock ticks per quarter note used in recording an audio<A NAME="ch09index158"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TicksPerSec</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of clock ticks per second used in recording an audio<A NAME="ch09index159"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Updater</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the updater of an audio<A NAME="ch09index160"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UpdateTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when an audio was updated<A NAME="ch09index161"></A><A NAME="ch09index162"></A><A NAME="ch09index163"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch09table05"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 9.5. UDFs Created By the Image Extender</h5></CAPTION><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">UDF Name</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Purpose of the UDF</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Comment</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies user comments<A NAME="ch09index166"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Content</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the image content <A NAME="ch09index167"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ContentA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates the image content with user-supplied attributes<A NAME="ch09index168"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2Image</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the image content <A NAME="ch09index169"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2ImageA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the image content with user-supplied attributes<A NAME="ch09index170"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Filename</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the name of the file that contains an image<A NAME="ch09index171"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Format</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the image format (for example, GIF)<A NAME="ch09index172"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Height</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the height of an image in pixels<A NAME="ch09index173"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Importer</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the importer of an image<A NAME="ch09index174"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ImportTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when an image was imported<A NAME="ch09index175"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumColors</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of colors used in an image<A NAME="ch09index176"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Replace</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates the content and user comments for an image<A NAME="ch09index177"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ReplaceA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates the content and user comments for an image with user-supplied attributes<A NAME="ch09index178"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Size</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the size of an image in bytes<A NAME="ch09index179"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Thumbnail</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves a thumbnail-sized version of an image<A NAME="ch09index180"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Updater</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the updater of an image<A NAME="ch09index181"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UpdateTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when an image was updated<A NAME="ch09index182"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Width</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the width of an image in pixels<A NAME="ch09index183"></A><A NAME="ch09index184"></A><A NAME="ch09index185"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch09table06"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 9.6. UDFs Created By the Text Extender</h5></CAPTION><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">UDF Name</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Purpose of the UDF</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CCSID</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the CCSID from a handle<A NAME="ch09index188"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Contains</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Searches for text in a particular document<A NAME="ch09index189"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>File</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the path and name of a file in an existing handle<A NAME="ch09index190"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Format</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the document format setting in a handle<A NAME="ch09index191"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Init_Text_Handle</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves a partially initialized handle containing information such as format and language settings<A NAME="ch09index192"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Language</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the language setting in a handle<A NAME="ch09index193"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NO_of_Matches</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Searches for matches and returns the number of matches found<A NAME="ch09index194"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Rank</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the rank value of a found text document<A NAME="ch09index195"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Refine</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns a combined search argument from a specified search argument and refining search argument<A NAME="ch09index196"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Search</TT>_<TT>Result</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns an intermediate table with the search result of the specified search string<A NAME="ch09index197"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch09table07"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 9.7. UDFs Created By the Video Extender</h5></CAPTION><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">UDF Name</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Purpose of the UDF</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>AlignValue</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Gets the bytes per sample value of the audio track of the video<A NAME="ch09index200"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>AspectRatio</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the aspect ratio of the first track of an MPEG1 and MPEG2 video<A NAME="ch09index201"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>BitsPerSample</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the number of bits used to represent the audio<A NAME="ch09index202"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>BytesPerSec</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the average number of bytes per second of the audio track of the video<A NAME="ch09index203"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Comment</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies user comments<A NAME="ch09index204"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CompressType</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns the compression format of a video (for example, MPEG-2)<A NAME="ch09index205"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Content</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves or modifies the video content <A NAME="ch09index206"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ContentA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates the video content with user-supplied attributes<A NAME="ch09index207"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2Video</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the video content <A NAME="ch09index208"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2VideoA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Stores the video content with user-supplied attributes<A NAME="ch09index209"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Duration</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the video playing time <A NAME="ch09index210"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Filename</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the name of the file that contains the video<A NAME="ch09index211"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Format</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the video format<A NAME="ch09index212"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Importer</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the importer of the video<A NAME="ch09index213"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ImportTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when the video was imported<A NAME="ch09index214"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MaxBytesPerSec</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the maximum throughput of a video in bytes per second<A NAME="ch09index215"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumAudioTracks</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of audio tracks in the video<A NAME="ch09index216"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumChannels</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of audio channels in the audio track of the video<A NAME="ch09index217"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumFrames</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of frames in the video<A NAME="ch09index218"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NumVideoTracks</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the number of video tracks in a video<A NAME="ch09index219"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Replace</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Modifies the content and user comments for the video<A NAME="ch09index220"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ReplaceA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Modifies the content and user comments for the video with user-supplied attributes<A NAME="ch09index221"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SamplingRate</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the sampling rate for an audio track of the video<A NAME="ch09index222"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Size</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the size of the video audio in bytes<A NAME="ch09index223"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Updater</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the user ID of the updater of an audio<A NAME="ch09index224"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UpdateTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the timestamp when an audio was updated<A NAME="ch09index225"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Width</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Retrieves the width in pixels of a video frame<A NAME="ch09index226"></A><A NAME="ch09index227"></A><A NAME="ch09index228"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch09lev2sec4"></A><H4 class="docSection2Title">XML Extender</H4>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0"  width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> DB2 V7 supports XML using a new data type extender for XML documents: the XML Extender. The XML Extender is similar to the other extenders for video, image, audio, and text that were added to DB2 V6. Like those previous extenders, the XML Extender combines user-defined distinct types, user-defined functions, and triggers to provide extended data type functionality for DB2 databases.<A NAME="ch09index229"></A><A NAME="ch09index230"></A></P></td></tr></table><br>
<P class="docText">The XML Extender enables XML documents to be integrated with DB2 databases. By integrating XML into DB2 databases, you can more directly and quickly access the XML documents. You can search and store entire XML documents using SQL. You also have the option of combining XML documents with traditional data stored in relational tables.</P>
<P class="docText">When you store or compose a document, you can invoke DBMS functions to trigger an event to automate the interchange of data between applications. An XML document can be stored complete in a single text column. Alternatively, XML documents can be broken into component pieces and stored as multiple columns across multiple tables.</P>
<P class="docText">The XML Extender provides user-defined data types (UDTs) and user-defined functions (UDFs) to store and manipulate XML in the DB2 database. The XML Extender defines UDTs for <TT>XMLVARCHAR</TT>, <TT>XMLCLOB</TT>, and <TT>XMLFILE</TT>. After the XML is stored in the database, the UDFs can be used to search and retrieve the XML data as a complete document or in pieces. The UDFs supplied by the XML Extender include<A NAME="ch09index231"></A><A NAME="ch09index232"></A><A NAME="ch09index233"></A><A NAME="ch09index234"></A><A NAME="ch09index235"></A></P>
<UL><LI><P class="docList"><TT>Storage</TT> functions to insert XML documents into a DB2 database<A NAME="ch09index236"></A><A NAME="ch09index237"></A><A NAME="ch09index238"></A></P></LI><LI><P class="docList"><TT>Retrieval</TT> functions to access XML documents from XML columns</P></LI><LI><P class="docList"><TT>Extraction</TT> functions to extract and convert the element content or attribute values from an XML document to the data type that is specified by the function name</P></LI><LI><P class="docList"><TT>Update</TT> functions to modify element contents or attribute values (and to return a copy of an XML document with an updated value)<A NAME="ch09index239"></A><A NAME="ch09index240"></A></P></LI></UL>
<P class="docText">The UDFs created by the XML Extender are outlined in <A class="docLink" HREF="#ch09table08">Table 9.8</A>.</P>
<A NAME="ch09table08"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 9.8. UDFs Created By the XML Extender</h5></CAPTION><COLGROUP><COL width="275"><COL width="275"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">UDF Name</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Purpose of the UDF</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>XMLVarcharFromFile</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Reads an XML document from a file and returns the document as an <TT>XMLVARCHAR</TT> type.<A NAME="ch09index241"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>XMLCLOBFromFile</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Reads an XML document from a file and returns the document as an <TT>XMLCLOB</TT> type.<A NAME="ch09index242"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>XMLFileFromVarchar</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Reads an XML document from memory as <TT>VARCHAR</TT>, writes it to an external file, and returns the file name and path as an <TT>XMLFILE</TT> type.<A NAME="ch09index243"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>XMLFileFromCLOB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Reads an XML document as a CLOB locator, writes it to an external file, and returns the file name and path as an <TT>XMLFILE</TT> type.<A NAME="ch09index244"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Content</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Depending on parameters, will retrieve from <TT>XMLFILE</TT> to a CLOB; or, retrieve from <TT>XMLVARCHAR</TT> to an external file; or, retrieve from <TT>XMLCLOB</TT> to an external file.<A NAME="ch09index245"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractInteger</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as an <TT>INTEGER</TT> data type.<A NAME="ch09index246"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractSmallint</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>SMALLINT</TT> data type.<A NAME="ch09index247"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractDouble</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>DOUBLE</TT> precision data type.<A NAME="ch09index248"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractReal</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>REAL</TT> data type.<A NAME="ch09index249"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractChar</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>CHAR</TT> data type.<A NAME="ch09index250"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractVarchar</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>VARCHAR</TT> data type.<A NAME="ch09index251"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractCLOB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts a portion of an XML document, including its element and attribute markup, as well as the content of elements and attributes (including sub-elements). This function differs from the other extract functions; they return only the content of elements and attributes. Use <TT>extractClob</TT> to extract document fragments; use <TT>extractVarchar</TT> or <TT>extractChar</TT> to extract simple values.<A NAME="ch09index252"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractDate</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>DATE</TT> data type.<A NAME="ch09index253"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractTime</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>TIME</TT> data type.<A NAME="ch09index254"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>extractTimestamp</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Extracts the element content or attribute value from an XML document and returns the data as a <TT>TIMESTAMP</TT> data type.<A NAME="ch09index255"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Update</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Updates a specified element or attribute value in one or more XML documents stored in the XML column.<A NAME="ch09index256"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>generate_unique()</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Returns a character string that is unique compared to any other execution of the same function. No arguments should be specified for this function, but the empty parentheses are required. The result of the function is a unique value and cannot be null.<A NAME="ch09index257"></A><A NAME="ch09index258"></A><A NAME="ch09index259"></A><A NAME="ch09index260"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch09note10"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">You can add an "s" to the extract functions if you so desire. The functionality is the same as the function without the "s" on the end. For example, <TT>extractInteger</TT> will function the same as <TT>extractIntegers</TT>; the terms are synonymous.</P></div><br>
<P class="docText">For additional information on DB2's support for XML please consult <A class="docLink" HREF="ch17.html#ch17">Chapter 17</A>, "DB2 and the Internet."</P>
<A NAME="ch09lev3sec3"></A><H5 class="docSection3Title">V8 XML Support</H5>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0"  width="30" height="18" SRC="images/0672326132/graphics/V8_icon.gif" ALT="graphics/V8_icon.gif"></td><td valign="top"><P class="docText"> DB2 V8 provides even further support for XML within DB2 databases.</P></td></tr></table><br>
<P class="docText">A new XML data type is introduced in DB2 V8. This new data type is not like any other existing data type. It is a transient data type in that it exists only during query processing. There is no persistent data of this type and it is not an external data type that can be declared in application programs. In other words, the XML data type cannot be stored in a database or returned to an application.<A NAME="ch09index261"></A></P>
<P class="docText">A DB2 XML data type can be an element, a forest of elements, the textual content of an element, or an empty XML value. Furthermore, there are restrictions for the use of the XML data type. An XML data type is not compatible with any other DB2 data type. Query results cannot contain an XML data type; nor can columns in a view contain an XML data type. Furthermore, XML data cannot be used in a sort.</P>
<P class="docText">DB2 V8 also introduces the XML publishing functions. The XML publishing functions are built-in DB2 functions that run inside the DB2 address spaces. Contrast that with normal external User Defined Functions that run in a WLM managed address space outside of DB2. This operational aspect of the XML publishing functions provides better performance. For more details on the XML publishing functions consult <A class="docLink" HREF="ch03.html#ch03">Chapter 3</A>, "Using DB2 Functions."<A NAME="ch09index262"></A><A NAME="ch09index263"></A><A NAME="ch09index264"></A></P>
<A NAME="ch09lev2sec5"></A><H4 class="docSection2Title">Net Search Extender</H4>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0"  width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> Additionally, DB2 V7 added another new extender, the Net Search Extender. The Net Search Extender complements the Text Extender to provide an efficient, format="GIF" depth="274" width="450" role="stdwidth"/&gt;-text retrieval engine for DB2 Web applications. The Net Search Extender works with Net.Data, Java, and DB2 CLI application programs.<A NAME="ch09index265"></A><A NAME="ch09index266"></A></P></td></tr></table><br>
<P class="docText">The primary benefits and features of the Net Search Extender include very fast indexing, sophisticated search capabilities including fuzzy searching and document tagging for limiting searches, and advanced formatting of search results.</P>
<P class="docText">The Net Search Extender provides four DB2 stored procedures to provide search functionality:</P>
<UL><LI><p class="docText">
<TT>textsearch</TT>— 
Performs a standard search with no ranking</p></LI><LI><p class="docText">
<TT>textsearch_t</TT>— 
Performs a standard search with tracing but no ranking</p></LI><LI><p class="docText">
<TT>textsearch_r</TT>— 
Performs a standard search with ranking</p></LI><LI><p class="docText">
<TT>textsearch_rt</TT>— 
Performs a standard search with ranking and tracing<A NAME="ch09index267"></A><A NAME="ch09index268"></A></p></LI></UL>
<A NAME="ch09lev2sec6"></A><H4 class="docSection2Title">DB2 Extender Guidelines</H4>
<P class="docText">The following guidelines cover the additional issues you may encounter as you implement and plan for DB2 Extender usage.</P>
<A NAME="ch09lev4sec14"></A><H5 class="docSection3Title">Be Aware of WLM Requirements for DB2 Extenders</H5>
<P class="docText">The system administrator must enable the DB2 Extenders you wish to use at your site. When the extender is enabled it creates the UDTs, UDFs, administrative tables, and supporting APIs for the extender. The extenders require the use of WLM (Work Load Manager) application environments for the UDFs and stored procedures that are created. The extenders use stored procedures to process API requests. After the DB2 extenders are installed, you need to establish WLM environments for the extender UDFs and stored procedures.<A NAME="ch09index269"></A><A NAME="ch09index270"></A></P>
<A NAME="ch09lev4sec15"></A><H5 class="docSection3Title">Be Aware of Security Implications</H5>
<P class="docText">Before you use the DB2 Extenders, you need to consider the security and authorization issues your will encounter. First, you must decide how to secure access to the actual content of the audio, image, text, and video data. Additionally, the DB2 Extenders create administrative support tables to store additional information about the extenders. Some administrative support tables identify user tables and columns that are enabled for an extender. Other administrative support tables contain attribute information about objects in enabled columns. One example is the QBIC tables created by the Image Extender (QBIC stands for Query By Image Content). You must decide who should have access to the metadata in the administrative support tables.<A NAME="ch09index271"></A><A NAME="ch09index272"></A></P>
<P class="docText">Secondly, you need to determine how to manage the privileges that are automatically granted when the DB2 Extender is enabled. For example, when a DB2 Extender is enabled, <TT>USE</TT> privilege is granted to <TT>PUBLIC</TT> for the UDT, its related <TT>CAST</TT> functions, and all the UDFs for the extender. This may, or may not, be acceptable in your shop. If you <TT>REVOKE</TT> the privileges and <TT>GRANT</TT> them to specific authids, be prepared for the potential headache of administering the list of authorized users of the extender's functionality.<A NAME="ch09index273"></A></P>
<P class="docText">Your audio, image, and video data can be stored in files external to DB2. In that case you can also control access to the content in external files. This can be achieved using operating system security commands, which are usually performed by a separate security group. By limiting access to the external files you limit the ability to retrieve the objects for the extender's data type.</P>
<A NAME="ch09note11"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">The files must be in a file system that is compatible with Unix System Services (USS); for example, a hierarchical file system. USS was previously known as MVS Open Edition.<A NAME="ch09index274"></A><A NAME="ch09index275"></A></P></div><br>
<P class="docText">Another consideration is <TT>MMDBSYS</TT>. All of the DB2 Extenders use the <TT>MMDBSYS</TT> SQLID. The UDT and all of the UDFs created by the DB2 Extender will be created in the <TT>MMDBSYS</TT> schema. You should consider creating the <TT>MMDBSYS</TT> userid to manage the administrative support tables. Use an appropriate external security package (such as ACF2 or RACF) to create an <TT>MMDBSYS</TT> userid.<A NAME="ch09index276"></A></P>
<P class="docText">The DB2 Extenders also create administrative APIs, many of which require special authority. For example, <TT>SYSADM</TT> or the <TT>SELECT</TT> privilege on audio columns in all searched tables is required for the <TT>DBaAdminGetInaccessibleFiles</TT> API. This API returns the names of inaccessible files that are referenced in audio columns of user tables.<A NAME="ch09index277"></A><A NAME="ch09index278"></A></P>
<P class="docText">Finally, you must consider who can issue administration commands to the <TT>db2ext</TT> command line processor for DB2 Extenders.</P>
<P class="docText">The administrative APIs and administration commands are documented in the DB2 Extenders manuals:</P>
<BLOCKQUOTE><P><P class="docList">Image, Audio, and Video Extenders Administration and Programming Guide</P></P><P><P class="docList">Net Search Extender Administration and Programming Guide</P></P><P><P class="docList">Text Extender Administration and Programming Guide</P></P><P><P class="docList">XML Extender Administration and Programming Guide<A NAME="ch09index279"></A><A NAME="ch09index280"></A></P></P></BLOCKQUOTE>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch09lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch10.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
