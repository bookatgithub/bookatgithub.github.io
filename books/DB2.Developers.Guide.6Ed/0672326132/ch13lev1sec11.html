<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>DCLGEN Guidelines</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch13lev1sec10.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch13lev1sec12.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch13lev1sec11"></A><H3 class="docSection1Title"><TT>DCLGEN</TT> Guidelines</H3>
<P class="docText">Follow these guidelines when issuing <TT>DCLGEN</TT> statements at your shop.</P>
<A NAME="ch13lev4sec6"></A><H4 class="docSection2Title">Use the Appropriate <TT>DCLGEN</TT> Library</H4>
<P class="docText">Most shops allocate <TT>DCLGEN</TT> libraries. They are commonly either a partitioned data set or in the format specified by your shop's change management tool.<A NAME="ch13index234"></A><A NAME="ch13index235"></A><A NAME="ch13index236"></A><A NAME="ch13index237"></A></P>
<A NAME="ch13lev4sec7"></A><H4 class="docSection2Title">Control Who Creates <TT>DCLGEN</TT> Members</H4>
<P class="docText">The DBA usually is responsible for creating <TT>DCLGEN</TT> members for each table. This establishes a point of control for managing change.<A NAME="ch13index238"></A><A NAME="ch13index239"></A></P>
<A NAME="ch13lev4sec8"></A><H4 class="docSection2Title">Avoid Modifying <TT>DCLGEN</TT> Members</H4>
<P class="docText">Avoid modifying the code produced by the <TT>DCLGEN</TT> command. When the <TT>DECLARE TABLE</TT> code or <TT>WORKING-STORAGE</TT> variables are manually changed after <TT>DCLGEN</TT> creates them, the risk of syntax errors and incompatibilities increases.<A NAME="ch13index240"></A><A NAME="ch13index241"></A></P>
<A NAME="ch13lev4sec9"></A><H4 class="docSection2Title">Consider Prefixing <TT>DCLGEN</TT> Host Variables</H4>
<P class="docText">The <TT>DCLGEN</TT> command produces <TT>WORKING-STORAGE</TT> fields with the same names as the DB2 column names, except that underscores are converted to hyphens. It should be standard practice for shops to use <TT>DCLGEN</TT> with <TT>COLSUFFIX</TT> and <TT>NAMES</TT> to produce prefixed field names. When <TT>COLSUFFIX</TT> is not utilized, two tables having identical column names would have identical field names for each table.<A NAME="ch13index242"></A><A NAME="ch13index243"></A><A NAME="ch13index244"></A><A NAME="ch13index245"></A><A NAME="ch13index246"></A></P>
<A NAME="ch13lev4sec10"></A><H4 class="docSection2Title">Use Unqualified Table References</H4>
<P class="docText">When you're using the <TT>DCLGEN</TT> command, set the current <TT>SQLID</TT> to the creator of the table to ensure that <TT>DCLGEN</TT> does not generate a qualified table name. Then, when specifying the <TT>DCLGEN</TT> options, provide an unqualified table name. This produces an unqualified <TT>DECLARE TABLE</TT> statement.<A NAME="ch13index247"></A><A NAME="ch13index248"></A><A NAME="ch13index249"></A><A NAME="ch13index250"></A></P>
<P class="docText">An alternative method can be used whereby a <TT>SYNONYM</TT> for every table is created for the DBA issuing the <TT>DCLGEN</TT>. The <TT>SYNONYM</TT> must be named the same as the table for which it has been created. The DBA should then specify the unqualified <TT>SYNONYM</TT> to <TT>DCLGEN</TT>. This produces an unqualified <TT>DECLARE TABLE</TT> statement.</P>
<P class="docText">Unfortunately, because <TT>DCLGEN</TT> does not provide the option of producing a qualified or unqualified <TT>DECLARE TABLE</TT> statement, DBAs must perform gyrations to unqualify their <TT>DECLARE TABLE</TT> statements.</P>
<A NAME="ch13lev4sec11"></A><H4 class="docSection2Title">Avoid Breaking <TT>DCLGEN</TT> Host Variables into Components</H4>
<P class="docText">Although doing so is not generally recommended, you can modify the <TT>WORKING-STORAGE</TT> variables generated by <TT>DCLGEN</TT> to "break apart" columns into discrete components. Consider, for example, the following <TT>DCLGEN</TT>-created <TT>WORKING-STORAGE</TT> variables for the <TT>DSN8810.PROJACT</TT> table:<A NAME="ch13index251"></A><A NAME="ch13index252"></A></P>
<pre>

</pre><BR><pre>
01  DCLPROJACT.
    10  PROJNO     PIC X(6).
    10  ACTNO      PIC S9(4)      USAGE COMP.
    10  ACSTAFF    PIC S999V99    USAGE COMP-3.
    10  ACSTDATE   PIC X(10).
    10  ACENDATE   PIC X(10).
</pre><BR>
<P class="docText">The two date columns, <TT>ACSTDATE</TT> and <TT>ACENDATE</TT>, are composed of the year, the month, and the day. By changing the structure to "break apart" these columns, you could reference each component separately, as in the following example:</P>
<pre>

</pre><BR><pre>
01  DCLPROJACT.
    10  PROJNO                PIC X(6).
    10  ACTNO                 PIC S9(4)   USAGE COMP.
    10  ACSTAFF               PIC S999V99 USAGE COMP-3.
    10  ACSTDATE.
        15  ACSTDATE-YEAR.
            20  ACSTDATE-CC   PIC X(2).
            20  ACSTDATE-YY   PIC X(2).
        15  ACSTDATE-FILLER1  PIC X.
        15  ACSTDATE-MONTH    PIC X(2).
        15  ACSTDATE-FILLER2  PIC X.
        15  ACSTDATE-DAY      PIC X(2).
    10  ACENDATE.
        15  ACENDATE-YEAR     PIC X(4).
        15  ACENDATE-FILLER1  PIC X.
        15  ACENDATE-MONTH    PIC X(2).
        15  ACENDATE-FILLER2  PIC X.
        15  ACENDATE-DAY      PIC X(2).
</pre><BR>
<P class="docText">This approach is not favored because it is invasive to the generated <TT>DCLGEN</TT> code, which can result in errors, as mentioned previously. Instead, you should code structures that can be used to "break apart" these columns outside the <TT>DCLGEN</TT>, and then move the necessary columns to the structures outside the <TT>DCLGEN</TT> variables.<A NAME="ch13index253"></A><A NAME="ch13index254"></A></P>
<A NAME="ch13lev4sec12"></A><H4 class="docSection2Title">Avoid the Field Name <TT>PREFIX</TT></H4>
<P class="docText">Avoid the field name <TT>PREFIX</TT> option of <TT>DCLGEN</TT>. This option generates <TT>WORKING-STORAGE</TT> variables with a numeric suffix added to the <TT>PREFIX</TT> text. For example, if you ran <TT>DCLGEN</TT> for the <TT>DSN8510.PROJACT</TT> table and specified a <TT>PREFIX</TT> of <TT>COL</TT>, the following <TT>WORKING-STORAGE</TT> variable names would be generated:<A NAME="ch13index255"></A><A NAME="ch13index256"></A><A NAME="ch13index257"></A><A NAME="ch13index258"></A></P>
<pre>

</pre><BR><pre>
01  DCLPROJACT.
    10  COL01      PIC X(6).
    10  COL02      PIC S9(4)      USAGE COMP.
    10  COL03      PIC S999V99    USAGE COMP-3.
    10  COL04      PIC X(10).
    10  COL05      PIC X(10).
</pre><BR>
<P class="docText">Note how each column begins with the supplied prefix and ends with a number that steadily increases by 1. The <TT>COL01</TT> column is used for the <TT>PROJNO</TT> column, <TT>COL02</TT> for <TT>ACTNO</TT>, and so on. This type of <TT>DCLGEN</TT> should be avoided because the generated column names are difficult to trace to the appropriate <TT>WORKING-STORAGE</TT> variables.</P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch13lev1sec10.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch13lev1sec12.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
