<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Using DB2 PM</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch24lev1sec4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch24lev1sec6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch24lev1sec5"></A><H3 class="docSection1Title" >Using DB2 PM</H3>
<P class="docText">Before you can run DB2 PM, you must have trace records produced by DB2 to feed into DB2 PM. Each DB2 PM report set requires certain traces to be started. For a synopsis of which traces to start for which information, refer to <A class="docLink" HREF="#ch24table03">Table 24.3</A>. Note that DB2 PM will not fail if you request a report for which no information or insufficient information is available. The report that DB2 PM generates, however, will be empty or incomplete.<A NAME="ch24index417"></A><A NAME="ch24index418"></A><A NAME="ch24index419"></A><A NAME="ch24index420"></A><A NAME="ch24index421"></A></P>
<A NAME="ch24table03"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 24.3. Traces to Initiate for each DB2 PM Report Type</h5></CAPTION><COLGROUP><COL width="116.66666666666666"><COL width="150"><COL width="283.3333333333333"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Report Type</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Recommended Traces</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Information Provided</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top" rowspan="3"><P class="docText">Accounting (General)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">General accounting information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">In DB2 times</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Suspension times, out of DB2 times, system events</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="7"><P class="docText">Accounting Long</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">General accounting information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">In DB2 times</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Suspension times, out of DB2 times, system events</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Installation-defined</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 5</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Time spent processing IFI requests</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 7</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Entry or exit from DB2 event signaling for package and DBRM accounting</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 8</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Package wait time</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="9"><P class="docText">Audit</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Authorization failures</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DCL</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DDL</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DML: First <TT>SELECT</TT> of audited table</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 5</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DML: First <TT>UPDATE</TT> for audited tables</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 6</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Bind</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 7</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SET CURRENT SQLID</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 8</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Utility executions</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Class 9</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">User-defined</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="2"><P class="docText">I/O Activity</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Buffer pool and EDM pool statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 5</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Logging and BSDS statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Locking</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 6</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock suspensions, lock resumes, and lock contention information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Record Trace</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">No traces specifically required</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Formatted dump of all DB2 trace records in the given input data set</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="8"><P class="docText">SQL Trace</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">General accounting information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">In DB2 times</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Aborts, commits, and thread-related data</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Sort, AMS, plan, cursor, static SQL, and dynamic SQL statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Physical reads and writes</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 6</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock suspensions, lock resumes, and lock contention information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 8</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Index access and sequential scan data</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 13</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>EDITPROC</TT> and <TT>VALIDPROC</TT> access</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText">Statistics</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">System and database services statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Installation-defined</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Deadlock information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 exception condition</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Class 6</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 storage information<A NAME="ch24index422"></A><A NAME="ch24index423"></A><A NAME="ch24index424"></A><A NAME="ch24index425"></A><A NAME="ch24index426"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Summary</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">No traces specifically required</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Basic summary of the steps taken by DB2 PM to produce other reports</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">System Parameters</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">At least one type of trace</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Installation parameters (DSNZPARMs)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="7"><P class="docText">Transit Time</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 1</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Background events</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 2</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Aborts, commits, and thread-related data</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 3</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Sort, AMS, plans, cursor, static SQL, and dynamic SQL statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 4</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Physical reads and writes</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 6</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock suspensions, lock resumes, and lock contention information</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 10</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Optimizer and bind statistics</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Performance Class 13</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>EDITPROC</TT> and <TT>VALIDPROC</TT> access</P></TD></TR></TABLE></P><br>
<P class="docText">Be sure to start the appropriate traces as outlined in <A class="docLink" HREF="#ch24table03">Table 24.3</A> before running DB2 PM. To run a report indicated in the left column, you should start the recommended traces to get useful information from DB2 PM. If a particular trace is not started, the DB2 PM report still prints, but you do not get all the information the report can provide. Failure to start all these traces may result in some report values being left blank or listed as N/C.<A NAME="ch24index427"></A><A NAME="ch24index428"></A><A NAME="ch24index429"></A><A NAME="ch24index430"></A><A NAME="ch24index431"></A></P>
<P class="docText">You should develop standards for the production of DB2 PM reports to monitor the performance of DB2 and its applications at your shop. Use the chart in <A class="docLink" HREF="#ch24table04">Table 24.4</A> as a guideline for establishing a regular DB2 PM reporting cycle. You can modify and augment this table based on your shop's DB2 performance monitoring requirements and standards.<A NAME="ch24index432"></A><A NAME="ch24index433"></A><A NAME="ch24index434"></A></P>
<A NAME="ch24table04"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 24.4. DB2 PM Monitoring Reference</h5></CAPTION><COLGROUP><COL width="111.11111111111111"><COL width="216.66666666666666"><COL width="222.22222222222223"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="bottom"><P class="docText"><span class="docEmphStrong">Resource to Monitor</span></P></TH><TH class="bottomBorder thead" align="left" valign="bottom"><P class="docText"><span class="docEmphStrong">DB2 PM Report</span></P></TH><TH class="bottomBorder thead" align="left" valign="bottom"><P class="docText"><span class="docEmphStrong">Frequency</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top" rowspan="8"><P class="docText">DB2 Subsystem</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Summary</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Statistics Detail</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">I/O Activity Summary</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Monthly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">I/O Buffer Pool Activity Detail</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">I/O EDM Pool Activity Detail</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">I/O Log Manager Activity Detail</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">System Parameters</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">When DB2 is recycled</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Summary</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText">DB2 Applications</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Short</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Daily</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Accounting Long</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audited DML Access</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock Contention</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock Suspension</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">As needed</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="6"><P class="docText">Exception</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Transit Time report solving</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Problem Monitoring</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">SQL Trace</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Problem solving</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Record Trace</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 or DB2 PM problem solving</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Summary report</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 PM problem solving</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock Contention</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Problem solving</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Lock Suspension</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Problem solving</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="6"><P class="docText">Security</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Authorization Failures</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Authorization Control</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Authorization Change</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audited DDL Access</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audited DML Access</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Audit Utility Access</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Weekly<A NAME="ch24index435"></A><A NAME="ch24index436"></A><A NAME="ch24index437"></A></P></TD></TR></TABLE></P><br>
<P class="docText">Some performance monitoring software from other vendors can provide the same batch reporting functionality as DB2 PM. You might want to reconsider whether you need DB2 PM, because DB2 PM is not as mature an online performance monitor as other products, or maybe your company has standardized on a monitoring family of products (such as MainView or Omegamom) that monitor not just DB2, but also CICS, IMS, z/OS, and other resources. Before you decide to avoid DB2 PM in favor of the batch performance monitoring provided by another tool, consider the following:</P>
<UL><LI><P class="docList">When performance problems that require IBM intervention persist, IBM often requests that you run a performance trace and generate DB2 PM reports for the trace. To be sure that IBM will accept reports generated by the third-party tool, compare the output from the vendor tool to the output from DB2 PM. If the reports are almost identical, you usually will not have a problem. To be absolutely sure, ask your IBM support center.</P></LI><LI><P class="docList">DB2 PM is an industry standard for batch performance monitoring. Taking classes on performance monitoring is easier when the monitoring is based on DB2 PM reports. Classes offered by IBM (and others) on DB2 performance usually use DB2 PM reports as examples. As such, having access to DB2 PM is helpful for students. Additionally, if you need to add staff, DB2 PM trained personnel can be easier to find.</P></LI><LI><P class="docList">DB2 PM may be updated for new releases of DB2 more quickly than third-party monitoring tools because IBM is closer than anyone else to the code of DB2. If you need to migrate to new versions of DB2 rapidly, DB2 PM may be the only monitor positioned for the new release at the same time as your shop.<A NAME="ch24index438"></A><A NAME="ch24index439"></A><A NAME="ch24index440"></A></P></LI></UL>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch24lev1sec4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch24lev1sec6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
