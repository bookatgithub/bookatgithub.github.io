<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>How EXPLAIN Works</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch25.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch25lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch25lev1sec1"></A><H3 class="docSection1Title">How <TT>EXPLAIN</TT> Works</H3>
<P class="docText">To see <A class="docLink" HREF="#ch25lev1sec1">how EXPLAIN works</A>, refer to <A class="docLink" HREF="#ch25fig01">Figure 25.1</A>. A single SQL statement, or a series of SQL statements in a package or plan, can be the subject of an <TT>EXPLAIN</TT>. When <TT>EXPLAIN</TT> is requested, the SQL statements are passed through the DB2 optimizer, and the following three activities are performed:<A NAME="ch25index01"></A></P>
<UL><LI><P class="docList">The access paths that DB2 chooses are externalized, in coded format, into a <TT>PLAN_TABLE</TT>.</P></LI><LI><P class="docList">Cost estimates for the SQL statements are formulated and inserted into a <TT>DSN_STATEMNT_TABLE</TT>.</P></LI><LI><P class="docList">The user-defined functions that will be used are placed into a <TT>DSN_FUNCTION_TABLE</TT>.</P></LI></UL>
<A NAME="ch25fig01"></A><p><CENTER><H5 class="docFigureTitle">Figure 25.1. How <TT>EXPLAIN</TT> works.</H5>
<p class="docText"><IMG BORDER="0" width="500" height="304" SRC="images/0672326132/graphics/25fig01.gif" ALT="graphics/25fig01.gif"></p></CENTER></p><br>
<P class="docText">The <TT>PLAN_TABLE</TT>, <TT>DSN_STATEMNT_TABLE</TT>, and <TT>DSN_FUNCTION_TABLE</TT> objects are nothing more than standard DB2 tables that must be defined with predetermined columns, data types, and lengths.</P>
<P class="docText">To <TT>EXPLAIN</TT> a single SQL statement, precede the SQL statement with the <TT>EXPLAIN</TT> command as follows:</P>
<pre>

</pre><BR><pre>
EXPLAIN ALL SET QUERYNO = <span class="docEmphasis">integer</span> FOR
SQL statement ;
</pre><BR>
<P class="docText">It can be executed in the same way as any other SQL statement. <TT>QUERYNO</TT>, which you can set to any integer, is used for identification in the <TT>PLAN_TABLE</TT>. For example, the following <TT>EXPLAIN</TT> statement populates the <TT>PLAN_TABLE</TT> with the access paths chosen for the indicated sample table query:</P>
<pre>

</pre><BR><pre>
EXPLAIN ALL SET QUERYNO = 1 FOR
  SELECT   FIRSTNME, MIDINIT, LASTNAME
  FROM     DSN8610.EMP
  WHERE    EMPNO = '000240';
</pre><BR>
<P class="docText">Another method of issuing an <TT>EXPLAIN</TT> is as a part of the <TT>BIND</TT> command. If you indicate <TT>EXPLAIN(YES)</TT> when binding a package or a plan, DB2 externalizes the access paths chosen for all SQL statements in that DBRM (or DBRMs) to the <TT>PLAN_TABLE</TT>.</P>
<P class="docText">The final method of issuing <TT>EXPLAIN</TT> is to use the Visual Explain tool to invoke <TT>EXPLAIN</TT> for dynamic SQL statements. Visual Explain also provides an easy to use interface for displaying access paths graphically and suggesting alternate SQL formulations.<A NAME="ch25index02"></A></P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch25.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch25lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
