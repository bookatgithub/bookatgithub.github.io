<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Access Paths and the PLAN_TABLE</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch25lev1sec1.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch25lev1sec3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch25lev1sec2"></A><H3 class="docSection1Title">Access Paths and the <TT>PLAN_TABLE</TT></H3>
<P class="docText"><TT>EXPLAIN</TT> populates the <TT>PLAN_TABLE</TT> with access path information. You can use the DDL in <A class="docLink" HREF="ch23lev1sec1.html#ch23list01">Listing 23.1</A> to create a <TT>PLAN_TABLE.</TT><A NAME="ch25index03"></A><A NAME="ch25index04"></A><A NAME="ch25index05"></A></P>
<A NAME="ch25note01"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">The <TT>PLAN_TABLE</TT> will be created in the default database (<TT>DSNDB04</TT>) and <TT>STOGROUP</TT> (<TT>SYSDEFLT</TT>) in a DB2-generated table space, unless a database and a table space are created for the <TT>PLAN_TABLE</TT> and they are referenced in the <TT>IN</TT> clause of the <TT>CREATE TABLE</TT> statement. Avoid using the default database and table space.</P></div><br>
<P class="docText">DB2 supports many different formats for the <TT>PLAN_TABLE</TT>. The other formats exist to provide support for <TT>PLAN_TABLE</TT>s built under older versions of DB2 that did not support all the current columns. In general, though, you should use all of the columns available for the version of DB2 that you are using in order to obtain as much information from <TT>EXPLAIN</TT> as possible.<A NAME="ch25index06"></A><A NAME="ch25index07"></A><A NAME="ch25index08"></A></P>
<P class="docText">If a <TT>PLAN_TABLE</TT> already exists, you can use the <TT>LIKE</TT> clause of <TT>CREATE TABLE</TT> to create <TT>PLAN_TABLE</TT>s for individual users based on a master <TT>PLAN_TABLE</TT>. Having a <TT>PLAN_TABLE</TT> for the following users is a good idea:</P>
<UL><LI><P class="docList">Every DB2 application programmer. This way, they can analyze and evaluate the access paths chosen for the SQL embedded in their application programs.</P></LI><LI><P class="docList">Every individual owner of every production DB2 plan. This way, an <TT>EXPLAIN</TT> can be run on production DB2 packages and plans.</P></LI><LI><P class="docList">Every DBA and system programmer. This way, they can analyze access paths for ad hoc and dynamic SQL statements.<A NAME="ch25index09"></A><A NAME="ch25index10"></A><A NAME="ch25index11"></A></P></LI></UL>
<A NAME="ch25lev2sec1"></A><H4 class="docSection2Title">Changes for DB2 Versions 7 and 8</H4>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> The <TT>PARENT_QBLOCK</TT> and <TT>TABLE_TYPE</TT> columns were added to the <TT>PLAN_TABLE</TT> as of DB2 Version 7.<A NAME="ch25index12"></A><A NAME="ch25index13"></A></P></td></tr></table><br>
<A NAME="ch25list01"></A><H5 class="docExampleTitle">Listing 23.1. DDL to Create the <TT>PLAN_TABLE</TT></H5><A NAME="ch25index14"></A>

<PRE>
CREATE TABLE <span class="docEmphasis">userid</span>.PLAN_TABLE
(
 QUERYNO              INTEGER        NOT NULL,
 QBLOCKNO             SMALLINT       NOT NULL,
 APPLNAME             CHAR(8)        NOT NULL,
 PROGNAME             VARCHAR(128)   NOT NULL,
 PLANNO               SMALLINT       NOT NULL,
 METHOD               SMALLINT       NOT NULL,
 CREATOR              VARCHAR(128)   NOT NULL,
 TNAME                VARCHAR(128)   NOT NULL,
 TABNO                SMALLINT       NOT NULL,
 ACCESSTYPE           CHAR(2)        NOT NULL,
 MATCHCOLS            SMALLINT       NOT NULL,
 ACCESSCREATOR        VARCHAR(128)   NOT NULL,
 ACCESSNAME           VARCHAR(128)   NOT NULL,
 INDEXONLY            CHAR(1)        NOT NULL,
 SORTN_UNIQ           CHAR(1)        NOT NULL,
 SORTN_JOIN           CHAR(1)        NOT NULL,
 SORTN_ORDERBY        CHAR(1)        NOT NULL,
 SORTN_GROUPBY        CHAR(1)        NOT NULL,
 SORTC_UNIQ           CHAR(1)        NOT NULL,
 SORTC_JOIN           CHAR(1)        NOT NULL,
 SORTC_ORDERBY        CHAR(1)        NOT NULL,
 SORTC_GROUPBY        CHAR(1)        NOT NULL,
 TSLOCKMODE           CHAR(3)        NOT NULL,
 TIMESTAMP            CHAR(16)       NOT NULL,
 REMARKS              VARCHAR(762)   NOT NULL,
 PREFETCH             CHAR(1)        NOT NULL WITH DEFAULT,
 COLUMN_FN_EVAL       CHAR(1)        NOT NULL WITH DEFAULT,
 MIXOPSEQ             SMALLINT       NOT NULL WITH DEFAULT,
 VERSION              VARCHAR(64)    NOT NULL WITH DEFAULT,
 COLLID               VARCHAR(128)   NOT NULL WITH DEFAULT,
 ACCESS_DEGREE        SMALLINT,
 ACCESS_PGROUP_ID     SMALLINT,
 JOIN_DEGREE          SMALLINT,
 JOIN_PGROUP_ID       SMALLINT,
 SORTC_PGROUP_ID      SMALLINT,
 SORTN_PGROUP_ID      SMALLINT,
 PARALLELISM_MODE     CHAR(1),
 MERGE_JOIN_COLS      SMALLINT,
 CORRELATION_NAME     VARCHAR(128),
 PAGE_RANGE           CHAR(1)        NOT NULL WITH DEFAULT,
 JOIN_TYPE            CHAR(1)        NOT NULL WITH DEFAULT,
 GROUP_MEMBER         CHAR(8)        NOT NULL WITH DEFAULT,
 IBM_SERVICE_DATA     VARCHAR(254)   NOT NULL WITH DEFAULT,
 WHEN_OPTIMIZE        CHAR(1)        NOT NULL WITH DEFAULT,
 QBLOCK_TYPE          CHAR(6)        NOT NULL WITH DEFAULT,
 BIND_TIME            TIMESTAMP      NOT NULL WITH DEFAULT,
 OPTHINT              VARCHAR(128)   NOT NULL WITH DEFAULT,
 HINT_USED            VARCHAR(128)   NOT NULL WITH DEFAULT,
 PRIMARY_ACCESSTYPE   CHAR(1)        NOT NULL WITH DEFAULT,
 PARENT_QBLOCK        SMALLINT       NOT NULL WITH DEFAULT,
 TABLE_TYPE           CHAR(1),
 TABLE_ENCODE         CHAR(1)        NOT NULL WITH DEFAULT,
 TABLE_SCCSID         SMALLINT       NOT NULL WITH DEFAULT,
 TABLE_MCCSID         SMALLINT       NOT NULL WITH DEFAULT,
 TABLE_DCCSID         SMALLINT       NOT NULL WITH DEFAULT,
 ROUTINE_ID           INTEGER        NOT NULL WITH DEFAULT
) IN <span class="docEmphasis">database.tablespace</span>;<A NAME="ch25index15"></A>
</PRE><BR>

<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V8_icon.gif" ALT="graphics/V8_icon.gif"></td><td valign="top"><P class="docText"> The <TT>TABLE_ENCODE</TT>, <TT>TABLE_SCCSID</TT>, <TT>TABLE_MCCSID</TT>, <TT>TABLE_DCCSID</TT>, and <TT>ROUTINE_ID</TT> columns were added to the <TT>PLAN_TABLE</TT> as of DB2 Version 8. Also, many columns were extended to support long names, as follows:<A NAME="ch25index16"></A><A NAME="ch25index17"></A></P></td></tr></table><br>
<UL><LI><P class="docList"><TT>PROGNAME</TT> was modified from <TT>CHAR(8)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>CREATOR</TT> was modified from <TT>CHAR(8)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>TNAME</TT> was modified from <TT>CHAR(18)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>ACCESSCREATOR</TT> was modified from <TT>CHAR(8)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>ACCESSNAME</TT> was modified from <TT>CHAR(18)</TT> to <TT>VARCHAR(128).</TT></P></LI><LI><P class="docList"><TT>COLLID</TT> was modified from <TT>CHAR(18)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>CORRELATION_NAME</TT> was modified from <TT>CHAR(18)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>OPTHINT</TT> was modified from <TT>CHAR(8)</TT> to <TT>VARCHAR(128)</TT>.</P></LI><LI><P class="docList"><TT>HINT_USED</TT> was modified from <TT>CHAR(8)</TT> to <TT>VARCHAR(128)</TT>.</P></LI></UL>
<P class="docText">The final V8 modification is to the <TT>REMARKS</TT> column, which was extended from <TT>VARCHAR(254)</TT> to <TT>VARCHAR(762)</TT>.</P>
<A NAME="ch25lev2sec2"></A><H4 class="docSection2Title">Querying the <TT>PLAN_TABLE</TT></H4>
<P class="docText">After you issue the <TT>EXPLAIN</TT> command on your SQL statements, the next logical step is to inspect the results. Because <TT>EXPLAIN</TT> places the access path information in a DB2 table, you can use an SQL query to retrieve this information, as follows:<A NAME="ch25index18"></A><A NAME="ch25index19"></A><A NAME="ch25index20"></A></P>
<pre>

</pre><BR><pre>
SELECT   QUERYNO, QBLOCKNO, QBLOCK_TYPE, APPLNAME, PROGNAME, PLANNO,
         METHOD, CREATOR, TNAME, TABNO, ACCESSTYPE, JOIN_TYPE, MATCHCOLS,
         ACCESSNAME, INDEXONLY, SORTN_PGROUP_ID, SORTN_UNIQ, SORTN_JOIN,
         SORTN_ORDERBY, SORTN_GROUPBY, SORTC_PGROUP_ID, SORTC_UNIQ,
         SORTC_JOIN, SORTC_ORDERBY, SORTC_GROUPBY, TSLOCKMODE, TIMESTAMP,
         PREFETCH, COLUMN_FN_EVAL, MIXOPSEQ, COLLID, VERSION, \
         ACCESS_DEGREE, ACCESS_PGROUP_ID, JOIN_DEGREE, JOIN_PGROUP_ID,
         PARALLELISM_MODE, MERGE_JOIN_COLS, CORRELATION_NAME,
         PAGE_RANGE, GROUP_MEMBER, WHEN_OPTIMIZE, BIND_TIME, HINT_USED,
         PRIMARY_ACCESSTYPE, PARENT_QBLOCK, TABLE_TYPE, TABLE_ENCODE,
         TABLE_SCCSID, TABLE_MCCSID, TABLE_DCCSID, ROUTINE_ID
FROM     <span class="docEmphasis">ownerid</span>.PLAN_TABLE
ORDER BY APPLNAME, COLLID, VERSION, PROGNAME, TIMESTAMP DESC,
         QUERYNO, QBLOCKNO, PLANNO, MIXOPSEQ;
</pre><BR>
<P class="docText">A common method of retrieving access path data from the <TT>PLAN_TABLE</TT> is to use QMF or a GUI-based query tool to format the results of a simple <TT>SELECT</TT> statement. This way, you can organize and display the results of the query in a consistent and manageable fashion.</P>
<P class="docText">It is crucial that the <TT>TIMESTAMP</TT> column be in descending order. Because <TT>EXPLAIN</TT>s are executed as a result of the <TT>BIND</TT> command, access path data is added to the <TT>PLAN_TABLE</TT> with a different timestamp. The old data is not purged from the <TT>PLAN_TABLE</TT> each time an <TT>EXPLAIN</TT> is performed. If you specify the descending sort option on the <TT>TIMESTAMP</TT> column, you can ensure that the <TT>EXPLAIN</TT> data in the report is sorted in order from the most recent to the oldest access path for each SQL statement in the <TT>PLAN_TABLE</TT>. Sorting this way is important if the <TT>PLAN_TABLE</TT>s you are working with are not purged.</P>
<P class="docText">If you want to retrieve information placed in the <TT>PLAN_TABLE</TT> for a single SQL statement, you can issue the following query:</P>
<pre>

</pre><BR><pre>
SELECT   QUERYNO, QBLOCKNO, QBLOCK_TYPE, PLANNO, METHOD, TNAME,
         ACCESSTYPE, JOIN_TYPE, MATCHCOLS, ACCESSNAME, INDEXONLY,
         SORTN_PGROUP_ID, SORTN_UNIQ, SORTN_JOIN, SORTN_ORDERBY,
         SORTN_GROUPBY, SORTC_PGROUP_ID, SORTC_UNIQ, SORTC_JOIN,
         SORTC_ORDERBY, SORTC_GROUPBY, TSLOCKMODE, PREFETCH,
         COLUMN_FN_EVAL, MIXOPSEQ, ACCESS_DEGREE, ACCESS_PGROUP_ID,
         JOIN_DEGREE, JOIN_PGROUP_ID, PARALLELISM_MODE,
         MERGE_JOIN_COLS, CORRELATION_NAME, PAGE_RANGE, GROUP_MEMBER,
         WHEN_OPTIMIZE, BIND_TIME, HINT_USED, PRIMARY_ACCESSTYPE,
         PARENT_QBLOCK, TABLE_TYPE, TABLE_ENCODE, TABLE_SCCSID,
         TABLE_MCCSID, TABLE_DCCSID, ROUTINE_ID
FROM     <span class="docEmphasis">ownerid</span>.PLAN_TABLE
ORDER BY QUERYNO, QBLOCKNO, PLANNO, MIXOPSEQ;
</pre><BR>
<P class="docText">The preceding eliminates from the query the package and plan information, as well as the name of the table creator. Throughout the remainder of this chapter, I present <TT>PLAN_TABLE</TT> information for several types of SQL statements. Variants of this query are used to show the <TT>PLAN_TABLE</TT> data for each <TT>EXPLAIN</TT> statement.<A NAME="ch25index21"></A><A NAME="ch25index22"></A><A NAME="ch25index23"></A></P>
<A NAME="ch25lev2sec3"></A><H4 class="docSection2Title">The <TT>PLAN_TABLE</TT> Columns</H4>
<P class="docText">Now that you have some basic <TT>PLAN_TABLE</TT> queries to assist you with DB2 performance monitoring, you can begin to <TT>EXPLAIN</TT> your application's SQL statements and analyze their access paths. But remember, because the access path information in the <TT>PLAN_TABLE</TT> is encoded, you must have a type of decoder to understand this information. This information is provided in <A class="docLink" HREF="#ch25table01">Table 25.1</A>. A description of every column of the <TT>PLAN_TABLE</TT> is provided.<A NAME="ch25index24"></A><A NAME="ch25index25"></A><A NAME="ch25index26"></A></P>
<A NAME="ch25table01"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 25.1. <TT>PLAN_TABLE</TT> Columns</h5></CAPTION><COLGROUP><COL width="61.11111111111111"><COL width="244.44444444444443"><COL width="244.44444444444443"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Column</span></P></TH><TH class="bottomBorder thead" align="left" valign="top" colspan="2"><P class="docText"><span class="docEmphStrong">Description</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>QUERYNO</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates an integer value assigned by the user issuing the <TT>EXPLAIN</TT>, or by DB2. Enables the user to differentiate between <TT>EXPLAIN</TT> statements.<A NAME="ch25index27"></A><A NAME="ch25index28"></A><A NAME="ch25index29"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>QBLOCKNO</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates an integer value enabling the identification of blocks within a query (for example, subselects or <TT>SELECT</TT>s in a union).<A NAME="ch25index30"></A><A NAME="ch25index31"></A><A NAME="ch25index32"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>APPLNAME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the plan name for rows inserted as a result of running <TT>BIND PLAN</TT> specifying <TT>EXPLAIN(YES)</TT>. Contains the package name for rows inserted as a result of running <TT>BIND PACKAGE</TT> with <TT>EXPLAIN(YES)</TT>. Otherwise, contains blanks for rows inserted as a result of dynamic <TT>EXPLAIN</TT> statements.<A NAME="ch25index33"></A><A NAME="ch25index34"></A><A NAME="ch25index35"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PROGNAME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the name of the program in which the SQL statement is embedded. If a dynamic <TT>EXPLAIN</TT> is issued from QMF, this column contains <TT>DSQIESQL</TT>.<A NAME="ch25index36"></A><A NAME="ch25index37"></A><A NAME="ch25index38"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PLANNO</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains an integer value indicating the step of the plan in which <TT>QBLOCKNO</TT> is processed (that is, the order in which plan steps are undertaken).<A NAME="ch25index39"></A><A NAME="ch25index40"></A><A NAME="ch25index41"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="6"><P class="docText"><TT>METHOD</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains an integer value identifying the access method used for the given step:<A NAME="ch25index42"></A><A NAME="ch25index43"></A><A NAME="ch25index44"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>0</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">First table accessed (can also indicate an outer table or a continuation of the previous table accessed)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>1</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Nested loop join</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>2</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Merge scan join</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>3</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Independent sort; Sort happens as a result of <TT>ORDER BY</TT>, <TT>GROUP BY</TT>, <TT>SELECT DISTINCT</TT>, a quantified predicate, or an <TT>IN</TT> predicate (the step does not access a new table)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>4</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Hybrid join</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CREATOR</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the creator of the table identified by <TT>TNAME</TT> or is blank when <TT>METHOD</TT> equals <TT>3</TT>.<A NAME="ch25index45"></A><A NAME="ch25index46"></A><A NAME="ch25index47"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TNAME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the name of the table, MQT, temporary table (created or declared), materialized view, or materialized table expression being accessed; or blank when <TT>METHOD</TT> equals <TT>3</TT>.<A NAME="ch25index48"></A><A NAME="ch25index49"></A><A NAME="ch25index50"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TABNO</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">IBM use only.<A NAME="ch25index51"></A><A NAME="ch25index52"></A><A NAME="ch25index53"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="14"><P class="docText"><TT>ACCESSTYPE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the method of accessing the table:</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>I</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Indexed access<A NAME="ch25index54"></A><A NAME="ch25index55"></A><A NAME="ch25index56"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>I1</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">One-fetch index scan</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>R</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Table space scan</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>RW</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Work file scan</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>T</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Sparse index access (star join)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>V</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Buffers for an <TT>INSERT</TT> within a <TT>SELECT</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>N</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Index access with an <TT>IN</TT> predicate</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>D</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Direct row access (by a <TT>ROWID</TT> column)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>M</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Multiple index scan</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MX</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Specification of the index name for multiple index access</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MI</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Multiple index access by RID intersection</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MU</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Multiple index access by RID union</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Not applicable to current row<A NAME="ch25index57"></A><A NAME="ch25index58"></A><A NAME="ch25index59"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MATCHCOLS</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains an integer value with the number of index columns used in an index scan when <TT>ACCESSTYPE</TT> is <TT>I</TT>, <TT>I1</TT>, <TT>N</TT>, or <TT>MX</TT>. Otherwise, contains <TT>0</TT>.<A NAME="ch25index60"></A><A NAME="ch25index61"></A><A NAME="ch25index62"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ACCESSCREATOR</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the creator of the index when <TT>ACCESSTYPE</TT> is <TT>I</TT>, <TT>I1</TT>, <TT>N</TT>, or <TT>MX</TT>. Otherwise, it is blank.<A NAME="ch25index63"></A><A NAME="ch25index64"></A><A NAME="ch25index65"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ACCESSNAME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the name of the index used when <TT>ACCESSTYPE</TT> is <TT>I</TT>, <TT>I1</TT>, <TT>N</TT>, or <TT>MX</TT>. Otherwise, it is blank.<A NAME="ch25index66"></A><A NAME="ch25index67"></A><A NAME="ch25index68"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>INDEXONLY</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that access to the index is sufficient to satisfy the query. <TT>N</TT> indicates that access to the table space is also required.<A NAME="ch25index69"></A><A NAME="ch25index70"></A><A NAME="ch25index71"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTN_UNIQ</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the new table to remove duplicates.<A NAME="ch25index72"></A><A NAME="ch25index73"></A><A NAME="ch25index74"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTN_JOIN</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the new table to accomplish a merge scan join. Or a sort is performed on the RID list and intermediate table of a hybrid join.<A NAME="ch25index75"></A><A NAME="ch25index76"></A><A NAME="ch25index77"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTN_ORDERBY</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the new table to order rows.<A NAME="ch25index78"></A><A NAME="ch25index79"></A><A NAME="ch25index80"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTN_GROUPBY</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the new table to group rows.<A NAME="ch25index81"></A><A NAME="ch25index82"></A><A NAME="ch25index83"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTC_UNIQ</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the composite table to remove duplicates.<A NAME="ch25index84"></A><A NAME="ch25index85"></A><A NAME="ch25index86"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTC_JOIN</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the composite table to accomplish a join (any type).<A NAME="ch25index87"></A><A NAME="ch25index88"></A><A NAME="ch25index89"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTC_ORDERBY</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the composite table to order rows.<A NAME="ch25index90"></A><A NAME="ch25index91"></A><A NAME="ch25index92"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTC_GROUP</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A value of <TT>Y</TT> indicates that a sort must be performed on the composite table to group rows.<A NAME="ch25index93"></A><A NAME="ch25index94"></A><A NAME="ch25index95"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="13"><P class="docText"><TT>TSLOCKMODE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the lock level applied to the new table, its table space, or partitions. If the isolation level can be determined at <TT>BIND</TT> time, the values can be as follow:<A NAME="ch25index96"></A><A NAME="ch25index97"></A><A NAME="ch25index98"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>IS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Intent share lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>IX</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Intent exclusive lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Share lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>U</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Update lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>X</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Exclusive lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SIX</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Share with intent exclusive lock</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>N</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">No lock (<TT>UR</TT> isolation level)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">If the isolation level cannot be determined at <TT>BIND</TT> time, the lock mode values can be as follow:</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">For <TT>UR</TT>, no lock; for <TT>CS</TT>, <TT>RS</TT>, or <TT>RR</TT>, an <TT>S</TT>-lock.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NIS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">For <TT>UR</TT>, no lock; for <TT>CS</TT>, <TT>RS</TT>, or <TT>RR</TT>, an <TT>IS</TT>-lock.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NSS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">For <TT>UR</TT>, no lock; for <TT>CS</TT> or <TT>RS</TT>, an <TT>IS</TT>-lock; for <TT>RR,</TT> an <TT>S</TT>-lock.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">For <TT>UR</TT>, <TT>CS</TT>, or <TT>RS</TT>, an <TT>IS</TT>-lock; for <TT>RR</TT>, an <TT>S</TT>-lock.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TIMESTAMP</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the date and time the <TT>EXPLAIN</TT> for this row was issued. This internal representation of a date and time is not in DB2 timestamp format.<A NAME="ch25index99"></A><A NAME="ch25index100"></A><A NAME="ch25index101"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>REMARKS</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains a 254-byte character string for commenting <TT>EXPLAIN</TT> results.<A NAME="ch25index102"></A><A NAME="ch25index103"></A><A NAME="ch25index104"></A><A NAME="ch25index105"></A><A NAME="ch25index106"></A><A NAME="ch25index107"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText"><TT>PREFETCH</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains an indicator of which type of prefetch will be used:<A NAME="ch25index108"></A><A NAME="ch25index109"></A><A NAME="ch25index110"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Sequential prefetch can be used.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>L</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">List prefetch can be used.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>D</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Dynamic prefetch expected.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Prefetch is not used, or prefetch use is unknown.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="4"><P class="docText"><TT>COLUMN_FN_EVAL</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates when the column function is evaluated:<A NAME="ch25index111"></A><A NAME="ch25index112"></A><A NAME="ch25index113"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>R</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Data retrieval time</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Sort time</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Unknown (runtime division)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MIXOPSEQ</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains a small integer value indicating the sequence of the multiple index operation.<A NAME="ch25index114"></A><A NAME="ch25index115"></A><A NAME="ch25index116"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>VERSION</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the version identifier for the package.<A NAME="ch25index117"></A><A NAME="ch25index118"></A><A NAME="ch25index119"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>COLLID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the collection ID for the package.<A NAME="ch25index120"></A><A NAME="ch25index121"></A><A NAME="ch25index122"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ACCESS_DEGREE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the number of parallel tasks utilized by the query. For statements containing host variables, this column is set to <TT>0</TT>. (Although this column is set at bind time, it can be re-determined at execution time.)<A NAME="ch25index123"></A><A NAME="ch25index124"></A><A NAME="ch25index125"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ACCESS_PGROUP_ID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains a sequential number identifying the parallel group accessing the new table. (Although this column is set at bind time, it can be re-determined at execution time.)<A NAME="ch25index126"></A><A NAME="ch25index127"></A><A NAME="ch25index128"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>JOIN_DEGREE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the number of parallel tasks used in joining the composite table with the new table. For statements containing host variables, this column is set to <TT>0</TT>. (Although this column is set at bind time, it can be re-determined at execution time.)<A NAME="ch25index129"></A><A NAME="ch25index130"></A><A NAME="ch25index131"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>JOIN_PGROUP_ID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A sequential number identifying the parallel group joining the composite table to the new table. (Although this column is set at bind time, it can be re-determined at execution time.)<A NAME="ch25index132"></A><A NAME="ch25index133"></A><A NAME="ch25index134"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTC_PGROUP_ID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the parallel group identifier for the parallel sort of the composite table.<A NAME="ch25index135"></A><A NAME="ch25index136"></A><A NAME="ch25index137"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SORTN_PGROUP_ID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Contains the parallel group identifier for the parallel sort of the new table.<A NAME="ch25index138"></A><A NAME="ch25index139"></A><A NAME="ch25index140"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText"><TT>PARALLELISM_MODE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the type of parallelism used at bind time:<A NAME="ch25index141"></A><A NAME="ch25index142"></A><A NAME="ch25index143"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>I</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Query I/O parallelism</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>C</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Query CPU parallelism</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>X</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Query sysplex parallelism</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">null</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">No parallelism, or mode will be determined at runtime</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MERGE_JOIN_COLS</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the number of columns joined during a merge scan join (<TT>METHOD = 2</TT>).<A NAME="ch25index144"></A><A NAME="ch25index145"></A><A NAME="ch25index146"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="2"><P class="docText"><TT>CORRELATION_NAME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the correlation name for the table or view specified in the statement. Blank if no correlation name. A correlation name is an alternate name for a table, view, or inline view. It can be specified in the <TT>FROM</TT> clause of a query and in the first clause of an <TT>UPDATE</TT> or <TT>DELETE</TT> statement. For example, <TT>D</TT> is the correlation name in the following clause:<A NAME="ch25index147"></A><A NAME="ch25index148"></A><A NAME="ch25index149"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText"><TT>FROM DSN8810.DEPT D</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="3"><P class="docText"><TT>PAGE_RANGE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates whether the table qualifies for page range table space scans in which only a subset of the available partitions are scanned:<A NAME="ch25index150"></A><A NAME="ch25index151"></A><A NAME="ch25index152"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Y</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Yes</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">No<A NAME="ch25index153"></A><A NAME="ch25index154"></A><A NAME="ch25index155"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText"><TT>JOIN_TYPE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the type of join being implemented:</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>F</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Full outer join<A NAME="ch25index156"></A><A NAME="ch25index157"></A><A NAME="ch25index158"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>L</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Left outer join (or a converted right outer join)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Star join</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Inner join (or no join)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>GROUP_MEMBER</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the member name of the DB2 that executed <TT>EXPLAIN</TT>. The column is blank if the DB2 subsystem was not in a data sharing environment when <TT>EXPLAIN</TT> was executed.<A NAME="ch25index159"></A><A NAME="ch25index160"></A><A NAME="ch25index161"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>IBM_SERVICE_DATA</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">IBM use only.<A NAME="ch25index162"></A><A NAME="ch25index163"></A><A NAME="ch25index164"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="4"><P class="docText"><TT>WHEN_OPTIMIZE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Specifies when the access path was determined:<A NAME="ch25index165"></A><A NAME="ch25index166"></A><A NAME="ch25index167"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">Blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">At <TT>BIND</TT> time</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>B</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">At <TT>BIND</TT> time, but will be reoptimized at runtime (bound with <TT>REOPT(VARS)</TT>)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>R</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">At runtime (bound with <TT>REOPT(VARS)</TT>)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="14"><P class="docText"><TT>QBLOCK_TYPE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the type of SQL operation performed for the query block:<A NAME="ch25index168"></A><A NAME="ch25index169"></A><A NAME="ch25index170"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SELECT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SELECT</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SELUPD</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SELECT</TT> with <TT>FOR UPDATE OF</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>INSERT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>INSERT</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UPDATE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UPDATE</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UPDCUR</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UPDATE WHERE CURRENT OF CURSOR</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DELETE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DELETE</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DELCUR</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DELETE WHERE CURRENT OF CURSOR</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CORSUB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Correlated subselect</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NCOSUB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Non-correlated subselect</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TABLEX</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Table expression</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TRIGGER</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>WHEN</TT> clause on a <TT>TRIGGER</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UNION</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UNION</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UNIONA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UNION ALL</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>BIND_TIME</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the time the plan or package for the statement or query block was bound.<A NAME="ch25index171"></A><A NAME="ch25index172"></A><A NAME="ch25index173"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>OPTHINT</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">A string used to identify this row as an optimization hint for DB2. DB2 will use this row as input when choosing an access path.<A NAME="ch25index174"></A><A NAME="ch25index175"></A><A NAME="ch25index176"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>HINT_USED</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">If an optimization hint is used, the hint identifier is put in this column (that is, the value of <TT>OPTHINT</TT>).<A NAME="ch25index177"></A><A NAME="ch25index178"></A><A NAME="ch25index179"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PRIMARY_ACCESSTYPE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates if direct row access will be attempted:<A NAME="ch25index180"></A><A NAME="ch25index181"></A><A NAME="ch25index182"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>D</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 will try to use direct row access. At runtime, if DB2 cannot use direct row access, it uses the access path described in <TT>ACCESSTYPE</TT>.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">blank</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 will not try to use direct row access.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PARENT_QBLOCKNO</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the <TT>QBLOCKNO</TT> of the parent query block.<A NAME="ch25index183"></A><A NAME="ch25index184"></A><A NAME="ch25index185"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="8"><P class="docText"><TT>TABLE_TYPE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the type of table, as follows:<A NAME="ch25index186"></A><A NAME="ch25index187"></A><A NAME="ch25index188"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>B</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Buffers for an <TT>INSERT</TT> within a <TT>SELECT</TT></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>F</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Table function</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>M</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Materialized query table (MQT)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>Q</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Temporary intermediate result table (not materialized)</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>T</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Table</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>W</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Work file</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><span class="docEmphasis">null</span></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Query uses <TT>GROUP BY</TT>, <TT>ORDER BY</TT>, or <TT>DISTINCT</TT>, which requires an implicit sort<A NAME="ch25index189"></A><A NAME="ch25index190"></A><A NAME="ch25index191"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top" rowspan="5"><P class="docText"><TT>TABLE_ENCODE</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">Indicates the encoding scheme for the table, as follows:<A NAME="ch25index192"></A><A NAME="ch25index193"></A><A NAME="ch25index194"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>A</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">ASCII</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>E</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">ENCDIC</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>U</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Unicode</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>M</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Multiple CCSID sets</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TABLE_SCCSID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">The SBCS CCSID value of the table; if <TT>TABLE_ENCODE</TT> is set to <TT>M</TT>, this value is <TT>0</TT>.<A NAME="ch25index195"></A><A NAME="ch25index196"></A><A NAME="ch25index197"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TABLE_MCCSID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">The mixed CCSID value of the table; if <TT>TABLE_ENCODE</TT> is set to <TT>M</TT>, this value is <TT>0</TT>.<A NAME="ch25index198"></A><A NAME="ch25index199"></A><A NAME="ch25index200"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TABLE_DCCSID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">The DBCS CCSID value of the table; if <TT>TABLE_ENCODE</TT> is set to <TT>M</TT>, this value is <TT>0</TT>.<A NAME="ch25index201"></A><A NAME="ch25index202"></A><A NAME="ch25index203"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ROUTINE_ID</TT></P></TD><TD class="docTableCell" align="left" valign="top" colspan="2"><P class="docText">IBM use only.<A NAME="ch25index204"></A><A NAME="ch25index205"></A><A NAME="ch25index206"></A></P></TD></TR></TABLE></P><br>
<P class="docText">Recall from <A class="docLink" HREF="ch20.html#ch20">Chapter 20</A>, "DB2 Behind the Scenes," the access strategies that DB2 can choose in determining the access path for a query. Understanding how these access path strategies relate to the <TT>PLAN_TABLE</TT> columns is useful. The following sections provide a synopsis of the strategies and how to recognize them based on particular <TT>PLAN_TABLE</TT> columns.</P>
<P class="docText">The specific type of operation to which the <TT>PLAN_TABLE</TT> row applies is recorded in the <TT>QBLOCK_TYPE</TT> column. This column, in conjunction with the <TT>ACCESSTYPE</TT> column, can be used to identify the specific operations taken to satisfy each portion of the query. Table space scans are indicated by <TT>ACCESSTYPE</TT> being set to <TT>R</TT>. For a partitioned table space scan in which specific partitions can be skipped, <TT>ACCESSTYPE</TT> is set to <TT>R</TT> and <TT>PAGE_RANGE</TT> is set to <TT>Y</TT>. Index scans are indicated by <TT>ACCESSTYPE</TT> being set to any other value except a space.</P>
<P class="docText">When <TT>PREFETCH</TT> is set to <TT>S</TT>, sequential prefetch can be used; when it is set to <TT>L</TT>, list prefetch can be used. Even if the <TT>PREFETCH</TT> column is not set to <TT>L</TT> or <TT>S</TT>, however, prefetch can still be used at execution time. Whether sequential detection is used cannot be determined from the <TT>PLAN_TABLE</TT> because it is specified for use only at execution time.</P>
<P class="docText">If an index is used to access data, it is identified by creator and name in the <TT>ACCESSCREATOR</TT> and <TT>ACCESSNAME</TT> columns. A direct index lookup <span class="docEmphasis">cannot</span> be determined from the <TT>PLAN_TABLE</TT> <span class="docEmphasis">alone</span>. In general, a direct index lookup is indicated when the <TT>MATCHCOLS</TT> column equals the same number of columns in the index and the index is unique. For a non-unique index, this same <TT>PLAN_TABLE</TT> row can indicate a matching index scan. This additional information must be retrieved from the DB2 Catalog.</P>
<P class="docText">A non-matching index scan is indicated when the <TT>MATCHCOLS=0</TT>. The <TT>INDEXONLY</TT> column is set to <TT>Y</TT> for index-only access, or to <TT>N</TT> when the table space data pages must be accessed in addition to the index information. Index screening cannot be determined by looking at the <TT>PLAN_TABLE</TT> data, but if <TT>MATCHCOLS</TT> is less than the number of columns in the index key index screening is possible.</P>
<P class="docText">A one-fetch index access is used when <TT>ACCESSTYPE</TT> equals <TT>I1</TT>. This type of access is used when a single row can be used to resolve a <TT>MIN</TT> or <TT>MAX</TT> function. And, multiple-index access can be determined by the existence of <TT>M</TT>, <TT>MX</TT>, <TT>MI</TT>, or <TT>MU</TT> in the <TT>ACCESSTYPE</TT> column.</P>
<P class="docText">Clustered and non-clustered index access cannot be determined using the <TT>PLAN_TABLE</TT>. You will need to query the DB2 Catalog to determine whether each index is clustered. Also, index lookaside is generally available when DB2 indexes are used (but is not shown in the <TT>PLAN_TABLE</TT>).</P>
<P class="docText">A parallel query is indicated by values in <TT>ACCESS_DEGREE</TT> indicating the number of parallel streams to be invoked. It is the number of parallel tasks that <TT>BIND</TT> deems optimal. The degree can be decreased at runtime. The type of parallelism (I/O, CPU, or Sysplex) is recorded in the <TT>PARALLELISM_MODE</TT> column. Parallel tasks are grouped into parallel groups as indicated by the value(s) in <TT>ACCESS_PGROUP_ID</TT>. <TT>JOIN_DEGREE</TT> and <TT>JOIN_PGROUP_ID</TT> are populated when tables are joined in parallel.</P>
<P class="docText">For the different join methods, the <TT>METHOD</TT> column is set to <TT>1</TT> for a nested loop join, <TT>2</TT> for a merge scan join, or <TT>4</TT> for a hybrid join. If the <TT>METHOD</TT> column is <TT>3</TT>, it indicates a sort operation on data from a previous step.</P>
<P class="docText">Now that you know what to look for, you can examine some sample access paths.<A NAME="ch25index207"></A><A NAME="ch25index208"></A><A NAME="ch25index209"></A></P>
<A NAME="ch25lev2sec4"></A><H4 class="docSection2Title">Sample Access Paths</H4>
<P class="docText">The primary objective of <TT>EXPLAIN</TT> is to provide a means by which an analyst can "see" the access paths chosen by DB2. This section provides some <TT>EXPLAIN</TT> examples showing the SQL statement, rows from a <TT>PLAN_TABLE</TT> that were the result of an <TT>EXPLAIN</TT> being run for that SQL statement, and an analysis of the output. Based on the results of the <TT>EXPLAIN</TT>, you might decide that a better access path is available for that SQL statement. This process involves tuning, which is discussed in <A class="docLink" HREF="part05.html#part05">Part V</A>, "DB2 Performance Tuning." This section concentrates solely on showing the <TT>EXPLAIN</TT> results for different types of accesses.<A NAME="ch25index210"></A><A NAME="ch25index211"></A><A NAME="ch25index212"></A><A NAME="ch25index213"></A></P>
<P class="docText"><TT>PLAN_TABLE</TT> rows for various types of accesses follow. You can use them as a guide to recognizing access path strategies in the <TT>PLAN_TABLE</TT>. Italicized column data is unique to the access path strategy being demonstrated. (For example, in the first row shown, the <span class="docEmphasis">R</span> in the <TT>TYP</TT> column is italicized, indicating that a table space scan is used.)</P>
<p class="docText"><IMG BORDER="0" width="500" height="89" SRC="images/0672326132/graphics/25inf01.gif" ALT="graphics/25inf01.gif"></p>
<p class="docText"><IMG BORDER="0" width="500" height="666" SRC="images/0672326132/graphics/25inf02.gif" ALT="graphics/25inf02.gif"></p>
<p class="docText"><IMG BORDER="0" width="500" height="752" SRC="images/0672326132/graphics/25inf03.jpg" ALT="graphics/25inf03.jpg"></p>
<p class="docText"><IMG BORDER="0" width="500" height="738" SRC="images/0672326132/graphics/25inf04.jpg" ALT="graphics/25inf04.jpg"></p>
<p class="docText"><IMG BORDER="0" width="500" height="661" SRC="images/0672326132/graphics/25inf05.jpg" ALT="graphics/25inf05.jpg"></p>
<p class="docText"><IMG BORDER="0" width="500" height="428" SRC="images/0672326132/graphics/25inf06.gif" ALT="graphics/25inf06.gif"></p>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch25lev1sec1.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch25lev1sec3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
