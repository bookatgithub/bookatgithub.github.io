<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Generating Utility JCL</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch30.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch30lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch30lev1sec1"></A><H3 class="docSection1Title">Generating Utility JCL</H3>
<P class="docText">In this chapter, all the sample JCL for the online utilities use <TT>DSNUPROC</TT>, a generic utility procedure supplied with DB2.<A NAME="ch30index01"></A><A NAME="ch30index02"></A></P>
<P class="docText">Recall from <A class="docLink" HREF="ch18.html#ch18">Chapter 18</A>, "The Doors to DB2," that online DB2 utilities can be controlled by DB2I option 8. The DB2I utility panels are shown in <A class="docLink" HREF="#ch30fig01">Figures 30.1</A> and <A class="docLink" HREF="#ch30fig02">30.2</A>. JCL to execute DB2 utilities can be generated by these DB2I panels.</P>
<A NAME="ch30fig01"></A><p><CENTER><H5 class="docFigureTitle">Figure 30.1. DB2I utility JCL generation panel 1.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/30fig01_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="375" SRC="images/0672326132/graphics/30fig01.gif" ALT="graphics/30fig01.gif"></p></CENTER></p><br>
<A NAME="ch30fig02"></A><p><CENTER><H5 class="docFigureTitle">Figure 30.2. DB2I utility JCL generation panel 2.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/30fig02_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="375" SRC="images/0672326132/graphics/30fig02.gif" ALT="graphics/30fig02.gif"></p></CENTER></p><br>
<P class="docText">The first panel, shown in <A class="docLink" HREF="#ch30fig01">Figure 30.1</A>, is set to generate JCL for the <TT>STOSPACE</TT> utility. The second panel, shown in <A class="docLink" HREF="#ch30fig02">Figure 30.2</A>, provides additional information used by certain DB2 utilities. If the first panel were set to generate JCL for the <TT>COPY</TT>, <TT>LOAD</TT>, or <TT>REORG</TT> utilities, the second panel would prompt the user to enter data set names required for those utilities.<A NAME="ch30index03"></A><A NAME="ch30index04"></A><A NAME="ch30index05"></A><A NAME="ch30index06"></A></P>
<P class="docText">The DB2I utility JCL generation panels provide four basic options:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="88"><COL width="462"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SUBMIT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">JCL is automatically built to execute the requested DB2 utility, and it is submitted in batch for processing.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>EDITJCL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">JCL is automatically built and displayed for the user. The user can edit the JCL, if desired, and then submit the JCL.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DISPLAY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The status of a utility identified by JOB ID is displayed online.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>TERMINATE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">A utility identified by JOB ID is terminated. This cancels a running utility or removes an inactive utility from the DB2 subsystem, thereby disabling future restartability for the utility.</P></TD></TR></TABLE></P><br>
<P class="docText">The <TT>DISPLAY</TT> and <TT>TERMINATE</TT> options are merely menu-driven implementations of the DB2 <TT>-DISPLAY</TT> and <TT>-TERM</TT> commands. The <TT>SUBMIT</TT> and <TT>EDITJCL</TT> options provide automated DB2 utility JCL generation and submission. The DB2I utility program provides only rudimentary DB2 utility JCL, however. It works as follows:<A NAME="ch30index07"></A><A NAME="ch30index08"></A><A NAME="ch30index09"></A><A NAME="ch30index10"></A></P>
<div style="font-weight:bold"><OL class="docList" TYPE="1"><LI><div style="font-weight:normal"><P class="docList">The user specifies either <TT>SUBMIT</TT> or <TT>EDITJCL</TT> and a JOB ID that uniquely identifies a utility.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">The user specifies one of the supported utilities (see <A class="docLink" HREF="#ch30fig01">Figure 30.1</A>).</P></div></LI><LI><div style="font-weight:normal"><P class="docList">The user then specifies on the panel the data set containing the utility control cards to be used. The data set must be pre-allocated.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">As directed by the panel, the user supplies additional data set names, depending on the selected utility.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">JCL is generated for the requested utility.</P></div></LI></OL></div>
<P class="docText">The DB2I utility generator displays the output messages shown in <A class="docLink" HREF="#ch30fig03">Figure 30.3</A> when Enter is pressed and the request is processed.</P>
<A NAME="ch30fig03"></A><p><CENTER><H5 class="docFigureTitle">Figure 30.3. DB2I JCL generation output messages.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/30fig03_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="375" SRC="images/0672326132/graphics/30fig03.gif" ALT="graphics/30fig03.gif"></p></CENTER></p><br>
<P class="docText">The JCL generated by DB2I for the <TT>STOSPACE</TT> utility is shown in <A class="docLink" HREF="#ch30fig04">Figure 30.4</A>. Generating JCL for a utility each time it is required, however, can be cumbersome. Many users create a partitioned data set containing sample utility JCL that they can modify as needed. The examples in <A class="docLink" HREF="part06.html#part06">Part VI</A> can be used as templates for the creation of DB2 utility JCL for use in your shop.<A NAME="ch30index11"></A><A NAME="ch30index12"></A><A NAME="ch30index13"></A><A NAME="ch30index14"></A><A NAME="ch30index15"></A><A NAME="ch30index16"></A></P>
<A NAME="ch30fig04"></A><p><CENTER><H5 class="docFigureTitle">Figure 30.4. Generated JCL for the <TT>STOSPACE</TT> utility.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/30fig04_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="375" SRC="images/0672326132/graphics/30fig04.gif" ALT="graphics/30fig04.gif"></p></CENTER></p><br>
<P class="docText">Each online utility is associated with a utility identifier, or UID, that is passed to <TT>DSNUTILB</TT> as a parameter to uniquely identify the utility to DB2. Two utilities with the same UID cannot execute concurrently.<A NAME="ch30index17"></A><A NAME="ch30index18"></A><A NAME="ch30index19"></A><A NAME="ch30index20"></A><A NAME="ch30index21"></A></P>
<P class="docText">The <TT>DSNUPROC</TT> procedure requires the specification of override parameters to function properly. These parameters should be coded as follows:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="88"><COL width="462"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>LIB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The DB2 link library assigned to your DB2 system. This can be obtained from the database administrator or the system programmer responsible for DB2.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SYSTEM</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The DB2 system containing the objects on which the utility will be run.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UID</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Identifies the utility to the DB2 system. If this value is blank, the <TT>UID</TT> defaults to the job name. This enables an analyst or DBA to quickly identify the job associated with a utility. Also, because two identically named MVS jobs cannot run concurrently, two utilities with the same <TT>UID</TT> cannot run concurrently. This minimizes the possibility of incorrectly restarting or rerunning an abending job.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UTPROC</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">This value initially should be blank (that is, <TT>UTPROC="</TT>). This parameter is assigned a value only during restart. A value of <TT>'RESTART(PHASE)'</TT> restarts the utility at the beginning of the last executed phase. A value of <TT>'RESTART'</TT> restarts the utility at the last or current commit point. The type of restart, <TT>PHASE</TT> or <TT>COMMIT</TT>, must be determined by analyzing the type of utility and the abend.<A NAME="ch30index22"></A><A NAME="ch30index23"></A></P></TD></TR></TABLE></P><br>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch30.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch30lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
