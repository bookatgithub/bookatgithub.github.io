<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Using LISTDEF and TEMPLATE</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch30lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch30lev1sec5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch30lev1sec4"></A><H3 class="docSection1Title">Using <TT>LISTDEF</TT> and <TT>TEMPLATE</TT></H3>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> IBM made several improvements to the general useability of DB2 utilities in Version 7. Most of these improvements have been available from third-party ISVs for a number of years, but IBM is now starting to catch up. The biggest V7 utility improvements include the following abilities:<A NAME="ch30index60"></A><A NAME="ch30index61"></A></P></td></tr></table><br>
<UL><LI><P class="docList">For one utility to operate on a list of DB2 objects</P></LI><LI><P class="docList">To use wildcards to create such lists</P></LI><LI><P class="docList">To have DB2 determine which data sets should be allocated</P></LI></UL>
<P class="docText">Let's take a look at these new capabilities.</P>
<A NAME="ch30lev2sec2"></A><H4 class="docSection2Title">Database Object Lists</H4>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> A database object list is created using the <TT>LISTDEF</TT> statement. The purpose of <TT>LISTDEF</TT> is to allow DB2 utilities to execute against multiple database objects. Traditionally (prior to V7) a DB2 utility was run against a single database object. Each utility required a specific control card to be set up to execute that utility against each database object. Alternatively, a separate utility job could be constructed for each database object. With the <TT>LISTDEF</TT> statement, the DBA can create a list of database objects that can be submitted to a single utility invocation for execution. So, as of V7, it is very simple to set up one utility execution to run against multiple database objects.<A NAME="ch30index62"></A><A NAME="ch30index63"></A><A NAME="ch30index64"></A><A NAME="ch30index65"></A></P></td></tr></table><br>
<P class="docText">For example, the following statement creates a list named <TT>CUSTALL</TT> that includes all of the database objects in the <TT>CUSTOMER</TT> database:</P>
<pre>

</pre><BR><pre>
LISTDEF CUSTALL INCLUDE TABLESPACES DATABASE CUSTOMER
                INCLUDE INDEXSPACES DATABASE CUSTOMER
</pre><BR>
<P class="docText"><TT>LISTDEF</TT> is not a utility; it is a control statement that can be used within other DB2 utilities. The <TT>LISTDEF</TT> statement can be used to assign a name to a list of DB2 database objects and previously defined lists of database objects—so, a list can consist of other lists. After the list is defined, it can be used when executing other utilities. Each list must be named and that name can be up to 18 characters in length.</P>
<P class="docText">To run a DB2 utility against a list, you have the option of putting the <TT>LISTDEF</TT> statements in a separate library data set or coding it directly before the DB2 utility control statement that refers to the list. The default DD name for a <TT>LISTDEF</TT> data set is <TT>SYSLISTD</TT>, but this can be changed using the <TT>OPTIONS LISTDEFDD</TT> control statement.</P>
<P class="docText">To run <TT>LISTDEF</TT> as part of a utility execution, the process or user running the utility must have <TT>SELECT</TT> authority on: <TT>SYSIBM.SYSINDEXES</TT>, <TT>SYSIBM.SYSTABLES</TT>, and <TT>SYSIBM.SYSTABLESPACE</TT>. Of course, the process or user running the utility also must have the requisite authority to execute the utility being used to process the list.</P>
<P class="docText">Because <TT>LISTDEF</TT> is a control statement, not an individual utility, <TT>LISTDEF</TT> conforms to the concurrency rules for the utility to which the list is being applied. The <TT>LISTDEF</TT> list is stored until it is referenced by a specific utility, at which time the list is expanded. At that time, the concurrency and compatibility restrictions of the utility being executed apply, with the additional restriction that the catalog tables necessary to expand the list must be available for read-only access.<A NAME="ch30index66"></A><A NAME="ch30index67"></A><A NAME="ch30index68"></A><A NAME="ch30index69"></A></P>
<A NAME="ch30lev3sec1"></A><H5 class="docSection3Title">Creating Lists with <TT>LISTDEF</TT></H5>
<P class="docText">The <TT>INCLUDE</TT> and <TT>EXCLUDE</TT> keywords are used to build the list of database objects:<A NAME="ch30index70"></A><A NAME="ch30index71"></A><A NAME="ch30index72"></A><A NAME="ch30index73"></A><A NAME="ch30index74"></A><A NAME="ch30index75"></A><A NAME="ch30index76"></A><A NAME="ch30index77"></A><A NAME="ch30index78"></A><A NAME="ch30index79"></A></P>
<UL><LI><p class="docText">
<TT>INCLUDE</TT>— 
Specifies database objects to add to the list</p></LI><LI><p class="docText">
<TT>EXCLUDE</TT>— 
Specifies database objects to remove from the list</p></LI></UL>
<P class="docText">The <TT>LISTDEF</TT> statement can consist of multiple <TT>INCLUDE</TT> and <TT>EXCLUDE</TT> clauses. At least one <TT>INCLUDE</TT> clause must be specified. Furthermore, an <TT>INCLUDE</TT> clause must be coded before any subsequent <TT>EXCLUDE</TT> clauses. For most utilities, the <TT>INCLUDE</TT> and <TT>EXCLUDE</TT> clauses will be processed in the order they are coded in the <TT>LISTDEF</TT> statement. Certain specific utilities will modify the order of the list to optimize its processing:</P>
<UL><LI><P class="docList">The <TT>CHECK INDEX</TT>, <TT>REBUILD INDEX</TT>, and <TT>RUNSTATS INDEX</TT> utilities will process all index spaces that are related to a given table space at once, regardless of the order in which the indexes appear in the list.</P></LI><LI><P class="docList">The <TT>UNLOAD</TT> utility will process all specified partitions of a given table space at one time regardless of the order in which the indexes appear in the list.</P></LI></UL>
<P class="docText">The list will be built one clause at a time, by adding database objects to the list or removing database objects from the list. Any <TT>EXCLUDE</TT> statements that try to remove a database object from the list that has not yet been added to the list will cause DB2 to ignore that database object and proceed to the next <TT>INCLUDE</TT> or <TT>EXCLUDE</TT> clause. Be aware that a subsequent <TT>INCLUDE</TT> can return the excluded object to the list.</P>
<P class="docText">Furthermore, <TT>INCLUDE</TT> and <TT>EXCLUDE</TT> statements can be typed—meaning that they can be set to include or exclude only table spaces or only index spaces. Of course, the typing of <TT>INCLUDE</TT> and <TT>EXCLUDE</TT> statements is optional. If the type is not specified, the statement will default to a particular type of object based on the subsequent keywords that are coded. The available keywords for including and excluding database objects from a list include the following:</P>
<UL><LI><p class="docText">
<TT>DATABASE</TT>— 
To specify table spaces, index spaces, or both from a particular database or databases</p></LI><LI><p class="docText">
<TT>TABLESPACE</TT>— 
To specify table spaces, index spaces, or both for a particular table space or table spaces</p></LI><LI><p class="docText">
<TT>TABLE</TT>— 
To specify table spaces, index spaces, or both from a particular table space or table spaces</p></LI><LI><p class="docText">
<TT>INDEXSPACE</TT>— 
To specify index spaces</p></LI><LI><p class="docText">
<TT>INDEX</TT>— 
To specify index spaces</p></LI><LI><p class="docText">
<TT>LIST</TT>— 
To specify a list of table spaces, index spaces, or both that was previously defined using <TT>LISTDEF</TT></p></LI></UL>
<P class="docText">Additionally, the <TT>PARTLEVEL</TT> keyword can be used to specify only certain partitions for inclusion. The <TT>PARTLEVEL</TT> keyword applies to both table spaces and index spaces, and is ignored for non-partitioned database objects. The <TT>PARTLEVEL</TT> keyword takes an integer parameter that specifies the partition to be included. Failure to specify the partition number causes a list to be generated that contains one entry for every existing partition of the table space or index space.</P>
<P class="docText">Be aware that the only way to exclude a partition is if it was first included explicitly as a partition. For example, the following <TT>LISTDEF</TT> statement will exclude partition 7 from the list because both statements are coded at the partition level:</P>
<pre>

</pre><BR><pre>
LISTDEF LST1 INCLUDE TABLESPACE DB.TS1 PARTLEVEL
             EXCLUDE TABLESPACE DB.TS1 PARTLEVEL(7)
</pre><BR>
<P class="docText">However, the next <TT>LISTDEF</TT> statement will not exclude partition 7 from the list, because the <TT>INLCUDE</TT> statement was specified at the table space level, but the <TT>EXCLUDE</TT> statement is specified at the partition level:<A NAME="ch30index80"></A><A NAME="ch30index81"></A><A NAME="ch30index82"></A><A NAME="ch30index83"></A><A NAME="ch30index84"></A><A NAME="ch30index85"></A><A NAME="ch30index86"></A><A NAME="ch30index87"></A><A NAME="ch30index88"></A><A NAME="ch30index89"></A></P>
<pre>

</pre><BR><pre>
LISTDEF LST2 INCLUDE TABLESPACE DB.TS1
             EXCLUDE TABLESPACE DB.TS1 PARTLEVEL(7)
</pre><BR>
<A NAME="ch30lev3sec2"></A><H5 class="docSection3Title">Wildcarding</H5>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> The <TT>LISTDEF</TT> statement can use wildcarding to rapidly specify multiple database objects without having to explicitly name each of the objects. For example, you might specify<A NAME="ch30index90"></A><A NAME="ch30index91"></A><A NAME="ch30index92"></A><A NAME="ch30index93"></A><A NAME="ch30index94"></A></P></td></tr></table><br>
<pre>

</pre><BR><pre>
LISTDEF LST3 INCLUDE TABLESPACE DBXN.*
             EXCLUDE TABLESPACE DBXN.TS2

REORG LIST LST3 . . .
</pre><BR>
<P class="docText">This sequence of statements will reorganize all table spaces in the database named <TT>DBXN</TT> except for the one table space exempted, namely <TT>TS2</TT>. Furthermore, if a table space is subsequently added to <TT>DBXN</TT>, the <TT>REORG</TT> job does not need to be changed. The next time it runs, <TT>REORG</TT> will query the DB2 Catalog to determine the table spaces that exist in the list name <TT>DB1</TT>. Since it specifies all table spaces in <TT>DBXN</TT>, any new table space added to <TT>DBXN</TT> will automatically be picked up for processing.</P>
<P class="docText">The valid wildcard options supported by <TT>LISTDEF</TT> are as follows:</P>
<UL><LI><P class="docList">The question mark (<span class="docEmphStrong"><TT>?</TT></span>), which can be used to indicate any single character</P></LI><LI><P class="docList">The underscore (<span class="docEmphStrong"><TT>_</TT></span>), which can be used to indicate any single character</P></LI><LI><P class="docList">The percent sign (<span class="docEmphStrong"><TT>%</TT></span>), which can be used to indicate a string of 0, 1 or many characters</P></LI><LI><P class="docList">The asterisk (<span class="docEmphStrong"><TT>*</TT></span>), which can be used to indicate a string of 0, 1 or many characters</P></LI></UL>
<P class="docText">These options were chosen by IBM to mimic the wildcarding capability of the SQL <TT>LIKE</TT> clause. However, the underscore and percent sign characters are commonly occurring characters within database object names, so additional wildcard character options were provided.</P>
<A NAME="ch30note04"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">Be sure to use the question mark (<TT>?</TT>) wildcard character instead of the underscore (<TT>_</TT>) character for pattern-matching in table and index names. For table and index names, the underscore character represents a single occurrence of itself. The underscore can be used as an alternative to the question mark for database, table space, and index space names.</P></div><br>
<P class="docText">Although wildcarding is a very powerful capability, DB2 does place some limits on its use. For example, it is not permissible to create all-inclusive lists, such as <TT>DATABASE *</TT> or <TT>TABLESPACE *.*</TT>.</P>
<P class="docText">The bottom line, though, is that the ability to create lists using wildcards greatly eases the task of creating utility jobs.<A NAME="ch30index95"></A><A NAME="ch30index96"></A><A NAME="ch30index97"></A><A NAME="ch30index98"></A><A NAME="ch30index99"></A></P>
<A NAME="ch30lev3sec3"></A><H5 class="docSection3Title">List Expansion</H5>
<P class="docText">Lists created using the <TT>LISTDEF</TT> statement are expanded each time the utility job in which the <TT>LISTDEF</TT> is included is executed. This is important, because it simplifies the task of creating utility jobs for new database objects. For example, suppose you have a utility job set up to make image copies for every table space within a given database, such as<A NAME="ch30index100"></A><A NAME="ch30index101"></A><A NAME="ch30index102"></A><A NAME="ch30index103"></A><A NAME="ch30index104"></A></P>
<pre>

</pre><BR><pre>
LISTDEF LSTX INCLUDE TABLESPACE DBGL00X1.*

COPY LIST LSTX ...
</pre><BR>
<P class="docText">This sequence of commands is set up to copy every table space in the <TT>DBGL00X1</TT> database. If you add a new table space to that database you do not need to create a new image copy job or modify the existing job. This is so because the next time the existing job runs the list will be expanded and will now include the new table space—which will cause it to be copied. Lists (and templates), therefore, can greatly simplify the DBA task of creating utility jobs for new database objects.<A NAME="ch30index105"></A><A NAME="ch30index106"></A><A NAME="ch30index107"></A><A NAME="ch30index108"></A><A NAME="ch30index109"></A></P>
<A NAME="ch30lev4sec1"></A><H5 class="docSection4Title">Referential Integrity and Lists</H5>
<P class="docText">The <TT>RI</TT> parameter can be included on the <TT>INCLUDE</TT> statement to cause all tables that are referentially connected to tables specified in the list to also be included. This relieves the DBA of the burden of manually determining which tables are connected to which. Be advised, however, that the <TT>RI</TT> parameter cannot be used in conjunction with the <TT>PARTLEVEL</TT> parameter.<A NAME="ch30index110"></A><A NAME="ch30index111"></A><A NAME="ch30index112"></A><A NAME="ch30index113"></A><A NAME="ch30index114"></A><A NAME="ch30index115"></A><A NAME="ch30index116"></A></P>
<A NAME="ch30note05"></A><div class="docNote"><p class="docNoteTitle">NOTE</p><p><table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" ALIGN="LEFT" width="30" height="18" SRC="images/0672326132/graphics/V8_icon.gif" ALT="graphics/V8_icon.gif"></td><td valign="top"><P class="docText">Informational referential constraints will be included when using the <TT>RI</TT> parameter to report on referential table space sets.</P></td></tr></table></p></div><br>
<A NAME="ch30lev4sec2"></A><H5 class="docSection4Title">LOBs and Lists</H5>
<P class="docText">Database objects containing LOBs are special and might need to be treated differently than other database objects for utility processing. The <TT>LISTDEF</TT> statement provides options that enable the DBA to handle database objects that use LOBs differently.<A NAME="ch30index117"></A><A NAME="ch30index118"></A><A NAME="ch30index119"></A><A NAME="ch30index120"></A><A NAME="ch30index121"></A><A NAME="ch30index122"></A></P>
<P class="docText"><TT>LISTDEF</TT> offers three options that can be specified on an <TT>INCLUDE</TT> or <TT>EXCLUDE</TT> specification, to indicate how to process the LOB-related objects. The auxiliary LOB relationship can be traversed in either direction:</P>
<UL><LI><P class="docList">From LOB auxiliary table to base table</P></LI><LI><P class="docList">From base table to LOB auxiliary table</P></LI></UL>
<P class="docText">LOB objects include LOB table spaces, auxiliary tables, indexes on auxiliary tables, and their associated index spaces. Failure to specify one of the following three keyword options will result in DB2 not following the auxiliary relationships, and therefore LOBs will not be filtered from <TT>BASE</TT> objects in the enumerated list:</P>
<UL><LI><p class="docText">
<TT>ALL</TT>— 
Indicates that both BASE and LOB objects are to be included in the list. Auxiliary relationships will be followed from all objects resulting from the initial object lookup and both BASE and LOB objects will remain in the final enumerated list.</p></LI><LI><p class="docText">
<TT>BASE</TT>— 
Indicates that only base table spaces and index spaces will be included in the list; that is, no LOB objects will be included for this specific <TT>INCLUDE</TT> or <TT>EXCLUDE</TT>. Of course, you can specify a LOB object to begin with, causing <TT>LISTDEF</TT> to search for the related base objects and only the base objects will be included in the list.</p></LI><LI><p class="docText">
<TT>LOB</TT>— 
Indicates that only LOB table spaces and related index spaces containing indexes on auxiliary tables are to be included in the list. Once again, you can specify that a base object or a LOB object to begin with, but only LOB objects will be included in the list.<A NAME="ch30index123"></A><A NAME="ch30index124"></A><A NAME="ch30index125"></A><A NAME="ch30index126"></A><A NAME="ch30index127"></A><A NAME="ch30index128"></A></p></LI></UL>
<A NAME="ch30lev4sec3"></A><H5 class="docSection4Title">Indexes, Lists, and the <TT>COPY</TT> Utility</H5>
<P class="docText">An additional consideration for lists built using the <TT>LISTDEF</TT> statement is the treatment of indexes with regard to the <TT>COPY</TT> utility. As of DB2 V6 it has been possible to take image copy backups of index spaces to be used for subsequent recovery; previously, indexes had to be rebuilt from table data after table spaces were recovered.<A NAME="ch30index129"></A><A NAME="ch30index130"></A><A NAME="ch30index131"></A><A NAME="ch30index132"></A><A NAME="ch30index133"></A><A NAME="ch30index134"></A></P>
<P class="docText"><TT>LISTDEF</TT> offers the <TT>COPY</TT> keyword, which can be used to specify whether indexes that are defined as <TT>COPY YES</TT> (or <TT>COPY NO</TT>) are to be included or excluded in the list. If the <TT>COPY</TT> keyword is not coded, all index spaces that satisfy the <TT>INCLUDE</TT> or <TT>EXCLUDE</TT> expression, regardless of their <TT>COPY</TT> attribute, will be included or excluded in the list. If specified, this keyword must immediately follow the <TT>INDEXSPACES</TT> keyword. If specified elsewhere, the keyword <TT>COPY</TT> is interpreted as the start of the <TT>COPY</TT> utility control statement. The <TT>COPY</TT> keyword can take on one of two values:</P>
<UL><LI><p class="docText">
<TT>YES</TT>— 
Indicates that index spaces defined with or altered to <TT>COPY YES</TT> are the only ones to be included in the list.</p></LI><LI><p class="docText">
<TT>NO</TT>— 
Indicates that index spaces defined with or altered to <TT>COPY NO</TT> are the only ones to be included in the list.</p></LI></UL>
<P class="docText">You can use <TT>INCLUDE</TT> with <TT>COPY YES</TT> to create a list of index spaces that can be processed by the <TT>COPY</TT> utility. Or, you can use <TT>EXCLUDE</TT> with <TT>COPY NO</TT> to remove index spaces that cannot be processed by the <TT>COPY</TT> utility from a list of index spaces.</P>
<A NAME="ch30lev3sec4"></A><H5 class="docSection3Title">List Usage Guidelines</H5>
<P class="docText">The whole purpose for using <TT>LISTDEF</TT> to create lists of database objects is to use those lists when executing DB2 utilities. Once created, the <TT>LIST</TT> keyword is specified in the utility job in order to process just those objects on the list. The <TT>LIST</TT> keyword can be used with the following utilities:<A NAME="ch30index135"></A><A NAME="ch30index136"></A><A NAME="ch30index137"></A><A NAME="ch30index138"></A><A NAME="ch30index139"></A><A NAME="ch30index140"></A><A NAME="ch30index141"></A></P>
<UL><LI><p class="docText">
<TT>CHECK INDEX</TT>— 
During execution, the database objects in the list will be grouped by related table space for processing.</p></LI><LI><p class="docText">
<TT>COPY</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>MERGECOPY</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>MODIFY RECOVERY</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>MODIFY STATISTICS</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>QUIESCE</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>REBUILD</TT>— 
During execution, the database objects in the list will be grouped by related table space for processing.</p></LI><LI><p class="docText">
<TT>RECOVER</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>REORG</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>REPORT</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI><LI><p class="docText">
<TT>RUNSTATS INDEX</TT>— 
During execution, the database objects in the list will be grouped by related table space for processing.</p></LI><LI><p class="docText">
<TT>RUNSTATS TABLESPACE</TT>— 
During execution, the database objects in the list will be processed in the order they were specified.</p></LI></UL>
<P class="docText">Certain utilities, such as <TT>RECOVER</TT> and <TT>COPY</TT>, can process a <TT>LIST</TT> without a specified database object type. These utilities will derive the database object type to process based on the contents of the list. But other utilities, such as <TT>QUIESCE</TT> and <TT>REORG INDEX</TT>, must have the database object type specified before the utility can be executed. For these utilities you must specify an object type in addition to the <TT>LIST</TT> keyword, for example:</P>
<pre>

</pre><BR><pre>
QUIESCE TABLESPACE LIST list-name.
</pre><BR>
<P class="docText">Additionally, most utilities require output data sets in order to process. You can use the <TT>TEMPLATE</TT> statement to specify the naming convention and, optionally, the allocation parameters for each output data set type. Templates, like lists, can be reused as long as the naming convention prohibits the specification of duplicate data set names. Although it may be possible to use traditional JCL with certain <TT>LISTDEF</TT> lists it is not recommended because the JCL quickly becomes unwieldy and impractical to maintain (unless the list of database objects to be processed is quite small).<A NAME="ch30index142"></A><A NAME="ch30index143"></A><A NAME="ch30index144"></A><A NAME="ch30index145"></A><A NAME="ch30index146"></A></P>
<P class="docText">When used together, <TT>LISTDEF</TT> and <TT>TEMPLATE</TT> statements make it easier to develop DB2 utility jobs. Job creation is faster, lists can be coded to capture and process new database objects automatically, and the resulting JCL is easier to maintain because fewer modifications are required when database objects are added to the list.<A NAME="ch30index147"></A><A NAME="ch30index148"></A><A NAME="ch30index149"></A><A NAME="ch30index150"></A><A NAME="ch30index151"></A><A NAME="ch30index152"></A><A NAME="ch30index153"></A></P>
<A NAME="ch30lev3sec5"></A><H5 class="docSection3Title">Previewing the Contents of a List</H5>
<P class="docText">You can use the <TT>OPTIONS PREVIEW</TT> control statement to expand the list and see the database objects that will be included in the list before actual processing. The <TT>OPTIONS ITEMERROR</TT> control statement can be used to alter the handling of errors that might occur during list processing. The <TT>OPTIONS LISTDEFDD</TT> control statement can be used to switch <TT>LISTDEF</TT> library data sets between control statements within a job step. The default is <TT>LISTDEFDD SYSLISTD</TT>.<A NAME="ch30index154"></A><A NAME="ch30index155"></A><A NAME="ch30index156"></A><A NAME="ch30index157"></A><A NAME="ch30index158"></A></P>
<A NAME="ch30lev3sec6"></A><H5 class="docSection3Title"><TT>LISTDEF</TT> Example</H5>
<P class="docText">The example in <A class="docLink" HREF="#ch30list01">Listing 30.1</A> shows the JCL and control statements used to build a list of table spaces to <TT>QUIESCE</TT>. The list created is named <TT>QLIST</TT>. This list includes all of the table spaces in database <TT>DB1</TT> that begin with the characters "<TT>TSL</TT>" except for <TT>TSLY028A</TT>, <TT>TSLY066V</TT>, and <TT>TSLU071X</TT>. Also, one table space is included from database <TT>DB7</TT>, namely <TT>TSLU077T</TT>.<A NAME="ch30index159"></A><A NAME="ch30index160"></A><A NAME="ch30index161"></A><A NAME="ch30index162"></A></P>
<A NAME="ch30list01"></A><H5 class="docExampleTitle">Listing 30.1. Image copy JCL</H5><A NAME="ch30index163"></A>

<PRE>
//QUIESCE JOB 'USER=NAME',CLASS=A,...
//*******************************************************
//*QUIESCE LISTDEF DD LILSTDEF data sets
//*******************************************************
//STEP1   EXEC  DSNUPROC,UID='DBAPSCM.QUIESCL',
//           UTPROC='',SYSTEM='DB2A'
//LISTDSN DD DSN=JULTU103.TCASE.DATA2,DISP=SHR
//        DD DSN=JULTU103.TCASE.DATA3(MEM1),DISP=SHR
//SYSUT1  DD DSN=JULTU103.QUIESC2.STEP1.SYSUT1,
//        DISP=(MOD,DELETE,CATLG),UNIT=SYSDA,
//        SPACE=(4000,(20,20),,,ROUND)
//SORTOUT DD DSN=JULTU103.QUIESC2.STEP1.SORTOUT,
//        DISP=(MOD,DELETE,CATLG),UNIT=SYSDA,
//        SPACE=(4000,(20,20),,,ROUND)
//SYSIN   DD *

    LISTDEF QLIST INCLUDE TABLESPACE DB1.TSL*
                  EXCLUDE TABLESPACE DB1.TSLY028A
                  EXCLUDE TABLESPACE DB1.TSLY066V
                  EXCLUDE TABLESPACE DB1.TSLU071X
                  INCLUDE TABLESPACE DB7.TSLU077T

    QUIESCE LIST QLIST
/*<A NAME="ch30index164"></A><A NAME="ch30index165"></A><A NAME="ch30index166"></A><A NAME="ch30index167"></A>
</PRE><BR>

<A NAME="ch30lev2sec3"></A><H4 class="docSection2Title">Templates</H4>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText"> In order to support database object lists and wildcarding, IBM also had to come up with a way of allocating data sets to support utility processing on a large number of unknown database objects—well, at least unknown at the time the utility JCL was being built. The new <TT>TEMPLATE</TT> statement accomplishes this.<A NAME="ch30index168"></A><A NAME="ch30index169"></A><A NAME="ch30index170"></A><A NAME="ch30index171"></A><A NAME="ch30index172"></A><A NAME="ch30index173"></A></P></td></tr></table><br>
<P class="docText">The purpose of the <TT>TEMPLATE</TT> statement is to provide DB2 utilities with the basic allocation information necessary to automatically generate and allocate valid data sets that are required for use as DB2 utilities are executed. Traditionally, a DB2 utility is run against a single database object and the JCL is manually prepared with each required data set hard-coded into the JCL job stream. However, with the advent of <TT>LISTDEF</TT>, DB2 utility jobs can be set up to operate on multiple database objects with a single run. Furthermore, the person developing the JCL has no way to know how many database objects will be processed, so it is not practical to manually allocate data sets to such utility jobs. And due to the nature of the <TT>LISTDEF</TT> statement, it is possible that a different number of database objects will be processed each time a utility is run using the same list. So, once again, allocating data sets to the JCL in such an environment is impractical, if it is even possible at all.</P>
<P class="docText">Like <TT>LISTDEF</TT>, <TT>TEMPLATE</TT> is <span class="docEmphStrong">not</span> a new utility, but is a new control statement. The <TT>TEMPLATE</TT> statement lets you allocate data sets, without using JCL <TT>DD</TT> cards, during the processing of a <TT>LISTDEF</TT> list. Using <TT>TEMPLATE</TT> the developer can define the data set naming convention, and specify further allocation parameters such as data set sizing, location, and attributes. The <TT>TEMPLATE</TT> statement is flexible enough to allow different characteristics for tape and disk data sets. Each <TT>TEMPLATE</TT> statement generates a named template to be referenced as needed.</P>
<P class="docText">To perform the dynamic data set allocation during the utility execution, the <TT>TEMPLATE</TT> control statement deploys the MVS <TT>DYNALLOC</TT> macro (<TT>SVC 99</TT>).</P>
<P class="docText">To use a template with a DB2 utility, you have the option of putting the <TT>TEMPLATE</TT> statements in a separate library data set or directly before the DB2 utility control statements. The default DD name for a <TT>TEMPLATE</TT> data set is <TT>SYSTEMPL</TT>, but this can be changed using the <TT>OPTIONS TEMPLATEDD</TT> control statement.</P>
<P class="docText">No additional privileges are required to run <TT>TEMPLATE</TT> as part of a utility execution. Of course, the process or user running the utility must have the requisite authority to execute the utility for which the template is being used.<A NAME="ch30index174"></A><A NAME="ch30index175"></A><A NAME="ch30index176"></A><A NAME="ch30index177"></A><A NAME="ch30index178"></A><A NAME="ch30index179"></A></P>
<A NAME="ch30lev3sec7"></A><H5 class="docSection3Title">Using <TT>TEMPLATE</TT></H5>
<P class="docText">Each <TT>TEMPLATE</TT> must be named. The <TT>TEMPLATE</TT> name is limited to eight alphanumeric characters, the first of which must be an alphabetic character (A through Z). After the template name you can specify keywords to control the allocation of tape and disk data sets. Each <TT>TEMPLATE</TT> statement can apply to either disk or tape, but not both. The <TT>UNIT</TT> keyword specifies a generic unit name that must be defined on your system. Additional keywords specified for the <TT>TEMPLATE</TT> statement must be consistent with the unit type specified; that is, valid for tape or disk.<A NAME="ch30index180"></A><A NAME="ch30index181"></A><A NAME="ch30index182"></A><A NAME="ch30index183"></A><A NAME="ch30index184"></A></P>
<P class="docText">There are three grouping of options that can be specified for a <TT>TEMPLATE</TT> statement:</P>
<UL><LI><p class="docText">
<span class="docEmphasis">Common Options</span>— 
These options apply to both disk and tape template.</p></LI><LI><p class="docText">
<span class="docEmphasis">Disk Options</span>— 
These options apply only to a disk template.</p></LI><LI><p class="docText">
<span class="docEmphasis">Tape Options</span>— 
These options apply only to a tape template.</p></LI></UL>
<P class="docText">A single <TT>TEMPLATE</TT> statement can have a set of common options, and then either a set of disk options or a set of tape options.</P>
<A NAME="ch30lev4sec4"></A><H5 class="docSection4Title">Common <TT>TEMPLATE</TT> Options</H5>
<P class="docText">The following keywords are common options that can be applied to the definition of any <TT>TEMPLATE</TT> statement:<A NAME="ch30index185"></A><A NAME="ch30index186"></A><A NAME="ch30index187"></A><A NAME="ch30index188"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>UNIT</TT> option</span> is used to indicate the device-number, the generic device-type or the group-name to use for allocating the data set.<A NAME="ch30index189"></A><A NAME="ch30index190"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>DSN</TT> option</span> indicates the template for the data set name. The data set name can be created by using any combination of symbolic variables, alphanumeric constants, or national characters. When creating the <TT>DSN</TT> template follow the same basic rules for using symbolic variables within JCL. Special DB2 symbolic variables are provided that can be used to insert characteristics of the database object, utility, or job that is running. These symbolic variables are summarized in <A class="docLink" HREF="#ch30table01">Table 30.1</A>. Each symbolic variable is substituted by its related value at execution time to form an explicit data set name. When used in a <TT>DSN</TT> expression, the symbolic variable begins with the ampersand sign (<TT>&amp;</TT>) and ends with a period (<TT>.</TT>). For example,<A NAME="ch30index191"></A><A NAME="ch30index192"></A></P>
<pre>

</pre><BR><pre>
DSN &amp;DB..&amp;TS..D&amp;JDATE..COPY&amp;ICTYPE.
</pre><BR>
<P class="docText">This <TT>DSN</TT> parameter creates a data set named using</P>
<UL><LI><P class="docList">The database name as the first part,</P></LI><LI><P class="docList">The table space name as the second part,</P></LI><LI><P class="docList">The character "<TT>D</TT>" followed by the actual date as the third part,</P></LI><LI><P class="docList">And, finally, the word "<TT>COPY</TT>" followed by the letter "<TT>F</TT>" (for a full image copy), the letter "<TT>C</TT>" (for a <TT>CHANGELIMIT</TT> image copy), or the letter "<TT>I</TT>" (for an incremental image copy) as the fourth and final part of the name.</P></LI></UL>
<P class="docText"><span class="docEmphStrong">The <TT>DISP</TT> option</span> indicates the disposition of the data set using standard JCL parameters for (status, normal termination, and abnormal termination). The legal values for each are as follows:<A NAME="ch30index193"></A><A NAME="ch30index194"></A></P>
<UL><LI><p class="docText">
<span class="docEmphRoman">status</span>— 
<TT>NEW</TT>, <TT>OLD</TT>, <TT>SHR</TT>, <TT>MOD</TT>.</p></LI><LI><p class="docText">
<span class="docEmphRoman">normal-termination</span>— 
<TT>DELETE</TT>, <TT>KEEP</TT>, <TT>CATLG</TT>, <TT>UNCATLG</TT>.</p></LI><LI><p class="docText">
<span class="docEmphRoman">abnormal-termination</span>— 
<TT>DELETE</TT>, <TT>KEEP</TT>, <TT>CATLG</TT>, <TT>UNCATLG</TT>.</p></LI></UL>
<P class="docText"><span class="docEmphStrong">The <TT>MODELDCB</TT> option</span> indicates the <TT>DSN</TT> of a model data set that will be used to get the <TT>DCB</TT> information.<A NAME="ch30index195"></A><A NAME="ch30index196"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>BUFNO</TT> option</span> indicates the number of BSAM buffers to use for data set buffering.<A NAME="ch30index197"></A><A NAME="ch30index198"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>DATACLAS</TT> option</span> indicates the name of the SMS data class to use. If specified, this value must be a valid data class defined to SMS.<A NAME="ch30index199"></A><A NAME="ch30index200"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>MGMTCLAS</TT> option</span> indicates the name of the SMS management class to use. If specified, this value must be a valid management class defined to SMS.<A NAME="ch30index201"></A><A NAME="ch30index202"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>STORCLAS</TT> option</span> indicates the name of the SMS storage class to use. If specified, this value must be a valid storage class defined to SMS.<A NAME="ch30index203"></A><A NAME="ch30index204"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>RETPD</TT> option</span> indicates the retention period for the data set in days. The value must be between 1 and 9999 if specified.<A NAME="ch30index205"></A><A NAME="ch30index206"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>EXPDL</TT> option</span> indicates the expiration date for the data set. The date must be enclosed in single quotes and specified in Julian data format, that is, <TT>YYYYDDD</TT>.<A NAME="ch30index207"></A><A NAME="ch30index208"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>VOLUMES</TT> option</span> is used to provide a list of volume serial numbers for this allocation. The volume serial numbers are provided in a comma-delimited list and enclosed within parentheses. The first volume on the list must contain sufficient space for the primary allocation of space for the data set.<A NAME="ch30index209"></A><A NAME="ch30index210"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>VOLCNT</TT> option</span> indicates the maximum number of volumes that an output data set might require.<A NAME="ch30index211"></A><A NAME="ch30index212"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>GDGLIMIT</TT> option</span> indicates the number of entries to be created in a GDG base if the <TT>DSN</TT> specifies a GDG and the GDG base does not already exist. The value of <TT>GDGLIMIT</TT> can range from 0 to 255, where 0 is a special value to specify that a GDG base should be created if one does not already exist.<A NAME="ch30index213"></A><A NAME="ch30index214"></A><A NAME="ch30index215"></A><A NAME="ch30index216"></A><A NAME="ch30index217"></A><A NAME="ch30index218"></A></P>
<A NAME="ch30table01"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 30.1. DB2 <TT>TEMPLATE</TT> Symbolics</h5></CAPTION><COLGROUP><COL width="143"><COL width="407"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Parameter</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Description</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;JOBNAME</TT> (or <TT>&amp;JO</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The name of the z/OS (or OS/390) job.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;STEPNAME</TT> (or <TT>&amp;ST</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The name of the z/OS (or OS/390) job step.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;UTILID</TT> (or <TT>&amp;UT</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The utility id for this utility job (truncated to 8 characters or the first period in the utility ID).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;USERID</TT> (or <TT>&amp;...</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The userid of the z/OS (or OS/390) job.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;SSID</TT> (or <TT>&amp;SS</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The DB2 subsystem identifier.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;UTILNAME</TT> (or <TT>&amp;UN</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The utility name for this utility job (truncated to 8 characters).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;LIST</TT> (or <TT>&amp;LI</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The name of the list.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;SEQ</TT> (or <TT>&amp;SQ</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The sequence number of the item in the list being processed.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;JDATE</TT> (or <TT>&amp;JU</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The Julian date, formatted as YYYYDDD. Must be prefixed with a character number when used (for example, <TT>D&amp;JDATE</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;JDAY</TT> (or <TT>&amp;JD</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The day portion of the Julian date, formatted as DDD. Must be prefixed with a character number when used (for example, <TT>D&amp;JDAY</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;TIME</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The system time, formatted as HHMMSS. Must be prefixed with a character number when used (for example, <TT>T&amp;TIME</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;HOUR</TT> (or <TT>&amp;HO</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The hour component of the system time, formatted as HH. Must be prefixed with a character number when used (for example, <TT>T&amp;HOUR</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;MINUTE</TT> (or <TT>&amp;MI</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The minute component of the system time, formatted as MM. Must be prefixed with a character number when used (for example, <TT>T&amp;MINUTE</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;SECOND</TT> (or <TT>&amp;SC</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The second component of the system time, formatted as SS. Must be prefixed with a character number when used (for example, <TT>T&amp;SECOND</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;YEAR</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The year, formatted as YYYY. Must be prefixed with a character number when used (for example, <TT>Y&amp;YEAR</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;MONTH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The month, formatted as MM. Must be prefixed with a character number when used (for example, <TT>M&amp;MONTH</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;DAY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The day of the month, formatted as DD. Must be prefixed with a character number when used (for example, <TT>D&amp;DAY</TT>).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;DB</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The database name.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;TS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The table space name.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;IS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The index space name.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;SN</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The space name—either table space or index space depending on which is being processed.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;PART</TT> (or <TT>&amp;PA</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The partition number—formatted as five digits, left padded.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;ICTYPE</TT> (or <TT>&amp;IC</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The image copy type—either F for full copy, C for <TT>CHANGELIMIT</TT> copy, or I for incremental copy.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;LOCREM</TT> (or <TT>&amp;LR</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The location of the image copy—either L for local copy or R for remote copy.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>&amp;PRIBAC</TT> (or <TT>&amp;PB</TT>)</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">The type of copy—either P for primary copy or B for backup copy.<A NAME="ch30index222"></A><A NAME="ch30index223"></A><A NAME="ch30index224"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch30lev4sec5"></A><H5 class="docSection4Title">Disk Options</H5>
<P class="docText">The following keywords are disk options that can only be applied to the definition of a statement defining a disk <TT>TEMPLATE</TT>:<A NAME="ch30index225"></A><A NAME="ch30index226"></A><A NAME="ch30index227"></A><A NAME="ch30index228"></A><A NAME="ch30index229"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>SPACE</TT> option</span> indicates the primary and secondary disk space allocation values for the <TT>DSN</TT> template. The option takes two values, placed between parentheses and separated by a comma: the first is the primary allocation and the second is the secondary allocation.<A NAME="ch30index230"></A></P>
<UL><LI><p class="docText">
<TT>CYL</TT>— 
Indicates that allocation quantities are specified in terms of cylinders and allocation will occur in cylinders</p></LI><LI><p class="docText">
<TT>TRK</TT>— 
Indicates that allocation quantities are specified in terms of tracks and allocation will occur in tracks</p></LI><LI><p class="docText">
<TT>MB</TT>— 
Indicates that allocation quantities are specified in terms of megabytes and allocation will occur in records</p></LI></UL>
<P class="docText"><span class="docEmphStrong">The <TT>PCTPRIME</TT> option</span> indicates the percentage of space to be obtained as the primary quantity.<A NAME="ch30index231"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>MAXPRIME</TT> option</span> specifies an upper limit on the primary quantity specified using the <TT>SPACE</TT> parameter (expressed in the units specified on the <TT>SPACE</TT> parameter).<A NAME="ch30index232"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>NBRSECOND</TT> option</span> indicates the division of secondary space allocations. After the primary space is allocated, the remaining space is divided into the specified number of secondary allocations. The <TT>NBRSECOND</TT> value can range from 1 to 10.<A NAME="ch30index233"></A><A NAME="ch30index234"></A><A NAME="ch30index235"></A><A NAME="ch30index236"></A><A NAME="ch30index237"></A><A NAME="ch30index238"></A></P>
<A NAME="ch30lev4sec6"></A><H5 class="docSection4Title">Tape Options</H5>
<P class="docText">The following keywords are disk options that can only be applied to the definition of a statement defining a disk <TT>TEMPLATE</TT>:<A NAME="ch30index239"></A><A NAME="ch30index240"></A><A NAME="ch30index241"></A><A NAME="ch30index242"></A><A NAME="ch30index243"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>UNCNT</TT> option</span> indicates the number of devices to be allocated. If a specific device number is coded on the <TT>UNIT</TT> common option, then <TT>UNCNT</TT> must be 1 (or not coded).<A NAME="ch30index244"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>STACK</TT> option</span> indicates whether output data sets are to be stacked contiguously on tape. Valid values are <TT>YES</TT> or <TT>NO</TT>.<A NAME="ch30index245"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>JES3DD</TT> option</span> indicates the name of the JCL <TT>DD</TT> to be used at job initialization time for the tape unit. (JES3 requires that all necessary tape units are pre-allocated by <TT>DD</TT> statement.)<A NAME="ch30index246"></A></P>
<P class="docText"><span class="docEmphStrong">The <TT>TRTCH</TT> option</span> indicates the track recording technique (for tape drives with improved data recording capabilities). Valid values are<A NAME="ch30index247"></A></P>
<UL><LI><p class="docText">
<TT>NONE</TT>— 
Indicates that <TT>TRTCH</TT> is eliminated from dynamic allocation</p></LI><LI><p class="docText">
<TT>COMP</TT>— 
Indicates that data is to be written in compacted format</p></LI><LI><p class="docText">
<TT>NOCOMP</TT>— 
Indicates that data in to be written in standard format (that is, not compacted)</p></LI></UL>
<A NAME="ch30lev3sec8"></A><H5 class="docSection3Title"><TT>TEMPLATE</TT> Examples</H5>
<P class="docText">The following statement shows a disk template with an explicit specification of space. The data set name will consist of the database name, the table space name, the name of the utility it was used with, and the time of allocation. Allocation is by cylinder with a primary space of 115 and a secondary of 15:<A NAME="ch30index248"></A><A NAME="ch30index249"></A><A NAME="ch30index250"></A><A NAME="ch30index251"></A></P>
<pre>

</pre><BR><pre>
TEMPLATE DISKTMP2 DSN(&amp;DB..&amp;TS..&amp;UTILNAME..T&amp;TIME.)
     SPACE(115,15) CYL
</pre><BR>
<P class="docText">This next example shows how to use <TT>TEMPLATE</TT> in conjunction with <TT>LISTDEF</TT>. The <TT>LISTDEF</TT> creates a list of table spaces to <TT>COPY</TT>. Two templates are specified, one for a disk local copy and one for a tape remote copy. The tape and disk template each specify different <TT>UNIT</TT> values, the disk template specifies the data set disposition, and the tape template specifies an expiration date of January 2, 2005 (in Julian date format):</P>
<pre>

</pre><BR><pre>
LISTDEF  COPYLIST INCLUDE TABLESPACE DBGL01.*
                  EXCLUDE TABLESPACE DBGL01.TSNAME
TEMPLATE DISKTMPL UNIT SYSDA
                  DSN(&amp;DB..&amp;TS..COPY&amp;IC.&amp;LR.&amp;PB..D&amp;DATE..T&amp;TIME.)
                  DISP (MOD,CATLG,CATLG)
TEMPLATE TAPETMPL UNIT T35901
                  DSN(&amp;DB..&amp;TS..COPY&amp;IC.&amp;LR.&amp;PB..D&amp;DATE..T&amp;TIME.)
                  EXPDL '2005002'
COPY LIST COPYLIST COPYDDN (DISKTMPL) RECOVERYDDN (TAPETMPL)
     SHRLEVEL REFERENCE<A NAME="ch30index252"></A><A NAME="ch30index253"></A><A NAME="ch30index254"></A><A NAME="ch30index255"></A>
</pre><BR>
<A NAME="ch30lev2sec4"></A><H4 class="docSection2Title">Testing Options for Lists and Template</H4>
<P class="docText">It is a good idea to test lists and templates before using them with a utility. Doing so can help to validate the accuracy of the list contents and template specification.<A NAME="ch30index256"></A><A NAME="ch30index257"></A><A NAME="ch30index258"></A><A NAME="ch30index259"></A><A NAME="ch30index260"></A><A NAME="ch30index261"></A></P>
<P class="docText">The <TT>OPTIONS</TT> utility control statement can be used to indicate processing options that apply across many utility executions. By specifying various options you can<A NAME="ch30index262"></A><A NAME="ch30index263"></A><A NAME="ch30index264"></A><A NAME="ch30index265"></A></P>
<UL><LI><P class="docList">Preview utility control statements.</P></LI><LI><P class="docList">Override library names for <TT>LISTDEF</TT> lists or <TT>TEMPLATE</TT>s.</P></LI><LI><P class="docList">Specify how to handle errors during list processing.</P></LI><LI><P class="docList">Alter the return code for warning messages.</P></LI><LI><P class="docList">Restore all default options.</P></LI></UL>
<P class="docText">The processing options set using the <TT>OPTIONS</TT> statement remain in effect for the duration of the job step, or until they are overridden by another <TT>OPTIONS</TT> statement in the same job step.</P>
<P class="docText">The <TT>OPTIONS</TT> control statement requires no specific privileges to be specified. Of course, the process or user running the utility also must have the requisite authority to execute the actual utility that is being executed with the <TT>OPTIONS</TT> statement.</P>
<P class="docText"><TT>OPTIONS</TT> is not a utility itself, but a control statement used to set up the environment for other utilities to run. The <TT>OPTIONS</TT> statement is simply stored until it is referenced by a DB2 utility. When the <TT>OPTIONS</TT> statement is referenced, the list specified for that utility will be expanded and the concurrency and compatibility restrictions of that utility will apply. In addition, the catalog tables necessary to expand the list also must be available for read-only access.<A NAME="ch30index266"></A><A NAME="ch30index267"></A><A NAME="ch30index268"></A><A NAME="ch30index269"></A><A NAME="ch30index270"></A><A NAME="ch30index271"></A></P>
<A NAME="ch30lev3sec9"></A><H5 class="docSection3Title">Using <TT>OPTIONS</TT></H5>
<P class="docText">Two keywords can be used in conjunction with <TT>OPTIONS</TT>: <TT>PREVIEW</TT> and <TT>OFF</TT>.<A NAME="ch30index272"></A><A NAME="ch30index273"></A><A NAME="ch30index274"></A><A NAME="ch30index275"></A><A NAME="ch30index276"></A><A NAME="ch30index277"></A></P>
<P class="docText">The <TT>PREVIEW</TT> keyword is similar to the JCL <TT>PREVIEW</TT> parameter. It is used to check for syntax errors in subsequent utility control cards and will not execute the utilities. For example, <TT>PREVIEW</TT> can be used in conjunction with <TT>LISTDEF</TT> to expand a list in order to verify that the proper database objects have been included in the list.</P>
<P class="docText">The <TT>OFF</TT> keyword can be used to restore to the default options. Using <TT>OPTIONS OFF</TT> will not override the <TT>PREVIEW</TT> JCL parameter, which, if specified, remains in effect for the entire job step. When specifying <TT>OPTIONS OFF</TT>, no other <TT>OPTIONS</TT> keywords may be used.<A NAME="ch30index278"></A><A NAME="ch30index279"></A><A NAME="ch30index280"></A><A NAME="ch30index281"></A><A NAME="ch30index282"></A></P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch30lev1sec3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch30lev1sec5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
