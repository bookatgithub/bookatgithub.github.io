<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>The RECOVER Utility</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch32lev1sec4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch32lev1sec6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch32lev1sec5"></A><H3 class="docSection1Title">The <TT>RECOVER</TT> Utility</H3>
<P class="docText">The recovery of DB2 data is an automated process rigorously controlled by the database management system. <A class="docLink" HREF="#ch32fig01">Figure 32.1</A> shows the flow of normal DB2 recovery. The standard unit of recovery for DB2 is the table space. As of DB2 V6, indexes can be copied using the <TT>COPY</TT> utility and recovered using the <TT>RECOVER</TT> utility. The DB2 <TT>COPY</TT> utility is used to create an image copy backup. All DB2 image copy data set information is recorded in the DB2 Catalog in the <TT>SYSIBM.SYSCOPY</TT> table. It is not necessary to keep track of the image copy data sets externally because DB2 manages this information independent of the application code.<A NAME="ch32index305"></A><A NAME="ch32index306"></A></P>
<A NAME="ch32fig01"></A><p><CENTER><H5 class="docFigureTitle">Figure 32.1. DB2 recovery.</H5>
<p class="docText"><IMG BORDER="0" width="450" height="498" SRC="images/0672326132/graphics/32fig01.gif" ALT="graphics/32fig01.gif"></p></CENTER></p><br>
<P class="docText">DB2 is also responsible for keeping a log of all changes made to table spaces. With a few exceptions, all updates are recorded in the DB2 <span class="docEmphasis">active log</span>. When an active log is full, DB2 creates an <span class="docEmphasis">archive log</span>. Many archive logs are created during normal DB2 application processing. All this information is stored in the DB2 Directory's <TT>SYSIBM.SYSLGRNX</TT> table and the Boot Strap Data Set (BSDS). Refer to <A class="docLink" HREF="ch22.html#ch22">Chapter 22</A>, "The Table-Based Infrastructure of DB2," for a complete description of the internal DB2 tables and data sets.<A NAME="ch32index307"></A><A NAME="ch32index308"></A><A NAME="ch32index309"></A><A NAME="ch32index310"></A><A NAME="ch32index311"></A><A NAME="ch32index312"></A><A NAME="ch32index313"></A><A NAME="ch32index314"></A></P>
<P class="docText">The DB2 <TT>RECOVER</TT> utility reads all control information pertaining to data recovery and applies the recorded changes contained in the copies and logs, as instructed by the DBMS and the <TT>RECOVER</TT> utility control parameters.</P>
<P class="docText">Basically, the <TT>RECOVER</TT> utility is used to restore DB2 table spaces and indexes to a specific point in time. You can run two forms of the <TT>RECOVER</TT> utility: <A class="docLink" HREF="ch32lev1sec6.html#ch32lev2sec16"><TT>RECOVER TABLESPACE</TT></A> and <A class="docLink" HREF="ch32lev1sec6.html#ch32lev2sec17"><TT>RECOVER INDEX</TT></A>. Both are discussed in the following sections.</P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch32lev1sec4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch32lev1sec6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
