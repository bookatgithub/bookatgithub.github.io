<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>CICS Commands</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch36lev1sec6.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch36lev1sec8.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch36lev1sec7"></A><H3 class="docSection1Title">CICS Commands</H3>
<P class="docText">The CICS commands affect the operation of DB2 and CICS. CICS commands must be issued from a valid terminal connected to CICS, and the issuer must have the appropriate CICS authority.<A NAME="ch36index387"></A><A NAME="ch36index388"></A></P>
<P class="docText">All CICS commands that pertain to DB2 are prefixed with <TT>DSNC</TT>. <TT>DSNC</TT> is a CICS transaction that enables the execution of DB2 commands from a CICS terminal.</P>
<P class="docText">The following CICS commands pertain to DB2:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="187"><COL width="363"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Enables the user to issue DB2 environment commands from a CICS terminal. For example:<A NAME="ch36index389"></A><A NAME="ch36index390"></A></P>

<PRE>
DSNC -DISPLAY THREAD(*)
</PRE><BR>

<P class="docText"><TT>DSNC</TT> is also a required prefix for all CICS commands related to DB2.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC DISCONNECT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Enables the user to disconnect DB2 threads.<A NAME="ch36index391"></A><A NAME="ch36index392"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC DISPLAY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Displays resource and statistical information for CICS transactions that access DB2 data. If more than one page of information is displayed by this command, use the following syntax to page through the information. At the top of the CICS screen, enter <TT>P/</TT><span class="docEmphasis"><TT>x</TT></span>, where <span class="docEmphasis"><TT>x</TT></span> is a number indicating which page to display. <TT>P/1</TT> displays page 1, <TT>P/2</TT> displays page 2, and so on.<A NAME="ch36index393"></A><A NAME="ch36index394"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC MODIFY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Enables the modification of the message queue destination of the <TT>DB2CONN</TT>; and the maximum active thread value for the pool, for <TT>DSNC</TT> commands, or for <TT>DB2ENTRY</TT>.<A NAME="ch36index395"></A><A NAME="ch36index396"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC STOP</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Disables the CICS attachment to DB2.<A NAME="ch36index397"></A><A NAME="ch36index398"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSNC STRT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Enables the CICS attachment to DB2.<A NAME="ch36index399"></A><A NAME="ch36index400"></A><A NAME="ch36index401"></A><A NAME="ch36index402"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch36lev2sec6"></A><H4 class="docSection2Title">CICS Command Guidelines</H4>
<P class="docText">The following techniques are useful when issuing CICS commands that impact DB2.</P>
<A NAME="ch36lev4sec55"></A><H5 class="docSection3Title">Control the Use of Critical CICS Commands</H5>
<P class="docText">The <TT>DSNC DISCONNECT</TT>, <TT>DSNC MODIFY</TT>, <TT>DSNC STRT</TT>, and <TT>DSNC STOP</TT> commands should be secured commands. Because these commands can damage CICS transactions that are being processed, they should be avoided during peak processing times. A centralized authority consisting of only systems programmers and DBAs should administer and invoke these commands.<A NAME="ch36index403"></A><A NAME="ch36index404"></A></P>
<A NAME="ch36lev4sec56"></A><H5 class="docSection3Title">Use <TT>DSNC DISPLAY PLAN</TT> to Monitor DB2 Threads</H5>
<P class="docText">Use the <TT>DSNC DISPLAY PLAN</TT> (or <TT>DSNC DISPLAY TRANSACTION</TT>) command to get information about DB2 threads. For each created thread, the following output is returned:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="165"><COL width="385"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2ENTRY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Name of the <TT>DB2ENTRY</TT>, <TT>*COMMAND</TT> for <TT>DSNC</TT> command calls, or <TT>*POOL</TT> for pool statistics.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Status of the threads where "A" indicates active within a unit of work and "I" indicates that a protected thread is waiting for work.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PLAN</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Plan name associated with this thread.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PRI–AUTH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Primary authorization ID for the thread.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SEC–AUTH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Secondary authorization ID for the thread, if one exists.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CORRELATION</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Correlation ID for the thread (12 bytes).</P></TD></TR></TABLE></P><br>
<A NAME="ch36lev4sec57"></A><H5 class="docSection3Title">Use <TT>DSNC DISPLAY STATISTICS</TT> to Monitor DB2 Transaction Information</H5>
<P class="docText">Use the <TT>DSNC DISPLAY STATISTICS</TT> command to obtain statistics for DB2 transactions. The information provided by this command is an accumulation of statistical counters because the CICS attachment to DB2 is activated with the <TT>DSNC STRT</TT> command. Directly after the DB2 subsystem is attached to CICS, all of these numbers are 0; this should be taken into account in analyzing these statistics. For example, these counters are significantly smaller if the attachment is stopped and started daily instead of once a month.<A NAME="ch36index405"></A><A NAME="ch36index406"></A><A NAME="ch36index407"></A><A NAME="ch36index408"></A><A NAME="ch36index409"></A></P>
<P class="docText">The <TT>DSNC DISPLAY STATISTICS</TT> command will provide the following output:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="88"><COL width="462"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DB2ENTRY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Name of the <TT>DB2ENTRY</TT>, <TT>*COMMAND</TT> for <TT>DSNC</TT> command calls, or <TT>*POOL</TT> for pool statistics.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PLAN</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Plan name associated with this entry. <TT>DSNC</TT> does not have a transaction associated with it, so <TT>PLAN</TT> is blank. A string of asterisks indicates that dynamic plan allocation was specified for this entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CALLS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of SQL executions issued by transactions associated with this <TT>RCT</TT> entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>AUTHS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of sign-ons for transactions associated with this <TT>RCT</TT> entry. A sign-on occurs only when a new thread is created or when an existing thread is reused with a new authid or a different plan.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>W/P</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of times any transaction associated with this entry was diverted to the pool or had to wait for an available thread.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>HIGH</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">High-water mark for the number of threads needed by any transaction associated with this entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ABORTS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of aborts, including both abends and rollbacks, encountered by transactions associated with this entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>COMMITS</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of <TT>COMMIT</TT>s executed by transactions associated with this entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>1-PHASE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of single phase commits for transactions associated with this entry.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>2-PHASE</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Number of two-phase commits for transactions associated with this entry.<A NAME="ch36index410"></A><A NAME="ch36index411"></A></P></TD></TR></TABLE></P><br>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch36lev1sec6.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch36lev1sec8.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
