<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>DB2 Tools</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch39.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch39lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch39lev1sec1"></A><H3 class="docSection1Title">DB2 Tools</H3>
<P class="docText">The sheer number of DB2 add-on tools that are available in the marketplace validates the need for these tools. Most DB2 shops implement one or more add-on tools for DB2. Of these, IBM's QMF is among the most popular. Many more tools from other vendors fill the void for optimizing performance, implementing database changes, and ensuring database recoverability, just to name a few of their capabilities. <A class="docLink" HREF="#ch39table01">Table 39.1</A> provides a rundown of the categories of products.</P>
<A NAME="ch39table01"></A><P><TABLE CELLSPACING="0" FRAME="hsides" RULES="groups" CELLPADDING="5"><CAPTION><h5 class="docTableTitle">Table 39.1. Categories of DB2 Products</h5></CAPTION><COLGROUP><COL width="82.5"><COL width="467.5"></COLGROUP><THEAD><TR><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Abbrev</span></P></TH><TH class="bottomBorder thead" align="left" valign="top"><P class="docText"><span class="docEmphStrong">Tool Category Definition</span></P></TH></TR></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ALT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that administer the SQL necessary to change DB2 objects without losing either authorization or other, dependent objects</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>AUD</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that read the DB2 logs and report on data modification and database changes. May also re-apply SQL from log images.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>CAT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that enable panel-driven (or GUI-based) access to the DB2 Catalog without having to code actual SQL queries.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>COM</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that reduce data storage requirements using compression algorithms.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>C/S</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2-related client/server tools for building applications, connecting databases, or enabling remote access. Includes middleware and gateways.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DBA</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Database administration and analysis tools that enable a DBA to determine when to reorganize table spaces and indexes. Useful for implementing proactive tuning.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DES</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Database modeling and design tools such as upper <TT>CASE</TT> tools, entity-relationships diagramming tools, and tools to enable logical to physical model translation.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DSD</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that monitor and manage DB2 DASD and space management.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>EDT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that provide an ISPF (or GUI-based) editor for accessing, manipulating, and modifying data in DB2 tables. Data is typically displayed using a spreadsheet-like interface and can be modified simply by over-typing (instead of issuing SQL statements).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>ETL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that extract, transform, and load data from environment to environment (such as from IMS to DB2). Frequently used in data warehousing projects.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>IDX</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that analyze your index usage to rate index effectiveness based on SQL statement usage.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>INT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that manage and implement data integrity (check constraints) and referential integrity (RI).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MIG</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that create and administer the requisite SQL to migrate DB2 objects from one DB2 subsystem to another.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>MSC</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Miscellaneous tools (do not fit into one of the other categories).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>NET</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that enable DB2 databases to be connected to the Internet, intranet, and the World Wide Web.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>OPR</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Operational support tools, such as on-line DB2 standards manuals, change control systems, and schedulers.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PC</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">PC- and workstation-based DBMSs that mimic DB2 execution such that application development chores can be offloaded from the mainframe.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PLN</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that analyze and evaluate the access paths for individual SQL statements and SQL in plans and packages. May also provide suggestions for how to improve the SQL.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PM</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 performance monitors.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PRF</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">DB2 and SQL optimization products that enhance database and application performance.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>PRG</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that assist the application developer, such as lower <TT>CASE</TT> tools, 4GLs, SQL generation tools, SQL formatting tools, and application testing tools.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>QMF</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that augment the functionality and/or enhance the performance of QMF. Examples include query compilers and QMF object administration tools.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>QRY</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that provide an integrated environment for developing and issuing queries against DB2 tables. May be ISPF- or GUI-based. OLAP tools fall under this category.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>REP</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that store, manage, and enable access to metadata (such as repositories and data dictionaries).</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SEC</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Security and authorization tools.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>UTL</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Tools that generate DB2 utility JCL or enhance DB2 utility functions by providing faster, more efficient execution.<A NAME="ch39index03"></A><A NAME="ch39index04"></A></P></TD></TR></TABLE></P><br>
<P class="docText">These types of add-on tools can significantly improve the efficiency of DB2 application development. Even IBM is beginning to understand the need for better management tools. IBM provides several DBA tools for free with DB2, including:</P>
<UL><LI><p class="docText">
<span class="docEmphRoman">DB2 Control Center</span>: 
A tool for viewing and managing DB2 databases</p></LI><LI><p class="docText">
<span class="docEmphRoman">DB2 Development Center</span>: 
A tool for creating, installing, and testing DB2 stored procedures (previously called DB2 Stored Procedure Builder)</p></LI><LI><p class="docText">
<span class="docEmphRoman">DB2 Installer</span>: 
A GUI-based installation assistant</p></LI><LI><p class="docText">
<span class="docEmphRoman">DB2 Visual Explain</span>: 
Graphically presents DB2 <TT>EXPLAIN</TT> output</p></LI><LI><p class="docText">
<span class="docEmphRoman">DB2 Estimator</span>: 
A tool for estimating the performance of DB2 applications</p></LI><LI><p class="docText">
<span class="docEmphRoman">DB2 Warehouse Center</span>: 
Provides a GUI-driven control center for creating and managing DB2-based data warehoused</p></LI></UL>
<P class="docText">Of course, IBM has sold other DB2 tools for a fee such as QMF and DB2-PM for quite some time now. Recently, IBM augmented its portfolio of add-on DB2 tools, and they now compete with the primary DB2 tool vendors such as BMC Software and Computer Associates.<A NAME="ch39index05"></A><A NAME="ch39index06"></A></P>
<P class="docText">In the following sections, each tool category is described, along with a discussion of desired features. In evaluating products, look for features important to your organization. These lists are not comprehensive, but they provide a good starting point for the evaluation process.</P>
<A NAME="ch39lev2sec1"></A><H4 class="docSection2Title">Table Altering Tools</H4>
<P class="docText">DB2 provides the capability to modify the structure of existing objects using the <TT>ALTER</TT> DDL statement. The <TT>ALTER</TT> statement, however, is a functionally crippled statement. Many times DBAs find themselves in a position where it would be nice to be able to alter all the parameters that can be specified for an object; but DB2 does not support this. For example, you can add columns to an existing table (only at the end), but you cannot remove columns from a table. The table must be dropped and then re-created without the columns you want to remove.<A NAME="ch39index07"></A><A NAME="ch39index08"></A><A NAME="ch39index09"></A><A NAME="ch39index10"></A></P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" width="30" height="18" SRC="images/0672326132/graphics/V8_icon.gif" ALT="graphics/V8_icon.gif"></td><td valign="top"><P class="docText"> Of course, IBM is making in-roads into removing some of these obstacles. DB2 Version 8 provides online schema evolution, whereby more types of changes can be implemented with minimal impact to data availability. For more details on online schema changes refer to <A class="docLink" HREF="ch07.html#ch07">Chapter 7</A>, "Database Change Management and Schema Evolution."</P></td></tr></table><br>
<P class="docText">Another problem that DBAs encounter in modifying DB2 objects is the cascading drop effect. If a change to a table space mandates its being dropped and re-created (for example, changing the limit keys of a partitioned table space), all dependent objects are dropped when the table space is dropped. This includes the following:</P>
<BLOCKQUOTE><P><P class="docList">All tables in the table space</P></P><P><P class="docList">All information in <TT>SYSCOPY</TT> (including image copy information)</P></P><P><P class="docList">All indexes on the tables</P></P><P><P class="docList">Primary and foreign keys</P></P><P><P class="docList">Check constraints</P></P><P><P class="docList">Synonyms and views</P></P><P><P class="docList">Labels and comments</P></P><P><P class="docList"><TT>FIELDPROC</TT> and <TT>EDITPROC</TT> assignments</P></P><P><P class="docList"><TT>RUNSTATS</TT> values</P></P><P><P class="docList">All authorization below the table space level statistics</P></P></BLOCKQUOTE>
<P class="docText">Ensuring that DDL is issued after the modification to reverse the effects of cascading drops can be a tedious, complex, and error-prone procedure.</P>
<P class="docText">Many types of DB2 object alteration cannot be performed using the generic DB2 <TT>ALTER</TT> statement. Several examples follow:</P>
<BLOCKQUOTE><P><P class="docList">You cannot change the name of a database, alias, view, column, constraint, table space, or index.</P></P><P><P class="docList">You cannot create a database based on the attributes of an existing database.</P></P><P><P class="docList">You cannot create a table space based on the attributes of an existing table space.</P></P><P><P class="docList">You cannot change the database in which the table space exists.</P></P><P><P class="docList">You cannot change the table space type (for example, changing a simple table space to a segmented or partitioned table space).</P></P><P><P class="docList">You cannot change the <TT>SEGSIZE</TT> of a segmented table space.</P></P><P><P class="docList">You cannot copy primary and foreign keys using <TT>CREATE LIKE</TT>; this command creates a new table based on the columns of another table.</P></P><P><P class="docList">You cannot move a table from one table space to another.</P></P><P><P class="docList">You cannot rearrange column ordering.</P></P><P><P class="docList">You cannot add a column into the middle of other columns; only at the end of the table.</P></P><P><P class="docList">You cannot decrease the length of a column (you <span class="docEmphasis">can</span> increase length).</P></P><P><P class="docList">You cannot remove columns from a table.</P></P><P><P class="docList">You cannot change the primary key without dropping and re-creating the primary key.</P></P><P><P class="docList">You cannot add to a table a column specified as <TT>NOT NULL</TT>.</P></P><P><P class="docList">You cannot add any columns to a table defined with an <TT>EDITPROC</TT>.</P></P><P><P class="docList">You cannot add columns to a table defined with an <TT>EDITPROC</TT>.</P></P><P><P class="docList">You cannot change a table's <TT>EDITPROC</TT> or a column's <TT>VALIDPROC</TT>.</P></P><P><P class="docList">You cannot create a view based on another view.</P></P><P><P class="docList">You cannot add columns to, or remove columns from, a view.</P></P><P><P class="docList">You cannot change the <TT>SELECT</TT> statement on which the view is based.</P></P><P><P class="docList">You cannot create an index based on another index.</P></P><P><P class="docList">You cannot change the index order (ascending or descending).</P></P><P><P class="docList">You cannot create an alias based on another alias.</P></P><P><P class="docList">You cannot change the location of the alias.</P></P><P><P class="docList">You cannot change the table on which the alias is based.<A NAME="ch39index11"></A><A NAME="ch39index12"></A><A NAME="ch39index13"></A><A NAME="ch39index14"></A></P></P></BLOCKQUOTE>
<P class="docText">This list provides the justification needed to obtain an alter tool. Such a tool provides an integrated environment for altering DB2 objects. The burden of ensuring that a change to a DB2 object does not cause other implicit changes is moved from the DBA to the tool.</P>
<P class="docText">At a minimum, an alter tool should perform the following functions:</P>
<UL><LI><P class="docList">Maintain tables easily without manually coding SQL.</P></LI><LI><P class="docList">Retain or reapply all dependent objects and security affected by the requested alter if a drop is required.</P></LI><LI><P class="docList">Retain or reapply all statistical information for dropped objects.</P></LI><LI><P class="docList">Navigate hierarchically from object to object, making alterations as it goes.</P></LI><LI><P class="docList">Provide panel-driven, or point-and-click modification showing before and after definitions of the DB2 objects before the changes are applied.</P></LI><LI><P class="docList">Batch requested changes into a work list that can be executing in the foreground or the background.</P></LI><LI><P class="docList">Analyze changes to ensure that the requested alterations do not violate any DB2 DDL rules. For example, if a series of changes is requested and one change causes a subsequent change to be invalid (an object is dropped, for instance), this should be flagged before execution.</P></LI><LI><P class="docList">Control the environment in which changes are made.</P></LI><LI><P class="docList">Provide for rapid restarts with minimal or no manual intervention required in the event the alter script fails.</P></LI><LI><P class="docList">Be capable of monitoring changes as they are applied.<A NAME="ch39index15"></A><A NAME="ch39index16"></A><A NAME="ch39index17"></A><A NAME="ch39index18"></A></P></LI></UL>
<A NAME="ch39lev2sec2"></A><H4 class="docSection2Title">Auditing Tools</H4>
<P class="docText">An audit is the examination of a practice to determine its correctness. DB2 auditing software therefore should help in monitoring the data control, data definition, and data integrity in the DB2 environment. Several mechanisms provided by DB2 enable the creation of an audit trail, but this trail can be difficult to follow.<A NAME="ch39index19"></A><A NAME="ch39index20"></A><A NAME="ch39index21"></A><A NAME="ch39index22"></A></P>
<P class="docText">The primary vehicle provided by DB2 for auditing is the audit trace. This feature enables DB2 to trace and record auditable activity initiated by specific users. When the DB2 audit trace is activated, the following type of information can be captured to the trace destination:<A NAME="ch39index23"></A></P>
<BLOCKQUOTE><P><P class="docList">Authorization failures</P></P><P><P class="docList">Grant and revoke SQL statements</P></P><P><P class="docList">DDL issued against auditable tables</P></P><P><P class="docList">DML issued against auditable tables</P></P><P><P class="docList">Bind requests involving auditable tables</P></P><P><P class="docList">Authorization ID changes requested by the <TT>SET CURRENT SQLID</TT> statement</P></P><P><P class="docList">Utility executions</P></P></BLOCKQUOTE>
<P class="docText">An <span class="docEmphasis">auditable table</span> is any table defined to DB2 with the <TT>AUDIT</TT> clause of the <TT>CREATE TABLE</TT> statement. There are three options for table auditing: <TT>NONE</TT>, <TT>CHANGES</TT>, and <TT>ALL</TT>. Specifying <TT>AUDIT NONE</TT>, which is the default, disables table auditing so that the audit trace does not track that table. Specifying <TT>AUDIT CHANGES</TT> indicates that the first <TT>DELETE</TT>, <TT>INSERT</TT>, or <TT>UPDATE</TT> statement issued against that table in every application unit of work (<TT>COMMIT</TT> scope) is recorded. <TT>AUDIT ALL</TT> records the first DML statement of any type accessing this table in each application unit of work. Note, however, that this information is tracked only if the appropriate audit trace is activated. Refer to <A class="docLink" HREF="ch24.html#ch24">Chapter 24</A>, "Traditional DB2 Performance Monitoring," for more information on DB2 audit traces.<A NAME="ch39index24"></A><A NAME="ch39index25"></A><A NAME="ch39index26"></A><A NAME="ch39index27"></A><A NAME="ch39index28"></A><A NAME="ch39index29"></A></P>
<P class="docText">This information is written to the output trace destination specified for the audit trace. DB2 trace records can be written to GTF, SMF, or an OP buffer. After the information has been written to the specified destination, the problem of how to read this information still exists. If you have DB2-PM, you can run the appropriate audit reports, but even these can be insufficient for true auditing.</P>
<P class="docText">An audit tool should provide five important features that DB2's audit tracing capability does not. DB2 auditing requires a trace to be activated, and this can quickly become expensive if many tables must be audited. The first feature an auditing tool should provide is the capability to read the DB2 logs, which are always produced, and report on update activity as needed. This reduces overhead because it uses the regular processing features of DB2 rather than an additional tracing feature, which increases overhead.</P>
<P class="docText">The DB2 audit trace records a trace record only for the first statement in a unit of work. The second feature of the auditing tool is reporting all data modification from the DB2 logs.</P>
<P class="docText">The DB2 audit trace facility does not record the specifics of the data modification. The third feature of an auditing tool is reporting who (by authorization ID) makes each change, and also showing a before and after image of the changed data.</P>
<P class="docText">The fourth feature the auditing tool should provide is the capability to report on the DB2 audit trace data if so desired.</P>
<P class="docText">A fifth feature of a DB2 auditing tool is to access the DB2 logs to create redo (or undo) SQL scripts that can be run to re-apply data modifications that occurred during a specific timespan. Although this feature does not provide a true auditing function, it is a common feature since auditing tools by their very nature must access the DB2 logs.</P>
<A NAME="ch39note01"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">Another name for generating undo and redo SQL from the log is transaction recovery. An undo transaction recovery involves generating undo SQL statements to reverse the effect of the transactions in error. To generate undo SQL, the database log is read to find the data modifications that were applied during a given timeframe and<A NAME="ch39index30"></A><A NAME="ch39index31"></A></P>
<UL><LI><P class="docList"><TT>INSERT</TT>s are turned into <TT>DELETE</TT>s</P></LI><LI><P class="docList"><TT>DELETE</TT>s are turned into <TT>INSERT</TT>s</P></LI><LI><P class="docList"><TT>UPDATE</TT>s are turned around to <TT>UPDATE</TT> to the prior value</P></LI></UL>
<P class="docText">Redo is a similar form of transaction recovery. But instead of generating SQL for the bad transaction that we want to eliminate, we generate the SQL for the transactions we want to save. Then, we do a standard point in time recovery eliminating all the transactions since the recovery point. Finally, we reapply the good transactions captured in the first step.<A NAME="ch39index32"></A><A NAME="ch39index33"></A><A NAME="ch39index34"></A><A NAME="ch39index35"></A><A NAME="ch39index36"></A></P>
<P class="docText">Unlike the undo process, which creates SQL statements that are designed to back out all of the problem transactions, the redo process creates SQL statements that are designed to reapply only the valid transactions from a consistent point of recovery to the current time. Because the redo process does not generate SQL for the problem transactions, performing a recovery and then executing the redo SQL can restore the table space to a current state that does not include the problem transactions.</P></div><br>
<P class="docText">Finally, the auditing tool should provide both standard reports and the capability to create site-specific reports (either from the log or from the DB2 audit trace data).</P>
<P class="docText">If your shop has strict auditing requirements, an auditing tool is almost mandatory because of DB2's weak inherent auditing capabilities. Additional things to look for in an auditing tool include the following:</P>
<UL><LI><P class="docList">The tool should consume minimal resources. Before acquiring an auditing tool, determine the estimated I/O and CPU overhead of running the auditing tool to make sure that it will not disrupt your service level agreements for DB2 applications or consume excessive resources.</P></LI><LI><P class="docList">The tool should be able to understand DB2 audit trace data and provide formatted reports of the audit trace data, including reports on DDL, DML, and DCL executions.</P></LI><LI><P class="docList">Online and batch reporting options should be provided.</P></LI><LI><P class="docList">The tool should be able to capture additional information from the DB2 transaction logs.</P></LI><LI><P class="docList">Of high importance, the tool should be able to identify the <TT>authid</TT> of any user that modifies and DB2 data in any table being audited.</P></LI><LI><P class="docList">Finally, the tool should be able to read the transaction log and generate undo and redo SQL for transaction recovery.<A NAME="ch39index37"></A><A NAME="ch39index38"></A><A NAME="ch39index39"></A><A NAME="ch39index40"></A></P></LI></UL>
<A NAME="ch39lev2sec3"></A><H4 class="docSection2Title">DB2 Catalog Query and Analysis Tools</H4>
<P class="docText">The DB2 Catalog contains a wealth of information essential to the operation of DB2. Information about all DB2 objects, authority, and recovery is stored and maintained in the DB2 Catalog. This system catalog is composed of DB2 tables and can be queried using SQL. The data returned by these queries provides a base of information for many DB2 monitoring and administrative tasks.<A NAME="ch39index41"></A><A NAME="ch39index42"></A><A NAME="ch39index43"></A><A NAME="ch39index44"></A></P>
<P class="docText">Coding SQL can be a time-consuming process. Often, you must combine information from multiple DB2 Catalog tables to provide the user with facts relevant for a particular task. This can be verified by reexamining the DB2 Catalog queries presented in <A class="docLink" HREF="ch26.html#ch26">Chapter 26</A>, "DB2 Object Monitoring Using the DB2 Catalog and RTS."</P>
<P class="docText">Add-on tools can ease the burden of developing DB2 Catalog queries. The basic feature common to all DB2 Catalog tools is the capability to request DB2 Catalog information using a screen-driven interface without coding SQL statements. Analysts can obtain rapid access to specific facts stored in the DB2 Catalog without the burden of coding (sometimes quite complex) SQL. Furthermore, procedural logic is sometimes required to adequately query specific types of catalog information.</P>
<P class="docText">Instead of merely enabling data access, many DB2 Catalog tools can do one or more of the following:</P>
<UL><LI><P class="docList">Create syntactically correct DDL statements for all DB2 objects by reading the appropriate DB2 Catalog tables. These statements are generally executed immediately or saved in a sequential data set for future reference or use.</P></LI><LI><P class="docList">Modify the "updateable" DB2 Catalog statistical columns using an editor interface (for example, a non-SQL interface).</P></LI><LI><P class="docList">Create syntactically correct DCL statements from the DB2 Catalog in the same way that DDL is generated.</P></LI><LI><P class="docList">Perform "drop analysis" on an SQL <TT>DROP</TT> statement. This analysis determines the effect of the cascading drop by detailing all dependent objects and security that will be deleted as a result of executing the <TT>DROP</TT>.</P></LI><LI><P class="docList">Provide a hierarchical listing of DB2 objects. For example, if a specific table is chosen, the tool can migrate quickly up the hierarchy to show its table space and database, or down the hierarchy to show all dependent indexes, views, synonyms, aliases, referentially connected tables, and plans.</P></LI><LI><P class="docList">Create and drop DB2 objects, and grant and revoke DB2 security from a screen without coding SQL. Additionally, some tools log all drops and revokes so that they can be undone in the event of an inadvertent drop or revoke execution.</P></LI><LI><P class="docList">Specify the <TT>ISOLATION</TT> clause to access DB2 data using cursor stability, repeatable read, read stability, or uncommitted read processing.</P></LI><LI><P class="docList">Serve as a launching point for utilities and commands to be executed.</P></LI><LI><P class="docList">Operate on the DB2 Catalog or on a copy of the DB2 Catalog to reduce system-wide contention.</P></LI></UL>
<P class="docText">These features aid the DBA in performing his day-to-day duties. Furthermore, a catalog query tool can greatly diminish the amount of time required for a junior DBA to become a productive member of the DBA team.<A NAME="ch39index45"></A><A NAME="ch39index46"></A><A NAME="ch39index47"></A><A NAME="ch39index48"></A></P>
<A NAME="ch39lev2sec4"></A><H4 class="docSection2Title">Compression Tools</H4>
<P class="docText">A standard tool for reducing DASD costs is the compression utility. This type of tool operates by applying an algorithm to the data in a table so that the data is encoded in a more compact area. By reducing the amount of area needed to store data, DASD costs are decreased. Compression tools must compress the data when it is added to the table and subsequently modified, and then expand the data when it is later retrieved (see <A class="docLink" HREF="#ch39fig01">Figure 39.1</A>).<A NAME="ch39index49"></A><A NAME="ch39index50"></A><A NAME="ch39index51"></A><A NAME="ch39index52"></A></P>
<A NAME="ch39fig01"></A><p><CENTER><H5 class="docFigureTitle">Figure 39.1. A DB2 table compression routine at work.</H5>
<p class="docText"><IMG BORDER="0" width="300" height="362" SRC="images/0672326132/graphics/39fig01.gif" ALT="graphics/39fig01.gif"></p></CENTER></p><br>
<P class="docText">Third-party compression routines are specified for DB2 tables using the <TT>EDITPROC</TT> clause of the <TT>CREATE TABLE</TT> statement. The load module name for the compression routine is supplied as the parameter to the <TT>EDITPROC</TT> clause. A table must be dropped and re-created to apply an <TT>EDITPROC</TT>.<A NAME="ch39index53"></A><A NAME="ch39index54"></A></P>
<P class="docText">In general, a compression algorithm increases CPU costs while providing benefits in the areas of decreased DASD utilization and sometimes decreased I/O costs. This trade-off is not beneficial for all tables. For example, if a compression routine saves 30% on DASD costs but increases CPU without decreasing I/O, the trade-off is probably not beneficial.</P>
<P class="docText">A compression tool can decrease DASD by reducing the size of the rows to be stored. CPU use usually increases because additional processing is required to compress and expand the row. I/O costs, however, could decrease.</P>
<P class="docText">Enhancements to DB2 since V2.3 have made most third-party compression tools of little added value. DB2 provides a basic compression routine called <TT>DSN8HUFF</TT>. Still most third-party compression tools provide more efficient compression algorithms and advanced analysis to determine the costs and benefits of compression for a specific table. This changed dramatically with DB2 V3. The internal compression capabilities of DB2 since V3 are such that DB2 compression outperforms third-party compression tools. Even when a third-party compression tool can provide benefit to an organization (perhaps because it offers multiple compression routines geared for different types of data), the return on investment is such that most shops typically stick with internal DB2 compression for new tables. The third-party compression tools, however, have not become obsolete. Many organizations refuse to remove software that is working for any number of reasons (from an "if it ain't broken don't fix it" mentality to "not enough cycles to implement such a vast change"). Indeed, most shops are too busy with production work to support the additional effort of removing the third-party <TT>EDITPROC</TT>s and replacing them with internal DB2 compression.<A NAME="ch39index55"></A><A NAME="ch39index56"></A></P>
<P class="docText">There are other types of compression tools than those that simply compress DB2 table space data. Some tools compress DB2 image copy backup data sets. These are divided into two camps: those that compress DASD backups and those that compress cartridge backups. This type of compression tool can provide the following benefits:</P>
<UL><LI><P class="docList">Reduced backup storage costs</P></LI><LI><P class="docList">Reduced elapsed time for taking backups because fewer tapes must be loaded</P></LI><LI><P class="docList">Fewer physical cartridges required (for local and offsite storage)</P></LI></UL>
<P class="docText">Another type of compression tool is available from several vendors to compress DB2's archive log data sets. By compressing archive logs, you might be able to fit more archive data sets on DASD, thereby improving the performance of a recovery situation.<A NAME="ch39index57"></A><A NAME="ch39index58"></A><A NAME="ch39index59"></A><A NAME="ch39index60"></A></P>
<A NAME="ch39lev2sec5"></A><H4 class="docSection2Title">DB2-Related Client/Server Tools</H4>
<P class="docText">Many applications these days span multiple computing environments. This phenomenon is known as client/server processing, and it has proven to be quite successful because it provides a flexible, distributed computing environment. DB2 is a large participant in the client/server plans for many shops. Providing efficient access to large amounts of data, DB2 for z/OS can function as the ultimate database server in a client/server environment.<A NAME="ch39index61"></A><A NAME="ch39index62"></A><A NAME="ch39index63"></A><A NAME="ch39index64"></A></P>
<P class="docText">This being the case, there are many tools on the market that can ease the burden of implementing and administering DB2 in a client/server environment. Middleware products and database gateways that sit between the client workstation and the mainframe enable access to DB2 as a server. These products can provide access to DB2 for z/OS, to DB2 on other platforms, and also to other DBMS server products (Oracle, Microsoft SQL Server, Sybase Adaptive Server Enterprise, Informix, and so on). Additionally, third-party ODBC and JDBC drivers are available to ease workstation access to mainframe DB2 data.</P>
<P class="docText">Another valid type of client/server tool is a 4GL programming environment that provides seamless access to DB2. These types of products typically split the application workload between the workstation and the server aiding the programmer to rapidly develop DB2 client/server applications.</P>
<A NAME="ch39lev2sec6"></A><H4 class="docSection2Title">Database Analysis Tools</H4>
<P class="docText">DB2 provides only minimal intelligence for database analysis. Usually, a database administrator or performance analyst must keep a vigilant watch over DB2 objects using DB2 Catalog queries or a DB2 Catalog tool. This is not an optimal solution, because it relies on human intervention for efficient database organization, opening up the possibility of human error, forgetting to monitor, and misinterpreting analyzed data.<A NAME="ch39index65"></A><A NAME="ch39index66"></A><A NAME="ch39index67"></A><A NAME="ch39index68"></A></P>
<P class="docText">Fortunately, database analysis tools can proactively and automatically monitor your DB2 environment. This monitoring can perform the following functions:</P>
<UL><LI><P class="docList">Collect statistics for DB2 table spaces and indexes. These statistics can be standard DB2 <TT>RUNSTATS</TT> information, extended statistics capturing more information (for example, data set extents), or a combination of both.</P></LI><LI><P class="docList">Read the VSAM data sets for the DB2 objects to capture current statistics, read <TT>RUNSTATS</TT> from the DB2 Catalog, read tables unique to the tool that captured the enhanced statistics, or any combination of these three.</P></LI><LI><P class="docList">Set thresholds, whereby the automatic scheduling of a <TT>REORG</TT> utility is invoked based on current statistics. Additional alarm capabilities can be available to take corrective action when database problems are encountered or merely to page the DBA on-call when a problem arises.</P></LI><LI><P class="docList">Database analysis tools also can provide a "Swiss-army knife" toolkit for DBAs. Some features to look for include integrity checking, page zapping to fix problems, compression analysis, historical statistics, and interfaces to DB2 utilities and commands.</P></LI><LI><P class="docList">Provide a series of canned reports detailing the potential problems for specific DB2 objects.<A NAME="ch39index69"></A><A NAME="ch39index70"></A><A NAME="ch39index71"></A><A NAME="ch39index72"></A></P></LI></UL>
<A NAME="ch39note02"></A><div class="docNote"><p class="docNoteTitle">NOTE</p><p><table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0" ALIGN="LEFT" width="30" height="18" SRC="images/0672326132/graphics/V7_icon.gif" ALT="graphics/V7_icon.gif"></td><td valign="top"><P class="docText">IBM has embarked on a campaign to add intelligence into the DB2 engine and its utilities. For example, with V6 the <TT>REORG</TT> utility was modified such that it can examine statistics to determine whether or not the reorganization should proceed. Furthermore, a subsequent V7 fix provided the capability for DB2 to collect real-time statistics without manual intervention. This trend will likely continue, and DB2 will become more manageable and self-healing.</P></td></tr></table></p></div><br>
<A NAME="ch39lev2sec7"></A><H4 class="docSection2Title">Database Modeling and Design Tools</H4>
<P class="docText">Database modeling and design tools do not have to be unique to DB2 design, although some are. Application development should be based on sound data and process models. The use of a tool to ensure this is a good practice.<A NAME="ch39index73"></A><A NAME="ch39index74"></A><A NAME="ch39index75"></A><A NAME="ch39index76"></A></P>
<P class="docText">Database modeling and design tools may be referred to as CASE tools. CASE, or computer-aided software engineering, is the process of automating the application development life cycle. A CASE tool, such as a data modeling tool, supports portions of that life cycle. A comprehensive checklist of features to look for in a CASE tool is presented in <A class="docLink" HREF="ch14.html#ch14">Chapter 14</A>, "Alternative DB2 Application Development Methods." Although CASE tools were very popular in the late 1980s and early 1990s, they have not been in vogue since (though some DB2 applications that were developed in a CASE tool environment still run in production).</P>
<P class="docText">Many excellent database design and modeling tools are not specifically designed for DB2 but can be used to develop DB2 applications. Tools developed specifically to support DB2 development, however, add another dimension to the application development effort. They can significantly reduce the development timeframe by automating repetitive tasks and validating the models. If your organization decides to obtain a CASE tool that specifically supports DB2, look for one that can do the following:</P>
<UL><LI><P class="docList">Provide standard features of logical data modeling (such as entity-relationship diagramming and normalization).</P></LI><LI><P class="docList">Create a physical data model geared to DB2. This model should support all features of DB2, such as the capability to depict all DB2 objects, referential integrity, VCAT and STOGROUP-defined table spaces, and capacity planning.</P></LI><LI><P class="docList">Provide an expert system to verify the accuracy of the physical data model and to suggest alternative solutions.</P></LI><LI><P class="docList">Cross-reference the logical model to the physical model, capturing text that supports physical design decisions such as denormalization and the choice of table space type.</P></LI><LI><P class="docList">Automatically generate DB2-standard DDL to fully implement the database defined in the physical data model.</P></LI><LI><P class="docList">Interface with application development tools and data dictionaries available to the organization.<A NAME="ch39index77"></A><A NAME="ch39index78"></A><A NAME="ch39index79"></A><A NAME="ch39index80"></A></P></LI></UL>
<A NAME="ch39lev2sec8"></A><H4 class="docSection2Title">DASD and Space Management Tools</H4>
<P class="docText">DB2 provides basic statistics for space utilization in the DB2 Catalog, but the in-depth statistics required for both space management and performance tuning are woefully inadequate. The queries presented in <A class="docLink" HREF="ch26.html#ch26">Chapter 26</A> form a basis for DB2 DASD management, but critical elements are missing.<A NAME="ch39index81"></A><A NAME="ch39index82"></A><A NAME="ch39index83"></A><A NAME="ch39index84"></A></P>
<P class="docText">Monitoring the space requirements of the underlying VSAM data sets to maintain historical growth information can be difficult without a space management tool. When data sets go into secondary extents, performance suffers. Without a DASD management tool, you would have to monitor Real Time Stats or periodically examine <TT>LISTCAT</TT> output to monitor secondary extents. Both can be time-consuming.</P>
<P class="docText">Additionally, the manner in which DB2 allocates space can result in the inefficient use of DASD. Often space is allocated but DB2 does not use it. Although the <TT>STOSPACE</TT> utility, combined with DB2 queries, provides limited out-of-the-box DASD management, this capability is far from robust. A DASD management tool is the only answer for ferreting out the amount of allocated space versus the amount of used space.</P>
<P class="docText">DASD management tools often interface with other DB2 and DASD support tools such as standard MVS space management tools, database analysis tools, DB2 Catalog query and management tools, and DB2 utility JCL generators.</P>
<A NAME="ch39lev2sec9"></A><H4 class="docSection2Title">DB2 Table Editors</H4>
<P class="docText">The only method of updating DB2 data is with the SQL data manipulation language statements <TT>DELETE</TT>, <TT>INSERT</TT>, and <TT>UPDATE</TT>. Because these SQL statements operate on data a set at a time, multiple rows—or even all of the rows—can be affected by a single SQL statement. Coding SQL statements for every data modification required during the application development and testing phase can be time-consuming.<A NAME="ch39index85"></A><A NAME="ch39index86"></A><A NAME="ch39index87"></A><A NAME="ch39index88"></A></P>
<P class="docText">A DB2 table editing tool reduces the time needed to make simple data alterations by providing full-screen edit capability for DB2 tables. The user specifies the table to edit and is placed in an edit session that resembles the ISPF editor. The data is presented to the user as a series of rows, with the columns separated by spaces. A header line indicates the column names. The data can be scrolled up and down, as well as left and right. To change data, the user simply types over the current data.</P>
<P class="docText">This type of tool is ideal for supporting the application development process. A programmer can make quick changes without coding SQL. Also, if properly implemented, a table editor can reduce the number of erroneous data modifications made by beginning SQL users.</P>
<A NAME="ch39note03"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">Remember that the table editor is issuing SQL in the background to implement the requested changes. This can cause a lag between the time the user updates the data and the time the data is committed. Table editor updates usually are committed only when the user requests that the data be saved or when the user backs out of the edit session without canceling.</P></div><br>
<P class="docText">Remember too that table editors can consume a vast amount of resources. Ensure that the tool can limit the number of rows to be read into the editing session. For example, can the tool set a filter such that only the rows meeting certain search criteria are read? Can a limit be set on the number of rows to be read into any one edit session? Without this capability, large table space scans can result.</P>
<P class="docText">A DB2 table editor should be used only in the testing environment. End users or programmers might request that a table editor be made available for production data modification. This should be avoided at all costs. The data in production tables is critical to the success of your organization and should be treated with great care. Production data modification should be accomplished only with thoroughly tested SQL or production plans.</P>
<P class="docText">When a table editor is used, all columns are available for update. Thus, if a table editor is used to change production data, a simple mis-keying can cause unwanted updates. Native SQL should be used if you must ensure that only certain columns are updated.</P>
<P class="docText">Tested SQL statements and application plans are characterized by their planned nature. The modification requests were well thought out and tested. This is not true for changes implemented through a table editor.</P>
<P class="docText">Additionally, tested SQL statements and application plans are characterized by their planned nature. The modification requests were well thought out and tested. This is not true for changes implemented through a table editor.</P>
<P class="docText">In addition to simple online browsing and editing of DB2 data using ISPF (or a GUI), the table-editing tool should be able to</P>
<UL><LI><P class="docList">Mimic the functionality of the ISPF editor.</P></LI><LI><P class="docList">Provide both single row and multiple row-at-a-time editing options.</P></LI><LI><P class="docList">Optionally prompt the user before actually applying any changes to the actual data.</P></LI><LI><P class="docList">Cancel accumulated changes of any editing session before exiting.</P></LI><LI><P class="docList">Periodically save the changes without exiting the table editor (as an option).</P></LI><LI><P class="docList">Propagate referential integrity changes.</P></LI><LI><P class="docList">Provide the capability to interface with utilities to copy, load, or unload tables.</P></LI><LI><P class="docList">Interface with your DB2 application testing tools.</P></LI><LI><P class="docList">Apply filters to rows before displaying them in an editing session.</P></LI><LI><P class="docList">Display and save SQL <TT>UPDATE</TT>, <TT>INSERT</TT>, and <TT>DELETE</TT> statements for the accumulated changes of an editing session.</P></LI><LI><P class="docList">Issue SQL within an editing session.</P></LI><LI><P class="docList">Interface with your program editor.</P></LI><LI><P class="docList">Compare data in two tables and show any differences.<A NAME="ch39index89"></A><A NAME="ch39index90"></A><A NAME="ch39index91"></A><A NAME="ch39index92"></A></P></LI></UL>
<P class="docText">Sometimes other DB2 tools, such as a DB2 Catalog query tool, will come with an integrated table editor.</P>
<A NAME="ch39lev2sec10"></A><H4 class="docSection2Title">Extract/Transformation/Load (Data Movement) Tools</H4>
<P class="docText">At times, multiple database management systems coexist in data processing shops. This is increasingly true as shops embark on client/server initiatives. Additionally, the same data (or a subset thereof) might need to be stored in each of the databases. In a multiple DBMS environment, the movement of data from DBMS to DBMS is a tedious task. The need to move data from one environment to another is increasing with the overwhelming acceptance and implementation of data warehouses.<A NAME="ch39index93"></A><A NAME="ch39index94"></A><A NAME="ch39index95"></A><A NAME="ch39index96"></A><A NAME="ch39index97"></A></P>
<P class="docText">ETL tools ease the burden because the tool understands the data format and environment of each DBMS it works with. The data movement and warehousing tool(s) that a shop chooses depends on the following factors:</P>
<UL><LI><P class="docList">How many DBMS products need to be supported?</P></LI><LI><P class="docList">To what extent is the data replicated across the DBMS products?</P></LI><LI><P class="docList">What transformations need to occur as the data is moved from one environment to another? For example, how are data types converted for DBMSs that do not support date, time, and timestamp date (or support these data types using a different format)? Or, more simply, do codes in one system need to be transformed into text in another (for example, "A" becomes "Active", and so on).</P></LI><LI><P class="docList">Does the data have to be synchronized across DBMS products?</P></LI><LI><P class="docList">Is the data static or dynamic?</P></LI><LI><P class="docList">If it is dynamic, is it updated online, in batch, or both?</P></LI></UL>
<P class="docText">The answers to these questions help determine the type of data conversion tool necessary.</P>
<P class="docText">Two basic types of conversion tools are popular in the market today:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="159.5"><COL width="390.5"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Replication tools</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">These tools extract data from external application systems and other databases for population into DB2 tables. This type of tool can extract data from VSAM, IMS, Sybase, Oracle, flat files, or other structures and insert the data into DB2.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText">Propagation tools</P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Inserts data from external applications and other database products into DB2 tables. A propagation tool is similar in function to an extract tool, but propagation tools are active. They constantly capture updates made in the external system, either for immediate application to DB2 tables or for subsequent batch updating. This differs from the extract tool, which captures entire data structures, not data modifications.<A NAME="ch39index98"></A><A NAME="ch39index99"></A><A NAME="ch39index100"></A><A NAME="ch39index101"></A><A NAME="ch39index102"></A></P></TD></TR></TABLE></P><br>
<A NAME="ch39lev2sec11"></A><H4 class="docSection2Title">Integrity Tools</H4>
<P class="docText">Referential integrity has been available on DB2 since the early days of DB2 but it can be difficult to administer and implement properly. RI tools eliminate the difficulty by performing one of the following functions:<A NAME="ch39index103"></A><A NAME="ch39index104"></A><A NAME="ch39index105"></A><A NAME="ch39index106"></A></P>
<UL><LI><P class="docList">Analyzing data for both system- and user-managed referential integrity constraint violations</P></LI><LI><P class="docList">Executing faster than the IBM <TT>CHECK</TT> utility</P></LI><LI><P class="docList">Enabling additional types of RI to be supported; for example, analyzing primary keys for which no foreign keys exist and deleting the primary key row</P></LI></UL>
<P class="docText">Check constraints for data integrity have been available with DB2 since V4. Tools can help implement and maintain check constraints in the following ways:</P>
<UL><LI><P class="docList">Analyzing data for both system- and user-managed data integrity constraint violations</P></LI><LI><P class="docList">Executing faster than the IBM <TT>CHECK</TT> utility</P></LI><LI><P class="docList">Enabling additional types of data integrity to be supported; for example, analyzing the compatibility of check constraints and user-defined <TT>DEFAULT</TT> clauses<A NAME="ch39index107"></A><A NAME="ch39index108"></A><A NAME="ch39index109"></A><A NAME="ch39index110"></A></P></LI></UL>
<A NAME="ch39lev2sec12"></A><H4 class="docSection2Title">DB2 Object Migration Tools</H4>
<P class="docText">DB2 does not provide a feature to migrate DB2 objects from one subsystem to another. This can be accomplished only by manually storing the <TT>CREATE DDL</TT> statements (and all subsequent <TT>ALTER</TT> statements) for future application in another system. Manual processes such as this are error-prone. Also, this process does not take into account the migration of table data, DB2 security, plans, packages, statistics, and so on.<A NAME="ch39index111"></A><A NAME="ch39index112"></A><A NAME="ch39index113"></A><A NAME="ch39index114"></A></P>
<P class="docText">DB2 object migration tools facilitate the quick migration of DB2 objects from one DB2 subsystem to another. They are similar to a table altering tool but have minimal altering capability (some interface directly with an alter tool or are integrated into a single tool). The migration procedure is usually driven by ISPF panels that prompt the user for the objects to migrate.</P>
<P class="docText">Migration typically can be specified at any level. For example, if you request the migration of a specific database, you also could migrate all dependent objects and security. A renaming capability typically is provided so that database names, authorization IDs, and other objects are renamed according to the standards of the receiving subsystem. When the parameters of the migration have been specified completely, the tool creates a job stream to implement the requested DB2 objects in the requested DB2 subsystem.</P>
<P class="docText">A migration tool reduces the time required by database administrators to move DB2 databases from environment to environment (for example, from test to production). Quicker turnaround results in a more rapid response to user needs, thereby increasing the efficiency of your business.</P>
<P class="docText">Typically, migration tools are the second DB2 tool that an organization acquires (right after a DB2 Catalog query product).</P>
<A NAME="ch39lev2sec13"></A><H4 class="docSection2Title">Miscellaneous Tools</H4>
<P class="docText">Many types of DB2 tools are available. The categories in this chapter cover the major types of DB2 tools, but not all tools can be easily pigeonholed. For example, consider a DB2 table space calculator. It reads table DDL and information on the number of rows in the table to estimate space requirements. A space calculator is often provided with another tool, such as a DASD management tool or a database design and modeling tool.<A NAME="ch39index115"></A><A NAME="ch39index116"></A><A NAME="ch39index117"></A><A NAME="ch39index118"></A></P>
<P class="docText">The number and types of DB2 tools that are available in the market are constantly growing and are limited only by the imagination and ingenuity of the programmers and vendors offering these solutions.</P>
<A NAME="ch39lev2sec14"></A><H4 class="docSection2Title">Internet Enabling Tools</H4>
<P class="docText">The Internet is the hottest technology trend of the past decade. Every organization is looking for ways to increase their competitive advantage by making corporate data available to customers, partners, and employees over the Internet, intranet, and extranets.<A NAME="ch39index119"></A><A NAME="ch39index120"></A><A NAME="ch39index121"></A><A NAME="ch39index122"></A></P>
<P class="docText">A specialized category of tools is available to hook DB2 data to the Web. These tools are referred to as Internet-enabling tools. For more information on the Internet and IBM's tools for connecting the Web to DB2, refer to <A class="docLink" HREF="ch17.html#ch17">Chapter 17</A>, "DB2 and the Internet."</P>
<A NAME="ch39lev2sec15"></A><H4 class="docSection2Title">Operational Support Tools</H4>
<P class="docText">Many avenues encompass operational support in a DB2 environment, ranging from standards and procedures to tools that guarantee smoother operation. This section describes tools from several operational support categories.<A NAME="ch39index123"></A><A NAME="ch39index124"></A><A NAME="ch39index125"></A><A NAME="ch39index126"></A></P>
<P class="docText">One type of product delivers online access to DB2 documentation. With this tool, you avoid the cost of purchasing DB2 manuals for all programmers, and DB2 information and error messages are always available online. In addition, analysts and DBAs who dial in to the mainframe from home can reference DB2 manuals online rather than keep printed copies at home. IBM's Book Manager is an example of this type of tool.</P>
<P class="docText">Another similar type of operational support tool provides online access to DB2 standards and procedures. These tools are commonly populated with model DB2 standards and procedures that can be modified or extended. Tools of this nature are ideal for a shop with little DB2 experience that wants to launch a DB2 project. As the shop grows, the standards and procedures can grow with it.</P>
<P class="docText">Products that provide "canned" standards for implementing, accessing, and administering DB2 databases are particularly useful for shops new to DB2. By purchasing an online standards manual, these shops can quickly come up-to-speed with DB2. However, mature DB2 shops can also benefit from these types of products if the third-party vendor automatically ships updates whenever IBM ships a new release of DB2. This can function as cheap training in the new DB2 release. A product containing DB2 standards should fulfill the following requirements:</P>
<UL><LI><P class="docList">Provide online access via the mainframe or a networked PC environment, so all developers and DBAs can access the manual</P></LI><LI><P class="docList">Be extensible, so additional standards can be added</P></LI><LI><P class="docList">Be modifiable, so the provided standards can be altered to suit prior shop standards (naming conventions, programming standards, and so on)</P></LI></UL>
<P class="docText">Tools also exist to enable a better batch interface to DB2. Standard batch DB2 programs run under the control of the TSO terminal monitor program, <TT>IKJEFT01</TT>. Another operational support tool provides a call-attach interface that enables DB2 batch programs to run as a standard MVS batch job without the TSO TMP.</P>
<P class="docText">DB2, unlike IMS, provides no inherent capability for storing checkpoint information. Tools that store checkpoint information that can be used by the program during a subsequent restart are useful for large batch DB2 applications issuing many <TT>COMMIT</TT>s.</P>
<P class="docText">One final type of operational support tool assists in managing changes. These tools are typically integrated into a change control tool that manages program changes. Change control implemented for DB2 can involve version control, plan and package management, and ensure that timestamp mismatches (<TT>SQLCODE -818</TT>) are avoided. Some tools can even control changes to DB2 objects.<A NAME="ch39index127"></A><A NAME="ch39index128"></A><A NAME="ch39index129"></A><A NAME="ch39index130"></A></P>
<A NAME="ch39lev2sec16"></A><H4 class="docSection2Title">PC-Based DB2 Emulation Products</H4>
<P class="docText">Personal computers are pervasive and most data processing professionals have one on their desk. Most end users do, too. As such, the need to access DB2 from the PC is a viable one. However, not everyone needs to do this in a <span class="docEmphasis">client/server</span> environment.<A NAME="ch39index131"></A><A NAME="ch39index132"></A><A NAME="ch39index133"></A><A NAME="ch39index134"></A></P>
<P class="docText">Sometimes, just simple access from a PC will suffice. For this, a PC query tool can be used. Data requests originate from the PC workstation. The tool sends the requests to the mainframe for processing.</P>
<P class="docText">When processing is finished, the data is returned to the PC and formatted. These types of tools typically use a graphical user interface with pull-down menus and point-and-click functionality. These features are not available on mainframe products.</P>
<P class="docText">Another popular approach to developing DB2 applications is to create a similar environment on the PC. This can be done using a PC DBMS that works like DB2 and other similar PC products that mimic the mainframe (COBOL, IMS/TM, CICS, JCL, and so on). DB2 for Linux, Unix, and Windows is, of course, the most popular PC DBMS in this category, but there are others.</P>
<P class="docText">Quite often, tools that can be used in a straight PC environment also can be used in a client/server environment.</P>
<A NAME="ch39lev2sec17"></A><H4 class="docSection2Title">Plan Analysis Tools</H4>
<P class="docText">The development of SQL to access DB2 tables is the responsibility of an application development team. With SQL's flexibility, the same request can be made in different ways. Because some of these ways are inefficient, the performance of an application's SQL could fluctuate wildly unless the SQL is analyzed in-depth by an expert before implementation.<A NAME="ch39index135"></A><A NAME="ch39index136"></A><A NAME="ch39index137"></A><A NAME="ch39index138"></A></P>
<P class="docText">The DB2 <TT>EXPLAIN</TT> command provides information about the access paths used by SQL queries by parsing SQL in application programs and placing encoded output into a DB2 <TT>PLAN_TABLE</TT>. To gauge efficiency, a DBA must decode the <TT>PLAN_TABLE</TT> data and determine whether a more efficient access path is available.</P>
<P class="docText">SQL code reviews are required to ensure that optimal SQL design techniques are used. SQL code walkthroughs are typically performed by a DBA, a performance analyst, or someone with experience in SQL coding. This walkthrough must consist of reviews of the SQL statements, the selected access paths, and the program code in which the SQL is embedded. It also includes an evaluation of the <TT>RUNSTATS</TT> information to ascertain whether production-level statistics were used at the time of the <TT>EXPLAIN</TT>.</P>
<P class="docText">A line-by-line review of application source code and <TT>EXPLAIN</TT> output is tedious and prone to error, and it can cause application backlogs. A plan analysis tool can greatly simplify this process by automating major portions of the code review process. A plan analysis tool can typically perform the following functions:</P>
<UL><LI><P class="docList">Analyze the SQL in an application program, describing the access paths chosen in a graphic format, an English description, or both.</P></LI><LI><P class="docList">Issue warnings when specific SQL constructs are encountered. For example, each time a sort is requested (by <TT>ORDER BY</TT>, <TT>GROUP BY</TT>, or <TT>DISTINCT</TT>), a message is presented informing the user of the requisite sort.</P></LI><LI><P class="docList">Suggest alternative SQL solutions based on an "expert system" that reads SQL statements and their corresponding <TT>PLAN_TABLE</TT> entries and poses alternate SQL options.</P></LI><LI><P class="docList">Extend the rules used by the "expert system" to capture site-specific rules.</P></LI><LI><P class="docList">Analyze at the subsystem, application, plan, package, or SQL statement level.</P></LI><LI><P class="docList">Store multiple versions of <TT>EXPLAIN</TT> output and create performance comparison and plan history reports.</P></LI></UL>
<P class="docText">Currently, no tool can analyze the performance of the COBOL code in context along with the SQL that is embedded in it. For example, consider an application program that embeds a singleton <TT>SELECT</TT> inside a loop. The singleton <TT>SELECT</TT> requests a single row based on a predicate, checking for the primary key of that table. The primary key value is changed for each iteration of the loop so that the entire table is read from the lowest key value to the highest key value.</P>
<P class="docText">A plan analysis tool will probably not flag the SQL statement because the predicate value is for the primary key, which causes an indexed access. It could be more efficient to code a cursor, without a predicate, to retrieve every row of the table, and then fetch each row one by one. This method might use sequential prefetch or query I/O parallelism, thereby reducing I/O and elapsed time, and therefore enhancing performance. Only a trained analyst can catch this type of design problem during a code walkthrough. Plan analysis tools also miss other potential problems, such as when the program has two cursors that should be coded as a one-cursor join. Although a plan analysis tool significantly reduces the effort involved in the code review process, it cannot eliminate it.</P>
<P class="docText">Following are some required features for a plan analysis tool:</P>
<UL><LI><P class="docList">It must be capable of interpreting standard DB2 <TT>EXPLAIN</TT> output and present the information in an easy-to-understand (preferably graphical) format.</P></LI><LI><P class="docList">It must automatically scan application source code and <TT>PLAN_TABLE</TT>s, reporting on the selected access paths and the predicted performance.</P></LI><LI><P class="docList">It must be able to provide a historical record of access paths by program, package, plan, or SQL statement.<A NAME="ch39index139"></A><A NAME="ch39index140"></A><A NAME="ch39index141"></A><A NAME="ch39index142"></A></P></LI></UL>
<A NAME="ch39lev2sec18"></A><H4 class="docSection2Title">Performance Monitors</H4>
<P class="docText">Performance monitoring and tuning can be one of the most time-consuming tasks for large or critical DB2 applications. This topic was covered in depth in Parts V and VI. DB2 performance monitoring and analysis tools support many features in many ways. For example, DB2 performance tools can operate as follows:<A NAME="ch39index143"></A><A NAME="ch39index144"></A><A NAME="ch39index145"></A><A NAME="ch39index146"></A></P>
<UL><LI><P class="docList">In the background mode as a batch job reporting on performance statistics written by the DB2 trace facility</P></LI><LI><P class="docList">In the foreground mode as an online monitor that either traps DB2 trace information using the instrumentation facility interface or captures information from DB2 control blocks as DB2 applications execute</P></LI><LI><P class="docList">By sampling the DB2 and user address spaces as the program runs and by capturing information about the performance of the job independent of DB2 traces</P></LI><LI><P class="docList">By capturing DB2 trace information and maintaining it in a history file (or table) for producing historical performance reports and for predicting performance trends</P></LI><LI><P class="docList">As a capacity planning device by giving the tool statistical information about a DB2 application and the environment in which it will operate</P></LI><LI><P class="docList">As an after-the-fact analysis tool on a PC workstation for analyzing and graphing all aspects of DB2 application performance and system-wide DB2 performance</P></LI></UL>
<P class="docText">DB2 performance tools support one or more of these features. The evaluation of DB2 performance monitors is a complex task. Often more than one performance monitor is used at a single site. Vendors who sell suites of performance monitors for other system software also frequently offer DB2 performance monitors. Whenever possible, try to utilize a DB2 performance monitor that not only offers full functionality for DB2 monitoring, but also integrates with your other performance monitors that work with DB2 (such as your monitors for CICS, IMS, and z/OS).<A NAME="ch39index147"></A><A NAME="ch39index148"></A><A NAME="ch39index149"></A><A NAME="ch39index150"></A></P>
<P class="docText">For more information on DB2 performance monitoring and tuning, refer to <A class="docLink" HREF="part05.html#part05">Parts V</A> and <A class="docLink" HREF="part06.html#part06">VI</A>.</P>
<A NAME="ch39lev2sec19"></A><H4 class="docSection2Title">Products to Enhance Performance</H4>
<P class="docText">Performance is an important facet of DB2 database administration. Many shops dedicate several analysts to tweaking and tuning SQL, DB2, and its environment to elicit every performance enhancement possible. If your shop falls into this category, several tools on the market enhance the performance of DB2 by adding functionality directly to DB2. These DB2 performance tools can interact with the base code of DB2 and provide enhanced performance. Typically, these products take advantage of known DB2 shortcomings.<A NAME="ch39index151"></A><A NAME="ch39index152"></A><A NAME="ch39index153"></A><A NAME="ch39index154"></A></P>
<P class="docText">For example, products exist to perform the following functions:</P>
<UL><LI><P class="docList">Enable DSNZPARMs to be changed without recycling DB2; although DB2 as of V7 offers the ability to change some ZPARM values online, that capacity is not provided for all of the DSNZPARMs, yet.</P></LI><LI><P class="docList">Enhance the performance of reading a DB2 page.</P></LI><LI><P class="docList">Enhance or augment DB2 buffer pool processing.</P></LI></UL>
<P class="docText">Care must be taken when evaluating DB2 performance tools. New releases of DB2 might negate the need for these tools because functionality was added or a known shortcoming was corrected. However, this does not mean that you should not consider performance tools. They can pay for themselves after only a short period of time. Discarding the tool when DB2 supports its functionality is not a problem if the tool has already paid for itself in terms of better performance.</P>
<A NAME="ch39note04"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">Because these tools interact very closely with DB2, be careful when migrating to a new release of DB2 or a new release of the tool. Extra testing should be performed with these tools because of their intrusive nature.</P></div><br>
<A NAME="ch39lev2sec20"></A><H4 class="docSection2Title">DB2 Programming and Development Tools</H4>
<P class="docText">Often times, application development efforts require the population and maintenance of large test beds for system integration, unit, and user testing. A category of testing tools exists to facilitate this requirement. Testing tools enable an application developer or quality assurance analyst to issue a battery of tests against a test base and analyze the results. Testing tools are typically used for all types of applications and are extended to support testing against DB2 tables.<A NAME="ch39index155"></A><A NAME="ch39index156"></A><A NAME="ch39index157"></A><A NAME="ch39index158"></A></P>
<P class="docText">Many other types of tools enhance the DB2 application development effort. These DB2 programming and development tools can perform as follows:</P>
<UL><LI><P class="docList">Compare two DB2 tables to determine the differences. These tools enable the output from modified programs to be tested to determine the impact of code change on application output.</P></LI><LI><P class="docList">Enable the testing of SQL statements in a program editor as the programmer codes the SQL.</P></LI><LI><P class="docList">Explain SQL statements in an edit session.</P></LI><LI><P class="docList">Generate complete code from in-depth specifications. Some tools even generate SQL. When code generators are used, great care should be taken to ensure that the generated code is efficient before promoting it to production status.</P></LI><LI><P class="docList">Use 4GLs (fourth-generation languages) that interface to DB2 and extend the capabilities of SQL to include procedural functions (such as looping or row-at-a-time processing).</P></LI></UL>
<P class="docText">Due to the variable nature of the different types of DB2 programming tools, they should be evaluated case by case.</P>
<A NAME="ch39lev2sec21"></A><H4 class="docSection2Title">QMF Enhancement Tools</H4>
<P class="docText">A special category of tool, supporting QMF instead of DB2, automatically creates COBOL programs from stored QMF queries. QMF provides a vehicle for the ad hoc development, storage, and execution of SQL statements. When an ad hoc query is developed, it often must be stored and periodically executed. This is possible with QMF, but QMF can execute only dynamic SQL. It does not support static SQL. A method of running critical stored queries using static SQL would be beneficial, because static SQL generally provides better performance than dynamic SQL.<A NAME="ch39index159"></A><A NAME="ch39index160"></A><A NAME="ch39index161"></A><A NAME="ch39index162"></A></P>
<P class="docText">QMF enhancement tools convert the queries, forms, and procs stored in QMF into static SQL statements embedded in a COBOL program. The COBOL program does all the data retrieval and formatting performed by QMF, providing the same report as QMF would. However, the report is now created using static SQL instead of dynamic SQL, thereby boosting performance.</P>
<A NAME="ch39lev2sec22"></A><H4 class="docSection2Title">Query Tools</H4>
<P class="docText">DB2 provides <TT>DSNTEP2</TT> and the SPUFI query tool bundled with the DBMS. Most organizations find these inadequate, however, in developing professional, formatted reports or complete applications. It can be inadequate also for inexperienced users or those who want to develop or execute ad hoc queries.<A NAME="ch39index163"></A><A NAME="ch39index164"></A><A NAME="ch39index165"></A><A NAME="ch39index166"></A></P>
<P class="docText">QMF addresses each of these deficiencies. The capability to format reports without programming is probably the greatest asset of QMF. This feature makes QMF ideal for use as an ad hoc query tool for users.</P>
<P class="docText">Another important feature is the capability to develop data manipulation requests without using SQL. QMF provides QBE and Prompted Query in addition to SQL. QBE, or Query By Example, is a language in itself. The user makes data manipulation requests graphically by coding keywords in the columns of a tabular representation of the table to be accessed. For example, a QBE request to retrieve the department number and name for all departments that report to <TT>'A00'</TT> would look like the construct shown in <A class="docLink" HREF="#ch39fig02">Figure 39.2</A>.</P>
<A NAME="ch39fig02"></A><p><CENTER><H5 class="docFigureTitle">Figure 39.2. DB2 security cascading revokes.</H5>
<p class="docText"><IMG BORDER="0" width="500" height="42" SRC="images/0672326132/graphics/39fig02.gif" ALT="graphics/39fig02.gif"></p></CENTER></p><br>
<P class="docText">Prompted Query builds a query by prompting the end user for information about the data to be retrieved. The user selects a menu option and Prompted Query asks a series of questions, the answers to which are used by QMF to build DML. Both QBE and Prompted Query build SQL "behind the scenes" based on the information provided by the end user.<A NAME="ch39index167"></A></P>
<P class="docText">QMF can also be used to build application systems. A QMF application accesses DB2 data in three ways:</P>
<UL><LI><P class="docList">Using the QMF Callable Interface from an application program</P></LI><LI><P class="docList">Using the QMF Command Interface (<TT>QMFCI</TT>) in a <TT>CLIST</TT> to access QMF</P></LI><LI><P class="docList">Using a QMF procedure</P></LI></UL>
<P class="docText">Why would you want to call QMF from an application? QMF provides many built-in features that can be used by application programs to reduce development cost and time. For example, QMF can display online reports that scroll not only up and down but also left and right. (Coding left and right scrolling in an application program is not a trivial task.) QMF also can issue the proper form of dynamic SQL, removing the burden of doing so from the novice programmer. Refer to <A class="docLink" HREF="ch12.html#ch12">Chapter 12</A>, "Dynamic SQL Programming," for an in-depth discussion of dynamic SQL techniques.</P>
<P class="docText">Another benefit of QMF is that you can use inherent QMF commands to accomplish tasks that are difficult to perform with a high-level language such as COBOL. Consider, for example, the following QMF commands:</P>
<P><TABLE CELLSPACING="0" FRAME="void" RULES="none" CELLPADDING="5"><COLGROUP><COL width="132"><COL width="418"></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>EXPORT</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Automatically exports report data to a flat file. Without this QMF command, a program would have to allocate a data set and read the report line by line, writing each line to the output file.<A NAME="ch39index168"></A><A NAME="ch39index169"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>DRAW</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Reads the DB2 Catalog and builds a formatted SQL <TT>SELECT</TT>, <TT>INSERT</TT>, <TT>UPDATE</TT>, or <TT>DELETE</TT> statement for any table.<A NAME="ch39index170"></A><A NAME="ch39index171"></A></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><P class="docText"><TT>SET</TT></P></TD><TD class="docTableCell" align="left" valign="top"><P class="docText">Establishes global values for variables used by QMF.<A NAME="ch39index172"></A><A NAME="ch39index173"></A></P></TD></TR></TABLE></P><br>
<P class="docText">QMF, however, is not the only game in town. Other vendors provide different DB2 table query and reporting tools that can be used to enhance DB2's ad hoc query capabilities. Some of these products are similar in functionality to QMF but provide additional capabilities. They can do the following:</P>
<UL><LI><P class="docList">Use static SQL rather than dynamic SQL for stored queries<A NAME="ch39index174"></A><A NAME="ch39index175"></A><A NAME="ch39index176"></A><A NAME="ch39index177"></A><A NAME="ch39index178"></A></P></LI><LI><P class="docList">Provide standard query formats and bundled reports</P></LI><LI><P class="docList">Provide access to other file formats such as VSAM data sets or IMS databases in conjunction with access to DB2 tables</P></LI><LI><P class="docList">Provide access from IMS/TM (QMF is supported in TSO and CICS only)</P></LI><LI><P class="docList">Execute DB2 commands from the query tool</P></LI></UL>
<P class="docText">Tools that operate on workstations and PCs are becoming more popular than their mainframe counterparts. This is because the PC provides an environment that is more conducive to quickly creating a report from raw data. Using point-and-click, drag-and-drop technology greatly eases the report generation process. Responding to this trend, IBM now offers QMF for Windows, in addition to the traditional QMF for ISPF.</P>
<P class="docText">Additionally, data warehousing is driving the creation of tools that enable rapid querying along business dimensions. These tools provide OLAP, or on-line analytical processing. For an overview of data warehousing and OLAP please refer to <A class="docLink" HREF="ch45.html#ch45">Chapter 45</A>, "Data Warehousing with DB2."<A NAME="ch39index179"></A><A NAME="ch39index180"></A></P>
<P class="docText">Finally, fourth-generation languages (4GLs) are gaining more and more popularity for accessing DB2 data. Though not a typical type of DB2 add-on tool, these products provide more functionality than a report writing tool, but with the GUI front-end that makes them easier to use than 3GL programming languages such as COBOL and C. 4GL tools typically work in one of three ways:<A NAME="ch39index181"></A><A NAME="ch39index182"></A></P>
<UL><LI><P class="docList">Queries are developed using 4GL syntax, which is then converted "behind the scenes" into SQL queries.</P></LI><LI><P class="docList">SQL is embedded in the 4GL code and executed much like SQL embedded in a 3GL.</P></LI><LI><P class="docList">A hybrid of these two methods, in which the executed SQL is either difficult or impossible to review.</P></LI></UL>
<P class="docText">In general, you should avoid 4GLs that require a hybrid approach. When a hybrid method is mandatory, exercise extreme caution before using that 4GL. These methods are usually difficult to implement and maintain, and they typically provide poor performance.</P>
<P class="docText">If you do use a 4GL to access DB2 data, heed the following cautions:</P>
<UL><LI><P class="docList">Many 4GLs provide only dynamic SQL access, which is usually an inefficient way to develop entire DB2 applications. Even if the 4GL provides static SQL access, often the overhead associated with the DB2 interface is high. For this reason, use 4GLs to access DB2 data only for ad hoc or special processing. 4GLs are generally an unacceptable method of developing complete DB2 applications.</P></LI><LI><P class="docList">Be wary of using the syntax of the 4GL to join or "relate" DB2 tables. Instead, use views that efficiently join the tables using SQL, then access the views using the 4GL syntax. I was involved in an application tuning effort in which changing a "relate"in the 4GL syntax to a view reduced the elapsed time of a 4GL request by more than 250 percent.<A NAME="ch39index183"></A><A NAME="ch39index184"></A><A NAME="ch39index185"></A><A NAME="ch39index186"></A><A NAME="ch39index187"></A></P></LI></UL>
<A NAME="ch39lev2sec23"></A><H4 class="docSection2Title">Repositories</H4>
<P class="docText">A repository stores information about an organization's data assets. Repositories are used to store <span class="docEmphasis">metadata</span>, or data about data. They are frequently used to enhance the usefulness of DB2 application development and to document the data elements available in the data warehouse.<A NAME="ch39index188"></A><A NAME="ch39index189"></A><A NAME="ch39index190"></A><A NAME="ch39index191"></A><A NAME="ch39index192"></A><A NAME="ch39index193"></A><A NAME="ch39index194"></A></P>
<A NAME="ch39sb01"></A><P><TABLE CELLSPACING="0" WIDTH="90%" BORDER="1" cellpadding="5"><TR><TD>
<H2 class="docSidebarTitle">What Is Metadata?</H2>
<P class="docText"><span class="docEmphBoldItalic">Metadata</span> is frequently defined as "data about data." But that is an insufficient definition. Metadata characterizes data. It is used to provide documentation such that data can be understood and more readily consumed by your organization. Metadata answers the <span class="docEmphStrong">who, what, when, where, why</span>, and <span class="docEmphStrong">how</span> questions for users of the data.</P></TD></TR></TABLE></P><br>
<P class="docText">In choosing a repository, base your decision on the metadata storage and retrieval needs of your entire organization, not just DB2. Typically, a repository can perform the following functions:</P>
<UL><LI><P class="docList">Store information about the data, processes, and environment of the organization.</P></LI><LI><P class="docList">Support multiple ways of looking at the same data. An example of this concept is the three-schema approach, in which data is viewed at the conceptual, logical, and physical levels.</P></LI><LI><P class="docList">Support data model creation and administration. Integration with popular <TT>CASE</TT> tools is also an important evaluation criterion.</P></LI><LI><P class="docList">Scan the operational environment to generate metadata from operational systems.</P></LI><LI><P class="docList">Store in-depth documentation, as well as produce detail and management reports from that documentation.</P></LI><LI><P class="docList">Support change control.</P></LI><LI><P class="docList">Enforce naming conventions.</P></LI><LI><P class="docList">Generate copy books from data element definitions.</P></LI></UL>
<P class="docText">These are some of the more common functions of a data dictionary. When choosing a data dictionary for DB2 development, the following features are generally desirable:</P>
<UL><LI><P class="docList">The data stores used by the repository are in DB2 tables. This enables DB2 applications to directly read the data dictionary tables.</P></LI><LI><P class="docList">The repository can directly read the DB2 Catalog or views on the DB2 Catalog. This ensures that the repository has current information on DB2 objects.</P></LI><LI><P class="docList">If the repository does not directly read the DB2 Catalog, an interface is provided to ease the population of the repository using DB2 Catalog information.</P></LI><LI><P class="docList">The repository provides an interface to any modeling and design tools used.</P></LI></UL>
<P class="docText">This section is a brief overview of repositories—an extended discussion of data dictionaries is beyond the scope of this book.<A NAME="ch39index195"></A><A NAME="ch39index196"></A><A NAME="ch39index197"></A><A NAME="ch39index198"></A></P>
<A NAME="ch39note05"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">Because the DB2 Catalog stores database metadata it can be thought of as a crude data dictionary, but it does not fulfill all of the functionality of a true data dictionary or repository product.</P></div><br>
<A NAME="ch39lev2sec24"></A><H4 class="docSection2Title">Security Tools</H4>
<P class="docText">DB2 security is provided internal to DB2 with the <TT>GRANT</TT> and <TT>REVOKE</TT> data control language components of SQL. Using this mechanism, authorization is granted explicitly and implicitly to users of DB2. Authorization exits enable DB2 to communicate with other security packages such as IBM's RACF and Computer Associate's Top Secret and ACF2. This eases the administrative burden of DB2 security by enabling the corporate data security function to administer groups of users. DB2 authorization is then granted to the RACF groups, instead of individual userids. This decreases the volume of security requests that must be processed by DB2.<A NAME="ch39index199"></A><A NAME="ch39index200"></A><A NAME="ch39index201"></A><A NAME="ch39index202"></A></P>
<P class="docText">DB2's implementation of security has several problems. Paramount among these deficiencies is the effect of the cascading <TT>REVOKE</TT>. If an authority is revoked from one user who previously granted authority to other users, all dependent authorizations are also revoked. For example, consider <A class="docLink" HREF="#ch39fig03">Figure 39.3</A>. Assume that Bob is a <TT>SYSADM</TT>. He grants <TT>DBADM WITH GRANT OPTION</TT> to Ron and Dianne. Ron then grants the same to Rick and Bill, as well as miscellaneous authority to Chris, Jeff, and Monica. Dianne grants <TT>DBADM WITH GRANT OPTION</TT> to Dale, Carl, and Janet. She grants miscellaneous authority to Mike and Sue also. Rick, Bill, Dale, Carl, and Janet now have the authority to grant authority to other users. What would be the effect of revoking Ron's <TT>DBADM</TT> authority? Chris, Jeff, and Monica would lose their authority. In addition, Rick and Bill would lose their authority, as would everyone who was granted authority by either Rick or Bill, and so on.</P>
<A NAME="ch39fig03"></A><p><CENTER><H5 class="docFigureTitle">Figure 39.3 . DB2 security cascading <TT>REVOKE</TT>s.</H5>
<p class="docText"><IMG BORDER="0" width="450" height="647" SRC="images/0672326132/graphics/39fig03.gif" ALT="graphics/39fig03.gif"></p></CENTER></p><br>
<P class="docText">This problem can be addressed by a DB2 security add-on tool. These tools typically analyze the effects of a <TT>REVOKE</TT>. For example, the implications of revoking Ron's <TT>DBADM</TT> authority would have been clearly displayed, showing all implicit revokes. These tools enable the user to revoke the authority and optionally reassign all dependent authority either by storing the appropriate <TT>GRANT</TT> statements to reapply the authorizations implicitly revoked or by revoking the authority and automatically reapplying all implicit revokes in the background.</P>
<P class="docText">These tools provide other functions. Consider the administrative overhead when DB2 users are hired, quit, or are transferred. Security must be added or removed. A good security tool enables a user to issue a <TT>GRANT LIKE</TT> command, which can copy DB2 authority from one DB2 object to another or from one user to another. Consider two examples.</P>
<P class="docText">Suppose that Ron is transferred to another department. A security tool can assign all of Ron's authority to another user before revoking Ron's authority. Or suppose that a new DB2 table is created for an existing DB2 application, and it requires the same users to access its data as can access the other tables in the application. This type of tool enables a user to copy all security from one table to the new table.</P>
<P class="docText">There is one other type of DB2 security product. Rather than augment DB2 security, however, this type of product replaces DB2 security with an external package.</P>
<P class="docText">The primary benefit is the consolidation of security. If your organization uses a security package from another vendor rather than RACF for regular data security, security administration for regular data security and DB2 security can be consolidated into a single unit. A second benefit is that the cascading revoke effect can be eliminated because MVS data security packages do not cascade security revocations.</P>
<P class="docText">There are some problems with this type of tool, however. For example, these tools do not conform to the rigorous definition of the relational model, which states that the DBMS must control security. Some do not provide all types of DB2 security. For example, <TT>INSTALL SYSADM</TT> is still required in DB2 for installation of DB2 and DB2 Catalog and Directory recovery.</P>
<P class="docText">Keep in mind, too, that for some DB2 security features, such as multilevel security, it is necessary for DB2 to interface with an external security product.<A NAME="ch39index203"></A><A NAME="ch39index204"></A><A NAME="ch39index205"></A><A NAME="ch39index206"></A></P>
<A NAME="ch39lev2sec25"></A><H4 class="docSection2Title">Utility Enhancement Tools</H4>
<P class="docText">The IBM DB2 <TT>COPY</TT>, <TT>LOAD</TT>, <TT>RECOVER</TT>, <TT>REORG</TT>, and <TT>UNLOAD</TT> utilities are notorious for their inefficiency, sometimes requiring more than 24 hours to operate on very large DB2 tables. These utilities are required to populate, administer, and organize DB2 databases.<A NAME="ch39index207"></A><A NAME="ch39index208"></A><A NAME="ch39index209"></A><A NAME="ch39index210"></A></P>
<P class="docText">Several vendors provide support tools that replace the DB2 utilities and provide the same functionality more efficiently. For example, one vendor claims that its <TT>REORG</TT> utility executes six to ten times faster than the DB2 <TT>REORG</TT> utility. These claims must be substantiated for the applications at your organization, but enough inefficiencies are designed into the IBM DB2 utilities to make this claim believable.<A NAME="ch39index211"></A><A NAME="ch39index212"></A></P>
<P class="docText">Before committing to an alternate utility tool, be sure that it conforms to the following requirements:</P>
<UL><LI><P class="docList">Does not subvert the integrity of the data in the DB2 tables.</P></LI><LI><P class="docList">Minimally provides the same features as the corresponding DB2 utility. For example, if the DB2 <TT>REORG</TT> utility can <TT>REORG</TT> both indexes and tablespaces, the enhanced <TT>REORG</TT> tool must be capable of doing the same.</P></LI><LI><P class="docList">Does not subvert standard DB2 features, when possible. For example, DB2 image copies are maintained in the DB2 Catalog. The enhanced <TT>COPY</TT> tool, therefore, should store its image copies there as well.</P></LI><LI><P class="docList">Provides an execution time at least twice as fast as the corresponding DB2 utility. For example, if the DB2 <TT>LOAD</TT> utility requires 20 minutes to load a table, the enhanced <TT>LOAD</TT> tool must load the same table in at least 10 minutes. (This should not be a hard-and-fast rule. Sometimes even a moderate increase in processing time is sufficient to cost-justify a third-party utility tool, especially now that IBM is charging extra for their utilities.)</P></LI><LI><P class="docList">Corrects the deficiencies of the standard DB2 utilities, when possible. For example, the DB2 <TT>LOAD</TT> utility will not load data in sequence by the clustering index. An enhanced tool might provide this capability.</P></LI><LI><P class="docList">When testing utility tools from different vendors, ensure that you are conducting fair tests. For example, always reload or recover prior to resting <TT>REORG</TT> utilities so that you don't skew your results due to different levels of table space organization. Additionally, always run the tests for each tool on the same object with the same amount of data.</P></LI></UL>
<A NAME="ch39note06"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">IBM utility I/O is charged to the DB2 subsystem. The third-party tool will most likely charge I/O to the batch utility job.</P></div><br>
<A NAME="ch39note07"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">Third-party utility execution usually cannot be monitored using the <TT>-DISPLAY UTILITY</TT> command. Some ISVs provide an equivalent display capability for their utilities, though.</P></div><br>
<A NAME="ch39note08"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">Some third-party utility products call an IBM utility product for certain features and functionality. Before deciding to completely replace IBM with another vendor's utilities, be sure you understand the limitations that can occur because the IBM utilities will no longer be available.</P></div><br>
<P class="docText">One last category of DB2 utility tool is the utility manager. This type of tool provides administrative support for the creation and execution of DB2 utility jobstreams. These utility generation and management tools can do the following:</P>
<UL><LI><P class="docList">Automatically generate DB2 utility parameters and JCL, with correct workspace assignments<A NAME="ch39index213"></A></P></LI><LI><P class="docList">Monitor DB2 utility jobs as they execute</P></LI><LI><P class="docList">Automatically schedule DB2 utilities when exceptions are triggered</P></LI><LI><P class="docList">Assist in the scheduling of DB2 utilities to kick off the most important ones first, or to manage the available batch window</P></LI><LI><P class="docList">Restart utilities with a minimum of intervention. For example, if a utility cannot be restarted, the tool automatically issues a <TT>-TERM UTIL</TT> command and resubmits the utility.</P></LI></UL>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch39.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch39lev1sec2.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
