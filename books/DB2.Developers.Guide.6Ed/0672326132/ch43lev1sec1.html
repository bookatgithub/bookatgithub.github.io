<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>An Overview of IBM DB2 Connect</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch43.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch44.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch43lev1sec1"></A><H3 class="docSection1Title">An Overview of IBM DB2 Connect</H3>
<P class="docText">DB2 Connect provides fast, transparent read/write access to all DB2 family servers, not just z/OS and OS/390. You can use DB2 Connect in conjunction with IBM DB2 Relational Connect to obtain transparent, consolidated access to Oracle, Sybase, Microsoft SQL Server and Informix databases, too.<A NAME="ch43index02"></A></P>
<P class="docText">DB2 Connect forwards SQL statements submitted by application programs to host database servers. DB2 Connect can forward almost any valid SQL statement. DB2 Connect fully supports the common IBM SQL, as well as the DB2 for z/OS and OS/390, DB2 for VSE and VM (formerly SQL/DS), and DB2 for iSeries implementations of SQL.</P>
<A NAME="ch43note02"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">To maintain portability and database independence, restrict the SQL in your applications using DB2 Connect to common IBM SQL. If you use features supported only on a specific DB2 platform, your applications will not be easily portable to another platform.</P></div><br>
<P class="docText">DB2 Connect implements the DRDA architecture as discussed in <A class="docLink" HREF="ch42.html#ch42">Chapter 42</A>, "Distributed DB2." By exploiting the DRDA architecture, DB2 Connect offers a well-performing, cost-effective solution.</P>
<P class="docText">DB2 Connect provides support for distributed requests across databases and DBMS platforms. For example, you can join tables across different DB2 for z/OS subsystems or even code a <TT>UNION</TT> between a DB2 table and an Oracle table. Currently, only members of the DB2 Family and Oracle are supported for distributed request. Distributed request provides location transparency for database objects.</P>
<P class="docText">DB2 Connect supports <span class="docEmphasis">multi-site update</span>. Also known as <span class="docEmphasis">distributed unit of work</span> (<span class="docEmphasis">DUW</span>) and <span class="docEmphasis">two-phase commit</span>, multi-site update enables applications to update data in multiple remote database servers with guaranteed integrity. You can update any mix of supported database servers. For example, your application can update several tables in DB2 on Windows, a DB2 for z/OS table, and a DB2 for AS/400 database, all within a single transaction.<A NAME="ch43index03"></A></P>
<P class="docText">DB2 Connect can be used to bring Web applications and host data together. DB2 Connect provides broad support for developing and deploying applications using the latest Web technologies, helping you in many cases to reduce development time and the cost of ownership for applications and enhancements. Whether you are developing Web applications using Java, .NET, or ASP, DB2 Connect can be used to supply enterprise data to your application server.</P>
<P class="docText">Other beneficial features of DB2 Connect include:</P>
<UL><LI><P class="docList">Support for both static and dynamic SQL<A NAME="ch43index04"></A></P></LI><LI><P class="docList">Static SQL profiling for converting ADO, ODBC, DB2 CLI and JDBC applications to static SQL</P></LI><LI><P class="docList">Special optimized catalog for ADO, ODBC, DB2 CLI and JDBC applications to make access even faster</P></LI><LI><P class="docList">Resource management functions, such as connection pooling and connection concentrator, for building large-volume, enterprise Web applications</P></LI><LI><P class="docList">Federated database support for transparent access to DB2 and other data sources</P></LI><LI><P class="docList">The ability to prioritize SQL requests submitted by DB2 Connect applications using the dynamic load balancing and fail-over capabilities of Workload Manager</P></LI><LI><P class="docList">Support for authentication schemes and single sign-on capability using Kerberos and Microsoft Active Directory</P></LI><LI><P class="docList">Encryption of user IDs and passwords to protect them from becoming compromised</P></LI><LI><P class="docList">Integration with IPSec and SSL security protocols</P></LI></UL>
<P class="docText">Additionally, IBM provides the following utilities to help administer DB2 Connect:</P>
<UL><LI><P class="docList">The Command Line Processor (CLP) is used to issue SQL statements against a DB2 for z/OS (or AS/400) database server database. It sends the SQL statements to the database that you specify.</P></LI><LI><P class="docList">The DB2 Control Center lets you administer and monitor DB2 Connect servers. The DB2 Command Center also provides a graphical interface to the Command Line Processor.</P></LI><LI><P class="docList">Import and export utilities enable you to load, import, and export data from a file on a workstation to the mainframe, and vice versa.</P></LI><LI><P class="docList">The database system monitor is used to view system connections.<A NAME="ch43index05"></A></P></LI></UL>
<A NAME="ch43lev2sec1"></A><H4 class="docSection2Title">Supported Platforms</H4>
<P class="docText">DB2 Connect supports a variety of the most popular DBMS environments, server operating systems, and client operating systems, enabling you to create viable, efficient distributed applications. DB2 Connect supports DB2 as the host DBMS in the following environments: z/OS, OS390, AS/400, VSE and VM, as well as SQL/DS V3.5.<A NAME="ch43index06"></A><A NAME="ch43index07"></A></P>
<P class="docText">DB2 Connect supports the following server platforms: Windows NT, Windows 2000, IBM OS/2, Sun Solaris, HP-UX, SCO Unix, IBM AIX, Linux, and Linux for IBM S/390.</P>
<P class="docText">The client platforms supported by DB2 Connect include Windows NT (32-bit), Windows 95 (32-bit), Windows 98 (32-bit), Windows XP (32-bit) Home and Professional, Windows 2000, IBM OS/2 (32-bit), HP-UX, SCO UnixWare (V5.2), Sun Solaris, Silicon Graphics IRIX, IBM AIX, and Linux.</P>
<P class="docText">Additionally, DB2 Connect is in compliance with most of the popular standards and interfaces including DCE security, ODBC, JDK 1.3, JDBC, SQLJ, ADO, ADO.NET, and OLE DB (among others).</P>
<A NAME="ch43lev2sec2"></A><H4 class="docSection2Title">Packaging and Editions of DB2 Connect</H4>
<P class="docText">IBM offers several connection solutions under the DB2 Connect brand. If you decide to use DB2 Connect to hook up your applications to DB2 for z/OS, you will need to choose how you will connect them. The actual package or edition of DB2 Connect to use depends on your environment and needs. There are four different editions of DB2 Connect:<A NAME="ch43index08"></A><A NAME="ch43index09"></A></P>
<UL><LI><P class="docList">DB2 Connect Personal Edition (DB2 Connect PE)</P></LI><LI><P class="docList">DB2 Connect Enterprise Edition (DB2 Connect EE)</P></LI><LI><P class="docList">DB2 Connect Application Server Edition (DB2 Connect ASE)</P></LI><LI><P class="docList">DB2 Connect Unlimited Edition (DB2 Connect UE)</P></LI></UL>
<P class="docText">These editions offer similar features, but with some important differences, including how connections are made, pricing, and usability for different purposes. DB2 Connect Personal Edition provides direct connectivity to host databases, whereas DB2 Connect Enterprise Edition provides indirect connectivity that allows clients to access host (zSeries and iSeries) DB2 databases through the DB2 Connect server. The other packages are variations of PE and EE.</P>
<P class="docText">The following sections will outline the benefits and uses for each of the DB2 Connect editions.<A NAME="ch43index10"></A><A NAME="ch43index11"></A></P>
<A NAME="ch43lev3sec1"></A><H5 class="docSection3Title">DB2 Connect Personal Edition</H5>
<P class="docText">Using DB2 Connect PE, applications running on Windows (or Linux) personal workstations are able to access data from a host DB2 server on zSeries or iSeries. It can also be used to connect to a DB2 server on Linux, Unix, or Windows. DB2 Connect PE is typically used for two-tier applications where an intermediate server is not used. The connection is a direct connection from the workstation to the server.<A NAME="ch43index12"></A><A NAME="ch43index13"></A><A NAME="ch43index14"></A><A NAME="ch43index15"></A></P>
<P class="docText">DB2 Connect PE is not designed to act as a connectivity server and cannot accept inbound requests for data. However, because DB2 Connect PE provides a direct connection to host-based DB2 data sources using TCP/IP or SNA, it is useful when processing large result sets.</P>
<P class="docText"><A class="docLink" HREF="#ch43fig01">Figure 43.1</A> depicts the basic setup using DB2 Connect PE. DB2 Connect PE is installed on the workstation to enable a direct connection to DB2 on a zSeries or iSeries host. To establish a network connection the workstation has to be set up for APPC, TCP/IP or MPTN.</P>
<A NAME="ch43fig01"></A><p><CENTER><H5 class="docFigureTitle">Figure 43.1. DB2 Connect Personal Edition.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/43fig01_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="514" SRC="images/0672326132/graphics/43fig01.gif" ALT="graphics/43fig01.gif"></p></CENTER></p><br>
<A NAME="ch43note03"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">TCP/IP connectivity requires connecting to a host running DB2 for OS/390 V5 or later, DB2 for AS/400 V4.2 or later, or DB2 for VM V6.1 or later.</P></div><br>
<P class="docText">You do not need to have DB2 UDB installed on workstation with DB2 Connect. Indeed, no DBMS at all is required on the workstation; DB2 Connect serves data to the workstation from a DB2 host server.<A NAME="ch43index16"></A><A NAME="ch43index17"></A><A NAME="ch43index18"></A><A NAME="ch43index19"></A></P>
<A NAME="ch43lev3sec2"></A><H5 class="docSection3Title">DB2 Connect Enterprise Edition (EE)</H5>
<P class="docText">DB2 Connect EE can be used as a mid-tier gateway server for many users requiring host database access. In this environment, as shown in <A class="docLink" HREF="#ch43fig02">Figure 43.2</A>, clients connect to the host server over a DB2 Connect EE gateway. DB2 Connect EE is running on a server and the clients access host DB2 servers over the DB2 Connect EE server. SNA Communications Support is required only where native TCP/IP connectivity is not available.<A NAME="ch43index20"></A><A NAME="ch43index21"></A><A NAME="ch43index22"></A><A NAME="ch43index23"></A></P>
<A NAME="ch43fig02"></A><p><CENTER><H5 class="docFigureTitle">Figure 43.2. DB2 Connect Enterprise Edition.</H5>
<p class="docText"><div class="v1"><a target="_blank" href="images/0672326132/graphics/43fig02_alt.gif">[View full size image]</a></div><IMG BORDER="0"  width="500" height="509" SRC="images/0672326132/graphics/43fig02.gif" ALT="graphics/43fig02.gif"></p></CENTER></p><br>
<A NAME="ch43note04"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">TCP/IP connectivity requires connecting to a host running DB2 for OS/390 V5 or later, DB2 for AS/400 V4.2 or later, or DB2 for VM V6.1 or later.</P></div><br>
<P class="docText">In this example, you could replace the DB2 Connect server with a DB2 UDB Enterprise Server Edition that has the DB2 Connect Server Support component installed.</P>
<P class="docText">Connections to the DB2 Connect EE gateway are configured the same way that connections to distributed DB2 servers are configured.</P>
<P class="docText">DB2 Connect EE is a good choice for fat client applications and those applications requiring additional resource management and administration capabilities not provided by DB2 Connect PE.</P>
<A NAME="ch43note05"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">Note that the DB2 UDB Enterprise Server Edition (DB2 ESE) product includes a DB2 Connect component to provide for occasional mainframe connectivity for data replication and server administration. The DB2 Connect component of DB2 ESE server provides a license for up to five users to access zSeries and iSeries servers at no additional cost. If additional users need access to zSeries and iSeries servers, you will need to purchase the appropriate DB2 Connect product.</P></div><br>
<P class="docText">DB2 Connect EE is licensed based on the number of users accessing the server. Users can be either registered or concurrent. A <span class="docEmphasis">registered user</span> is identified by name as using one or more DB2 Connect EE servers. A <span class="docEmphasis">concurrent user</span> is a measure of the number of people that are using the same DB2 Connect EE server at the same time. For concurrent usage, the number of individuals (not processes or connections) using the server at any point-in-time cannot exceed the maximum for which you are licensed.<A NAME="ch43index24"></A><A NAME="ch43index25"></A><A NAME="ch43index26"></A><A NAME="ch43index27"></A></P>
<P class="docText">Choosing a licensing method can be a confusing and difficult task. To clarify, suppose Craig and Beth both need to access a table on a DB2 for z/OS subsystem. If you purchase a single concurrent user license then both Craig and Beth can use the license, but they cannot use it at the same time. On the other hand, if you purchase a registered user license for Craig, then Beth cannot use it at all. Of course, this gets more complicated as the number of users increases and workload varies.</P>
<P class="docText">Licensing becomes even more difficult, if not impossible to determine for Web-based applications. As such, IBM makes only the registered user model available for Web-based applications using DB2 Connect EE. This can become very expensive very quickly. Fortunately, IBM provides other options in the DB2 Connect Application Server Edition and DB2 Connect Unlimited Editions.<A NAME="ch43index28"></A><A NAME="ch43index29"></A><A NAME="ch43index30"></A><A NAME="ch43index31"></A></P>
<A NAME="ch43lev3sec3"></A><H5 class="docSection3Title">DB2 Connect Application Server Edition</H5>
<P class="docText">The technology used in the DB2 Connect ASE product is the same as that used in DB2 Connect EE. DB2 Connect ASE is designed for large-scale, demanding environments, but offers more attractive licensing terms and conditions. DB2 Connect ASE license charges are based on the size of the number of processors available to the application servers where the application is running. Number of users, size of the DB2 Connect server, or size of the DB2 database server on the mainframe does not affect license charges.<A NAME="ch43index32"></A><A NAME="ch43index33"></A><A NAME="ch43index34"></A><A NAME="ch43index35"></A></P>
<A NAME="ch43lev3sec4"></A><H5 class="docSection3Title">DB2 Connect Unlimited Edition</H5>
<P class="docText">The final packaging option for DB2 Connect is the DB2 Connect Unlimited Edition product. This package is well suited for organizations that require extensive DB2 Connect usage. DB2 Connect UE basically offers unlimited deployment of DB2 Connect PE and DB2 Connect ASE throughout an organization. The licensing for DB2 Connect UE is based on the size of the mainframe database server; it is not affected by either the number of users nor the number of processors available to the application servers.<A NAME="ch43index36"></A><A NAME="ch43index37"></A><A NAME="ch43index38"></A><A NAME="ch43index39"></A></P>
<P class="docText">DB2 Connect UE is ideal for organizations with a large mixture of application types and needs.</P>
<A NAME="ch43lev2sec3"></A><H4 class="docSection2Title">DB2 Connect EE Thread Pooling</H4>
<P class="docText">The most resource-intensive prospect of using DB2 Connect to access mainframe data from a workstation is establishing connections. In an active distributed environment hundreds, or perhaps thousands of client applications are connecting to and disconnecting from the host through the DB2 Connect server. Doing so consumes overhead as processing time is spent establishing and dropping connections.</P>
<P class="docText">To reduce this overhead, DB2 Connect EE uses thread pooling techniques that minimize the resources required on the DB2 for z/OS database servers. Efficiency is gained by concentrating the workload from all applications into a much smaller set of connections.<A NAME="ch43index40"></A><A NAME="ch43index41"></A><A NAME="ch43index42"></A><A NAME="ch43index43"></A><A NAME="ch43index44"></A><A NAME="ch43index45"></A><A NAME="ch43index46"></A></P>
<P class="docText">This is known as thread pooling, and there are two techniques at the disposal of DB2 Connect: connection pooling and connection concentrator.</P>
<P class="docText">The default technique used by DB2 Connect EE is <span class="docEmphasis">connection pooling</span>. It allows reuse of an established connection infrastructure for subsequent connections. When a DB2 Connect instance is started, a pool of coordinating agents is created. When a connection request comes in, an agent is assigned to this request. The agent will connect to the DB2 server and a thread will be created. When the application issues a disconnect request, the agent will not pass this request along to the DB2 server. Instead, the agent is put back in to the pool.</P>
<P class="docText">The agent in the pool still owns its connection to the DB2 server and the corresponding DB2 thread. When another application issues a connect request, this agent is assigned to this new application.</P>
<P class="docText"><span class="docEmphasis">Connection concentrator</span> extends the features of connection pooling by improving load balancing in parallel Sysplex configurations. With connection concentrator, DB2 uses a more sophisticated approach to reducing resource consumption for very high volume OLTP applications. This function can dramatically increase the scalability of your DB2 for z/OS and DB2 Connect solution, while also providing for transaction-level load balancing in DB2 for z/OS data sharing environments.<A NAME="ch43index47"></A><A NAME="ch43index48"></A></P>
<P class="docText">With connection pooling one application has to disconnect before another one can reuse a pooled connection. Rather than having the connection become free for use by another client at client disconnect, connection concentrator allows re-use of a server task when an application performs a <TT>COMMIT</TT> or <TT>ROLLBACK</TT>. The following conditions must be met when a client application reaches a <TT>COMMIT</TT> point to enable connection concentrator to reuse an agent:</P>
<UL><LI><P class="docList">There can be no cursors using <TT>WITH HOLD</TT> for the connection. Transactions that do not close <TT>WITH HOLD</TT> cursors will be assigned a dedicated agent and hence will not be able to take full advantage of connection concentrator.</P></LI><LI><P class="docList">There can be no declared global temporary tables having the <TT>ON COMMIT PRESERVE ROWS</TT> option.</P></LI><LI><P class="docList">Packages bound using the <TT>KEEPDYNAMIC YES</TT> option might not have been referenced.</P></LI></UL>
<P class="docText">Be sure that there are enough agents available in the connection pool to contain all active clients. Doing so enables connection concentrator to avoid unnecessary connection reuse outside of the load balancing process.</P>
<P class="docText">Whereas connection pooling helps reduce the overhead of database connections and handle connection volume, connection concentrator helps increase scalability. With connection pooling, a connection is only available for reuse after the application owning the connection issues a disconnect. This is not helpful for two-tier client/server applications where users do not disconnect all day long. Additionally, if the application server in a multi-tier application establishes database connections at server start up time and does not release them until the application server is shut down, connection pooling is not helpful. Connection pooling improves overall performance, though, for Web and client/server implementations having a greater number of connections and disconnections.</P>
<P class="docText">Connection concentrator allocates host database resources only for the duration of each SQL transaction while keeping user applications active. This allows for configurations where the number of DB2 threads and the resources they consume can be much smaller than if every application connection had its own thread.</P>
<P class="docText">To summarize: keep in mind that the main difference between connection pooling and connection concentration is when the connection breaks. Connection pooling breaks the connection at disconnect, whereas connection concentration breaks the connection at the <TT>COMMIT</TT> point (after maximum logical agents is met).<A NAME="ch43index49"></A><A NAME="ch43index50"></A><A NAME="ch43index51"></A><A NAME="ch43index52"></A><A NAME="ch43index53"></A><A NAME="ch43index54"></A><A NAME="ch43index55"></A></P>
<A NAME="ch43lev2sec4"></A><H4 class="docSection2Title">DB2 Connect Guidelines</H4>
<P class="docText">Consider applying the advice in the following guidelines to optimize your usage of DB2 Connect.</P>
<A NAME="ch43lev4sec1"></A><H5 class="docSection3Title">Choose DB2 Connect PE for Single Workstation Solutions</H5>
<P class="docText">DB2 Connect PE can be a good choice for two-tier client/server applications running on desktop workstations that need to access data from mainframe DB2 databases. However, the personal edition is not suitable for deployment on multi-user systems and application servers.<A NAME="ch43index56"></A><A NAME="ch43index57"></A><A NAME="ch43index58"></A><A NAME="ch43index59"></A></P>
<P class="docText">If you have two people who share a workstation, DB2 Connect PE is a viable solution, because each person uses the workstation individually. That is, they cannot both use the workstation at the same time. Only one connection is required at any time for both of these users so only one license of DB2 Connect PE is required.</P>
<P class="docText">On the other hand, if you set up five workstations as dumb terminals making connections to a DB2 for z/OS server, you would need ten licenses of DB2 Connect PE. Of course, you could use DB2 Connect EE instead, too.</P>
<A NAME="ch43lev4sec2"></A><H5 class="docSection3Title">Favor DB2 Connect EE for Multi-User Solutions</H5>
<P class="docText">DB2 Connect EE is the required solution when a middle tier connectivity server is required. DB2 Connect EE is suitable for environments where the number of concurrent users can be easily determined. However, DB2 Connect UE and ASE are preferable to EE for Web-based applications and multi-tier client/server applications where the number of concurrent users is difficult, or impossible, to determine. This is so mostly due to the cost of licensing.<A NAME="ch43index60"></A><A NAME="ch43index61"></A><A NAME="ch43index62"></A><A NAME="ch43index63"></A></P>
<A NAME="ch43lev4sec3"></A><H5 class="docSection3Title">Setting Up the DDF for z/OS</H5>
<P class="docText">You must set up the DDF as an application server to connect distributed applications to DB2 for z/OS and OS/390. There are two ways of doing this:<A NAME="ch43index64"></A><A NAME="ch43index65"></A><A NAME="ch43index66"></A></P>
<UL><LI><P class="docList"><TT>INSERT</TT> the <TT>LUNAME</TT> of the remote system into the <TT>SYSIBM.LUNAMES</TT> table.</P></LI><LI><P class="docList"><TT>INSERT</TT> the <TT>LUNAME</TT>, <TT>SYSMODENAME</TT>, <TT>USERSECURITY</TT>, <TT>ENCRYPTPSWDS</TT>, <TT>MODESELECT</TT>, and <TT>USERNAMES</TT> values into the <TT>SYSIBM.SYSLUNAME</TT> table.</P></LI></UL>
<P class="docText">Be sure to perform a DDF update to the Boot Strap Data (BSDS) after making one of these changed. Because DDF will try to connect to VTAM you must ensure that VTAM is active when the DDF starts.</P>
<A NAME="ch43lev4sec4"></A><H5 class="docSection3Title">Configure Distributed Threads</H5>
<P class="docText">Use the <TT>DSNZPARM CMTSTAT</TT> to control the behavior of distributed threads. <TT>CMTSTAT</TT> specifies whether a DDF thread is made active or inactive after it successfully commits or rolls back and holds no cursors. Consider setting <TT>CMTSTAT</TT> to <TT>INACTIVE</TT> because inactive connections consume less storage. A thread can become inactive only if it holds no cursors, has no temporary tables defined, and executes no statements from the dynamic statement cache.<A NAME="ch43index67"></A><A NAME="ch43index68"></A><A NAME="ch43index69"></A></P>
<P class="docText">If you specify <TT>ACTIVE</TT>, the thread remains active. Although this can improve performance it consumes system resources. If your installation supports a large number of connections, specify <TT>INACTIVE</TT>.</P>
<table width="90%" border="0" cellspacing="0" cellpadding="1"><tr><td width="60" valign="top"><IMG BORDER="0"  width="30" height="18" SRC="images/0672326132/graphics/V8_icon.gif" ALT="graphics/V8_icon.gif"></td><td valign="top"><P class="docText"> DB2 supports two different types of inactive threads:</P></td></tr></table><br>
<UL><LI><P class="docList">An inactive DBAT, previously called a type 1 inactive thread, has the same characteristics as inactive threads prior to DB2 V8. This type of thread remains associated with the connections, but DB2 minimizes the thread's storage use as much as possible.</P></LI><LI><P class="docList">An inactive connection, previously called a type 2 inactive thread, uses less storage than an inactive DBAT. In this case, the connections are disassociated from the thread. The thread can be pooled and reused for other connections, new or inactive. This provides better resource utilization because there are typically a small number of threads that can be used to service a large number of connections.</P></LI></UL>
<P class="docText">Although inactive connections are preferable to inactive DBATs, not every thread can become an inactive connection. If a thread is to become inactive, DB2 tries to make it an inactive connection. If DB2 cannot make it an inactive connection, it tries to make it an inactive DBAT. If neither attempt is successful, the thread remains active.<A NAME="ch43index70"></A><A NAME="ch43index71"></A><A NAME="ch43index72"></A></P>
<A NAME="ch43lev4sec5"></A><H5 class="docSection3Title">Increasing Data Transfer Rates</H5>
<P class="docText">In addition to blocking of rows for a query result set, DB2 can also return multiple query blocks in response to an <TT>OPEN</TT> or <TT>FETCH</TT> request to a remote client (such as DB2 Connect). Instead of repeatedly sending requests to DB2 for z/OS requesting one block of data at a time, DB2 Connect can optionally request that the server send back some number of extra query blocks. These extra query blocks allow the client to minimize network traffic, thereby improving performance. DB2 Connect can be set up to request extra query blocks from a mainframe DB2 server by default.<A NAME="ch43index73"></A><A NAME="ch43index74"></A></P>
<P class="docText">Use the <TT>EXTRA BLOCKS SRV</TT> parameter on the DB2 DDF installation panel to enable support for extra query blocks. The minimum value for this parameter is <TT>0</TT> and the maximum is <TT>100</TT>. Favor keeping the parameter set to the default value, which is <TT>100</TT>.</P>
<P class="docText">On the client side, you activate support on a cursor or statement basis. It is controlled by a query rowset size for a cursor, or the value of <span class="docEmphasis"><TT>n</TT></span> in the <TT>OPTIMIZE FOR </TT><span class="docEmphasis"><TT>n</TT></span> <TT>ROWS</TT> clause or <TT>FETCH FIRST </TT><span class="docEmphasis"><TT>n</TT></span> <TT>ROWS ONLY</TT> clause.</P>
<A NAME="ch43lev4sec6"></A><H5 class="docSection3Title">Specify Character Data Types Cautiously</H5>
<P class="docText">When character data is accessed using DB2 Connect, the choice of <TT>CHAR</TT> versus <TT>VARCHAR</TT> will impact performance. <TT>VARCHAR</TT> is more efficient if the length varies significantly. If the size of data does not vary much, <TT>CHAR</TT> is more efficient because each <TT>VARCHAR</TT> column requires two bytes of length information to be transmitted along with the data.<A NAME="ch43index75"></A><A NAME="ch43index76"></A></P>
<P class="docText">Of course, DB2 Connect transmission performance is but one consideration when choosing a data type. Refer to <A class="docLink" HREF="ch05.html#ch05">Chapter 5</A> for additional considerations.</P>
<A NAME="ch43lev4sec7"></A><H5 class="docSection3Title"><TT>BIND</TT> the DB2 Connect Utilities</H5>
<P class="docText">DB2 Connect comes with several utilities that use embedded SQL, and therefore their programs must be bound to a database server before they can be used with that system. The list of bind files required by these utilities is contained in the following <TT>ddcsmvs.lst</TT> file for DB2 for z/OS and OS/390.<A NAME="ch43index77"></A><A NAME="ch43index78"></A><A NAME="ch43index79"></A></P>
<A NAME="ch43note06"></A><div class="docNote"><p class="docNoteTitle">NOTE</p>

<P class="docText">If you do not use the DB2 Connect utilities, you do not have to <TT>BIND</TT> their programs to each of your DB2 for z/OS database servers.</P></div><br>
<P class="docText">If DB2 Connect Enterprise Edition is installed, the DB2 Connect utilities must be bound to each database server once from each type of client platform, before they can be used with that system. For example, if you have 5 Windows clients and 4 Linux clients connecting to DB2 for z/OS using DB2 Connect EE, then <TT>BIND</TT> the programs in <TT>ddcsmvs.lst</TT> from one of the Windows clients, as well as from one of the Linux clients, and then from the DB2 Connect server.</P>
<A NAME="ch43note07"></A><div class="docNote"><p class="docNoteTitle">CAUTION</p>

<P class="docText">If all the clients are not at the same service level, you might need to <TT>BIND</TT> from each client for each particular service level.</P></div><br>
<A NAME="ch43lev4sec8"></A><H5 class="docSection3Title"><TT>BIND</TT> Your Application Programs Properly</H5>
<P class="docText">Every application program that uses embedded SQL must be bound to each database from which it must access data.<A NAME="ch43index80"></A><A NAME="ch43index81"></A><A NAME="ch43index82"></A></P>
<A NAME="ch43lev4sec9"></A><H5 class="docSection3Title">Beware of <TT>SQLCODE</TT> and <TT>SQLSTATE</TT> Differences</H5>
<P class="docText">Different IBM relational DBMSs will not always produce the same <TT>SQLCODE</TT> values for the same, or similar errors. This can be troublesome in distributed applications. There are two ways of handling this situation:<A NAME="ch43index83"></A><A NAME="ch43index84"></A><A NAME="ch43index85"></A></P>
<UL><LI><P class="docList">Use <TT>SQLSTATE</TT> instead of <TT>SQLCODE</TT>. The <TT>SQLSTATE</TT> values have the same basic meaning across the IBM's DBMS products.</P></LI><LI><P class="docList">Use <TT>SQLCODE</TT> mapping.</P></LI></UL>
<P class="docText">DB2 Connect can map <TT>SQLCODE</TT>s and tokens from each IBM mainframe or iSeries server to your appropriate DB2 UDB system. You can specify your own <TT>SQLCODE</TT> mapping file if you want to override the default mapping or you are using a non-IBM database server that does not have <TT>SQLCODE</TT> mapping.</P>
<P class="docText"><TT>SQLCODE</TT> mapping is enabled by default. If you want to turn off <TT>SQLCODE</TT> mapping, specify <TT>NOMAP</TT> in the parameter string of the DCS directory or the DCE routing information object.</P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="ch43.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="ch44.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
