<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>B.3 Configuration and Usage</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="hpmysql-APP-B-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="hpmysql-APP-B-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="hpmysql-APP-B-SECT-3"></A>
<H3 class="docSection1Title">B.3 Configuration and Usage</H3>

<P class="docText"><span class="docEmphasis">mytop</span><A NAME="hpmysql-APP-B-ITERM-1997"></A><A NAME="hpmysql-APP-B-ITERM-1998"></A>'s behavior is
controlled by a combination of command-line arguments, configuration
file options, and runtime keystrokes. Most command-line arguments
appear in single letter (<TT>-p</TT>) and longer GNU-style
(<TT>--password</TT>) forms. <A class="docLink" HREF="#hpmysql-APP-B-TABLE-1">Table B-1</A>
lists the keystrokes, command-line arguments, configuration file
directives, and the actions they perform.</P>

<P class="docText">Upon startup, <span class="docEmphasis">mytop</span> looks for a
<I>~/.mytop</I>. If it finds one, it reads in the
settings and uses them as defaults, which are then overridden by any
command-line arguments. The configuration file format is composed of
key/value pairs, one per line. A sample file might look like this:</P>

<PRE>user=jzawodn
pass=blah!db
host=localhost</PRE>

<P class="docText">Most of the command-line arguments have a counterpart option in the
configuration file. Future versions of <span class="docEmphasis">mytop</span> are
expected to read MySQL's
<I>/etc/my.cnf</I> and <I>~/.my.cnf</I>
as well, possibly deprecating <I>~/.mytop</I> at some
point.</P>

<A NAME="hpmysql-APP-B-TABLE-1"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table B-1. mytop configuration and control</h5></CAPTION><COLGROUP span="4"><THEAD><TR><TH class="docTableHeader">
<P class="docText">Key</P>
</TH><TH class="docTableHeader">
<P class="docText">Argument(s)</P>
</TH><TH class="docTableHeader">
<P class="docText">Config file</P>
</TH><TH class="docTableHeader">
<P class="docText">Action</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText">?</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Display help screen</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>--batch</TT> or <TT>--batchmode</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>batchmode=1</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Run in batch (noninteractive) mode. Useful when called from
<I>cron</I> or another script.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">c</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-m=cmd</TT> or <TT>--mode=cmd</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>mode=cmd</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Command summary view.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">C</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>--color</TT> or <TT>--nocolor</TT></P>
</TD><TD class="docTableCell">
<P class="docText">color=[0|1]</P>
</TD><TD class="docTableCell">
<P class="docText">Use colors in the display. (Requires the
<TT>Term::ANSIColor</TT> module.) The key toggles color
on/off.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">d</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">filter_db=<TT><I>dbname</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Show threads using one specific database.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>-d</TT> or <TT>--database</TT></P>
</TD><TD class="docTableCell">
<P class="docText">db=<TT><I>dbname</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Connect to this database.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">e</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Explain the query a thread is running.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">f</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Show the full query a thread is executing.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">F</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Unfilter the display; return to defaults.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>-h</TT> or <TT>--host</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>host=</TT><TT><I>hostname</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Specify the host on which MySQL is running; default is localhost.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">h</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Show only connections from a particular host.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">H</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>--header</TT> or<TT>--noheader</TT></P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Display the header <span class="docEmphasis">mytop</span>'s
display (key toggles the header display).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">i</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-i</TT> or <TT>--idle</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>idle=[0|1]</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Filter idle (sleeping) threads from the display. Key toggles this.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">I</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-m</TT>= or <TT>--mode=innodb</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>mode=innodb</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Show InnoDB status.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">k</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Kill a thread.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">m</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-m</TT>= or
<TT>--mode=[qps|top|cmd|innodb]</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>mode=[qps|top|cmd|innodb]</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Mode switch. Cycle between thread view, queries per second, and
command summary.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">o</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>--sort=[0|1]</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>sort=[0|1]</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Reverse the sort order. Default is ascending based on time.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">p</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Pause the display. Any key resumes.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>-p</TT> or <TT>--password</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>pass=</TT><TT><I>password</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Connect using this password.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>--prompt</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>prompt=[0|1]</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Prompt for password interactively.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">q</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Quit <span class="docEmphasis">mytop</span>.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">r</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Reset status counters (via <TT>FLUSH</TT>
<TT>STATUS</TT>).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">R</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-r</TT> or <TT>--resolve</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>resolve=[0|1]</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Resolve IP addresses into hostnames. This is useful when MySQL is
configured with skip-name-resolve.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">s</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-s</TT> or <TT>--delay</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>delay=</TT><TT><I>number</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Adjust the refresh interval.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">S</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-m= --mode=status</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>mode=status</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Switch to <TT>SHOW</TT> <TT>STATUS</TT> mode.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>-S</TT> or <TT>--socket</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>socket=</TT><TT><I>/path/to/socket</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Specify the socket to use when connecting to localhost.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">t</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>-m=</TT> or <TT>--mode=top</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>mode=top</TT></P>
</TD><TD class="docTableCell">
<P class="docText">Switch to thread view (the default).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">u</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText"><TT>filter_user=</TT><TT><I>username</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Show only a particular user's threads.</P>
</TD></TR><TR><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">-<TT>u</TT> or --<TT>user</TT></P>
</TD><TD class="docTableCell">
<P class="docText"><TT>user</TT>=<TT><I>username</I></TT></P>
</TD><TD class="docTableCell">
<P class="docText">Connect as this user.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">V</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Switch to <TT>SHOW</TT> <TT>VARIABLES</TT> mode.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">:</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">Enter a complex command.</P>
</TD></TR></COLGROUP></TABLE></P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="hpmysql-APP-B-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="hpmysql-APP-B-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
