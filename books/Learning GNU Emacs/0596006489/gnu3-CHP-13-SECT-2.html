<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>13.2. Emacs and Mac OS X</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-13-SECT-1.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-13-SECT-3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="gnu3-CHP-13-SECT-2"></A>
<H3 class="docSection1Title">13.2. Emacs and Mac OS X</H3>

<P class="docText">As you may have picked up <A NAME="gnu3-CHP-13-ITERM-2939"></A><A NAME="gnu3-CHP-13-ITERM-2940"></A>reading other parts of this book, we
treat Mac OS X as a Unix variant for many tasks. We do that with good
reason, of course. Mac OS X is based on Unix. For example, you could
more or less follow the CVS and Unix build instructions in the
previous sections and come away with a full installation of
Emacs.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-13-FNOTE-3">[3]</A></sup> However, as
you know, Mac OS X can be a little different in some ways; it
doesn't have all the Unix utilities by default (see
the section on installing Ispell for one example of this). This
section covers installing Emacs on Mac OS X as well as other issues
such as running Emacs from the command line, changing the location of
your Meta key, and installing Ispell. And if you do want to build
Emacs from scratch using CVS, we have a few notes on that, too.</P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-13-FNOTE-3">[3]</A></sup> We say "more or
less" because at the time we went to press, you
still needed to grab the source from a separate site. That difference
should eventually disappear as well.</p></blockquote>

<A NAME="gnu3-CHP-13-SECT-2.1"></A>
<H4 class="docSection2Title">13.2.1 "But I Already Have Emacs"</H4>

<P class="docText">Mac OS X comes with a version
<A NAME="gnu3-CHP-13-ITERM-2941"></A>of
Emacs installed: 21.2.1 with Panther (10.3.2) and 21.1.1 with Jaguar
(10.2.8). To start this version, use the Terminal application in your
<span class="docEmphasis">Utilities</span> folder (which is inside the
<span class="docEmphasis">Applications</span> folder) and just type <span class="docEmphBold">emacs</span>.</P>

<P class="docText"><A class="docLink" HREF="#gnu3-CHP-13-FIG-3">Figure 13-3</A> shows the built-in Emacs running in the
Terminal application.</P>

<A NAME="gnu3-CHP-13-FIG-3"></A><p><CENTER>
<H5 class="docFigureTitle">Figure 13-3. The Terminal-based Emacs built into Mac OS X</H5>
<IMG BORDER="0" width="431" height="270" SRC="images/0596006489/figs/ge3_fig1303.gif" ALT=""></CENTER></p><br>

<P class="docText">But you should be aware that although it is built-in and certainly
the easiest to start using, this version of Emacs has a few
shortcomings:</P>

<div style="font-weight:bold"><OL class="docList" TYPE="1"><LI><div style="font-weight:normal"><P class="docList">It runs, well, you know, in a Terminal.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">It does not have any of the graphical user interface features such as
icons or expected mouse behavior.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">The Terminal application often supercedes Emacs when handling things
like the scrollbars and some key bindings.</P></div></LI></OL></div>
<P class="docText">If you can live with those restrictions—or have no
choice—then feel free to skip the next section on installing
Emacs and get on with using the version you have. The vast majority
of information in this book still applies.</P>


<A NAME="gnu3-CHP-13-SECT-2.2"></A>
<H4 class="docSection2Title">13.2.2 Installing Prebuilt Emacs on Mac OS X</H4>

<P class="docText">What if you want the latest
<A NAME="gnu3-CHP-13-ITERM-2942"></A><A NAME="gnu3-CHP-13-ITERM-2943"></A><A NAME="gnu3-CHP-13-ITERM-2944"></A>version of
Emacs but don't want to build it yourself? After
all, not every Mac OS X user is an old Unix hack! Mac systems made a
name for themselves by providing some of the best user interface
conventions around in a single, good-looking package. That
hasn't changed. If you're not a big
fan of do-it-yourself application building, you can download a nifty
application bundle and just drag-and-drop your way to a recent build
of Emacs.</P>

<A NAME="gnu3-CHP-13-SECT-2.2.1"></A>
<H5 class="docSection3Title">13.2.2.1 Downloading Alex Rice's application bundle of Emacs 21.3.5</H5>

<P class="docText">Most Mac users will want to grab a prebuilt binary version of Emacs
that's all ready to go. Alex Rice created just such
a build. It can be found online (for free!<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-13-FNOTE-4">[4]</A></sup>) at:
<A class="docLink" target="_blank" HREF="http://mindlube.com/products/emacs/index.html">http://mindlube.com/products/emacs/index.html</A>.
You can download directly from that page, but be sure to grab the
correct version. You can pick from the Jaguar (Mac OS X 10.2) version
or the Panther (Mac OS X 10.3) version.</P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-13-FNOTE-4">[4]</A></sup> A donation
to defray hosting costs would certainly be appreciated; the site
includes a link for contributions.</p></blockquote>

<P class="docText">You'll be downloading a <span class="docEmphasis">.dmg</span>
file which is the Mac disk image format. It should automatically
unpack and mount itself, but if it doesn't for some
reason, just double-click on the <span class="docEmphasis">.dmg</span> file after
it is completely downloaded.</P>

<P class="docText">As it launches, you'll need to read and agree to the
license. After you do that, you should have a new
"disk" mounted and
you'll see the Emacs application all ready to drag
and drop. (See <A class="docLink" HREF="#gnu3-CHP-13-FIG-4">Figure 13-4</A>.)</P>

<A NAME="gnu3-CHP-13-FIG-4"></A><p><CENTER>
<H5 class="docFigureTitle">Figure 13-4. The mounted disk image for Emacs on Mac OS X (Panther)</H5>
<IMG BORDER="0" width="431" height="252" SRC="images/0596006489/figs/ge3_fig1304.gif" ALT=""></CENTER></p><br>

<P class="docText">Drag the big gnu to your <span class="docEmphasis">Applications</span> folder and
off you go. That really is all there is to it. Many, many thanks to
Alex Rice and Mindlube! (And feel free to eject the mounted image
once you have copied Emacs to your hard drive.)</P>



<A NAME="gnu3-CHP-13-SECT-2.3"></A>
<H4 class="docSection2Title">13.2.3 Building Emacs from Source on Mac OS X</H4>

<P class="docText">While Mac OS X is <A NAME="gnu3-CHP-13-ITERM-2945"></A><A NAME="gnu3-CHP-13-ITERM-2946"></A><A NAME="gnu3-CHP-13-ITERM-2947"></A><A NAME="gnu3-CHP-13-ITERM-2948"></A>based (very squarely) on Unix, as of
build 21.3.5, your best bet for building Emacs is still to go with a
slightly modified build process. (The Mac build should join up with
the normal build in version 21.4.) Until 2004, that separate process
was maintained by Andrew Choi and made available to the public at
<A class="docLink" target="_blank" HREF="http://members.shaw.ca/akochoi-emacs/">http://members.shaw.ca/akochoi-emacs/</A>.
Fortunately, it is still available there, although Andrew is no
longer the Mac maintainer.</P>

<P><table border="0" bgcolor="black" cellspacing="0" cellpadding="1" width="90%" align="center"><tr><td><table bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="6"><tr><td width="60" valign="top"><img src="images/tip_yellow.gif" width="50" height="54"></td><td valign="top">
<P class="docText">Full instructions on the build can also be found at
Andrew's site. While the build is essentially the
same as it is for other Unix systems (you run <span class="docEmphBold">configure</span> and then <span class="docEmphBold">make</span>), retrieving the source code is best done
through CVS to get the latest version. If you have installed the Mac
Developer Tools CD, you'll have CVS. If you
haven't installed the Mac Developer Tools (usually
available on a separate CD that came with your Mac or with your copy
of Mac OS X), you must; the Developer Tools are required to build
version 21.3 from source.</P>
</td></tr></table></td></tr></table></P><br>

<A NAME="gnu3-CHP-13-SECT-2.3.1"></A>
<H5 class="docSection3Title">13.2.3.1 Before you build</H5>

<P class="docText">For the 21.3 build, Andrew Choi has posted the steps required to
retrieve and build Emacs at <A class="docLink" target="_blank" HREF="http://members.shaw.ca/akochoi-emacs/stories/obtaining-and-building.html">http://members.shaw.ca/akochoi-emacs/stories/obtaining-and-building.html</A>.</P>

<P class="docText">If you plan to go this route on Panther (Mac OS X 10.3), just follow
Andrew's instructions. Alternatively, you can follow
the Unix build instructions from the previous section. If
you're still running Jaguar, you'll
need to do a bit of preparatory work. Read on.</P>

<A NAME="gnu3-CHP-13-SECT-2.3.3.1"></A>
<H5 class="docSection4Title">13.2.3.1.1 Jaguar (Mac OS X 10.2) preparation</H5>

<P class="docText">The first <A NAME="gnu3-CHP-13-ITERM-2949"></A><A NAME="gnu3-CHP-13-ITERM-2950"></A>of the extra
notes is that you should upgrade to Panther (10.3) if you
aren't there already. Seriously. There are lots of
benefits. But if that's just not in the cards for
you, you do need to take a small detour before installing Emacs.</P>

<P class="docText">Mac OS X 10.2 lacks a piece of software required for Emacs: <span class="docEmphBold">texinfo</span>. (That tool comes preinstalled on
10.3.) It's not hard to install; you just have to
remember to do it. You basically install the <span class="docEmphBold">texinfo</span> package as you would if any other Unix
package. You can look back at the previous section for more details,
but here are the basics.</P>

<P class="docText">You'll need to perform these commands from the
Terminal application. By default,
Terminal starts you out with a C-Shell variant, so
we'll use the <TT>%</TT> character for the
prompt in the commands for this section.</P>

<div style="font-weight:bold"><OL class="docList" TYPE="1"><LI><div style="font-weight:normal"><P class="docList">Pull the <span class="docEmphBold">texinfo</span> package from the
<span class="docEmphasis">/pub/gnu/texinfo</span> folder at
<span class="docEmphasis">ftp.gnu.org</span>. The compressed archive file will be
called something like <span class="docEmphasis">texinfo-4.7.tar.gz</span>. Grab
the latest version available.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Unpack the archive.</P><PRE>% <B>tar xvzf texinfo-4.7.tar.gz</B></PRE><BR>
<P class="docList">If you downloaded <span class="docEmphBold">texinfo</span> through a
browser, chances are the browser uncompressed it for you. Some of
them might even have unpacked it as well. If you have a<span class="docEmphasis">.
tar</span> file sitting on your desktop, you can unpack it like
this:</P><PRE>% <B>tar xvf texinfo-4.7.tar</B></PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">Move to the <span class="docEmphasis">texinfo-4.7</span> directory and configure
your build.</P><PRE>% <B>./configure</B></PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">Assuming that all goes well, you can build everything:</P><PRE>% <B>make</B></PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">And assuming that went well, you can install it. But
you'll have to do that as an administrator.
Fortunately that's easy to do in the Terminal
window. Just run this command:</P><PRE>% <B>sudo make install</B></PRE><BR>
</div></LI></OL></div>


<P class="docText">You'll be prompted for your password. Type it in and
everything should go well. If you aren't allowed to
administer your own machine, you'll need the help of
someone who does have admin privileges.</P>

<P class="docText">Now that you've installed <span class="docEmphBold">texinfo</span>, you'll need to
download, unpack, and install Emacs, either by following Andrew
Choi's instructions or ours in the
"Emacs and Unix" section earlier in
this chapter.</P>

<P class="docText">Your Mac build should end up creating a double-clickable icon that
you can drag and drop into your <span class="docEmphasis">Applications</span>
folder just like the prebuilt download.</P>




<A NAME="gnu3-CHP-13-SECT-2.4"></A>
<H4 class="docSection2Title">13.2.4 Starting Emacs from the Command Line on Mac OS X</H4>

<P class="docText">On Mac OS X, you have Emacs preinstalled, but
<A NAME="gnu3-CHP-13-ITERM-2951"></A><A NAME="gnu3-CHP-13-ITERM-2952"></A><A NAME="gnu3-CHP-13-ITERM-2953"></A>as we
know, it is an older version of Emacs. Let's say
that you have installed the graphical version and want to start it
with some command-line arguments. For example, you might want to
run <span class="docEmphBold">emacs —debug-init</span> to debug
your <span class="docEmphasis">.emacs</span> file. The Mac OS X Gnu icon
certainly should be a permanent fixture on your Dock, but at times
the command line is the way to go.</P>

<P class="docText">We learned this trick from Andrew Choi's Mac OS X
FAQ, and we share it here, slightly tweaked, for convenience. Check
out his page at <A class="docLink" target="_blank" HREF="http://members.shaw.ca/akochoi-emacs/stories/faq.html">http://members.shaw.ca/akochoi-emacs/stories/faq.html</A>.</P>

<P class="docText">Essentially, you replace the binary that comes with Mac OS X with a
shell script that runs the new version of Emacs you installed. You
might want to simply rename the old binary so that you can on
occasion use it instead.</P>

<P class="docText">Here's the procedure.</P>

<div style="font-weight:bold"><OL class="docList" TYPE="1"><LI><div style="font-weight:normal"><P class="docList">To be sure which Emacs runs when you type <span class="docEmphBold">emacs</span>, type <span class="docEmphBold">which
emacs</span> in the Terminal application.</P><PRE>% <B>which emacs</B>
/usr/bin/emacs</PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">Rename or delete <span class="docEmphasis">/usr/bin/emacs</span>.</P><PRE>% <B>sudo mv /usr/bin/emacs /usr/bin/oldemacs</B></PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">You'll be prompted for your password.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Create a file called <span class="docEmphasis">emacs</span> with the following
two lines:</P><PRE>#!/bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$@"</PRE><BR>
<P class="docList">If you installed Emacs into a different folder, adjust the second
line accordingly.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Move the file you created to <span class="docEmphasis">/usr/bin</span>:</P><PRE>% <B>sudo mv emacs /usr/bin</B></PRE><BR>
</div></LI><LI><div style="font-weight:normal"><P class="docList">Change <span class="docEmphasis">/usr/bin/emacs</span> to be executable by the
world:</P><PRE>% <B>chmod +x /usr/bin/emacs</B></PRE><BR>
<P class="docList">Now you can invoke graphical Emacs from the terminal window simply by
typing <span class="docEmphBold">emacs</span>, with or without
command-line arguments.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-13-FNOTE-5">[5]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-13-FNOTE-5">[5]</A></sup> You can still run this new
Emacs as a plain Terminal app with the <span class="docEmphBold">-nw</span> command-line argument (type <span class="docEmphBold">emacs -nw</span>.)</p></blockquote></div></LI></OL></div>

<A NAME="gnu3-CHP-13-SECT-2.5"></A>
<H4 class="docSection2Title">13.2.5 Mac OS X and the Meta Key</H4>

<P class="docText">This book has mentioned <A NAME="gnu3-CHP-13-ITERM-2954"></A><A NAME="gnu3-CHP-13-ITERM-2955"></A><A NAME="gnu3-CHP-13-ITERM-2956"></A>using the
<span class="docEmphBold">Command</span> key for <span class="docEmphBold">Meta</span> on Mac OS X. By default, the <span class="docEmphBold">Command</span> key (sometimes called the <span class="docEmphBold">Open Apple</span> key, or more simply xxxMacSymxxx)
is <span class="docEmphBold">Meta</span>. But in fact you have a
choice. The variable <span class="docEmphBold">mac-command-key-is-meta</span> can be used to select
which key you want to use.</P>

<P class="docText">As the variable name implies, setting <span class="docEmphBold">mac-command-key-is-meta</span> to <span class="docEmphBold">t</span> means that you use xxxMacSymxxx
as the <span class="docEmphBold">Meta</span> key. So you can type the
<span class="docEmphBold">M-x</span> combination as xxxMacSymxxx<span class="docEmphBold">x</span>.</P>

<P class="docText">The alternative (setting <span class="docEmphBold">mac-command-key-is-meta</span> to <span class="docEmphBold">nil</span>) sets the <span class="docEmphBold">Option</span> (or <span class="docEmphBold">Alt</span>) key to be your <span class="docEmphBold">Meta</span> key. You might do this if you want to
continue using the <span class="docEmphBold">Command</span> key for
Mac functions or if you find that <span class="docEmphBold">Option</span> is simply easier to reach. Of course,
it's not quite that simple. Emacs still traps the
<span class="docEmphBold">Command</span> key. That trapping is
supposed to be turned off with one more variable: <span class="docEmphBold">mac-pass-command-to-system</span>, but to be honest,
we never got that to work.</P>


<A NAME="gnu3-CHP-13-SECT-2.6"></A>
<H4 class="docSection2Title">13.2.6 Installing Ispell</H4>

<P class="docText">As mentioned in <A class="docLink" HREF="gnu3-CHP-3.html#gnu3-CHP-3">Chapter 3</A>, Emacs uses
<A NAME="gnu3-CHP-13-ITERM-2957"></A><A NAME="gnu3-CHP-13-ITERM-2958"></A><A NAME="gnu3-CHP-13-ITERM-2959"></A><A NAME="gnu3-CHP-13-ITERM-2960"></A>Ispell for its spell-checking
functionality. However, despite voluminous hooks to it, the Ispell
executable is not part of Emacs and is not installed by default on
Mac OS X. You must therefore install Ispell to get spell-checking to
work properly.</P>

<P class="docText">We took the easy path to doing this: downloading and installing Fink
(see <A class="docLink" target="_blank" HREF="http://fink.sourceforge.net">http://fink.sourceforge.net</A>
for instructions). Fink is an all-purpose Mac OS X installer that
enables you to install Unix software on your Mac easily.</P>

<P class="docText">After installing Fink, installing Ispell was completely painless:</P>

<PRE>  % <B>fink install ispell</B></PRE><BR>


<P class="docText">Just one further step is required so that Emacs finds Ispell without
tweaking. Create a symbolic link between the location where Fink
installs Ispell (<span class="docEmphasis">/sw/bin/ispell</span>) and where Emacs
expects Ispell to be
(<span class="docEmphasis">/usr/bin/ispell</span>).<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-13-FNOTE-6">[6]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-13-FNOTE-6">[6]</A></sup> We found this
hint on John Schneider's web page called
"Getting Mac OS X.3 to Behave Almost Like My Linux
Boxes" (<A class="docLink" target="_blank" HREF="http://www.eecs.wsu.edu/~schneidj/mac-os-x-10.3.html">http://www.eecs.wsu.edu/~schneidj/mac-os-x-10.3.html</A>).</p></blockquote>

<PRE>% <B>sudo ln -s /sw/bin/ispell /usr/bin/ispell</B></PRE><BR>


<P class="docText">Voil&agrave;. Emacs spell-checking with Ispell now works as
described in <A class="docLink" HREF="gnu3-CHP-3.html#gnu3-CHP-3">Chapter 3</A>.</P>



<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-13-SECT-1.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-13-SECT-3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
