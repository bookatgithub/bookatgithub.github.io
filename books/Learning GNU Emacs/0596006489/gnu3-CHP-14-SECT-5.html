<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>14.5. Completion</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-14-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-APP-A.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="gnu3-CHP-14-SECT-5"></A>
<H3 class="docSection1Title">14.5. Completion</H3>

<P class="docText">We saw an
<A NAME="gnu3-CHP-14-ITERM-2999"></A>example
of Emacs's completion facility in <A class="docLink" HREF="gnu3-CHP-1.html#gnu3-CHP-1">Chapter 1</A>. Completion is more than just a feature: it
is a general principle in the design of Emacs. It can be articulated
as follows:</P>

<blockquote>
<p class="docText">If you have to type in the name of something, and that name is one of
a finite number of possibilities, Emacs should figure out what you
mean after the smallest possible number of keystrokes.</p>
</blockquote>

<P class="docText">In other words, you can type in the <span class="docEmphasis">shortest unambiguous
prefix</span> and tell Emacs to figure out the rest of the name.
By "shortest unambiguous prefix,"
we mean "enough of the name, starting from the
beginning, to distinguish it from the other
possibilities." Several important things in Emacs
have names that are chosen from a finite number of possibilities,
including the following:</P>

<UL><LI><P class="docList">Commands</P></LI><LI><P class="docList">Files in a given directory</P></LI><LI><P class="docList">Buffers</P></LI><LI><P class="docList">Emacs variables</P></LI></UL>
<P class="docText">Most of the time, completion is available when you are prompted for a
name of something in the minibuffer. While you are typing in the
name, you can use three keys to tell Emacs to help complete it for
you: <span class="docEmphBold">Tab</span>, <span class="docEmphBold">Space</span>, and question mark (<span class="docEmphBold">?</span>). Their functions are shown in <A class="docLink" HREF="#gnu3-CHP-14-TABLE-5">Table 14-5</A>.</P>

<A NAME="gnu3-CHP-14-TABLE-5"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 14-5. Completion keys</h5></CAPTION><COLGROUP><COL><COL></COLGROUP><THEAD><TR><TH class="thead" scope="col">
<P class="docText">Keystroke</P>
</TH><TH class="thead" scope="col">
<P class="docText">Action</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">Tab</span></P>
</TD><TD class="docTableCell">
<P class="docText">Completes the name as far as possible.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">Space</span></P>
</TD><TD class="docTableCell">
<P class="docText">Completes the name out to the next punctuation character.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">?</span></P>
</TD><TD class="docTableCell">
<P class="docText">Lists the choices at this point in a <TT>*Completions*</TT>
window.</P>
</TD></TR></TABLE></P><br>

<P class="docText">You will probably find <span class="docEmphBold">Tab</span> to be the
most useful.</P>

<P class="docText">As a running example, assume you have typed <span class="docEmphBold">C-x
C-f</span> to visit a file, and the file you want to visit is a C
program called <span class="docEmphasis">program.c</span>. Let's
say you type <span class="docEmphBold">pro</span> and press <span class="docEmphBold">Tab</span>; Emacs responds by completing the name to
the full <span class="docEmphasis">program.c</span>. If you press <span class="docEmphBold">Space</span>, Emacs completes only as far as
<span class="docEmphasis">program</span>. After Emacs completes the name, you can
press <span class="docEmphBold">Enter</span> to visit the file.</P>

<P class="docText">How much of the name do you need to type in before you can use
completion? That depends on the other possible choices in the given
situation. If <span class="docEmphasis">program.c</span> were the only file in
your directory, you could just type <span class="docEmphBold">p</span> and press <span class="docEmphBold">Tab</span>.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-14-FNOTE-2">[2]</A></sup> If there were
other files in your directory and none of them has a name beginning
with <span class="docEmphBold">p</span>, you could do the same thing.
But if you had a file called <span class="docEmphasis">problem.c</span>, you
would have to type <span class="docEmphBold">prog</span> before you
pressed Tab; in this case, <span class="docEmphBold">prog</span> is
the shortest unambiguous prefix. If you just type in <span class="docEmphBold">pro</span> and press <span class="docEmphBold">Tab</span>, Emacs responds with a
<TT>*Completions*</TT> window containing a list of the
completion choices, in this case <span class="docEmphasis">program.c</span> and
<span class="docEmphasis">problem.c</span>, and returns your cursor to the
minibuffer so that you can finish typing the filename. The same thing
happens if you typed a question mark instead of <span class="docEmphBold">Tab</span>. At this point, you can type <span class="docEmphBold">g</span> and press <span class="docEmphBold">Tab</span> again; Emacs completes the name to
<span class="docEmphasis">program.c</span>.</P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-14-FNOTE-2">[2]</A></sup> You
can't just press <span class="docEmphBold">Tab</span> without typing the <span class="docEmphBold">p</span> because the current and parent directories,
named <TT><I>.</I></TT> and <TT><I>..</I></TT>,
respectively, are also file choices. Normally, Emacs runs <span class="docEmphBold">dired</span> when you visit a file
that's a directory.</p></blockquote>

<P class="docText">As another example, let's say you have documentation
for your C program in the file <span class="docEmphasis">program.txt</span>, and
you want to visit it. You press <span class="docEmphBold">C-x
C-f</span> and type <span class="docEmphBold">prog</span> at the
prompt, followed by <span class="docEmphBold">Tab</span>. Emacs
completes out to <span class="docEmphasis">program</span>.. At this point, you
can type <span class="docEmphBold">t</span> and press <span class="docEmphBold">Tab</span> again; Emacs completes the entire
<span class="docEmphasis">program.txt</span>. In other words, you can use
completion repeatedly when specifying a name.</P>

<P class="docText">Finally, let's say you also have a file in your
directory called simply <span class="docEmphasis">program</span>, which is the
result of compiling your C file, but you still want to visit the
documentation file. You type <span class="docEmphBold">prog</span>
and press <span class="docEmphBold">Tab</span>; Emacs completes out
to <span class="docEmphasis">program</span>. (including the period). At this
point, <span class="docEmphBold">Tab</span> and <span class="docEmphBold">Space</span> do different things. If you press
<span class="docEmphBold">Tab</span> again, Emacs responds with the
message <TT>[Complete, but not unique]</TT> in the
minibuffer, but if you press <span class="docEmphBold">Space</span>,
Emacs assumes you aren't interested in the file
<span class="docEmphasis">program</span> and attempts to complete further.
Because you have the files <span class="docEmphasis">program.c</span> and
<span class="docEmphasis">program.txt</span>, Emacs only completes out to
<span class="docEmphasis">program</span>., and you have to type <span class="docEmphBold">t</span> and press <span class="docEmphBold">Tab</span> again.</P>

<P class="docText">Completion works the same way with buffer names, for example, when
you type <span class="docEmphBold">C-x b</span> to switch to another
buffer in the current window. It also works with command names when
you type <span class="docEmphBold">M-x</span>—but with one
added feature. Notice that when you specify a file or buffer name, it
is possible that the file or buffer you want doesn't
yet exist (for example, when you want to create a new file). In this
case, of course, you must type in the entire file or buffer name and
press <span class="docEmphBold">Enter</span>. But when you type
<span class="docEmphBold">M-x</span> for a command, there is no
possibility of the command not existing. Therefore, Emacs
automatically attempts to do completion on command names when you
press <span class="docEmphBold">Enter</span>.</P>

<P class="docText">For example, if you want to put a buffer for a text file in auto-fill
mode (see <A class="docLink" HREF="gnu3-CHP-2.html#gnu3-CHP-2">Chapter 2</A>), you can type <span class="docEmphBold">M-x auto-f</span> and press <span class="docEmphBold">Enter</span> instead of typing the entire <span class="docEmphBold">M-x auto-fill-mode</span>. If you type in a nonunique
(ambiguous) prefix of a command name—for example, if you type
<span class="docEmphBold">M-x aut</span>—and press <span class="docEmphBold">Enter</span>, then <span class="docEmphBold">Enter</span> acts just like <span class="docEmphBold">Tab</span>; in this case, it completes out to
<span class="docEmphBold">auto</span>. If you press <span class="docEmphBold">Enter</span> again, Emacs responds with a
<TT>*Completions*</TT> window listing the choices. To get
<span class="docEmphBold">auto-fill-mode</span>, you have to type
<span class="docEmphBold">f</span> and press <span class="docEmphBold">Enter</span> again.</P>

<P class="docText">Completion on command names with <span class="docEmphBold">Enter</span> is <span class="docEmphasis">very</span> convenient.
After you have used Emacs for a while, you will become familiar with
the shortest unambiguous prefixes for commands you use often, and you
can save a considerable amount of typing by using these prefixes
instead of the full names.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-14-FNOTE-3">[3]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-14-FNOTE-3">[3]</A></sup> For example, if you make
changes to your <span class="docEmphasis">.emacs</span> file regularly, you will
appreciate that <span class="docEmphBold">M-x eval-c</span> is an
acceptable prefix for <span class="docEmphBold">M-x
eval-current-buffer</span>.</p></blockquote>

<P class="docText">Emacs can also do completion on the names of Emacs variables. In
<A class="docLink" HREF="gnu3-CHP-2.html#gnu3-CHP-2">Chapter 2</A>, and elsewhere, we saw how you can
use <span class="docEmphBold">M-x set-variable</span> to change the
values of Emacs variables. The <span class="docEmphBold">Enter</span>
feature just described works on variables as well as commands;
therefore, you can use completion, including <span class="docEmphBold">Enter</span>, when doing <span class="docEmphBold">M-x
set-variable</span>. Actually, commands and variables are both
special kinds of Emacs Lisp <span class="docEmphasis">symbols</span>, and Emacs
can do completion with <span class="docEmphBold">Enter</span> on all
kinds of Lisp symbols. Completion on Lisp symbols comes in handy when
you are using some of the help commands described earlier in this
chapter.</P>

<A NAME="gnu3-CHP-14-SECT-5.1"></A>
<H4 class="docSection2Title">14.5.1 Customizing Completion</H4>

<P class="docText">If you have read <A class="docLink" HREF="gnu3-CHP-10.html#gnu3-CHP-10">Chapter 10</A> and are
<A NAME="gnu3-CHP-14-ITERM-3000"></A><A NAME="gnu3-CHP-14-ITERM-3001"></A>comfortable
with setting Emacs variables, you should know that a few variables
can customize the way Emacs does completion. The variable <span class="docEmphBold">completion-auto-help</span> determines whether a
<TT>*Completions*</TT> window automatically appears when
you try to use <span class="docEmphBold">Space</span> or <span class="docEmphBold">Tab</span> on an ambiguous prefix. Its default is
<span class="docEmphBold">t</span>, meaning that such windows
automatically appear. If you set it to <span class="docEmphBold">nil</span>, instead of a
<TT>*Completions*</TT> window appearing, Emacs just
displays the message <TT>[Next</TT> <TT>char not
unique]</TT> for a couple of seconds in the minibuffer.</P>

<P class="docText">If you are a programmer or if you use text formatters like LATEX ,
you will create files that are not meant for humans to read, such as
object files created by compilers and print files created by text
formatters. Ideally, you wouldn't want Emacs to
bother with these files when you are doing completion; for example,
if you have the files <span class="docEmphasis">program.c</span> and
<span class="docEmphasis">program.o</span> (object-code output from the
compiler), you want Emacs to recognize only the former. Emacs does
have a feature that deals with this; indeed, you may already have
noticed that in this kind of situation, if you type <span class="docEmphBold">program</span> and press <span class="docEmphBold">Tab</span>, Emacs ignores
<span class="docEmphasis">program.o</span> and completes out to
<span class="docEmphasis">program.c</span>. The variable <span class="docEmphBold">completion-ignored-extensions</span> controls this;
it is a list of filename suffixes that Emacs ignores during filename
completion. By default, the list includes tilde
(<TT><I>~</I></TT>) for Emacs backup files,
<span class="docEmphasis">.o</span> for programmers, various suffixes for users,
<span class="docEmphasis">.elc</span> (byte-compiled Emacs Lisp) for Emacs
customizers, and others. (Of course, if you really want to look at
these files, you can type their names manually.)</P>

<P class="docText">You can add your own "ignored"
suffix to the list by putting a line of this form in your
<span class="docEmphasis">.emacs</span> file:</P>

<PRE>(setq completion-ignored-extensions
      (cons "<TT><I>suffix</I></TT>" completion-ignored-extensions))</PRE><BR>


<P class="docText">For example, let's say you are doing text processing
with a printer that prints PostScript, and your text processor
produces print files with the suffix <span class="docEmphasis">.ps</span>. If you
don't want to look at these files, put the following
line in your <span class="docEmphasis">.emacs</span> file:</P>

<PRE>(setq completion-ignored-extensions
      (cons ".ps" completion-ignored-extensions))</PRE><BR>


<P class="docText">Finally, you can tell Emacs to ignore case distinctions when doing
completion by setting the variable <span class="docEmphBold">completion-ignore-case</span> to <span class="docEmphBold">t</span> (or any value other than <span class="docEmphBold">nil</span>). Its default value is <span class="docEmphBold">nil</span>, meaning that Emacs respects case
distinctions.</P>








<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-14-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-APP-A.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
