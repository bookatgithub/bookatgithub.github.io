<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>2.7. Making Emacs Work the Way You Want</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-2-SECT-6.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="gnu3-CHP-2-SECT-7"></A>
<H3 class="docSection1Title">2.7. Making Emacs Work the Way You Want</H3>

<P class="docText">If you've been reading straight through this book,
you may have started a list of things you'd like to
change
<A NAME="gnu3-CHP-2-ITERM-1819"></A><A NAME="gnu3-CHP-2-ITERM-1820"></A><A NAME="gnu3-CHP-2-ITERM-1821"></A><A NAME="gnu3-CHP-2-ITERM-1822"></A><A NAME="gnu3-CHP-2-ITERM-1823"></A><A NAME="gnu3-CHP-2-ITERM-1824"></A><A NAME="gnu3-CHP-2-ITERM-1825"></A><A NAME="gnu3-CHP-2-ITERM-1826"></A><A NAME="gnu3-CHP-2-ITERM-1827"></A><A NAME="gnu3-CHP-2-ITERM-1828"></A><A NAME="gnu3-CHP-2-ITERM-1829"></A>about
Emacs, such as</P>

<UL><LI><P class="docList">Hiding the toolbar</P></LI><LI><P class="docList">Changing Emacs cut and paste commands to <span class="docEmphBold">C-x</span>, <span class="docEmphBold">C-c</span>, and
<span class="docEmphBold">C-v</span></P></LI><LI><P class="docList">Turning on text mode and a fill mode so Emacs does word wrap</P></LI><LI><P class="docList">Changing the way some of the keys work</P></LI></UL>
<P class="docText">We're going to tell you how to give Emacs the to-do
list, a list of options to turn on each time you enter Emacs. These
options are defined in an initialization file called
<span class="docEmphasis">.emacs</span>. Initialization files run automatically.
Some run when you start up your computer. Others, like
<span class="docEmphasis">.emacs</span>, run when you start up an associated
software program. So <span class="docEmphasis">.emacs</span> runs automatically
when you start Emacs and turns on whatever options the file defines.
Emacs doesn't need this file to run; its only
purpose is to make Emacs work the way you want it to.</P>

<P class="docText">The <span class="docEmphasis">.emacs</span> file consists of Lisp statements. If
you're not a Lisp programmer, you can think of each
line as an incantation that follows a certain pattern; you need to
type it exactly.</P>

<P class="docText">Emacs now has <A NAME="gnu3-CHP-2-ITERM-1830"></A>another way to handle customization:
an interactive interface called Custom that writes Lisp for you and
automatically inserts it in your <span class="docEmphasis">.emacs</span> file.
The Custom interface is discussed in <A class="docLink" HREF="gnu3-CHP-10.html#gnu3-CHP-10">Chapter 10</A>,
but we'll show you an even faster method for common
options. <A NAME="gnu3-CHP-2-ITERM-1831"></A></P>

<P class="docText">When you want to add a line to your <span class="docEmphasis">.emacs</span> file
directly, take these steps:</P>

<div style="font-weight:bold"><OL class="docList" TYPE="1"><LI><div style="font-weight:normal"><P class="docList">Enter Emacs (if you're not already there).</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Type <span class="docEmphBold">C-x C-f ~/.emacs</span> <span class="docEmphBold">Enter</span>.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Type the line to be added exactly as shown in this book and press
Enter.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Press <span class="docEmphBold">C-x C-s</span> to save the
<span class="docEmphasis">.emacs</span> file.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Press <span class="docEmphBold">C-x C-c</span> to exit Emacs.</P></div></LI><LI><div style="font-weight:normal"><P class="docList">Restart Emacs to have the line take effect.</P></div></LI></OL></div>
<P class="docText">If you make a minor typing mistake (such as forgetting a single
quotation mark or a parenthesis), you are likely to get an error
message that says <TT>Error in init file</TT> when you
restart Emacs. Simply edit the <span class="docEmphasis">.emacs</span> file
again, checking the line you added against the place you got it from,
whether from this book or another user's
<span class="docEmphasis">.emacs</span> file. Usually, you can find the error if
you look hard enough; if not, find someone who has a
<span class="docEmphasis">.emacs</span> file (and preferably understands Lisp)
and ask for help. Make the changes, save the file, and restart Emacs.</P>

<P class="docText">What if you make a change that essentially keeps Emacs from being
able to start? You can still exit Emacs, rename the file, edit it,
then save it as <I>.emacs</I> and try again.</P>

<A NAME="gnu3-CHP-2-SECT-7.1"></A>
<H4 class="docSection2Title">2.7.1 Hiding the Toolbar</H4>

<P class="docText">New users may find the
<A NAME="gnu3-CHP-2-ITERM-1832"></A><A NAME="gnu3-CHP-2-ITERM-1833"></A><A NAME="gnu3-CHP-2-ITERM-1834"></A>toolbar helpful. Others may
not. It's easy to hide it by selecting
Options<img src=images/ent/U2192.GIF border=0> Show/Hide<img src=images/ent/U2192.GIF border=0> Toolbar, and then
Options<img src=images/ent/U2192.GIF border=0> Save Options.</P>

<P class="docText">When Emacs sets options for you through Custom (and this is what it
is doing even when you use the Options menu), it writes your
<span class="docEmphasis">.emacs</span> file. If you already have a
<span class="docEmphasis">.emacs</span> file, it appends to it. Custom
essentially groups all of its settings in one part of the file, and
it is commented to indicate that you should not change it manually.
Here's the <span class="docEmphasis">.emacs</span> file that we
created by selecting this option:</P>

<PRE> (custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(tool-bar-mode nil nil (tool-bar)))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )</PRE><BR>


<P class="docText">This may seem a bit bulky, but as we'll see in the
next section, Emacs adds this section only once and then augments it
when you set more options either through the options menu or directly
through the Custom interface. Also note that this auto-generated Lisp
is certainly less clean than Lisp statements you'll
typically see in <span class="docEmphasis">.emacs</span> files.
That's another reason not to edit
Custom's work directly.</P>


<A NAME="gnu3-CHP-2-SECT-7.2"></A>
<H4 class="docSection2Title">2.7.2 Turning On CUA Mode for C-x, C-c, and C-v to Cut, Copy, and Paste</H4>

<P class="docText">If you're new to Emacs, <A NAME="gnu3-CHP-2-ITERM-1835"></A><A NAME="gnu3-CHP-2-ITERM-1836"></A><A NAME="gnu3-CHP-2-ITERM-1837"></A><A NAME="gnu3-CHP-2-ITERM-1838"></A>you might be
used to the Common User Access (CUA) conventions for cutting,
copying, and pasting, <span class="docEmphBold">C-x</span>, <span class="docEmphBold">C-c</span>, and <span class="docEmphBold">C-v</span>
respectively. You might reach for <span class="docEmphBold">C-z</span> for undo. CUA mode was once an add-on mode
that you had to install separately, but it became so popular that it
is now part of Emacs. It's coded in a clever way
that doesn't interfere with Emacs keystrokes that
are prefixed with <span class="docEmphBold">C-x</span> and <span class="docEmphBold">C-c</span>. Details on CUA mode can be found in <A class="docLink" HREF="gnu3-CHP-13.html#gnu3-CHP-13">Chapter 13</A>.</P>

<P class="docText">You can turn this feature on through the Options menu to try it out.
Simply choose Options<img src=images/ent/U2192.GIF border=0> C-x/C-c/C-v cut and paste (CUA).
After you select this option, a check mark appears next to it on the
Options menu. To keep it for subsequent sections, select Save Options
from the Options menu. Emacs writes your <span class="docEmphasis">.emacs</span>
file for you. If you turned off the toolbar and then set this option,
your <span class="docEmphasis">.emacs</span> file would look like this (note that
the line relating to CUA mode is bold so you can see the difference
from the previous example):</P>

<PRE> (custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '<span class="docEmphBold">(cua-mode t nil (cua-base))</span>
 '(tool-bar-mode nil nil (tool-bar)))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )</PRE><BR>


<P class="docText">Interestingly, Emacs happily writes the <span class="docEmphasis">.emacs</span>
file even if it is open at the time. You can watch Emacs
change the file if you have it open when you choose Save Options.</P>


<A NAME="gnu3-CHP-2-SECT-7.3"></A>
<H4 class="docSection2Title">2.7.3 Turning On Text Mode and Auto-Fill Mode Automatically</H4>

<P class="docText">To make text mode the default <A NAME="gnu3-CHP-2-ITERM-1839"></A><A NAME="gnu3-CHP-2-ITERM-1840"></A><A NAME="gnu3-CHP-2-ITERM-1841"></A><A NAME="gnu3-CHP-2-ITERM-1842"></A>major
mode and start auto-fill mode automatically each time you enter
Emacs, add these lines to your <span class="docEmphasis">.emacs</span> file:</P>

<PRE>(setq default-major-mode 'text-mode)
(add-hook 'text-mode-hook  'turn-on-auto-fill)</PRE><BR>


<P class="docText">The first line tells Emacs to make text mode the default major mode;
in other words, "Turn on text mode unless I tell you
otherwise." The second line turns on auto-fill mode
whenever you are in text mode. Alternatively, selecting
Options<img src=images/ent/U2192.GIF border=0> Word Wrap in Text Modes, and then Options<img src=images/ent/U2192.GIF border=0>
Save Options adds auto-fill mode to your <span class="docEmphasis">.emacs</span>
file directly. It doesn't make text mode the default
major mode, however.</P>

<P class="docText">If you prefer refill mode, replace the second line of code with this
line:</P>

<PRE>(add-hook 'text-mode-hook (lambda ( ) (refill-mode 1)))</PRE><BR>



<A NAME="gnu3-CHP-2-SECT-7.4"></A>
<H4 class="docSection2Title">2.7.4 Remapping Keys</H4>

<P class="docText">Another major use of the <span class="docEmphasis">.emacs</span> file is
<A NAME="gnu3-CHP-2-ITERM-1843"></A><A NAME="gnu3-CHP-2-ITERM-1844"></A><A NAME="gnu3-CHP-2-ITERM-1845"></A><A NAME="gnu3-CHP-2-ITERM-1846"></A>to
redefine things about Emacs that irritate you. You may have ergonomic
concerns about Emacs; more than one person has aggravated carpal
tunnel syndrome using the default bindings. You may simply be used to
reaching for certain keys for certain functions and would rather
change Emacs than your habits. Whatever the case, this section gives
a brief introduction to key remapping; for more details, see <A class="docLink" HREF="gnu3-CHP-10.html#gnu3-CHP-10">Chapter 10</A>.</P>

<P class="docText">If you use the default bindings (rather than CUA mode), you may use
<span class="docEmphBold">C-x u</span> for undo.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-2-FNOTE-10">[10]</A></sup> (Undo is such a common
command that it's easy to type <span class="docEmphBold">C-x C-u</span> by mistake when you undo repeatedly.
Unfortunately, <span class="docEmphBold">C-x C-u</span> is a disabled
command for <span class="docEmphBold">upcase-region</span>. If you
type <span class="docEmphBold">C-x C-u</span>, an annoying message
about enabling the command pops up.</P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-2-FNOTE-10">[10]</A></sup> You
could use <span class="docEmphBold">C-_</span> for undo instead and
then you wouldn't need to read this section. We
recommend that you read it anyway because you might find another
annoying key mapping that you want to change and this section tells a
bit about how to do so.</p></blockquote>

<P class="docText">If you don't anticipate a big need for upcasing
regions, you can redefine <span class="docEmphBold">C-x C-u</span> so
that it also runs <span class="docEmphBold">undo</span>. To do so,
add this line to your <span class="docEmphasis">.emacs</span> file:</P>

<PRE>(define-key global-map "\C-x\C-u" 'undo)</PRE><BR>


<P class="docText">After making this change, typing <span class="docEmphBold">C-x
C-u</span> runs undo, just as <span class="docEmphBold">C-x
u</span> does.</P>

<P class="docText">Emacs customization is extremely powerful, and you can make Emacs
work just the way you want it to. A far more extensive treatment of
customization is found in <A class="docLink" HREF="gnu3-CHP-10.html#gnu3-CHP-10">Chapter 10</A>. This brief
introduction is meant to whet your appetite and to make it possible
for you to add lines to your <span class="docEmphasis">.emacs</span> file as we
mention potential customizations throughout the book.</P>

<P class="docText">The next chapter covers topics such as the many searches offered by
Emacs, including query-replace, as well as spell checking and word
abbreviation mode (often used to correct typos automatically). If you
want to learn about these features, go on to the next chapter. From
here on, you can take a selective approach to reading this book,
picking and choosing whatever you want to learn about; you
don't need to read the rest of the book
sequentially.</P>


<A NAME="gnu3-CHP-2-SECT-7.5"></A>
<H4 class="docSection2Title">2.7.5 Problems You May Encounter</H4>

<UL><LI><P class="docList"><span class="docEmphBold">You get an error message when you start Emacs
after changing the</span> <span class="docEmphasis">.emacs</span> <span class="docEmphBold">file</span>. The message appears only
<A NAME="gnu3-CHP-2-ITERM-1847"></A><A NAME="gnu3-CHP-2-ITERM-1848"></A>briefly; press <span class="docEmphBold">M-p</span> to view it again. Edit your
<span class="docEmphasis">.emacs</span> file, checking the lines you added
carefully against their source for minor typographical errors.
Something as simple as a missing hyphen or apostrophe can cause this
error. Fix the error, save the file, exit Emacs, and reenter. In
extreme cases (the <span class="docEmphasis">.emacs</span> file is so messed up
that Emacs won't even let you edit it), exit Emacs,
rename the <span class="docEmphasis">.emacs</span> file, and then start Emacs and
edit it again to fix it. Rename it back to
<span class="docEmphasis">.emacs</span> and start again.</P></LI><LI><P class="docList"><span class="docEmphBold">Paragraphs are not reformatted
properly</span>. This
<A NAME="gnu3-CHP-2-ITERM-1849"></A><A NAME="gnu3-CHP-2-ITERM-1850"></A><A NAME="gnu3-CHP-2-ITERM-1851"></A>seems to relate to window size. Try
resizing the window horizontally until paragraphs format properly.</P></LI></UL>







<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-2-SECT-6.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-3.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
