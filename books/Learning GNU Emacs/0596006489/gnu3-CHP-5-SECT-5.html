<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>5.5. Using Time Management Tools</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-5-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="gnu3-CHP-5-SECT-5"></A>
<H3 class="docSection1Title">5.5. Using Time Management Tools</H3>

<P class="docText">Emacs is a natural place to organize all your work. It
won't replace your Palm or other handheld, but
ongoing work in this area may help you sync your favorite device with
your Emacs-based schedule. Here we cover the main features that Emacs
itself offers—the calendar and the diary.</P>

<A NAME="gnu3-CHP-5-SECT-5.1"></A>
<H4 class="docSection2Title">5.5.1 Displaying the Calendar</H4>

<P class="docText">To display the calendar,
<A NAME="gnu3-CHP-5-ITERM-2233"></A><A NAME="gnu3-CHP-5-ITERM-2234"></A>type
<span class="docEmphBold">M-x calendar</span>. Emacs displays a
calendar window with three months: last month, this month, and next
month.</P>

<A NAME="ch05-25-fm2xml"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><COLGROUP><COL></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell">
<P class="docText">Type: <span class="docEmphBold">M-x calendar</span></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><IMG BORDER="0" width="425" height="200" SRC="images/0596006489/figs/ge3_ch05scrn22.gif" ALT=""></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Emacs puts the cursor on today's date and displays
the date on the mode line. There's no room to write
on the calendar; that's what the diary is for, which
we'll discuss shortly.</P>
</TD></TR></TABLE></P><br>

<P class="docText">By default, weeks start
<A NAME="gnu3-CHP-5-ITERM-2235"></A>on Sunday. If you'd like
them to start on Monday instead, type <span class="docEmphBold">M-x
set-variable calendar-week-start Enter 1 Enter</span>. You enter
the calendar again to have this take effect. If
you'd like to have the calendar always start on
Monday, add this line to your <span class="docEmphasis">.emacs</span> file:</P>

<PRE>(setq calendar-week-start-day 1)</PRE><BR>


<P class="docText">If you'd like to see the calendar each time you
start Emacs, you can add this line to your
<span class="docEmphasis">.emacs</span> file:</P>

<PRE>(calendar)</PRE><BR>


<A NAME="gnu3-CHP-5-SECT-5.1.1"></A>
<H5 class="docSection3Title">5.5.1.1 Moving in the calendar</H5>

<P class="docText">When you're in the calendar, Emacs
<A NAME="gnu3-CHP-5-ITERM-2236"></A><A NAME="gnu3-CHP-5-ITERM-2237"></A>sensibly
moves by day rather than by character. <span class="docEmphBold">C-f</span> moves you to the next day; <span class="docEmphBold">C-b</span> moves you to the previous day. <span class="docEmphBold">C-n</span> moves you to the same day of the next
week; <span class="docEmphBold">C-p</span> moves you back a week. The
arrow keys work the same way. <span class="docEmphBold">M-}</span>
and <span class="docEmphBold">M-{</span> move forward and backward by
month, and <span class="docEmphBold">C-x [</span> and <span class="docEmphBold">C-x ]</span> move forward and backward by year.
<span class="docEmphBold">C-v</span> scrolls forward by three months;
<span class="docEmphBold">M-v</span> scrolls back three months.</P>

<P class="docText">The movement commands just discussed move you relative to the cursor
position. If you're on Tuesday and you press
<span class="docEmphBold">C-n</span>, you'll move to
next Tuesday. If you're on January 25 and press
<span class="docEmphBold">M-}</span> you'll move to
February 25. If you're on August 15, 2004 and press
<span class="docEmphBold">C-x [</span>, you'll move
to August 15, 2003.</P>

<P class="docText">Other commands move to the beginning or the end of the week, month,
or year. <span class="docEmphBold">C-a</span> and <span class="docEmphBold">C-e</span> move to the beginning and end of the week,
<span class="docEmphBold">M-a</span> moves to the beginning of the
month, and <span class="docEmphBold">M-&lt;</span> moves to the
beginning of the year. <A class="docLink" HREF="#gnu3-CHP-5-TABLE-4">Table 5-4</A> summarizes these
calendar movement commands.</P>

<P class="docText">To go to a particular date, press <span class="docEmphBold">g
d</span>. Emacs asks for the year, then the month, and then the
day. Emacs moves you to the day selected (this command is well-suited
for answering that all-important question, "On what
day of the week does my birthday fall in 2020?").</P>

<A NAME="gnu3-CHP-5-TABLE-4"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 5-4. Calendar movement commands</h5></CAPTION><COLGROUP><COL><COL><COL></COLGROUP><THEAD><TR><TH class="thead" scope="col">
<P class="docText">Keystrokes</P>
</TH><TH class="thead" scope="col">
<P class="docText">Command name</P>
</TH><TH class="thead" scope="col">
<P class="docText">Action</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">(none)</span><span class="docEmphasis">Tools</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Display Calendar</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display the calendar.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">.<span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Today</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-goto-today</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to today's date.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-f</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-forward-day</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move forward a day.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-b</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-backward-day</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move backward a day.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-n</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-forward-week</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move forward a week.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-p</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-backward-week</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move backward a week.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-}</span></P>
</TD><TD class="docTableCell">
<P class="docText">calendar-forward-month</P>
</TD><TD class="docTableCell">
<P class="docText">Move forward one month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-{</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-backward-month</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move backward a month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-x ]</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Forward 1 Year</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-forward-year</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move forward a year.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-x [</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Backward 1 Year</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-backward-year</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move backward a year.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-a</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Beginning of Week</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-beginning-of-week</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the beginning of the week.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-e</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">End of Week</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-end-of-week</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the end of the week.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-a</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Beginning of Month</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-beginning-of-month</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the beginning of the month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-e</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">End of Month</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-end-of-month</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the end of the month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-&lt;</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Beginning of Year</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-beginning-of-year</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the beginning of the year.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-&gt;</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">End of Year</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-end-of-year</span></P>
</TD><TD class="docTableCell">
<P class="docText">Move to the end of the year.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">g d</span><span class="docEmphasis">Goto</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Other Date</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-goto-date</span></P>
</TD><TD class="docTableCell">
<P class="docText">Go to the specified date.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">o</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-other-month</span></P>
</TD><TD class="docTableCell">
<P class="docText">Put the specified month in the middle of the display.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-x &lt;</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Forward 1 Month</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-calendar-left</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll forward one month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-x &gt;</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Backward 1 Month</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-calendar-right</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll backward one month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-v</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Forward 3 Months</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-calendar-left-three-months</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll forward three months.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-v</span><span class="docEmphasis">Scroll</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Forward 3 Months</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-calendar-right-three-months</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll backward three months.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">Space</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-other-window</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll another window.</P>
</TD></TR></TABLE></P><br>



<A NAME="gnu3-CHP-5-SECT-5.1.2"></A>
<H5 class="docSection3Title">5.5.1.2 Displaying holidays</H5>

<P class="docText">Let's move to a topic
everyone<A NAME="gnu3-CHP-5-ITERM-2240"></A><A NAME="gnu3-CHP-5-ITERM-2241"></A> is interested in:
holidays. To display the holidays for the part of the calendar you
are looking at, type <span class="docEmphBold">a</span> (for
<span class="docEmphBold">list-calendar-holidays</span>) or select
<span class="docEmphBold">3 Months</span> from the <span class="docEmphBold">Holidays</span> menu.</P>

<A NAME="ch05-27-fm2xml"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><COLGROUP><COL></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell">
<P class="docText">Type: <span class="docEmphBold">a</span></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><IMG BORDER="0" width="425" height="200" SRC="images/0596006489/figs/ge3_ch05scrn23.gif" ALT=""></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Emacs lists holidays for the time period shown.</P>
</TD></TR></TABLE></P><br>

<P class="docText">As you can see, Emacs knows about a fairly wide variety of holidays
or, as it calls them, "notable
dates." If you are somewhere else on the calendar
but want to see holidays surrounding the current month, type
<span class="docEmphBold">M-x holidays</span>. Emacs lists them. To
see whether today is a holiday, type <span class="docEmphBold">h</span> or select <span class="docEmphBold">One
Day</span> from the <span class="docEmphBold">Holidays</span>
menu.</P>

<P class="docText">Typing <span class="docEmphBold">x</span> marks holidays in a special
way, typically highlighting them in pink. If the display
doesn't support this, Emacs puts an asterisk to the
right of the date. Typing <span class="docEmphBold">u</span> removes
the marks.</P>

<P class="docText">We have taught you only the bare bones of the calendar commands.
Emacs offers to tell you sunrise and sunset and phases of the moon.
You can choose other calendars, like the Islamic calendar, the Hebrew
calendar, the Mayan calendar, or even the French Revolutionary
calendar. But we will leave these for you to explore.</P>

<P class="docText">More calendar commands are used in the context of the diary,
discussed next.</P>



<A NAME="gnu3-CHP-5-SECT-5.2"></A>
<H4 class="docSection2Title">5.5.2 Using the Diary</H4>

<P class="docText">The diary, closely related to the calendar, allows you to make notes
about certain dates. You can enter a full daily schedule or just mark
major events. The level of detail is entirely up to you.</P>

<A NAME="gnu3-CHP-5-SECT-5.2.1"></A>
<H5 class="docSection3Title">5.5.2.1 Creating a diary file</H5>

<P class="docText">To use the diary, you
<A NAME="gnu3-CHP-5-ITERM-2242"></A><A NAME="gnu3-CHP-5-ITERM-2243"></A>must have a
<span class="docEmphasis">diary</span> file that contains notations about
important events or things to do. It can remind you to back up your
system every Thursday, that you get paid every two weeks, that
you're on vacation during the first two weeks in
July, or that your mother's birthday is August 6.</P>

<P class="docText">The file must be called <span class="docEmphasis">diary</span> and must exist in
your home directory. In this file, you insert lines—or have
Emacs write lines for you—that note dates you want to remember.
The <span class="docEmphasis">diary</span> file need not be all in one format and
need not be sorted in any particular order. Date formats can be
mixed: December 19, 2004 could be 12/19/04, Dec 19 04, or dec 19
2004. Here are a few lines from a <span class="docEmphasis">diary</span> file to
illustrate what we mean.</P>

<PRE>11/14 My birthday
July 17 2004 Company picnic
March 18 2004 Annual report due
January 8 2004 Hair appointment
&amp;Saturday Tea with Queen Elizabeth
Friday Payday</PRE><BR>


<P class="docText">If you don't specify a year, Emacs assumes you want
to mark that date every year, as in birthdays. If you
don't specify a date but only the day of the week
(as in tea with the queen on Saturday), Emacs displays the diary
entry every Saturday. Putting an ampersand (&amp;) before an entry
tells Emacs not to mark it on the calendar (you
don't want every Saturday marked, and you may not
want everyone to know that you hang around with the royal family).</P>

<P class="docText">Date formats can be mixed, but the choice to use European date format
(DD/MM/YYYY or 9 October 2004) versus the default American format
(MM/DD/YYYY or October 9, 2004) must be made before you create the
<span class="docEmphasis">diary</span> file. To specify European date format, add
this line to your <span class="docEmphasis">.emacs</span> file:</P>

<P class="docText"><TT>(setq european-calendar-style 't)</TT></P>



<A NAME="gnu3-CHP-5-SECT-5.2.2"></A>
<H5 class="docSection3Title">5.5.2.2 <span class="docEmphBold">Adding diary entries</span></H5>

<P class="docText">You can write your own
<A NAME="gnu3-CHP-5-ITERM-2244"></A>entries or have Emacs help you put
them in. To have Emacs help you, go to the calendar by typing
<span class="docEmphBold">M-x calendar</span>. Then press <span class="docEmphBold">g d</span> to specify the date you want to move to.
Press <span class="docEmphBold">i d</span> (for <span class="docEmphBold">insert-diary-entry</span>). Emacs moves you to the
diary window with the date written out. You can then make a diary
entry next to the date. If your entry spans more than one line, begin
the second and subsequent lines with a single space, so that Emacs
understands it's a continuation. After you make the
notation about the date, Emacs leaves you in the
<TT>diary</TT> buffer so you can make more entries. Type
<span class="docEmphBold">C-x b</span> to move to another buffer.</P>

<P class="docText">The <span class="docEmphBold">insert-diary-entry</span> command
assumes you want to make a single, one-time entry. To create a
recurring entry, you need a few more commands. To insert a weekly
entry, type <span class="docEmphBold">i w</span>. Emacs moves you to
the <TT>diary</TT> buffer with the day of the week written
out. Type the weekly activity (such as a staff meeting), and save the
<span class="docEmphasis">diary</span> file. To insert an annual entry, type
<span class="docEmphBold">i y</span>. Emacs moves you to the
<TT>diary</TT> buffer with the day and month written out;
type the annual event. There is a more specific command for
anniversaries. Type <span class="docEmphBold">i a</span> to add an
anniversary; this entry includes the year (though we have not seen a
function that uses this information for any particular purpose, such
as counting which anniversary this is).</P>

<P class="docText">You can also put <A NAME="gnu3-CHP-5-ITERM-2245"></A><A NAME="gnu3-CHP-5-ITERM-2246"></A>in <span class="docEmphasis">cyclic</span> diary
entries, entries that occur at regular intervals, like reminders to
change the oil in your car every three months. To do so, move to the
date you changed your oil last and type <span class="docEmphBold">i
c</span>. Emacs says, <TT>Repeat every how many
days</TT>: and you type the number of days between oil changes.
Emacs writes a Lisp function to handle this and puts it in the
<TT>diary</TT> buffer. You can then make a notation next to
the Lisp function, such as a note that tells you to change the oil.
The entry that Emacs inserts looks like this (we put the part about
changing the oil in ourselves):</P>

<PRE>%%(diary-cyclic 90 12 23 2004) Change the oil</PRE><BR>


<P class="docText">The entry says that every 90 days, counting from the day we inserted
the entry, December 23, 2004, we should change the oil in our car.</P>

<P class="docText">You can mark a <A NAME="gnu3-CHP-5-ITERM-2247"></A>block of dates, as in the
case of a week-long conference or a vacation. Put the cursor on the
first date and press <span class="docEmphBold">C-Space</span> to set
the mark.<sup class="docFootnote"><A class="docLink" HREF="#gnu3-CHP-5-FNOTE-7">[7]</A></sup> Move
(using calendar movement commands like <span class="docEmphBold">C-f</span>, <span class="docEmphBold">C-n</span>, and
so on) to the second date and press <span class="docEmphBold">i
b</span>. Emacs moves you to the <TT>diary</TT> buffer
and inserts an incantation that marks the week on your calendar. Make
a notation following the Lisp function Emacs inserts. The entry will
look something like this:</P><blockquote><p class="docFootnote"><sup><A NAME="gnu3-CHP-5-FNOTE-7">[7]</A></sup> If you normally use another binding for the
<span class="docEmphBold">set-mark</span> command or if you typically
spell out that command, you'll run into a problem
marking regions in the calendar. In the calendar, <span class="docEmphBold">C-Space</span> and <span class="docEmphBold">C-@</span> run <span class="docEmphBold">calendar-set-mark</span> rather than <span class="docEmphBold">set-mark</span>, so that regions are marked by time
rather than just across the screen. To mark regions correctly in the
calendar (linearly by time rather than simply across the screen), you
must type <span class="docEmphBold">C-Space</span>, <span class="docEmphBold">C-@</span>, or <span class="docEmphBold">M-x
calendar-set-mark</span> to set the mark.</p></blockquote>

<PRE>%%(diary-block 3 15 2004 3 20 2004) Trip to Alabama</PRE><BR>


<P class="docText">This entry indicates that from March 15 to March 20,
we'll go on a trip to Alabama.</P>

<P class="docText">What if you want to note that you have to file your expense report on
the fifteenth of every month? Emacs accepts the asterisk wildcard (*)
for the month, as you will see when you type <span class="docEmphBold">i
m</span> (for <span class="docEmphBold">insert-monthly-diary-entry</span>). Emacs inserts an
asterisk in place of the month, followed by the day, as in <span class="docEmphBold">*</span> <span class="docEmphBold">15</span> for
something scheduled for the fifteenth of each month. As always, you
make a note following the entry.</P>

<P class="docText">Now that you see how Emacs constructs diary entries, you can try
writing some of your own based on what Emacs has done. After all, the
<span class="docEmphasis">diary</span> file is like any other Emacs file; you can
make changes, add lines, and delete lines at will. The only
requirement is that you save the file when you're
through. Now let's see how to display diary entries
on the appropriate dates.</P>



<A NAME="gnu3-CHP-5-SECT-5.2.3"></A>
<H5 class="docSection3Title">5.5.2.3 <span class="docEmphBold">Displaying diary entries</span></H5>

<P class="docText">If you want to review the
<A NAME="gnu3-CHP-5-ITERM-2248"></A><A NAME="gnu3-CHP-5-ITERM-2249"></A>diary entries for a given date, press
<span class="docEmphBold">d</span> from the calendar. In order to see
the whole <span class="docEmphasis">diary</span> file, press <span class="docEmphBold">s</span> from the calendar. If you want
today's diary entries to display automatically when
you start Emacs, add this line to your <span class="docEmphasis">.emacs</span>
file:</P>

<PRE>(diary)</PRE><BR>


<P class="docText">That way, when you start up Emacs on a day for which there is a diary
entry, the diary entry displays automatically. For example,
let's say you marked your best
friend's birthday some time ago, and today is the
day. When you start Emacs, the screen would look like this:</P>

<A NAME="ch05-28-fm2xml"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><COLGROUP><COL></COLGROUP><THEAD></THEAD><TR><TD class="docTableCell">
<P class="docText">You start Emacs.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><IMG BORDER="0" width="425" height="166" SRC="images/0596006489/figs/ge3_ch05scrn24.gif" ALT=""></P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Emacs displays the diary entry for your friend's
birthday.</P>
</TD></TR></TABLE></P><br>

<P class="docText">If there are no diary entries for a given day, the diary is not
displayed. If you start Emacs with two files so that you are editing
in two windows, the diary is also not displayed.</P>

<P class="docText">If you have already put in a <span class="docEmphBold">(calendar)</span> entry in your
<span class="docEmphasis">.emacs</span> file to have the calendar displayed
automatically, the calendar supersedes the diary, and
you'll have to remove the calendar if you prefer to
see the diary instead.</P>

<P class="docText">To mark dates with diary entries in red, press <span class="docEmphBold">m</span> from the calendar. To remove the marks,
press <span class="docEmphBold">u</span>. (This command removes
highlighting for diary entries as well as for holidays.)</P>

<P class="docText"><A class="docLink" HREF="#gnu3-CHP-5-TABLE-5">Table 5-5</A> summarizes the calendar and diary
commands.</P>

<A NAME="gnu3-CHP-5-TABLE-5"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table 5-5. Holiday and diary commands</h5></CAPTION><COLGROUP><COL><COL><COL></COLGROUP><THEAD><TR><TH class="thead" scope="col">
<P class="docText">Keystrokes</P>
</TH><TH class="thead" scope="col">
<P class="docText">Command name</P>
</TH><TH class="thead" scope="col">
<P class="docText">Action</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">p d</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-print-day-of-year</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display the day of the year this is (for example, Day 364 of 365).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">p o</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-print-other-dates</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display information about this date for all calendars.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">Space</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">scroll-other-window</span></P>
</TD><TD class="docTableCell">
<P class="docText">Scroll the other window.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">q</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">exit-calendar</span></P>
</TD><TD class="docTableCell">
<P class="docText">Quit calendar.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">a</span><span class="docEmphasis">Holidays</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">For Window</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">list-calendar-holidays</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display holidays for calendar period shown.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">h</span><span class="docEmphasis">Holidays</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">For Cursor Date</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-cursor-holidays</span></P>
</TD><TD class="docTableCell">
<P class="docText">In the minibuffer, display holiday information for the day the cursor
is on.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">x</span><span class="docEmphasis">Holidays</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Mark</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">mark-calendar-holidays</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display holidays in a different typeface, color, or with an asterisk
beside them.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">u</span><span class="docEmphasis">Holidays</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Unmark Calendar</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-unmark</span></P>
</TD><TD class="docTableCell">
<P class="docText">Remove marks for holidays and diary entries (opposite of <span class="docEmphBold">x</span> command).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i w</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Weekly</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-weekly-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add a weekly entry based on the day of the week.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i y</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Yearly</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-yearly-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add an annual entry.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i d</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Daily</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add an entry for a particular day.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i m</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Monthly</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-monthly-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add an entry for the day of the month.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i c</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Cyclic</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-cyclic-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add an entry to recur every <span class="docEmphasis">n</span> days.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i a</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Anniversary</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-anniversary-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add an annual entry (the year is included for reference).</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">i b</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Insert Block</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">insert-block-diary-entry</span></P>
</TD><TD class="docTableCell">
<P class="docText">Add a block entry.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">m</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">mark-diary-entries</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display diary entries in a different typeface, color, or with a plus
sign beside them.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">d</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">view-diary-entries</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display diary entries for the current date.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">s</span><span class="docEmphasis">Diary</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Show All</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">show-all-diary-entries</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display <span class="docEmphasis">diary</span> file.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M-=</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-count-days-region</span></P>
</TD><TD class="docTableCell">
<P class="docText">Count the number of days in a region.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">M</span><span class="docEmphasis">Moon</span>
<img src=images/ent/U2192.GIF border=0> <span class="docEmphasis">Lunar Phases</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-phases-of-moon</span></P>
</TD><TD class="docTableCell">
<P class="docText">Display phases of the moon for a three-month period.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">S</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-sunrise-sunset</span></P>
</TD><TD class="docTableCell">
<P class="docText">Given longitude and latitude, display sunrise and sunset times for
the current date.</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">C-Space</span> or <span class="docEmphBold">C-@</span></P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphBold">calendar-set-mark</span></P>
</TD><TD class="docTableCell">
<P class="docText">Mark regions by time rather than horizontally.</P>
</TD></TR></TABLE></P><br>



<A NAME="gnu3-CHP-5-SECT-5.3"></A>
<H4 class="docSection2Title">5.5.3 Problems You May Encounter</H4>

<UL><LI><P class="docList"><span class="docEmphBold">In shell mode on Mac OS X, Emacs says,
"Warning: no access to tty (Bad file descriptor).
Thus no job control in this shell.</span>" This
happens with the graphical version of Emacs, not
<A NAME="gnu3-CHP-5-ITERM-2254"></A><A NAME="gnu3-CHP-5-ITERM-2255"></A>with the version run from the Mac OS X
Terminal application. If you change to a different shell using the
instructions under "Which shell?"
earlier in this chapter, the error goes away.</P></LI><LI><P class="docList"><span class="docEmphBold">Some commands don't work on
Mac OS X</span>. The graphical version of Mac OS X fails to find
some operating <A NAME="gnu3-CHP-5-ITERM-2256"></A>system commands, especially when
invoking them through <span class="docEmphBold">M-!</span> (for
<span class="docEmphBold">shell-command</span>). Change to a
different shell; see "Which shell?"
earlier in this chapter for details. Another problem is that some
Unix commands are not available by default on Mac OS X. Try them in
the Mac Terminal application to see if they work at all before trying
them in shell mode. To increase Mac OS X's Unix
functionality, use Fink (<A class="docLink" target="_blank" HREF="http://fink.sourceforge.net">http://fink.sourceforge.net</A>) to download a
wide variety of Unix commands and software for Mac OS X.</P></LI><LI><P class="docList"><span class="docEmphBold">Some commands don't work on
Windows</span>. This chapter describes many commands that have no
Windows equivalent. The Windows port of Emacs works well for most
Dired functions, the calendar, and the diary. To get Unix command
functionality under Windows, install Cygwin (<A class="docLink" target="_blank" HREF="http://cygwin.com">http://cygwin.com</A>).</P></LI><LI><P class="docList"><span class="docEmphBold">Printing does not work from Windows on USB
printers</span>. Many USB printers do not support printing from
the command line. This problem is not specific to Emacs.</P></LI></UL>







<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="gnu3-CHP-5-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="gnu3-CHP-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
