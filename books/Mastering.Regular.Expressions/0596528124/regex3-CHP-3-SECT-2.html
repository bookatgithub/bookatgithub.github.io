<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 3.2.&nbsp; A Casual Stroll Across the Regex Landscape</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=regex3-CHP-3-SECT-1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=regex3-CHP-3-SECT-3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="regex3-CHP-3-SECT-2"></a>
<H3 id="title-IDAMGXML" class="docSection1Title">3.2. A Casual Stroll Across the Regex Landscape</H3>
<p class="docText">I'd like to start with the story about the evolution of some regular expression flavors and their associated programs. So, grab a hot cup (or frosty mug) of your favorite brewed beverage and relax as we look at the sometimes wacky history<a name="IDX-CHP-3-0393"></a> 
 behind the regular expressions we have today. The idea is to add color to our regex understanding, and to develop a feeling as to why "the way things are" are the way things are. There are some footnotes for those that are interested, but for the most part, this should be read as a light story for enjoyment.</P>
<a name="regex3-CHP-3-SECT-2.1"></a>
<H4 id="title-IDA0GXML" class="docSection2Title">3.2.1. The Origins of Regular Expressions</h4>
<a name="IDX-CHP-3-0394"></a> 
<a name="IDX-CHP-3-0395"></a> 
<a name="IDX-CHP-3-0396"></a> 
<a name="IDX-CHP-3-0397"></a> 
<a name="IDX-CHP-3-0398"></a> 
<a name="IDX-CHP-3-0399"></a> 
<a name="IDX-CHP-3-0400"></a> 
<a name="IDX-CHP-3-0401"></a> 
<a name="IDX-CHP-3-0402"></a> 
<a name="IDX-CHP-3-0403"></a> 
<a name="IDX-CHP-3-0404"></a> 
<a name="IDX-CHP-3-0405"></a> 
<a name="IDX-CHP-3-0406"></a> 
<a name="IDX-CHP-3-0407"></a> 
<a name="IDX-CHP-3-0408"></a> 
<a name="IDX-CHP-3-0409"></a> 
<a name="IDX-CHP-3-0410"></a> 
<a name="IDX-CHP-3-0411"></a> 
<a name="IDX-CHP-3-0412"></a> 
<a name="IDX-CHP-3-0413"></a> 
<a name="IDX-CHP-3-0414"></a> 
<a name="IDX-CHP-3-0415"></a> 
<a name="IDX-CHP-3-0416"></a> 
<a name="IDX-CHP-3-0417"></a> 

<p class="docText">The seeds of regular expressions were planted in the early 1940s by two neurophysiologists, Warren McCulloch and Walter Pitts, who developed models of how they believed the nervous system<a name="IDX-CHP-3-0418"></a> 
 worked at the neuron level.<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-1">[<img src=images/U2020.jpg border=0>]</a></sup> Regular expressions became a reality several years later when mathematician Stephen Kleene formally described these models in an algebra he called <span class="docEmphasis">regular sets</span>.<a name="IDX-CHP-3-0423"></a> 
 He devised a simple notation to express these regular sets, and called them <span class="docEmphasis">regular expressions</span>.</P><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-1">[<img src=images/U2020.jpg border=0>]</a></sup> "A logical calculus of the ideas imminent in nervous activity," first published in <span class="docEmphasis">Bulletin of Math. Biophysics</span><a name="IDX-CHP-3-0419"></a> 
<a name="IDX-CHP-3-0420"></a> 
 5 (1943) and later reprinted in <span class="docEmphasis">Embodiments of Mind</span><a name="IDX-CHP-3-0421"></a> 
<a name="IDX-CHP-3-0422"></a> 
 (MIT Press, 1965). The article begins with an interesting summary of how neurons behave (did you know that intra-neuron impulse speeds can range from 1 all the way to 150 meters per second?), and then descends into a pit of formulae that is, literally, all Greek to me.</p></blockquote>
<p class="docText">Through the 1950s and 1960s, regular expressions enjoyed a rich study in theoretical mathematics circles. Robert Constable has written a good summary <sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-2">[<img src=images/U2021.jpg border=0>]</a></sup> for the mathematically inclined.</p><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-2">[<img src=images/U2021.jpg border=0>]</a></sup> Robert L. Constable, "The Role of Finite Automata in the Development of Modern Computing Theory," in <span class="docEmphasis">The Kleene Symposium</span>,<a name="IDX-CHP-3-0424"></a> 
<a name="IDX-CHP-3-0425"></a> 
 Eds. Barwise, Keisler, and Kunen (North-Holland Publishing Company, 1980), 6183.</P></blockquote>
<p class="docText">Although there is evidence of earlier work, the first published computational use of regular expressions I have actually been able to find is Ken Thompson's 1968 article <span class="docEmphasis">Regular Expression Search Algorithm</span><a name="IDX-CHP-3-0426"></a> 
<a name="IDX-CHP-3-0427"></a> 
<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-3">[&sect;]</a></sup> in which he describes a regular-expression compiler that produced IBM 7094 object code. This led to his work on <span class="docEmphasis">qed</span>,<a name="IDX-CHP-3-0430"></a> 
 an editor that formed the basis for the Unix editor <span class="docEmphasis">ed</span>.<a name="IDX-CHP-3-0431"></a> 
</P><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-3">[&sect;]</a></sup> <span class="docEmphasis">Communications of the ACM</span>,<a name="IDX-CHP-3-0428"></a> 
<a name="IDX-CHP-3-0429"></a> 
 Vol.11, No. 6, June 1968.</p></blockquote>
<p class="docText"><span class="docEmphasis">ed</span>'s regular expressions were not as advanced as those in <span class="docEmphasis">qed</span>, but they were the first to gain widespread use in non-technical fields. <span class="docEmphasis">ed</span> had a command to display lines of the edited file that matched a given regular expression. The command, "<tt>g/<span class="docEmphasis">Regular Expression</span>/p</tt>", was read "<img border="0" alt="" width="175" height="13" SRC="images/regex3_u0301.jpg">." This particular function was so useful that it was made into its own utility, <span class="docEmphasis">grep</span> (after which<span class="docEmphasis">egrep</span>extended <span class="docEmphasis">grep</span>was later modeled).</p>
<a name="regex3-CHP-3-SECT-2.1.1"></a>
<H5 id="title-IDANOYML" class="docSection3Title">3.2.1.1. Grep's metacharacters</H5>
<a name="IDX-CHP-3-0432"></a> 
<a name="IDX-CHP-3-0433"></a> 
<a name="IDX-CHP-3-0434"></a> 
<a name="IDX-CHP-3-0435"></a> 
<a name="IDX-CHP-3-0436"></a> 
<a name="IDX-CHP-3-0437"></a> 
<a name="IDX-CHP-3-0438"></a> 
<a name="IDX-CHP-3-0439"></a> 
<a name="IDX-CHP-3-0440"></a> 
<a name="IDX-CHP-3-0441"></a> 
<a name="IDX-CHP-3-0442"></a> 
<a name="IDX-CHP-3-0443"></a> 
<a name="IDX-CHP-3-0444"></a> 
<a name="IDX-CHP-3-0445"></a> 

<p class="docText">The regular expressions supported by <span class="docEmphasis">grep</span><a name="IDX-CHP-3-0446"></a> 
 and other early tools were quite limited when compared to <span class="docEmphasis">egrep</span>'s.<a name="IDX-CHP-3-0447"></a> 
 The metacharacter <tt>*</tt> was supported, but <tt>+</tt> and <tt>?</tt> were not (the latter's absence being a particularly strong drawback). <span class="docEmphasis">grep</span>'s capturing metacharacters were <tt>\(&#8943;\)</tt>, with <span class="docEmphasis">un</span>escaped parentheses representing literal text.<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-4">[<img src=images/U2020.jpg border=0>]</a></sup><span class="docEmphasis">grep</span> supported line anchors, but in a limited way. If ^ appeared at the beginning of the regex, it was a metacharacter matching the beginning of the line. Otherwise, it wasn't a metacharacter at all and just matched a literal circumflex (also called a "caret"). Similarly, <span class="docEmphStrong">$</span> was the end-of-line metacharacter only at the end of the regex. The upshot was that you couldn't do something like <img src=images/U2308.jpg border=0><tt>end$|^start</tt><img src=images/U230B.jpg border=0>. But that's OK, since alternation wasn't supported either!</P><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-4">[<img src=images/U2020.jpg border=0>]</a></sup> Historical trivia: <span class="docEmphasis">ed</span> (and hence <span class="docEmphasis">grep</span>) used escaped parentheses rather than unadorned parentheses as delimiters because Ken Thompson felt regular expressions would be used to work primarily with C code, where needing to match raw parentheses would be more common than backreferencing.</p></blockquote>
<p class="docText">The way metacharacters interact is also important. For example, perhaps <span class="docEmphasis">grep</span>'s largest shortcoming was that star could not be applied to a parenthesized expression, but only to a literal character, a character class, or dot. So, in <span class="docEmphasis">grep</span>, parentheses were useful only for capturing matched text, and not for general grouping. In fact, some early versions of <span class="docEmphasis">grep</span> didn't even allow nested parentheses.</P>

<a name="regex3-CHP-3-SECT-2.1.2"></a>
<H5 id="title-IDARSYML" class="docSection3Title">3.2.1.2. Grep evolves</h5>
<p class="docText">Although many systems have <span class="docEmphasis">grep</span> today, you'll note that I've been using past tense. The past tense refers to the flavor of the old versions, now upwards of 30 years old. Over time, as technology advances, older programs are sometimes retrofitted with additional features, and <span class="docEmphasis">grep</span> has been no exception.</p>
<p class="docText">Along the way, AT&amp;T Bell Labs added some new features, such as incorporating the <tt>\{<span class="docEmphasis">min,max\</span>}</tt> notation from the program <span class="docEmphasis">lex</span>.<a name="IDX-CHP-3-0448"></a> 
 They also fixed the <tt>-y</tt> option, which in early versions was supposed to allow case-insensitive matches but worked only sporadically. Around the same time, people at Berkeley<a name="IDX-CHP-3-0449"></a> 
<a name="IDX-CHP-3-0450"></a> 
 added startand end-of-word metacharacters and renamed <tt>-y</tt> to <tt>-i</tt>. Unfortunately, you still couldn't apply star or the other quantifiers to a parenthesized expression.</p>

<a name="regex3-CHP-3-SECT-2.1.3"></a>
<h5 id="title-IDA2TYML" class="docSection3Title">3.2.1.3. Egrep evolves</H5>
<p class="docText">By this time, Alfred Aho (also at AT&amp;T Bell Labs) had written <span class="docEmphasis">egrep</span>, which provided most of the richer set of metacharacters described in <a class="docLink" href="regex3-CHP-1.html#regex3-CHP-1">Chapter 1</a>. More importantly, he implemented them in a completely different (and generally better) way. Not only were <img src=images/U2308.jpg border=0><tt>+</tt><img src=images/U230B.jpg border=0> and <img src=images/U2308.jpg border=0><tt>?</tt><img src=images/U230B.jpg border=0> added, but they could be applied to parenthesized expressions, greatly increasing <span class="docEmphasis">egrep</span> expressive power.</p>
<p class="docText">Alternation was added as well, and the line<a name="IDX-CHP-3-0451"></a> 
 anchors were upgraded to "first-class"<a name="IDX-CHP-3-0452"></a> 
 status so that you could use them almost anywhere in your regex. However, <span class="docEmphasis">egrep</span> had problems as wellsometimes it would find a match but not display the result, and it didn't have some useful features that are now popular. Nevertheless, it was a vastly more useful tool.</p>

<a name="regex3-CHP-3-SECT-2.1.4"></a>
<H5 id="title-IDADVYML" class="docSection3Title">3.2.1.4. Other species evolve</h5>
<a name="IDX-CHP-3-0453"></a> 
<a name="IDX-CHP-3-0454"></a> 
<a name="IDX-CHP-3-0455"></a> 
<a name="IDX-CHP-3-0456"></a> 
<a name="IDX-CHP-3-0457"></a> 
<a name="IDX-CHP-3-0458"></a> 
<a name="IDX-CHP-3-0459"></a> 
<a name="IDX-CHP-3-0460"></a> 
<a name="IDX-CHP-3-0461"></a> 
<a name="IDX-CHP-3-0462"></a> 

<p class="docText">At the same time, other programs such as <span class="docEmphasis">awk</span>,<a name="IDX-CHP-3-0463"></a> 
 <span class="docEmphasis">lex</span>,<a name="IDX-CHP-3-0464"></a> 
 and <span class="docEmphasis">sed</span>,<a name="IDX-CHP-3-0465"></a> 
 were growing and changing at their own pace. Often, developers who liked a feature from one program tried to add it to another. Sometimes, the result wasn't pretty. For example, if support for plus was added to <span class="docEmphasis">grep</span>, <tt>+</tt> by itself couldn't be used because <span class="docEmphasis">grep</span> had a long history<a name="IDX-CHP-3-0466"></a> 
<a name="IDX-CHP-3-0467"></a> 
<a name="IDX-CHP-3-0468"></a> 
 of a raw '<tt>+</tt>' not being a metacharacter, and suddenly making it one would have surprised users. Since '<tt>\+</tt>' was probably not something a <span class="docEmphasis">grep</span> user would have otherwise normally typed, it could safely be subsumed as the "one or more" metacharacter.</p>
<p class="docText">Sometimes new bugs were introduced as features were added. Other times, added features were later removed. There was little to no documentation for the many subtle points that round out a tool's flavor, so new tools either made up their own style, or attempted to mimic "what seemed to work" with other tools.</p>
<p class="docText">Multiply that by the passage of time and numerous programmers, and the result is general confusion (particularly when you try to deal with everything at once).<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-5">[<img src=images/U2020.jpg border=0>]</a></sup></p><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-5">[<img src=images/U2020.jpg border=0>]</a></sup> Such as when writing a book about regular expressionsask me, I know!</p></blockquote>

<a name="regex3-CHP-3-SECT-2.1.5"></a>
<h5 id="title-IDAYYYML" class="docSection3Title">3.2.1.5. POSIXAn attempt at standardization</h5>
<p class="docText">POSIX, short for Portable Operating System Interface, is a wide-ranging standard put forth in 1986 to ensure portability across operating systems. Several parts of this standard deal with regular expressions and the traditional tools that use them, so it's of some interest to us. None of the flavors covered in this book, however, strictly adhere to all the relevant parts. In an effort to reorganize the mess that regular expressions had become, POSIX distills the various common flavors into just two classes of regex flavor, <span class="docEmphasis">Basic Regular Expressions</span><a name="IDX-CHP-3-0469"></a> 
<a name="IDX-CHP-3-0470"></a> 
 (BREs), and <span class="docEmphasis">Extended Regular Expressions</span><a name="IDX-CHP-3-0471"></a> 
<a name="IDX-CHP-3-0472"></a> 
 (EREs). POSIX programs then support one flavor or the other. <a class="docLink" href="#regex3-CHP-3-TABLE-1">Table 3-1</a> on the next page summarizes the metacharacters in the two flavors.</p>
<p class="docText">One important feature of the POSIX standard is the notion of a <span class="docEmphasis">locale</span>, a collection of settings that describe language and cultural conventions for such things as the display of dates, times, and monetary values, the interpretation of characters in the active encoding, and so on. Locales aim to allow programs to be internationalized. They are not a regex-specific concept, although they can affect regular-expression use. For example, when working with a locale that describes the Latin-1<a name="IDX-CHP-3-0473"></a> 
 encoding (also called "ISO-8859-1"), &agrave; and &Agrave; (characters with ordinal values 224 and 160, respectively) are considered "letters," and any application of a regex that ignores capitalization would know to treat them as identical.</p>
<a name="regex3-CHP-3-TABLE-1"></a><p><table cellspacing="0" FRAME="hsides" RULES="all" cellpadding="4" width="100%"><caption><h5 class="docTableTitle">Table 3-1. Overview of POSIX Regex Flavors</h5></caption><colgroup span="3"><col><col><col></colgroup><thead><tr><th class="thead" scope="col" align="left"><p class="docText">Regex feature</p></th><th class="thead" scope="col" align="left"><p class="docText">BREs</p></th><th class="thead" scope="col" align="left"><p class="docText">EREs</p></th></tr></thead><TR><td class="docTableCell" align="left"><p class="docText">dot, <tt>^, $, [&#8943;], [^&#8943;]</tt></P></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td></TR><tr><td class="docTableCell" align="left"><p class="docText">"any number" quantifier</P></TD><td class="docTableCell" align="left"><p class="docText">*</p></TD><TD class="docTableCell" align="left"><p class="docText">*</P></td></TR><TR><td class="docTableCell" align="left"><p class="docText">+ and ? quantifiers</p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</P></td><td class="docTableCell" align="left"><p class="docText">+ ?</P></td></tr><tr><td class="docTableCell" align="left"><p class="docText">range quantifier</p></td><td class="docTableCell" align="left"><p class="docText"><tt>\{<span class="docEmphasis">min,max</span>\}</tt></p></td><td class="docTableCell" align="left"><p class="docText"><tt>{<span class="docEmphasis">min,max</span>}</tt></p></td></tr><tr><td class="docTableCell" align="left"><p class="docText">grouping</p></td><TD class="docTableCell" align="left"><p class="docText">\(&#8943;\)</p></TD><td class="docTableCell" align="left"><p class="docText">(&#8943;)</p></TD></TR><TR><TD class="docTableCell" align="left"><p class="docText">can apply quantifiers to parentheses</p></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td></TR><TR><TD class="docTableCell" align="left"><p class="docText">backreferences</p></TD><TD class="docTableCell" align="left"><p class="docText"><tt>\1 through \9</tt></p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</P></td></tr><TR><td class="docTableCell" align="left"><p class="docText">alternation</p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td></tr></table></p><br>
<p class="docText">Another example is <tt>\w</tt>, commonly provided as a shorthand for a "word-constituent character" (ostensibly, the same as <tt>[a-zA-Z0-9_]</tt> in many flavors). This feature is not required by POSIX, but it is allowed. If supported, <tt>\w</tt> would know to allow all letters and digits defined in the locale, not just those in ASCII.</p>
<p class="docText">Note, however, that the need for this aspect of locales is mostly alleviated when working with tools that support Unicode. Unicode is discussed further beginning on page 106.</p>

<a name="regex3-CHP-3-SECT-2.1.6"></a>
<h5 id="title-IDAMAZML" class="docSection3Title">3.2.1.6. Henry Spencer's regex package</h5>
<a name="IDX-CHP-3-0475"></a> 
<a name="IDX-CHP-3-0476"></a> 
<a name="IDX-CHP-3-0477"></a> 
<a name="IDX-CHP-3-0478"></a> 
<a name="IDX-CHP-3-0479"></a> 
<a name="IDX-CHP-3-0480"></a> 

<p class="docText">Also first appearing in 1986, and perhaps of more importance, was the release by Henry Spencer of a regex package, written in C, which could be freely incorporated by others into their own programsa first at the time. Every program that used Henry's package  and there were many  provided the same consistent regex flavor unless the program's author went to the explicit trouble to change it.</p>

<a name="regex3-CHP-3-SECT-2.1.7"></a>
<H5 id="title-IDARBZML" class="docSection3Title">3.2.1.7. Perl evolves</h5>
<a name="IDX-CHP-3-0481"></a> 

<a name="IDX-CHP-3-0482"></a> 
<a name="IDX-CHP-3-0483"></a> 
<a name="IDX-CHP-3-0484"></a> 
<a name="IDX-CHP-3-0485"></a> 

<p class="docText">At about the same time, Larry Wall started developing a tool that would later become the language Perl. He had already greatly enhanced distributed software development with his <span class="docEmphasis">patch</span><a name="IDX-CHP-3-0486"></a> 
 program, but Perl was destined to have a truly monumental impact.</P>
<p class="docText">Larry released Perl Version 1 in December 1987. Perl was an immediate hit because it blended so many useful features of other languages, and combined them with the explicit goal of being, in a day-to-day practical sense, <span class="docEmphasis">useful</span>.</p>
<p class="docText">One immediately notable feature was a set of regular expression operators in the tradition of the specialty tools <span class="docEmphasis">sed</span> and <span class="docEmphasis">awk</span>a first for a general scripting language. For the regular expression engine, Larry borrowed code from an earlier project, his news reader <span class="docEmphasis">rn</span> (which based its regular expression code on that in James Gosling's Emacs).<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-6">[<img src=images/U2020.jpg border=0>]</a></sup> The regex flavor was considered powerful by the day's standards, but was not nearly as full-featured as it is today. Its major drawbacks were that it supported at most nine sets of parentheses, and at most nine alternatives with <img src=images/U2308.jpg border=0><tt>|</tt><img src=images/U230B.jpg border=0>, and worst of all, <img src=images/U2308.jpg border=0><tt>|</tt><img src=images/U230B.jpg border=0> was not allowed within parentheses. It did not support case-insensitive matching, nor allow <tt>\w</tt> within a class (it didn't support <tt>\s</tt> or <tt>\d</tt> anywhere). It didn't support the <tt><span class="docEmphasis">{min,max}</span></tt> range quantifier.</p><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-6">[<img src=images/U2020.jpg border=0>]</a></sup> James Gosling would later go on to develop his own language, Java, which includes a standard regular-expressions library as of Version 1.4. Java is covered in depth in <a class="docLink" href="regex3-CHP-8.html#regex3-CHP-8">Chapter 8</a>.</P></blockquote>
<p class="docText"><span class="docEmphStrong">Perl 2</span> was released in June 1988. Larry had replaced the regex code entirely, this time using a greatly enhanced version of the Henry Spencer package mentioned in the previous section. You could still have at most nine sets of parentheses, but now you could use <img src=images/U2308.jpg border=0><tt>|</tt><img src=images/U230B.jpg border=0> inside them. Support for <tt>\d</tt> and <tt>\s</tt> was added, and support for <tt>\w</tt> was changed to include an underscore, since then it would match what characters were allowed in a Perl variable name. Furthermore, these metacharacters were now allowed inside classes. (Their opposites, <tt>\D</tt>, <tt>\W</tt>, and <tt>\S</tt>, were also newly supported, but <span class="docEmphasis">weren't</span> allowed within a class, and in any case sometimes didn't work correctly.) Importantly, the <tt>/i</tt> modifier was added, so you could now do case-insensitive matching.</P>
<p class="docText"><span class="docEmphStrong">Perl 3</span> came out more than a year later, in October 1989. It added the <tt>/e</tt> modifier, which greatly increased the power of the replacement operator, and fixed some backreference-related bugs from the previous version. It added the <img src=images/U2308.jpg border=0><tt><span class="docEmphasis">{min,max}</span></tt><img src=images/U230B.jpg border=0> range quantifiers, although unfortunately, they didn't always work quite right. Worse still, with Version 3, the regular expression engine couldn't always work with 8-bit data, yielding unpredictable results with non-ASCII input.</P>
<p class="docText"><span class="docEmphStrong">Perl 4</span> was released a year and a half later, in March 1991, and over the next two years, it was improved until its last update in February 1993. By this time, the bugs were fixed and restrictions expanded (you could use <tt>\D</tt> and such within character classes, and a regular expression could have virtually unlimited sets of parentheses). Work also went into optimizing how the regex engine went about its task, but the real breakthrough wouldn't happen until 1994.</P>
<p class="docText"><span class="docEmphStrong">Perl 5</span> was officially released in October 1994. Overall, Perl had undergone a massive overhaul, and the result was a vastly superior language in every respect. On the regular-expression side, it had more internal optimizations, and a few metacharacters were added (including <tt>\G</tt>, which increased the power of iterative matches &#9758;130), non-capturing parentheses (&#9758;45), lazy quantifiers (&#9758;141), lookahead (&#9758;60), and the <tt>/x</tt><a name="IDX-CHP-3-0487"></a> 
 modifier<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-7">[<img src=images/U2020.jpg border=0>]</a></sup> (&#9758;72).</p><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-7">[<img src=images/U2020.jpg border=0>]</a></sup> My claim to fame is that Larry added the <tt>/x</tt> modifier after seeing a note from me discussing a long and complex regex. In the note, I had "pretty printed" the regular expression for clarity. Upon seeing it, he thought that it would be convenient to do so in Perl code as well, so he added <tt>/x</tt>.</P></blockquote>
<p class="docText">More important than just for their raw functionality, these "outside the box" modifications made it clear that regular expressions could really be a powerful programming language unto themselves, and were still ripe for further development.</p>
<p class="docText">The newly-added non-capturing parentheses and lookahead constructs required a way to be expressed. None of the grouping pairs  <tt>(&#8943;), [&#8943;], &lt;&#8943;&gt;</tt>, or <tt>{&#8943;}</tt>  were available to be used for these new features, so Larry came up with the various '<tt>(?</tt>' notations we use today. He chose this unsightly sequence because it previously would have been an illegal combination in a Perl regex, so he was free to give it meaning. One important consideration Larry had the foresight to recognize was that there would likely be additional functionality in the future, so by restricting what was allowed after the '<tt>(?</tt>' sequences, he was able to reserve them for future enhancements.</p>
<p class="docText">Subsequent versions of Perl grew more robust, with fewer bugs, more internal optimizations, and new features. I like to believe that the first edition of this book played some small part in this, for as I researched and tested regex-related features, I would send my results to Larry and the Perl Porters<a name="IDX-CHP-3-0488"></a> 
<a name="IDX-CHP-3-0489"></a> 
 group, which helped give some direction as to where improvements might be made.</P>
<p class="docText">New regex features added over the years include limited lookbehind (&#9758;60), "atomic" grouping (&#9758;139), and Unicode support. Regular expressions were brought to a new level by the addition of conditional constructs (&#9758;140), allowing you to make if-then-else decisions right there within the regular expression. And if that wasn't enough, there are now constructs that allow you to intermingle Perl code within a regular expression, which takes things full circle (&#9758;327). The version of Perl covered in this book is 5.8.8.</P>

<a name="regex3-CHP-3-SECT-2.1.8"></a>
<h5 id="title-IDA2GZML" class="docSection3Title">3.2.1.8. A partial consolidation of flavors</h5>
<a name="IDX-CHP-3-0490"></a> 
<a name="IDX-CHP-3-0491"></a> 

<p class="docText">The advances seen in Perl 5 were perfectly timed for the World Wide Web revolution. Perl was built for text processing, and the building of web pages is just that, so Perl quickly became <span class="docEmphasis">the</span> language for web development. Perl became vastly more popular, and with it, its powerful regular expression flavor did as well.</P>
<p class="docText">Developers of other languages were not blind to this power, and eventually regular expression packages that were "Perl compatible" to one extent or another were created. Among these were packages for Tcl, Python, Microsoft's .NET suite of languages, Ruby, PHP, C/C++, and many packages for Java.</P>
<p class="docText">Another form of consolidation began in 1997 (coincidentally, the year the first edition of this book was published) when Philip Hazel developed PCRE,<a name="IDX-CHP-3-0492"></a> 
 his library for Perl Compatible Regular Expressions, a high-quality regular-expression engine that faithfully mimics the syntax and semantics of Perl regular expressions. Other developers could then integrate PCRE into their own tools and languages, thereby easily providing a rich and expressive (and well-known) regex functionality to their users. PCRE is now used in popular software such as PHP, Apache Version 2, Exim, Postfix, and Nmap.<sup class="docFootnote"><a class="docLink" href="#regex3-CHP-3-FN-8">[<img src=images/U2020.jpg border=0>]</a></sup></P><blockquote><p class="docFootnote"><sup><a name="regex3-CHP-3-FN-8">[<img src=images/U2020.jpg border=0>]</a></sup> PCRE is available for free at <a class="docLink" target="_blank" href="ftp://ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/">ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/</a></p></blockquote>

<a name="regex3-CHP-3-SECT-2.1.9"></a>
<H5 id="title-IDAGIZML" class="docSection3Title">3.2.1.9. Versions as of this book</H5>
<a name="IDX-CHP-3-0493"></a> 
<a name="IDX-CHP-3-0494"></a> 
<a name="IDX-CHP-3-0495"></a> 
<a name="IDX-CHP-3-0496"></a> 
<a name="IDX-CHP-3-0497"></a> 
<a name="IDX-CHP-3-0498"></a> 
<a name="IDX-CHP-3-0499"></a> 
<a name="IDX-CHP-3-0500"></a> 
<a name="IDX-CHP-3-0501"></a> 
<a name="IDX-CHP-3-0502"></a> 
<a name="IDX-CHP-3-0503"></a> 
<a name="IDX-CHP-3-0504"></a> 
<a name="IDX-CHP-3-0505"></a> 
<a name="IDX-CHP-3-0506"></a> 
<a name="IDX-CHP-3-0507"></a> 
<a name="IDX-CHP-3-0508"></a> 
<a name="IDX-CHP-3-0509"></a> 
<a name="IDX-CHP-3-0510"></a> 
<a name="IDX-CHP-3-0511"></a> 
<a name="IDX-CHP-3-0512"></a> 

<p class="docText"><a class="docLink" href="#regex3-CHP-3-TABLE-2">Table 3-2</a> shows a few of the version numbers for programs and libraries that I talk about in the book. Older versions may well have fewer features and more bugs, while newer versions may have additional features and bug fixes (and new bugs of their own).</p>
<a name="regex3-CHP-3-TABLE-2"></a><p><table cellspacing="0" FRAME="hsides" RULES="all" cellpadding="4" width="100%"><caption><h5 class="docTableTitle">Table 3-2. Versions of Some Tools Mentioned in This Book</h5></caption><colgroup span="3"><col><col><col></colgroup><thead></thead><TR><td class="docTableCell" align="left"><p class="docText">GNU awk 3.1</p></TD><td class="docTableCell" align="left"><p class="docText"><tt>java.util.regex</tt> (Java 1.5.0, A.K.A Java 5.0)</p></td><td class="docTableCell" align="left"><p class="docText">Procmail 3.22</p></td></tr><tr><td class="docTableCell" align="left"><p class="docText">GNU <span class="docEmphasis">egrep/grep</span> 2.5.1</p></td><td class="docTableCell" align="left"><p class="docText">.NET Framework 2.0</p></td><td class="docTableCell" align="left"><p class="docText">Python 2.3.5</p></td></TR><tr><TD class="docTableCell" align="left"><p class="docText">GNU Emacs 21.3.1</p></td><TD class="docTableCell" align="left"><p class="docText">PCRE 6.6</P></TD><TD class="docTableCell" align="left"><p class="docText">Ruby 1.8.4</p></TD></tr><tr><TD class="docTableCell" align="left"><p class="docText"><span class="docEmphasis">flex</span> 2.5.31</P></td><td class="docTableCell" align="left"><p class="docText">Perl 5.8.8</P></TD><TD class="docTableCell" align="left"><p class="docText">GNU sed 4.0.7</p></TD></TR><tr><td class="docTableCell" align="left"><p class="docText">MySQL 5.1</p></td><TD class="docTableCell" align="left"><p class="docText">PHP (preg routines) 5.1.4 / 4.4.3</p></td><TD class="docTableCell" align="left"><p class="docText">Tcl 8.4</p></td></tr></table></p><br>


<a name="regex3-CHP-3-SECT-2.2"></a>
<h4 id="title-IDAEPZML" class="docSection2Title">3.2.2. At a Glance</h4>
<a name="IDX-CHP-3-0513"></a> 
<a name="IDX-CHP-3-0514"></a> 
<a name="IDX-CHP-3-0515"></a> 
<a name="IDX-CHP-3-0516"></a> 
<a name="IDX-CHP-3-0517"></a> 
<a name="IDX-CHP-3-0518"></a> 
<a name="IDX-CHP-3-0519"></a> 
<a name="IDX-CHP-3-0520"></a> 
<a name="IDX-CHP-3-0521"></a> 

<p class="docText">A chart showing just a few aspects of some common tools gives a good clue to how different things still are. <a class="docLink" href="#regex3-CHP-3-TABLE-3">Table 3-3</a> provides a very superficial look at a few aspects of the regex flavors of a few tools.</p>
<p class="docText">A chart like <a class="docLink" href="#regex3-CHP-3-TABLE-3">Table 3-3</a> is often found in other books to show the differences among tools. But, this chart is only the tip of the icebergfor every feature shown, there are a dozen important issues that are overlooked.</p>
<p class="docText">Foremost is that programs change over time. For example, Tcl didn't used to support backreferences and word boundaries, but now does. It first supported word boundaries with the ungainly-looking <tt>[:&lt;:]</tt> and <tt>[:&gt;:]</tt>, and still does, although such use is deprecated in favor of its more-recently supported <tt>\m</tt>, <tt>\M</tt>, and <tt>\y</tt> (start of word boundary, end of word boundary, or either).</p>
<p class="docText">Along the same lines, programs such as <span class="docEmphasis">grep</span> and <span class="docEmphasis">egrep</span>, which aren't from a single provider but rather can be provided by anyone who wants to create them, can have whatever flavor the individual author of the program wishes. Human nature being what is, each tends to have its own features and peculiarities. (The GNU versions of many common tools, for example, are often more powerful and robust than other versions.)</p>
<a name="regex3-CHP-3-TABLE-3"></a><p><table cellspacing="0" FRAME="hsides" RULES="all" cellpadding="4" width="100%"><caption><h5 class="docTableTitle">Table 3-3. A (Very) Superficial Look at the Flavor of a Few Common Tools</h5></caption><colgroup span="8"><col><col><col><col><col><col><col><col></colgroup><thead><tr><th class="thead" scope="col" align="left"><p class="docText">Feature</p></th><th class="thead" scope="col" align="left"><p class="docText">Modern <span class="docEmphasis">grep</span></p></th><th class="thead" scope="col" align="left"><p class="docText">Modern <span class="docEmphasis">egrep</span></P></th><th class="thead" scope="col" align="left"><p class="docText">GNU Emacs</p></th><th class="thead" scope="col" align="left"><p class="docText">Tcl</P></th><th class="thead" scope="col" align="left"><p class="docText">Perl</p></th><th class="thead" scope="col" align="left"><p class="docText">.NET</p></th><th class="thead" scope="col" align="left"><p class="docText">Sun's Java package</P></th></TR></thead><TR><TD class="docTableCell" align="left"><p class="docText"><tt>*, ^, $, [&#8943;]</tt></p></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td></tr><tr><td class="docTableCell" align="left"><p class="docText">? + |</p></td><td class="docTableCell" align="left"><p class="docText">\? \+ \|</p></td><td class="docTableCell" align="left"><p class="docText">? + |</p></td><td class="docTableCell" align="left"><p class="docText">? + \|</p></td><td class="docTableCell" align="left"><p class="docText">? + |</p></TD><td class="docTableCell" align="left"><p class="docText">? + |</P></td><td class="docTableCell" align="left"><p class="docText">? + |</P></TD><TD class="docTableCell" align="left"><p class="docText">? + |</P></td></TR><tr><td class="docTableCell" align="left"><p class="docText">grouping</P></TD><td class="docTableCell" align="left"><p class="docText">\(&#8943;\)</p></TD><TD class="docTableCell" align="left"><p class="docText">(&#8943;)</P></td><TD class="docTableCell" align="left"><p class="docText">\(&#8943;\)</P></td><td class="docTableCell" align="left"><p class="docText">(&#8943;)</p></td><TD class="docTableCell" align="left"><p class="docText">(&#8943;)</p></td><TD class="docTableCell" align="left"><p class="docText">(&#8943;)</p></td><td class="docTableCell" align="left"><p class="docText">(&#8943;)</p></td></tr><tr><td class="docTableCell" align="left"><p class="docText">(?:&#8943;)</p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</P></td><TD class="docTableCell" align="center"><p class="docText">&nbsp;</p></td><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD></TR><tr><td class="docTableCell" align="left"><p class="docText">word boundary</P></TD><TD class="docTableCell" align="center"><p class="docText">&nbsp;</p></TD><TD class="docTableCell" align="left"><p class="docText">\&lt; \&gt;</p></td><td class="docTableCell" align="left"><p class="docText"><tt>\&lt; \&gt;\b,\B</tt></p></TD><td class="docTableCell" align="left"><p class="docText"><tt>\m, \M, \y</tt></p></TD><td class="docTableCell" align="left"><p class="docText"><tt>\b,\B</tt></p></td><td class="docTableCell" align="left"><p class="docText"><tt>\b,\B</tt></p></td><td class="docTableCell" align="left"><p class="docText"><tt>\b,\B</tt></p></td></tr><tr><td class="docTableCell" align="left"><p class="docText"><tt>\w, \W</tt></p></td><td class="docTableCell" align="center"><p class="docText">&nbsp;</p></td><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD><TD class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></TD></TR><TR><td class="docTableCell" align="left"><p class="docText">backreferences</P></TD><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></P></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td><td class="docTableCell" align="left"><p class="docText"><img src=images/U2713.jpg border=0></p></td></tr><tr><td class="docTableCell" align="right" colspan="8"><p class="docText"><img src=images/U2713.jpg border=0> supported</p></TD></tr></table></P><br>
<p class="docText">Perhaps as important as the easily visible features are the many subtle (and some not-so-subtle) differences among flavors. Looking at the table, one might think that regular expressions are exactly the same in Perl, .NET, and Java, which is certainly not true. Just a few of the questions one might ask when looking at something like <a class="docLink" href="#regex3-CHP-3-TABLE-3">Table 3-3</a> are:</p>
<UL><LI><p class="docList">Are star and friends allowed to quantify something wrapped in parentheses?</P></LI><li><p class="docList">Does dot match a newline? Do negated character classes match it? Do either match the NUL character?</P></li><li><p class="docList">Are the line anchors really <span class="docEmphasis">line</span> anchors (i.e., do they recognize newlines that might be embedded within the target string)? Are they first-class<a name="IDX-CHP-3-0522"></a> 
 metacharacters, or are they valid only in certain parts of the regex?</P></LI><li><p class="docList">Are escapes recognized in character classes? What else is or isn't allowed within character classes?</p></LI><LI><p class="docList">Are parentheses allowed to be nested? If so, how deeply (and how many parentheses are even allowed in the first place)?</P></li><LI><p class="docList">If backreferences are allowed, when a case-insensitive match is requested, do backreferences match appropriately? Do backreferences "behave" reasonably in fringe situations?</P></li><li><p class="docList">Are octal escapes such as <tt>\123</tt> allowed? If so, how do they reconcile the syntactic conflict with backreferences? What about hexadecimal escapes? Is it <span class="docEmphasis">really</span> the regex engine that supports octal and hexadecimal escapes, or is it some other part of the utility?</p></li><LI><p class="docList">Does <tt>\w</tt> match only alphanumerics, or additional characters as well? (Among the programs shown supporting <tt>\w</tt> in <a class="docLink" href="#regex3-CHP-3-TABLE-3">Table 3-3</a>, there are several different interpretations). Does <tt>\w</tt> agree with the various word-boundary metacharacters on what does and doesn't constitute a "word character"? Do they respect the locale, or understand Unicode?</p></li></UL>
<p class="docText">Many issues must be kept in mind, even with a tidy little summary like <a class="docLink" href="#regex3-CHP-3-TABLE-3">Table 3-3</a> as a Superficial guide. If you realize that there's a lot of dirty laundry behind that nice fa&ccedil;ade, it's not too difficult to keep your wits about you and deal with it.</p>
<p class="docText">As mentioned at the start of the chapter, much of this is just Superficial syntax, but many issues go deeper. For example, once you understand that something such as <img src=images/U2308.jpg border=0><tt>(Jul|July)</tt><img src=images/U230B.jpg border=0> in <span class="docEmphasis">egrep</span> needs to be written as <img src=images/U2308.jpg border=0><tt>\(Jul\|July\)</tt><img src=images/U230B.jpg border=0> for GNU Emacs, you might think that everything is the same from there, but that's not always the case. The differences in the semantics of how a match is attempted (or, at least, how it appears to be attempted) is an extremely important issue that is often overlooked, yet it explains why these two apparently identical examples would actually end up matching differently: one always matches '<tt>Jul</tt>', even when applied to '<tt>July</tt>'. Those very same semantics also explain why the opposite, <img src=images/U2308.jpg border=0><tt>(July|Jul)</tt><img src=images/U230B.jpg border=0> and <img src=images/U2308.jpg border=0><tt>\(July\|Jul\)</tt><img src=images/U230B.jpg border=0>, do match the same text. Again, the entire next chapter is devoted to understanding this.</p>
<p class="docText">Of course, what a tool can <span class="docEmphasis">do</span> with a regular expression is often more important than the flavor of its regular expressions. For example, even if Perl's expressions were less powerful than <span class="docEmphasis">egrep</span>'s, Perl's flexible use of regexes provides for more raw usefulness. We'll look at a lot of individual features in this chapter, and in depth at a few languages in later chapters.</p>


<a href="7041536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=regex3-CHP-3-SECT-1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=regex3-CHP-3-SECT-3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>