<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="14.5 Submitting PyErrata Reports"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
	<a href="0596000855_python2-CHP-14-SECT-4.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596000855_python2-CHP-14-SECT-6.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="python2-CHP-14-SECT-5"></A>
<H3 class="docSection1Title">14.5 Submitting PyErrata Reports</H3>

<P class="docText"><A NAME="python2-IDXTERM-1485"></A> <A NAME="python2-IDXTERM-1486"></A> <A NAME="python2-IDXTERM-1487"></A>The next major functional area in
PyErrata serves to implement user-controlled submission of new
comment and errata reports. As before, let's begin by getting a
handle on this component's user-interface model before
inspecting its code.
</P>

<A NAME="python2-CHP-14-SECT-5.1"></A>
<H4 class="docSection2Title">14.5.1 User Interface: Submitting Comment Reports</H4>

<P class="docText"><A NAME="IXT-14-337703"></A> <A NAME="IXT-14-337704"></A>As we've seen, PyErrata supports two
user functions: browsing the reports database and adding new reports
to it. If you click the "General comment" link in the
Submit section of the root page shown in <A class="docLink" HREF="0596000855_python2-CHP-14-SECT-3.html#python2-CHP-14-FIG-2">Figure 14-2</A>, you'll be presented with the comment
submission page shown in <A class="docLink" HREF="#python2-CHP-14-FIG-16">Figure 14-16</A>.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-16"></A>Figure 14-16. Submit comments, input page</H5>
<IMG BORDER="0" WIDTH="370" HEIGHT="400" src="FILES/ppy2_1416.gif" ALT="figs/ppy2_1416.gif"></CENTER>

<P class="docText">This page initially comes up empty; the data we type into its form
fields is submitted to a server-side script when we press the submit
button at the bottom. If the system was able to store the data as a
new database record, a confirmation like the one in <A class="docLink" HREF="#python2-CHP-14-FIG-17">Figure 14-17</A> is reflected back to the client.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-17"></A>Figure 14-17. Submit comments, confirmation page</H5>
<IMG BORDER="0" WIDTH="481" HEIGHT="242" src="FILES/ppy2_1417.gif" ALT="figs/ppy2_1417.gif"></CENTER>

<P class="docText">All fields in submit forms are optional except one; if we leave the
"Description" field empty and send the form, we get the
error page shown in <A class="docLink" HREF="#python2-CHP-14-FIG-18">Figure 14-18</A> (generated during an
errata submission). Comments and error reports without descriptions
aren't incredibly useful, so we kick such requests out. All
other report fields are stored empty if we send them empty (or
missing altogether) to the submit scripts.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-18"></A>Figure 14-18. Submit, missing field error page</H5>
<IMG BORDER="0" WIDTH="481" HEIGHT="206" src="FILES/ppy2_1418.gif" ALT="figs/ppy2_1418.gif"></CENTER>

<P class="docText">Once we've submitted a comment, we can go back to the browse
pages to view it in the database; <A class="docLink" HREF="#python2-CHP-14-FIG-19">Figure 14-19</A> shows
the one we just added, accessed by key "Submitter name"
and in "With index" display format mode.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-19"></A>Figure 14-19. Submit comments, verifying result</H5>
<IMG BORDER="0" WIDTH="373" HEIGHT="350" src="FILES/ppy2_1419.gif" ALT="figs/ppy2_1419.gif"></CENTER>


<A NAME="python2-CHP-14-SECT-5.2"></A>
<H4 class="docSection2Title">14.5.2 User Interface: Submitting Errata Reports</H4>

<P class="docText"><A NAME="python2-IDXTERM-1490"></A> <A NAME="python2-IDXTERM-1491"></A>Here again, the pages generated to submit
errata reports are virtually identical to the ones we just saw for
submitting comments, as comments and errata are treated the same
within the system. Both are instances of generic database records
with different sets of fields. But also as before, the top-level
errata submission page differs, because there are many more fields
that can be filled in; <A class="docLink" HREF="#python2-CHP-14-FIG-20">Figure 14-20</A> shows the top of
this input page.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-20"></A>Figure 14-20. Submit errata, input page (top)</H5>
<IMG BORDER="0" WIDTH="481" HEIGHT="389" src="FILES/ppy2_1420.gif" ALT="figs/ppy2_1420.gif"></CENTER>

<P class="docText">There are lots of fields here, but only the description is required.
The idea is that users will fill in as many fields as they like to
describe the problem; all text fields default to an empty string if
no value is typed into them. <A class="docLink" HREF="#python2-CHP-14-FIG-21">Figure 14-21</A> shows a
report in action with most fields filled with relevant information.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-21"></A>Figure 14-21. Submit errata, input page ( filled)</H5>
<IMG BORDER="0" WIDTH="338" HEIGHT="320" src="FILES/ppy2_1421.gif" ALT="figs/ppy2_1421.gif"></CENTER>

<P class="docText">When we press the submit button, we get a confirmation page as before
(<A class="docLink" HREF="#python2-CHP-14-FIG-22">Figure 14-22</A>), this time with text customized to
thank us for an errata instead of a comment.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-22"></A>Figure 14-22. Submit errata, confirmation</H5>
<IMG BORDER="0" WIDTH="481" HEIGHT="228" src="FILES/ppy2_1422.gif" ALT="figs/ppy2_1422.gif"></CENTER>

<P class="docText">As before, we can verify a submission with the browse pages
immediately after it has been confirmed. Let's bring up an
index list page for submission dates and click on the new entry at
the bottom (<A class="docLink" HREF="#python2-CHP-14-FIG-23">Figure 14-23</A>). Our report is fetched from
the errata database and displayed in a new page (<A class="docLink" HREF="#python2-CHP-14-FIG-24">Figure 14-24</A>). Note that the display doesn't include
a "Page number" field: we left it blank on the submit
form. PyErrata displays only nonempty record fields when formatting
web pages. Because it treats all records generically, the same is
true for comment reports; at its core, PyErrata is a very generic
system that doesn't care about the meaning of data stored in
records.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-23"></A>Figure 14-23. Submit errata, verify result (index)</H5>
<IMG BORDER="0" WIDTH="356" HEIGHT="320" src="FILES/ppy2_1423.gif" ALT="figs/ppy2_1423.gif"></CENTER>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-24"></A>Figure 14-24. Submit errata, verify result (record)</H5>
<IMG BORDER="0" WIDTH="381" HEIGHT="306" src="FILES/ppy2_1424.gif" ALT="figs/ppy2_1424.gif"></CENTER>

<P class="docText"><A NAME="IXT-14-337705"></A>Because not everyone wants to post to a
database viewable by everyone in the world with a browser, PyErrata
also allows both comments and errata to be sent by email instead of
being automatically added to the database. If we click the
"Email report privately" checkbox near the bottom of the
submit pages before submission, the report's details are
emailed to me (their fields show up as a message in my mailbox), and
we get the reply in <A class="docLink" HREF="#python2-CHP-14-FIG-25">Figure 14-25</A>.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-25"></A>Figure 14-25. Submit errata, email mode confirmation</H5>
<IMG BORDER="0" WIDTH="481" HEIGHT="211" src="FILES/ppy2_1425.gif" ALT="figs/ppy2_1425.gif"></CENTER>

<P class="docText">Finally, if the directory or shelve file that represents the database
does not grant write access to everyone (remember, CGI scripts run as
user "nobody"), our scripts won't be able to store
the new record. Python generates an exception, which is displayed in
the client's browser because PyErrata is careful to route
exception text to <TT>sys.stdout</TT>. <A class="docLink" HREF="#python2-CHP-14-FIG-26">Figure 14-26</A> shows an exception page I received before
making the database directory in question writable with the shell
command <TT>chmod</TT> <TT>777
DbaseFiles/errataDB</TT>.
</P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="python2-CHP-14-FIG-26"></A>Figure 14-26. Submit errata, exception (need chmod 777 dir)</H5><A NAME="IXTR3-383"></A>
<A NAME="IXTR3-384"></A>
<IMG BORDER="0" WIDTH="481" HEIGHT="255" src="FILES/ppy2_1426.gif" ALT="figs/ppy2_1426.gif"></CENTER>


<A NAME="python2-CHP-14-SECT-5.3"></A>
<H4 class="docSection2Title">14.5.3 Implementation: Submitting Comment Reports</H4>

<P class="docText"><A NAME="python2-IDXTERM-1495"></A>Now
that we've seen the external behavior of PyErrata submit
operations, it's time to study their internal workings.
Top-level report submission pages are defined by static HTML files.
<A class="docLink" HREF="#python2-CHP-14-EX-8">Example 14-8</A> shows the comment page's file.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-14-EX-8"></A>Example 14-8. PP2E\Internet\Cgi-Web\PyErrata\submitComment.html </H5>
<PRE>&lt;html&gt;&lt;body bgcolor="#FFFFFF"&gt;
&lt;title&gt;PP2E Submit Comment&lt;/title&gt;
&lt;h1&gt;PP2E Submit Comment&lt;/h1&gt;

&lt;p&gt;Please fill out the form below and press the submit button to 
send your information.  By default, your report will be automatically
entered in a publically browsable database, where it will eventually 
be reviewed by the author.  If you prefer to send your comments to the
author by private email instead, click the "Email" button before you 
submit.  All the fields except the description text are optional.
Thank you for your report.
&lt;/p&gt;

&lt;hr&gt;
&lt;form method=POST action="submitComment.cgi"&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Description:
      &lt;td&gt;&lt;textarea name="Description" cols=40 rows=10&gt;Type your comment here
          &lt;/textarea&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Your name: 
      &lt;td&gt;&lt;input type=text size=35 name="Submitter name"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Your email, webpage: 
      &lt;td&gt;&lt;input type=text size=35 name="Submitter email"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Email report privately?: 
      &lt;td&gt;&lt;input type=checkbox name="Submit mode" value="email"&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;td&gt;&lt;input type=submit value="Submit Comment"&gt; 
          &lt;input type=reset  value="Reset Form"&gt;
  &lt;/table&gt;
&lt;/form&gt;

&lt;hr&gt;
&lt;A href="pyerrata.html"&gt;Back to errata page&lt;/A&gt;
&lt;/body&gt;&lt;/html&gt;</PRE>


<P class="docText">The CGI script that is invoked when this file's form is
submitted, shown in <A class="docLink" HREF="#python2-CHP-14-EX-9">Example 14-9</A>, does the work of
storing the form's input in the database and generating a reply
page.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-14-EX-9"></A>Example 14-9. PP2E\Internet\Cgi-Web\PyErrata\submitComment.cgi </H5>
<PRE>#!/usr/bin/python

DEBUG=0
if DEBUG:
    import sys
    sys.stderr = sys.stdout
    print "Content-type: text/html"; print

import traceback
try:
    from dbswitch import DbaseComment       # dbfiles or dbshelve
    from submit   import saveAndReply       # reuse save logic

    replyStored = """
    Your comment has been entered into the comments database.
    You may view it by returning to the main errata page, and 
    selecting Browse/General comments, using your name, or any 
    other report identifying information as the browsing key."""

    replyMailed = """
    Your comment has been emailed to the author for review.
    It will not be automatically browsable, but may be added to
    the database anonymously later, if it is determined to be 
    information of general use."""

    inputs = {'Description':'',     'Submit mode':'',
              'Submitter name':'',  'Submitter email':''}

    saveAndReply(DbaseComment, inputs, replyStored, replyMailed)

except:    
    print "\n\n&lt;PRE&gt;" 
    traceback.print_exc(  )</PRE>


<P class="docText"><A NAME="IXT-14-337706"></A>Don't
look too hard for database or HTML-generation code here; it's
all been factored out to the <TT>submit</TT> module, listed
in a moment, so it can be reused for errata submissions too. Here, we
simply pass it things that vary between comment and errata submits:
database, expected input fields, and reply text.
</P>

<P class="docText">As before, the database interface object is fetched from the switch
module to select the currently supported storage medium. Customized
text for confirmation pages (<TT>replyStored</TT>,
<TT>replyMailed</TT>) winds up in web pages and is allowed
to vary per database.
</P>

<P class="docText">The <TT>inputs</TT> dictionary in this script provides
default values for missing fields and defines the format of comment
records in the database. In fact, this dictionary
<span class="docEmphasis">is</span> stored in the database: within the
<TT>submit</TT> module, input fields from the form or an
explicit URL are merged in to the <TT>inputs</TT>
dictionary created here, and the result is written to the database as
a record.
</P>

<P class="docText">More specifically, the <TT>submit</TT> module steps through
all keys in <TT>inputs</TT> and picks up values of those
keys from the parsed form input object, if present. The result is
that this script guarantees that records in the comments database
will have all the fields listed in <TT>inputs</TT>, but no
others. Because all submit requests invoke this script, this is true
even if superfluous fields are passed in an explicit URL; only fields
in <TT>inputs</TT> are stored in the database.
</P>

<P class="docText">Notice that almost all of this script is wrapped in a
<TT>try</TT> statement with an empty
<TT>except</TT> clause. This guarantees that every
(uncaught) exception that can possibly happen while our script runs
will return to this <TT>try</TT> and run its exception
handler; here, it runs the standard
<TT>traceback.print_exc</TT> call to print exception
details to the web browser in unformatted
(<TT>&lt;PRE&gt;</TT>) mode.<A NAME="IXTR3-385"></A>
</P>


<A NAME="python2-CHP-14-SECT-5.4"></A>
<H4 class="docSection2Title">14.5.4 Implementation: Submitting Errata Reports</H4>

<P class="docText"><A NAME="python2-IDXTERM-1498"></A>The
top-level errata submission page in Figures <A class="docLink" HREF="#python2-CHP-14-FIG-20">Figure 14-20</A> and <A class="docLink" HREF="#python2-CHP-14-FIG-21">Figure 14-21</A> is also
rendered from a static HTML file on the server, listed in <A class="docLink" HREF="#python2-CHP-14-EX-10">Example 14-10</A>. There are more input fields here, but
it's similar to comments.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-14-EX-10"></A>Example 14-10. PP2E\Internet\Cgi-Web\PyErrata\submitErrata.html </H5>
<PRE>&lt;html&gt;&lt;body bgcolor="#FFFFFF"&gt;
&lt;title&gt;PP2E Submit Errata&lt;/title&gt;
&lt;h1&gt;PP2E Submit Errata Report&lt;/h1&gt;

&lt;p&gt;Please fill out the form below and press the submit button to 
send your information.  By default, your report will be automatically
entered in a publically browsable database, where it will eventually 
be reviewed and verified by the author.  If you prefer to send your 
comments to the author by private email instead, click the "Email" 
button before you submit.  

&lt;p&gt;All the fields except the description text are optional;
for instance, if your note applies to the entire book, you can leave
the page, chapter, and part numbers blank.  For the printing date, see
the lower left corner of one of the first few pages; enter a string of
the form mm/dd/yy.  Thank you for your report.
&lt;/p&gt;

&lt;hr&gt;
&lt;form method=POST action="submitErrata.cgi"&gt;
  &lt;table&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Problem type: 
      &lt;td&gt;&lt;select name="Type"&gt;
          &lt;option&gt;Typo
          &lt;option&gt;Grammar
          &lt;option&gt;Program bug
          &lt;option&gt;Suggestion
          &lt;option&gt;Other
      &lt;/select&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Problem severity: 
      &lt;td&gt;&lt;select name="Severity"&gt;
          &lt;option&gt;Low
          &lt;option&gt;Medium
          &lt;option&gt;High
          &lt;option&gt;Unknown
      &lt;/select&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Page number: 
      &lt;td&gt;&lt;input type=text name="Page number"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Chapter number: 
      &lt;td&gt;&lt;input type=text name="Chapter number"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Part number: 
      &lt;td&gt;&lt;input type=text name="Part number"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Printing date: 
      &lt;td&gt;&lt;input type=text name="Printing date"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Description:
      &lt;td&gt;&lt;textarea name="Description" cols=60 rows=10&gt;Type a description here
          &lt;/textarea&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Your name: 
      &lt;td&gt;&lt;input type=text size=40 name="Submitter name"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Your email, webpage:
      &lt;td&gt;&lt;input type=text size=40 name="Submitter email"&gt;
    &lt;tr&gt;
      &lt;th align=right&gt;Email report privately?: 
      &lt;td&gt;&lt;input type=checkbox name="Submit mode" value="email"&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;td&gt;&lt;input type=submit value="Submit Report"&gt;
          &lt;input type=reset  value="Reset Form"&gt;
  &lt;/table&gt;
&lt;/form&gt;

&lt;hr&gt;
&lt;A href="pyerrata.html"&gt;Back to errata page&lt;/A&gt;
&lt;/body&gt;&lt;/html&gt;</PRE>


<P class="docText">The script triggered by the form on this page, shown in <A class="docLink" HREF="#python2-CHP-14-EX-11">Example 14-11</A>, also looks remarkably similar to the
<TT>submitComment</TT> script shown in <A class="docLink" HREF="#python2-CHP-14-EX-9">Example 14-9</A>. Because both scripts simply use factored-out
logic in the <TT>submit</TT> module, all we need do here is
pass in appropriately tailored confirmation pages text and expected
input fields. As before, real CGI inputs are merged into the
script's <TT>inputs</TT> dictionary to yield a
database record; the stored record will contain exactly the fields
listed here.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-14-EX-11"></A>Example 14-11. PP2E\Internet\Cgi-Web\PyErrata\submitErrata.cgi </H5>
<A NAME="IXTR3-386"></A><PRE>#!/usr/bin/python

DEBUG=0
if DEBUG:
    import sys
    sys.stderr = sys.stdout
    print "Content-type: text/html"; print

import traceback
try:
    from dbswitch import DbaseErrata        # dbfiles or dbshelve
    from submit   import saveAndReply       # reuse save logic

    replyStored = """
    Your report has been entered into the errata database.
    You may view it by returning to the main errata page, and 
    selecting Browse/Errata reports, using your name, or any 
    other report identifying information as the browsing key."""

    replyMailed = """
    Your report has been emailed to the author for review.
    It will not be automatically browsable, but may be added to
    the database anonymously later, if it is determined to be 
    information of general interest."""

    # 'Report state' and 'Submit date' are added when written

    inputs = {'Type':'',            'Severity':'', 
              'Page number':'',     'Chapter number':'',   'Part number':'',
              'Printing Date':'',   'Description':'',      'Submit mode':'',
              'Submitter name':'',  'Submitter email':''}

    saveAndReply(DbaseErrata, inputs, replyStored, replyMailed)

except:
    print "\n\n&lt;pre&gt;"
    traceback.print_exc(  )</PRE>



<A NAME="python2-CHP-14-SECT-5.5"></A>
<H4 class="docSection2Title">14.5.5 Common Submit Utility Module</H4>

<P class="docText"><A NAME="python2-IDXTERM-1499"></A> <A NAME="python2-IDXTERM-1500"></A>Both
comment and errata reports ultimately invoke functions in the module
in <A class="docLink" HREF="#python2-CHP-14-EX-12">Example 14-12</A> to store to the database and generate
a reply page. Its primary goal is to merge real CGI inputs into the
expected inputs dictionary and post the result to the database or
email. We've already described the basic ideas behind this
module's code, so we don't have much new to say here.
</P>

<P class="docText"><A NAME="IXT-14-337707"></A>Notice, though, that
email-mode submissions (invoked when the submit page's email
checkbox is checked) use an <TT>os.popen</TT> shell command
call to send the report by email; messages arrive in my mailbox with
one line per nonempty report field. This works on my Linux web
server, but other mail schemes such as the <TT>smptlib</TT>
module (discussed in <A class="docLink" HREF="0596000855_python2-CHP-11.html#python2-CHP-11">Chapter 11</A>) are more portable.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-14-EX-12"></A>Example 14-12. PP2E\Internet\Cgi-Web\PyErrata\submit.py </H5>
<PRE>#########################################################
# on submit request: store or mail data, send reply page;
# report data is stored in dictionaries on the database;
# we require a description field (and return a page with
# an error message if it's empty), even though the dbase
# mechanism could handle empty description fields--it 
# makes no sense to submit a bug without a description;
#########################################################

import cgi, os, sys, string
mailto = 'lutz@rmi.net'             # or lutz@starship.python.net
sys.stderr = sys.stdout             # print errors to browser
print "Content-type: text/html\n"

thankyouHtml = """
&lt;TITLE&gt;Thank you&lt;/TITLE&gt;
&lt;H1&gt;Thank you&lt;/H1&gt; 
&lt;P&gt;%s&lt;/P&gt;
&lt;HR&gt;"""

errorHtml = """
&lt;TITLE&gt;Empty field&lt;/TITLE&gt;
&lt;H1&gt;Error: Empty %s&lt;/H1&gt; 
&lt;P&gt;Sorry, you forgot to provide a '%s' value.
Please go back to the prior page and try again.&lt;/P&gt;
&lt;HR&gt;"""

def sendMail(inputs):                             # email data to author
    text = ''                                     # or 'mailto:' form action
    for key, val in inputs.items(  ):               # or smtplib.py or sendmail
        if val != '':
            text = text + ('%s = %s\n' % (key, val))
    mailcmd = 'mail -s "PP2E Errata" %s' % mailto
    os.popen(mailcmd, 'w').write(text)

def saveAndReply(dbase, inputs, replyStored, replyMailed):
    form = cgi.FieldStorage(  )
    for key in form.keys(  ):
        if key in inputs.keys(  ):
            inputs[key] = form[key].value       # pick out entered fields

    required = ['Description']
    for field in required:
        if string.strip(inputs[field]) == '':
            print errorHtml % (field, field)    # send error page to browser
            break
    else:
        if inputs['Submit mode'] == 'email':
            sendMail(inputs)                    # email data direct to author
            print thankyouHtml % replyMailed
        else:
            dbase(  ).storeItem(inputs)           # store data in file on server 
            print thankyouHtml % replyStored</PRE>


<P class="docText">This module makes use of one additional database interface to store
record dictionaries: <TT>dbase( ).storeItem(inputs)</TT>.
However, we need to move on to the next section to fully understand
the processing that this call implies.<A NAME="IXTR3-387"></A> <A NAME="IXTR3-388"></A><A NAME="IXTR3-389"></A> <A NAME="IXTR3-390"></A> <A NAME="IXTR3-391"></A>
</P>

<P><table border="0" bgcolor="black" cellspacing="0" cellpadding="1" width="90%" align="center"><tr><td>
<table bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="6"><tr>
<td width="60" valign="top"><img src="FILES/tip_yellow.gif" width="50" height="54"></td>
<td valign="top">
<P class="docText">Another redundancy caveat: the list of expected fields in the
<TT>inputs</TT> dictionaries in submit scripts is the same
as the input fields list in submit HTML files. In principle again, we
could instead generate the HTML file's fields list using data
in a common module to remove this redundancy. However, that technique
may not be as directly useful here, since each field requires
description text in the HTML file only.
</P>
</td>
</tr></table></td></tr></table></P>



<a href="0596000855_"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
          <a href="0596000855_python2-CHP-14-SECT-4.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596000855_python2-CHP-14-SECT-6.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
