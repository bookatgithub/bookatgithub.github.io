<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="15.9 Python Server Pages"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
	<a href="0596000855_python2-CHP-15-SECT-8.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596000855_python2-CHP-15-SECT-10.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="python2-CHP-15-SECT-9"></A>
<H3 class="docSection1Title">15.9 Python Server Pages</H3>

<P class="docText"><A NAME="IXT-15-337918"></A>
<A NAME="IXT-15-337919"></A>Though still somewhat new at this writing,
Python Server Pages (PSP) is a server-side technology that embeds
JPython code inside HTML. PSP is a Python-based answer to other
server-side embedded scripting approaches.
</P>

<P class="docText">The PSP scripting engine works much like Microsoft's Active
Server Pages (ASP, described earlier) and Sun's Java Server
Pages ( JSP) specification. At the risk of pushing the acronym
tolerance envelope, PSP has also been compared to PHP, a server-side
scripting language embedded in HTML. All of these systems, including
PSP, embed scripts in HTML and run them on the server to generate the
response stream sent back to the browser on the client; scripts
interact with an exposed object model API to get their work done. PSP
is written in pure Java, however, and so is portable to a wide
variety of platforms (ASP applications can be run only on Microsoft
platforms).
</P>

<P class="docText">PSP uses JPython as its scripting language, reportedly a vastly more
appropriate choice for scripting web sites than the Java language
used in Java Server Pages. Since JPython code is embedded under PSP,
scripts have access to the large number of Python and JPython tools
and add-ons from within PSPs. In addition, scripts may access all
Java libraries, thanks to JPython's Java integration support.
</P>

<P class="docText">We can't cover PSP in detail here; but for a quick look, <A class="docLink" HREF="#python2-CHP-15-EX-18">Example 15-18</A>, adapted from an example in the PSP
documentation, illustrates the structure of PSPs.
</P>


<H5 class="docExampleTitle"><A NAME="python2-CHP-15-EX-18"></A>Example 15-18. PP2E\Internet\Other\hello.psp </H5>
<PRE>$[
# Generate a simple message page with the client's IP address
]$
&lt;HTML&gt;&lt;HEAD&gt;
&lt;TITLE&gt;Hello PSP World&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
$[include banner.psp]$
&lt;H1&gt;Hello PSP World&lt;/H1&gt;
&lt;BR&gt;
$[
Response.write("Hello from PSP, %s." % (Request.server["REMOTE_ADDR"]) )
]$
&lt;BR&gt;
&lt;/BODY&gt;&lt;/HTML&gt;</PRE>


<P class="docText">A page like this would be installed on a PSP-aware server machine and
referenced by URL from a browser. PSP uses <TT>$[</TT> and
<TT>]$</TT> delimiters to enclose JPython code embedded in
HTML; anything outside these pairs is simply sent to the client
browser, while code within these markers is executed. The first code
block here is a JPython comment (note the <TT>#</TT>
character); the second is an <TT>include</TT> statement
that simply inserts another PSP file's contents.
</P>

<P class="docText">The third piece of embedded code is more useful. As in Active
Scripting technologies, Python code embedded in HTML uses an exposed
object API to interact with the execution context -- in this case,
the <TT>Response</TT> object is used to write output to the
client's browser (much like a <TT>print</TT> in a CGI
script), and <TT>Request</TT> is used to access HTTP
headers for the request. The <TT>Request</TT> object also
has a <TT>params</TT> dictionary containing
<TT>GET</TT> and <TT>POST</TT> input parameters,
as well as a <TT>cookies</TT> dictionary holding cookie
information stored on the client by a PSP application.
</P>

<P class="docText">Notice that the previous example could have just as easily been
implemented with a Python CGI script using a Python
<TT>print</TT> statement, but PSP's full benefit
becomes clearer in large pages that embed and execute much more
complex JPython code to produce a response.
</P>

<P class="docText">PSP runs as a Java servlet and requires the hosting web site to
support the Java Servlet API, all of which is beyond the scope of
this text. For more details about PSP, visit its web site, currently
located at <A class="docLink" target="_blank" HREF="http://www.ciobriefings.com/psp">http://www.ciobriefings.com/psp</A>, but search
<A class="docLink" target="_blank" HREF="http://www.python.org/default.htm">http://www.python.org</A> for other
links if this one changes over time.
</P>


<ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
          <a href="0596000855_python2-CHP-15-SECT-8.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596000855_python2-CHP-15-SECT-10.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
