<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="17.9 Data Structures Versus Python Built-ins"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
	<a href="0596000855_python2-CHP-17-SECT-8.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596000855_python2-CHP-17-SECT-10.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="python2-CHP-17-SECT-9"></A>
<H3 class="docSection1Title">17.9 Data Structures Versus Python Built-ins</H3>

<P class="docText">Now that I've shown you all these complicated algorithms, I
need to also tell you that at least in some cases, they may not be an
optimal approach. Built-in types like lists and dictionaries are
often a simpler and more efficient way to represent data. For
instance:
</P>

<A NAME="IXT-17-338077"></A><DL class="docList">
<DT><span class="docPubcolor"><span class="docEmphasis">Binary trees</span></span></DT>
<DD>
<P class="docList"><A NAME="IXT-17-338077"></A>These may be useful in many
applications, but Python dictionaries already provide a highly
optimized, C-coded, search table tool. Indexing a dictionary by key
is likely to be faster than searching a Python-coded tree structure:
</P>

<PRE>&gt;&gt;&gt; <B>x = {}</B>
&gt;&gt;&gt; <B>for i in [3,1,9,2,7]: x[i] = None </B>                # insert
&gt;&gt;&gt; <B>for i in range(10): print (i, x.has_key(i)),</B>      # lookup
(0, 0) (1, 1) (2, 1) (3, 1) (4, 0) (5, 0) (6, 0) (7, 1) (8, 0) (9, 1)</PRE>

<P class="docList">Because dictionaries are built in to the language, they are always
available, and will usually be faster than Python-based data
structure implementations.
</P>
</DD>
</DL>

<A NAME="IXT-17-338078"></A><A NAME="IXT-17-338079"></A><A NAME="IXT-17-338080"></A><A NAME="IXT-17-338081"></A><A NAME="IXT-17-338082"></A><A NAME="IXT-17-338083"></A><A NAME="IXT-17-338084"></A><DL class="docList">
<DT><span class="docPubcolor"><span class="docEmphasis">Graph algorithms</span></span></DT>
<DD>
<P class="docList"><A NAME="IXT-17-338078"></A>
<A NAME="IXT-17-338079"></A>These
serve many purposes, but a purely Python-coded implementation of a
very large graph might be less efficient than you want in some
applications. Graph programs tend to require peak performance; using
dictionaries instead of class instances to represent graphs may boost
performance some, but using linked-in compiled extensions may as
well.
</P>
</DD><DT><span class="docPubcolor"><span class="docEmphasis">Sorting algorithms</span></span></DT>
<DD>
<P class="docList"><A NAME="IXT-17-338080"></A>
<A NAME="IXT-17-338081"></A>
<A NAME="IXT-17-338082"></A>
<A NAME="IXT-17-338083"></A>These
are an important part of many programs too, but Python's
built-in list <TT>sort</TT> method is so fast that you
would be hard pressed to beat it in Python in most scenarios. In
fact, it's generally better to convert sequences to lists first
just so you can use the
built-in<A NAME="IXT-17-338084"></A>:
</P>

<PRE>temp = list(sequence)
temp.sort(  )
<I>...use items in temp...</I></PRE>


<P class="docList">For custom sorts, simply pass in a comparison function of your own:</P>

<PRE>&gt;&gt;&gt; <B>L = [{'n':3}, {'n':20}, {'n':0}, {'n':9}]</B>    
&gt;&gt;&gt; <B>L.sort( lambda x, y: cmp(x['n'], y['n']) )</B>    
&gt;&gt;&gt; <B>L  </B>          
[{'n': 0}, {'n': 3}, {'n': 9}, {'n': 20}]</PRE>
</DD>
</DL>

<DL class="docList">
<DT><span class="docPubcolor"><span class="docEmphasis">Reversal algorithms</span></span></DT>
<DD>
<P class="docList">These are generally superfluous by the same token -- because
Python lists provide a fast <TT>reverse</TT> method, you
may be better off converting a non-list to a list first, just so that
you can run the built-in list method.
</P>
</DD>
</DL>

<P class="docText">Don't misunderstand: sometimes you really do need objects that
add functionality to built-in types, or do something more custom. The
set classes we met, for instance, add tools not directly supported by
Python today, and the tuple-tree stack implementation was actually
faster than one based upon built-in lists for common usage patterns.
Permutations are something you need to add on your own too.
</P>

<P class="docText">Moreover, class encapsulations make it possible to change and extend
object internals without impacting the rest of your system. They also
support reuse much better than built-in types -- types are not
classes today, and cannot be specialized directly without wrapper
class logic.
</P>

<P class="docText">Yet because Python comes with a set of built-in, flexible, and
optimized datatypes, data structure implementations are often not as
important in Python as they are in lesser-equipped languages such as
C or C++. Before you code that new datatype, be sure to ask yourself
if a built-in type or call might be more in line with the Python way
of thinking.
</P>


<ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
          <a href="0596000855_python2-CHP-17-SECT-8.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596000855_python2-CHP-17-SECT-10.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
