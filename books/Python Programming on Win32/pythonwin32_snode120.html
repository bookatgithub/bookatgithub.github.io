<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="15.2 FTP"-->
<LINK REL="stylesheet" href="FILES/sbolM.css">
</HEAD>
<BODY link="#354278" vlink="#000066" alink="#000080" topmargin="0">
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="pythonwin32_snode119.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="pythonwin32_snode121.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
<FONT>
<h3>15.2
FTP</h3>


<p>The <a NAME="idx1593"></a>
<a naME="idx1594"></A> <A name="idx1595"></A>File Transfer Protocol
(FTP) transfers files across a network. The Python module
<TT Class="monofont">ftplib</tt>
<a name="idx1596"></a> supports this protocol. An FTP server
program is run on a computer client computers can connect to. The
client computer sendsty5e transfer is initiated, a new connection
exclusively for the data is established between the client and the
server.</p>




<h4>15.2.1
Fetching Data via FTP</h4>


<p>
<a name="idx1597"></A>The
<TT CLAsS="monofont">ftplib</Tt>
<A NaME="idx1598"></A> module is used in much the same way as
the <TT Class="monofont">httplib</TT> module: a single class,
<TT clasS="monofont">FTP</TT>, provides all of the functionality.</P>



<p>The FTP protocol supports a variety of commands, which include such
operations as logging in, navigating the filesystem, and retrieving
directory listings. Let's create an FTP session:</p>



<prE CLAss="monofont">&gt;&gt;&gt; import ftplib
&gt;&gt;&gt; ftp = ftplib.FTP('ftp.python.org') # connect to host, default port
&gt;&gt;&gt;</pre>


<p>Log on as an anonymous user:</p>



<pre class="monofont">&gt;&gt;&gt; ftp.login('anonymous', 'your@email.address')
"230-WELCOME to python.org, the Python programming language ..."
&gt;&gt;&gt;</pre>


<p>Get a directory listing:</p>



<pRE CLASs="monofont">&gt;&gt;&gt; ftp.retrlines('LIST') # list directory contents
total 38
drwxrwxr-x  11 root     4127         512 Aug 28 20:23 .
...
-r--r--r--   1 klm      1000         764 Aug 25 19:32 welcome.msg
'226 Transfer complete.'</PRe>


<P>Notice there's a file <I>welcome.msg</i>:
let's download the file. Open a local file and indicate its
<TT CLASs="monofont">write</tt> method should be called to store the data:</p>



<PRE Class="monofont">&gt;&gt;&gt; file=open("welcome.msg", "w")
&gt;&gt;&gt; ftp.retrlines("retr welcome.msg", file.write)
'226 Transfer complete.'
&gt;&gt;&gt; file.close()</PRE>


<P>Now reopen the file and print the data:</p>



<pre CLASs="monofont">&gt;&gt;&gt; open("welcome.msg", "r").read()
"WELCOME to python.org, the Python programming language home site. ..."
&gt;&gt;&gt;</pre>


<p>To retrieve a binary file (such as an executable), you could use the
method <tt class="monofont">retrbinary()</tt>
<a name="idx1599"></a>; it takes the same methods as
<tT CLASS="monofont">retrlines()</tT>
<A nAMe="idx1600"></A>, except it also allows you to specify a
block size for the transfer. In this case you should remember to open
the file itself in binary mode, as discussed in <A href="pythonwin32_cnode24.html">Chapter 3</a>.</p>


</foNT>
 
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="pythonwin32_snode119.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="pythonwin32_snode121.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
</BODY></HTML>