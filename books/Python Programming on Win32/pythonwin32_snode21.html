<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="2.1 A Crash Course"-->
<LINK REL="stylesheet" href="FILES/sbolM.css">
</HEAD>
<BODY link="#354278" vlink="#000066" alink="#000080" topmargin="0">
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="pythonwin32_cnode19.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="pythonwin32_snode22.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
<FONT>
<h3>2.1
A Crash Course</h3>


<p>Python offers an interactive mode that lets you evaluate an
<a NAME="idx130"></a>
<a naME="idx131"></A>expression at a time. This is an
excellent way to learn the language. We will step rapidly through the
main features of the language in interactive mode. We won't
provide detailed explanations, since most features are remarkably
clear and obvious anyway.</P>



<p>Either go to an MS-DOS prompt, or (if you've already installed
it) start PythonWin. You should see something like this:</p>



<prE CLAss="monofont">Pythonwin 1.5.2b2 (#0, Feb 16 1999, 17:09:09) [MSC 32 bit (Intel)] on win32
Copyright 1991-1995 Stichting Mathematisch Centrum, Amsterdam
Portions Copyright 1994-1998 Mark Hammond (MHammond@skippinet.com.au)
&gt;&gt;&gt;</pre>


<p>You can type in simple expressions, which are evaluated for you:</p>



<pre class="monofont">&gt;&gt;&gt; 2+2
4</pre>



<h4>2.1.1
Numbers, Strings, and Variables</h4>


<p>
<A NAME="idx132"></A>
<a NAmE="idx133"></A>
<a NAME="idx134"></A>You can assign to
variables with <A name="idx135"></A>=. There is no separate declaration
required before you assign a variable:</P>



<PRe claSS="monofont">&gt;&gt;&gt; x=3
&gt;&gt;&gt; x
3
&gt;&gt;&gt; y=x*2
&gt;&gt;&gt; y
6
&gt;&gt;&gt;</PRe>


<p>Python supports all standard <a nAME="idx136"></A>arithmetic operators. Note that the
<a name="idx137"></a>
<a name="idx138"></a>division
operator ( / ) yields different results on integer and floating-point
types:</p>



<pre class="monofont">&gt;&gt;&gt; 22 / 7
3
&gt;&gt;&gt; 22.0 / 7.0
3.14285714286
&gt;&gt;&gt;</PRE>


<P>Scientists and mathematicians will be pleased to hear that complex
numbers are fully supported using the letter <I>j
</I>
<a NAmE="idx139"></A>:</p>



<PRE CLAss="monofont">&gt;&gt;&gt; (3 + 1j) * (3 - 1j)
(10+0j)
&gt;&gt;&gt;</prE>


<P>Strings can be wrapped in either double or single <A Name="idx140"></a>
<A NAMe="idx141"></a> <a nAME="idx142"></A>
<a name="idx143"></a> <a name="idx144"></a>quotes. They can be concatenated
with the <a name="idx145"></a>+
operator and repeated with the <a naME="idx146"></A>* operator. You can also access
individual characters by their position:</P>



<PRe CLaSS="monofont">&gt;&gt;&gt; greeting = 'hello'
&gt;&gt;&gt; epithet = 'stranger'
&gt;&gt;&gt; greeting + ", " + epithet
'hello, stranger'
&gt;&gt;&gt; "spam" * 10
'spamspamspamspamspamspamspamspamspamspam'
&gt;&gt;&gt;</pRE>






<H4>2.1.2
Lists and Tuples</H4>


<P>Much of Python's power comes from its support for
<A name="idx147"></A>lists and its compact
syntax for manipulating them. Lists are wrapped in
<A NAme="idx148"></a> <a NAME="idx149"></a>square brackets and can contain any
Python objects. You can also insert and delete items in a list and
even use negative positions to access the end of the list without
knowing its length:</p>



<prE CLAss="monofont">&gt;&gt;&gt; mylunch = ['spam','eggs', 'guinness','raspberries','wafer-thin mint']
&gt;&gt;&gt; mylunch[0]
'spam'
&gt;&gt;&gt; mylunch[1:3], mylunch[-1]
(['eggs', 'guinness'], 'wafer-thin mint')
&gt;&gt;&gt;</pre>


<p>When you enter two results separated by a comma on the same line, you
get two expressions, but enclosed in <a name="idx150"></a> <a name="idx151"></a>parentheses. Parentheses
indicate a
<i>tuple</i>
<a NAME="idx152"></A>,
which is similar to a list but can't be modified once created:</P>



<pRE cLAsS="monofont">&gt;&gt;&gt; mylunch[2] = 'tea'
&gt;&gt;&gt; mylunch
['spam', 'eggs', 'tea', 'raspberries', 'wafer-thin mint']
&gt;&gt;&gt; meal_deal = ('burger','fries','coke')   # a tuple
&gt;&gt;&gt; meal_deal[1] = 'onion rings'
Traceback (innermost last):
  File "&lt;interactive input&gt;", line 1, in ?
TypeError: object doesn't support item assignment
&gt;&gt;&gt;</PRE>


<P>The last example also shows our first <A name="idx153"></A>error message. When errors occur, you
see a
<I>traceback</I>
<A name="idx154"></A>
stating which functions were active and the line of the source file
that caused the error, as well as the error type and message on the
last line. In this case, you type commands interactively rather than
running a source file, so you don't see a helpful filename or
line number.</P>







<H4>2.1.3
Control Structures</H4>


<p>
<a naME="idx155"></A>The
<Tt class="monofont">for</tt>
<a name="idx156"></a> loop actually operates over lists, not
numbers:</p>



<pre claSS="monofont">&gt;&gt;&gt; for item in mylunch:
...     print item
...     
spam
eggs
tea
raspberries
wafer-thin mint
&gt;&gt;&gt;</PRE>


<P>There are several things to note at this point. First, after typing
the <a NAmE="idx157"></A> <a NAME="idx158"></A>colon and
pressing the Return key, Python indents the next line, and you
don't have to type anything to end the <Tt claSS="monofont">for</TT>
loop. Python actually uses
<a namE="idx159"></A>indentation for
syntax, saving typing and making the language highly readable: the
layout of code on the page indicates its structure. A second point is
that the <A Name="idx160"></a>
<A NAMe="idx161"></a>&gt;&gt;&gt;
prompt changes to <a name="idx162"></a> <a name="idx163"></a>... for subsequent lines. This
indicates that Python knows you are entering a multiline statement at
the command prompt.</p>



<p>Another common structure is the
<tt claSS="monofont">while</TT>
<A NaME="idx164"></a> loop:</P>



<PrE CLASS="monofont">&gt;&gt;&gt; x = 2
&gt;&gt;&gt; while x &lt; 50:
...     x = x * 2
...     print x
...     
4
8
16
32
64
&gt;&gt;&gt;</pre>


<p>The <TT CLass="monofont">if</tT>
<A NAme="idx165"></a> structure is also present; the
<tT CLAss="monofont">else</tt>
<a name="idx166"></a> clause is optional:</p>



<pre class="monofont">&gt;&gt;&gt; if 'chocolate' in mylunch:
...     print "that's not allowed"
... else:
...     print "enjoy your meal"
...     
enjoy your meal
&gt;&gt;&gt;</prE>


<P>You can also have a number of intermediate
<TT CLaSS="monofont">elif</tT>
<A nAME="idx167"></A> clauses, short for else-if. These allow
something like the
<TT clasS="monofont">switch</TT>
<A name="idx168"></A> <A NAme="idx169"></a> or <tT CLAss="monofont">case</tt>
statements in other languages:</p>



<pre class="monofont">&gt;&gt;&gt; salary = 20000
&gt;&gt;&gt; if salary &lt; 4000:
...     tax_rate = 0
... elif salary &lt; 29000:
...     tax_rate = 0.25
... elif salary &lt; 100000:
...     tax_rate = 0.4
... else:
...     emigrate()     # that's a function call
...     
&gt;&gt;&gt;</pre>






<h4>2.1.4
Functions</h4>


<p>
<a nAME="idx170"></A>Functions are
defined by the <TT cLAsS="monofont">def</Tt>
<A NAME="idx171"></A> statement and use
<tt clASS="monofont">return</Tt>
<a naME="idx172"></A><I> </i>to exit
immediately from the function and return a value. You can return more
than one value by using a tuple or return no value at all:</p>



<prE CLAss="monofont">&gt;&gt;&gt; def double(x):
...     return x * 2
... 
&gt;&gt;&gt; double(2)
4
&gt;&gt;&gt; def first_and_last(aList):
...     return (aList[0], aList[-1])
...     
&gt;&gt;&gt; first_and_last(range(5))
(0, 4)
&gt;&gt;&gt; def sayHello():
...     print 'hello'
...     
&gt;&gt;&gt; sayHello()
hello
&gt;&gt;&gt;</pre>


<p>Functions may have <a name="idx173"></a>
<a name="idx174"></a>default
arguments that allow them to be called in certain ways or allow you
to initialize variables:</p>



<prE CLASS="monofont">&gt;&gt;&gt; def makeCoffee(size, milk=None, sugar=None):
...     order = 'one ' + size + ' coffee'
...     if milk and sugar:
...         order = order + ' with milk and sugar'
...     elif milk:
...         order = order + ' with milk'
...     elif sugar:
...         order = order + ' with sugar'
...     else:
...         pass  # pass means 'do nothing'
...     return order
... 
&gt;&gt;&gt; makeCoffee('large')
'one large coffee'
&gt;&gt;&gt; makeCoffee('large', 1)
'one large coffee with milk'
&gt;&gt;&gt; makeCoffee('large', milk=0, sugar=1)
'one large coffee with sugar'
&gt;&gt;&gt;</pRE>


<p>Note that you can name the arguments and that both
<TT cLASS="monofont">0</TT> and the special variable
<tt clASS="monofont">None</Tt>
<a naME="idx175"></A>
are treated as false.</P>







<h4>2.1.5
Dictionaries</h4>


<p>
<a NAME="idx176"></a>Python also
offers a dictionary type. This is based on a hash table, and the
lookup time is almost constant, irrespective of size. Dictionaries
are enclosed in <a name="idx177"></a> <a name="idx178"></a>braces ({ }), and the keys and values are
displayed separated by a <a name="idx179"></a> <a nAME="idx180"></A>colon. You can access and set
their elements with a notation similar to list indexes:</P>



<PrE ClASs="monofont">&gt;&gt;&gt; fur_colors = {}
&gt;&gt;&gt; fur_colors['Tinky-Winky'] = 'purple'
&gt;&gt;&gt; fur_colors['Dipsy'] = 'green'
&gt;&gt;&gt; fur_colors['LaLa'] = 'yellow'
&gt;&gt;&gt; fur_colors
{'Tinky-Winky': 'purple', 'Dipsy': 'green', 'LaLa': 'yellow'}
&gt;&gt;&gt; fur_colors['LaLa']
'yellow'
&gt;&gt;&gt;</PRE>


<P>Dictionaries have no natural order. They support some useful methods
of searching, e.g., by keys, values, and whether or not a certain key
is present:</P>



<Pre clASS="monofont">&gt;&gt;&gt; fur_colors.keys()
['Tinky-Winky', 'Dipsy', 'LaLa']
&gt;&gt;&gt; fur_colors.values()
['purple', 'green', 'yellow']
&gt;&gt;&gt; fur_colors.items()    # converts to a list of tuples
[('Tinky-Winky', 'purple'), ('Dipsy', 'green'), ('LaLa', 'yellow')]
&gt;&gt;&gt; len(fur_colors)
3
&gt;&gt;&gt; fur_colors.has_key('Po')
0
&gt;&gt;&gt;</Pre>


<p>Lists and dictionaries together allow you to build more powerful
data structures, such as sets or even database indexes, in few lines
of code. The values in a dictionary can be anything, while the keys
can be strings, numbers, or tuples of other values. In <a href="pythonwin32_cnode49.html">Chapter 6</a>, we show how to construct some extremely useful
utilities from dictionaries.</p>







<h4>2.1.6
Modules</h4>


<P>Python code is organized into
<I>modules</I>
<A name="idx181"></a>.
A module must be loaded into memory using the
<tt class="monofont">import</tt> statement. Some modules are built into
Python and always available; others are stored in external files.
Modules can also be written either in C (in which case they are
compiled as a special kind of DLL) or in Python (in which case they
are saved in text files ending in
<i>.py</i>
<a name="idx182"></A>). As far
as the user is concerned, they are all used the same way:</P>



<PRE ClASs="monofont">&gt;&gt;&gt; import math
&gt;&gt;&gt; math.sin(math.pi/2)
1.0
&gt;&gt;&gt;</PRe>


<P>We used both a function and a constant from the
<TT CLAss="monofont">math</tt> module. Note that the module's name
must be prefixed. This prevents <A NAMe="idx183"></a>namespace
collisions: imagine how many different programs might wish to define
a function called <tt CLASs="monofont">read( )</tt> or <tT CLAss="monofont">save(
)</tt>. It's also possible to import a function explicitly
into the present namespace:</p>



<pre class="monofont">&gt;&gt;&gt; from string import split, join
&gt;&gt;&gt; split('We are the knights who say Ni')
['We', 'are', 'the', 'knights', 'who', 'say', 'Ni']
&gt;&gt;&gt;</pre>


<p>This procedure can be used for brevity but increases the risk of a
collision, and, more important, of losing track of what your code
means a few months later. It should be used sparingly.</p>







<h4>2.1.7
Classes</h4>


<p>
<A NAME="idx184"></A>Python makes
object-oriented programming easy. The <tT ClASs="monofont">class</TT>
statement begins the definition of a class. Classes can use a special
constructor called <TT CLass="monofont">__init__(
)</tT>
<A NAme="idx185"></a><i> </I>to initialize
their data. Because Python doesn't declare variables, this
constructor is a common place to initialize any variables the class
may require:</P>



<PRe claSS="monofont">&gt;&gt;&gt; class Car:
...     def __init__(self):
...         self.milespergallon = 25.0
...         self.travelled = 0
...         self.color = 'blue'
...         self.gas = 20
...     def drive(self, miles):
...         self.travelled = self.travelled + miles
...         self.gas = self.gas - (miles / self.milespergallon)
...     
&gt;&gt;&gt; c = Car()
&gt;&gt;&gt; c.drive(100)
&gt;&gt;&gt; c.travelled
100
&gt;&gt;&gt; c.gas
16.0
&gt;&gt;&gt;</PRe>


<p>Note that you have to use the keyword
<tt class="monofont">self</tt><i> </i>each time you access an
attribute.</p>



<p>As with other languages, classes may inherit from a base class and be
initialized with arguments supplied by the constructor. We
won't give any further examples at this point; you can see many
classes throughout this book, and the syntax is self-evident if you
are used to object-oriented programming.</p>







<h4>2.1.8
Exception Handling</h4>


<p>
<a nAME="idx186"></A>When
errors occur, Python throws an
<A NaME="idx187"></a>exception and
prints an informative traceback to standard output. If the error
occurred in a source file and not a console session, you get the
filename and line number. Here's a simple error, nested three
functions deep, and its traceback:</P>



<PrE CLASS="monofont">&gt;&gt;&gt; def func1(arg):
...     func2(arg)
...     
&gt;&gt;&gt; def func2(arg):
...     func3(arg)
...     
&gt;&gt;&gt; def func3(arg):
...     # this should cause an error
...     return arg / 0
...     
&gt;&gt;&gt; func1(17)
Traceback (innermost last):
  File "&lt;interactive input&gt;", line 0, in ?
  File "&lt;interactive input&gt;", line 2, in func1
  File "&lt;interactive input&gt;", line 2, in func2
  File "&lt;interactive input&gt;", line 3, in func3
ZeroDivisionError: integer division or modulo
&gt;&gt;&gt;</pre>


<p>The traceback tells us where the error happened and the enclosing
functions that called the functions that caused the error.</P>



<P>Exceptions can be handled using the
<TT clasS="monofont">try</TT>
<A name="idx188"></A>...<TT Class="monofont">except</tt> and
<tt class="monofont">try</tt>
<a name="idx189"></a>...<TT CLASs="monofont">finally</TT>
structure. If you aren't used to exception handling, these
offer two benefits over <a NAmE="idx190"></A>Visual
Basic-style error-handling. First, you can write a decent-sized chunk
of code and put the error handlers at the end; the intent of the
programmer is clearer than with a lot of <TT CLass="monofont">on</tT>
<TT Class="monofont">error</TT> <TT clasS="monofont">goto</TT> and
<Tt class="monofont">on</tt> <tt class="monofont">error</tt>
<tt clASS="monofont">resume</TT> <Tt CLaSS="monofont">next</tT> statements. Second,
exception handlers don't work on just the present chunk of
code, but also on any subroutines within it, however deeply nested.</P>



<P>The
<TT Class="monofont">except</TT>
<A Name="idx191"></a> clause can optionally specify
particular error types to look for or handle all errors:</P>



<PRE clasS="monofont">&gt;&gt;&gt; try:
...    y_scale_factor = plotHeight / (dataMax - dataMin)
... except ZeroDivisionError:
...    y_scale_factor = 0
...
&gt;&gt;&gt;</PRE>


<p>The <tt class="monofont">try</tt>
<a name="idx192"></a>...<tt claSS="monofont">finally</TT> clause
always executes the <TT cLAsS="monofont">finally</Tt> section whether an
error occurs or not. This ensures that resources such as files are
freed up:</P>



<PRE CLass="monofont">&gt;&gt;&gt; f = open('somefile.dat', 'wb')
&gt;&gt;&gt; try:
...     #fetch some data
...     #store it in the file 
... finally:
...     f.close()  # make sure the file is closed,
...                # even if errors occurred
...     
&gt;&gt;&gt;</pRE>

</FOnt>
 
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="pythonwin32_cnode19.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="pythonwin32_snode22.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
</BODY></HTML>