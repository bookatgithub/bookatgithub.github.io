<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="14.2 The pyclbr Module"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
	<a href="0596000960_pythonsl-CHP-14-SECT-1.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596000960_pythonsl-CHP-14-SECT-3.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonsl-CHP-14-SECT-2"></A>
<H3 class="docSection1Title">14.2 The pyclbr Module</H3>

<P class="docText">

<A NAME="pythonsl-IDXTERM-870"></A>
<A NAME="pythonsl-IDXTERM-871"></A>
<A NAME="pythonsl-IDXTERM-872"></A>



The <TT>pyclbr</TT> module, shown in <A class="docLink" HREF="#pythonsl-CHP-14-EX-1">Example 14-1</A>, contains a basic Python class parser.</P>

<P class="docText">In 1.5.2, the module exports a single function,
<TT>readmodule</TT>, which parses a given module, and
returns a list of all classes defined at the module's top level.</P>


<H5 class="docExampleTitle"><A NAME="pythonsl-CHP-14-EX-1"></A>Example 14-1. Using the pyclbr Module</H5>

<PRE>
File: pyclbr-example-1.py

import pyclbr

mod = pyclbr.readmodule("cgi")

for k, v in mod.items():
    print k, v

<B>MiniFieldStorage &lt;pyclbr.Class instance at 7873b0&gt;
InterpFormContentDict &lt;pyclbr.Class instance at 79bd00&gt;
FieldStorage &lt;pyclbr.Class instance at 790e20&gt;
SvFormContentDict &lt;pyclbr.Class instance at 79b5e0&gt;
StringIO &lt;pyclbr.Class instance at 77dd90&gt;
FormContent &lt;pyclbr.Class instance at 79bd60&gt;
FormContentDict &lt;pyclbr.Class instance at 79a9c0&gt;</B></PRE>


<P class="docText">In 2.0 and later, there's also an alternative interface,
<TT>readmodule_ex</TT>, which returns global functions as
well. This is shown in <A class="docLink" HREF="#pythonsl-CHP-14-EX-2">Example 14-2</A>.</P>


<H5 class="docExampleTitle"><A NAME="pythonsl-CHP-14-EX-2"></A>Example 14-2. Using the pyclbr Module to Read Classes and Functions</H5>

<PRE>
File: pyclbr-example-3.py

import pyclbr

# 2.0 and later
mod = pyclbr.readmodule_ex("cgi")

for k, v in mod.items():
    print k, v

<B>MiniFieldStorage &lt;pyclbr.Class instance at 00905D2C&gt;
parse_header &lt;pyclbr.Function instance at 00905BD4&gt;
test &lt;pyclbr.Function instance at 00906FBC&gt;
print_environ_usage &lt;pyclbr.Function instance at 00907C94&gt;
parse_multipart &lt;pyclbr.Function instance at 00905294&gt;
FormContentDict &lt;pyclbr.Class instance at 008D3494&gt;
initlog &lt;pyclbr.Function instance at 00904AAC&gt;
parse &lt;pyclbr.Function instance at 00904EFC&gt;
StringIO &lt;pyclbr.Class instance at 00903EAC&gt;
SvFormContentDict &lt;pyclbr.Class instance at 00906824&gt;
...</B></PRE>


<P class="docText">To get more information about each class, use the various attributes
in the <I>Class</I> instances, as <A class="docLink" HREF="#pythonsl-CHP-14-EX-3">Example 14-3</A> shows.</P>


<H5 class="docExampleTitle"><A NAME="pythonsl-CHP-14-EX-3"></A>Example 14-3. Using the pyclbr Module</H5>

<PRE>
File: pyclbr-example-2.py

import pyclbr
import string

mod = pyclbr.readmodule("cgi")

def dump(c):
    # print class header
    s = "class " + c.name
    if c.super:
        s = s +  "(" + string.join(map(lambda v: v.name, c.super), ", ") + ")"
    print s + ":"
    # print method names, sorted by line number
    methods = c.methods.items()
    methods.sort(lambda a, b: cmp(a[1], b[1]))
    for method, lineno in methods:
        print "  def " + method
    print

for k, v in mod.items():
    dump(v)

<B>class MiniFieldStorage:
  def _ _init_ _
  def _ _repr_ _

class InterpFormContentDict(SvFormContentDict):
  def _ _getitem_ _
  def values
  def items

...</B></PRE>


<a href="0596000960_"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right">
          <a href="0596000960_pythonsl-CHP-14-SECT-1.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596000960_pythonsl-CHP-14-SECT-3.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
