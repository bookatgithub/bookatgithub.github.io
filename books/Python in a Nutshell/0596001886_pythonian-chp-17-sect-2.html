<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="17.2 Debugging"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0596001886_pythonian-chp-17-sect-1.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596001886_pythonian-chp-17-sect-3.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonian-CHP-17-SECT-2"></A>
<H3 class="docSection1Title">17.2 Debugging</H3>

<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7804"></A>Since
Python's development cycle is so fast, the most
effective way to debug is often to edit your code to make it output
relevant information at key points. Python has many ways to let your
code explore its own state in order to extract information that may
be relevant for debugging. The <TT>inspect</TT> and
<TT>traceback</TT> modules specifically support such
exploration, which is also known as reflection or introspection.</P>

<P class="docText">Once you have obtained debugging-relevant information, statement
<TT>print</TT> is often the simplest way to display it. You
can also log debugging information to files. Logging is particularly
useful for programs that run unattended for a long time, as is
typically the case for server programs. Displaying debugging
information is like displaying other kinds of information, as covered
in <A class="docLink" HREF="0596001886_pythonian-chp-10.html#pythonian-CHP-10">Chapter 10</A> and <A class="docLink" HREF="0596001886_pythonian-chp-16.html#pythonian-CHP-16">Chapter 16</A>, and similarly for logging it, as covered in
<A class="docLink" HREF="0596001886_pythonian-chp-10.html#pythonian-CHP-10">Chapter 10</A> and <A class="docLink" HREF="0596001886_pythonian-chp-11.html#pythonian-CHP-11">Chapter 11</A>. Python 2.3 will also include a module
specifically dedicated to logging. As covered in <A class="docLink" HREF="0596001886_pythonian-chp-8.html#pythonian-CHP-8">Chapter 8</A>, rebinding attribute
<TT>excepthook</TT> of module <TT>sys</TT> lets
your program log detailed error information just before your program
is terminated by a propagating
exception.<A NAME="pythonian-CHP-17-ITERM-7805"></A>
<A NAME="pythonian-CHP-17-ITERM-7806"></A></P>

<P class="docText">Python also offers hooks enabling interactive debugging. Module
<TT>pdb</TT> supplies a simple text-mode interactive
debugger. Other interactive debuggers for Python are part of
integrated development environments (IDEs), such as IDLE and various
commercial offerings. However, I do not cover IDEs in this book.</P>

<A NAME="pythonian-CHP-17-SECT-2.1"></A>
<H4 class="docSection2Title">17.2.1 The inspect Module</H4>

<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7807"></A> <A NAME="pythonian-CHP-17-ITERM-7808"></A>The <TT>inspect</TT> module
supplies functions to extract information from all kinds of objects,
including the Python call stack (which records all function calls
currently executing) and source files. At the time of this writing,
module <TT>inspect</TT> is not yet available for Jython.
The most frequently used functions of module
<TT>inspect</TT> are as follows.</P>

<A NAME="ch17-77022"></A><A NAME="pythonian-CHP-17-ITERM-7809"></A><A NAME="pythonian-CHP-17-ITERM-7810"></A><A NAME="pythonian-CHP-17-ITERM-7811"></A><A NAME="pythonian-CHP-17-ITERM-7812"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getargspec, formatargspec</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getargspec(<TT><I>f</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7811"></A> <A NAME="pythonian-CHP-17-ITERM-7812"></A><TT><I>f</I></TT> is a
function object. <TT>getargspec</TT> returns a tuple with
four items
<TT>(</TT><TT><I>arg_names</I></TT>,
<TT><I>extra_args</I></TT>,
<TT><I>extra_kwds</I></TT>,
<TT><I>arg_defaults</I></TT><TT>)</TT>.
<TT><I>arg_names</I></TT> is the sequence of names of
<TT><I>f</I></TT>'s formal arguments.
<TT><I>extra_args</I></TT> is the name of the special
formal argument of the form
<TT>*</TT><TT><I>args</I></TT>, or
<TT>None</TT> if <TT><I>f</I></TT> has no such
special argument. <TT><I>extra_kwds</I></TT> is the name
of the special formal argument of the form
<TT>**</TT><TT><I>kwds</I></TT>, or
<TT>None</TT> if <TT><I>f</I></TT> has no such
special argument. <TT><I>arg_defaults</I></TT> is the
tuple of default values for
<TT><I>f</I></TT>'s arguments. You can
deduce other details about
<TT><I>f</I></TT>'s signature from
<TT>getargspec</TT>'s results. For
example, <TT><I>f</I></TT> has
<TT>len(</TT><TT><I>arg_names</I></TT><TT>)-len(</TT><TT><I>arg_defaults</I></TT><TT>)</TT>
mandatory arguments, and the names of
<TT><I>f</I></TT>'s optional arguments
are the strings that are the items of the list slice
<TT><I>arg_names</I></TT><TT>[-len(</TT><TT><I>arg_defaults</I></TT><TT>):]</TT>.</P>
<P class="docText"><TT>formatargspec</TT> accepts one to four arguments that
are the same as the items of the tuple that
<TT>getargspec</TT> returns, and returns a formatted string
that displays this information. Thus,
<TT>formatargspec(*getargspec(</TT><TT><I>f</I></TT><TT>))</TT>
returns a formatted string with
<TT><I>f</I></TT>'s formal arguments
(i.e., <TT><I>f</I></TT>'s
<I>signature</I>) in parentheses, as used in the
<TT>def</TT> statement that created
<TT><I>f</I></TT>.</P>

<A NAME="ch17-77023"></A><A NAME="pythonian-CHP-17-ITERM-7813"></A><A NAME="pythonian-CHP-17-ITERM-7814"></A><A NAME="pythonian-CHP-17-ITERM-7815"></A><A NAME="pythonian-CHP-17-ITERM-7816"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getargvalues, formatargvalues</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getargvalues(<TT><I>f</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT><I>f</I></TT> is a frame object, for example the
result of a call to the function <TT>_getframe</TT> in
module <TT>sys</TT> (covered in <A class="docLink" HREF="0596001886_pythonian-chp-8.html#pythonian-CHP-8">Chapter 8</A>) or to function
<TT>currentframe</TT> in module <TT>inspect</TT>.
<TT>getargvalues</TT> returns a tuple with four items
<TT>(</TT><TT><I>arg_names</I></TT>,
<TT><I>extra_args</I></TT>,
<TT><I>extra_kwds</I></TT>,
<TT><I>locals</I></TT><TT>)</TT>.
<TT><I>arg_names</I></TT> is the sequence of names of
<TT><I>f</I></TT>'s
function's formal arguments.
<TT><I>extra_args</I></TT> is the name of the special
formal argument of form
<TT>*</TT><TT><I>args</I></TT>, or
<TT>None</TT> if
<TT><I>f</I></TT>'s function has no such
special argument. <TT><I>extra_kwds</I></TT> is the name
of the special formal argument of form
<TT>**</TT><TT><I>kwds</I></TT>, or
<TT>None</TT> if
<TT><I>f</I></TT>'s function has no such
special argument. <TT><I>locals</I></TT> is the dictionary
of local variables for <TT><I>f</I></TT>. Since arguments,
in particular, are local variables, the value of each actual argument
can be obtained from <TT><I>locals</I></TT> by indexing
the <TT><I>locals</I></TT> dictionary with the
argument's name.</P>
<P class="docText"><TT>formatargvalues</TT> accepts one to four arguments that
are the same as the items of the tuple that
<TT>getargvalues</TT> returns, and returns a formatted
string that displays this information.
<TT>formatargvalues(*getargvalues(</TT><TT><I>f</I></TT><TT>))</TT>
returns a formatted string with
<TT><I>f</I></TT>'s actual arguments in
parentheses, in named (keyword) form, as used in the call statement
that created <TT><I>f</I></TT>. For example:</P>
<PRE>def f(x=23): return inspect.currentframe(  )
print inspect.formatargvalues(inspect.getargvalues(f(  )))  
# prints: (x=23)</PRE>

<A NAME="ch17-77024"></A><A NAME="pythonian-CHP-17-ITERM-7817"></A><A NAME="pythonian-CHP-17-ITERM-7818"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>currentframe</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>currentframe(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the frame object for the current function (caller of
<TT>currentframe</TT>).
<TT>formatargvalues(getargvalues(currentframe( ))</TT>, for
example, returns a formatted string with the actual arguments of the
calling function.</P>

<A NAME="ch17-77025"></A><A NAME="pythonian-CHP-17-ITERM-7819"></A><A NAME="pythonian-CHP-17-ITERM-7820"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getdoc</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getdoc(<TT><I>obj</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the docstring for <TT><I>obj</I></TT>, with tabs
expanded to spaces and redundant whitespace stripped from each line.</P>

<A NAME="ch17-77026"></A><A NAME="pythonian-CHP-17-ITERM-7821"></A><A NAME="pythonian-CHP-17-ITERM-7822"></A><A NAME="pythonian-CHP-17-ITERM-7823"></A><A NAME="pythonian-CHP-17-ITERM-7824"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getfile, getsourcefile</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getfile(<TT><I>obj</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the name of the file that defined
<TT><I>obj</I></TT>, and raises
<TT>TypeError</TT> when unable to determine the file. For
example, <TT>getfile</TT> raises
<TT>TypeError</TT> if <TT><I>obj</I></TT> is
built-in. <TT>getfile</TT> returns the name of a binary or
source file. <TT>getsourcefile</TT> returns the name of a
source file, and raises <TT>TypeError</TT> when it can
determine only a binary file, not the corresponding source file.</P>

<A NAME="ch17-77027"></A><A NAME="pythonian-CHP-17-ITERM-7825"></A><A NAME="pythonian-CHP-17-ITERM-7826"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getmembers</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getmembers(<TT><I>obj</I></TT>, <TT><I>filter</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns all attributes (members) of <TT><I>obj</I></TT>, a
sorted list of
<TT>(</TT><TT><I>name</I></TT>,<TT><I>value</I></TT><TT>)</TT>
pairs. When <TT><I>filter</I></TT> is not
<TT>None</TT>, returns only attributes for which callable
<TT><I>filter</I></TT> returns a true result when called
on the attribute's <TT><I>value</I></TT>,
like:</P>
<PRE>[ (n, v) for n, v in getmembers(obj) if filter(v) ]</PRE>

<A NAME="ch17-77028"></A><A NAME="pythonian-CHP-17-ITERM-7827"></A><A NAME="pythonian-CHP-17-ITERM-7828"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getmodule</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getmodule(<TT><I>obj</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the module object that defined
<TT><I>obj</I></TT>, or <TT>None</TT> if unable
to determine it.</P>

<A NAME="ch17-77029"></A><A NAME="pythonian-CHP-17-ITERM-7829"></A><A NAME="pythonian-CHP-17-ITERM-7830"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getmro</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getmro(<TT><I>c</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns a tuple of bases and ancestors of class
<TT><I>c</I></TT> in method resolution order.
<TT><I>c</I></TT> is the first item in the tuple. Each
class appears only once in the tuple.</P>

<A NAME="ch17-77030"></A><A NAME="pythonian-CHP-17-ITERM-7831"></A><A NAME="pythonian-CHP-17-ITERM-7832"></A><A NAME="pythonian-CHP-17-ITERM-7833"></A><A NAME="pythonian-CHP-17-ITERM-7834"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getsource, getsourcelines</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>getsource(<TT><I>obj</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns a single multiline string that is the source code for
<TT><I>obj</I></TT>, and raises <TT>IOError</TT>
if unable to determine or fetch it. <TT>getsourcelines</TT>
returns a pair: the first item is the source code for
<TT><I>obj</I></TT> (a list of lines), and the second item
is the line number of the list's first line in the
source file it comes from.</P>

<A NAME="ch17-77031"></A><A NAME="pythonian-CHP-17-ITERM-7835"></A><A NAME="pythonian-CHP-17-ITERM-7836"></A><A NAME="pythonian-CHP-17-ITERM-7837"></A><A NAME="pythonian-CHP-17-ITERM-7838"></A><A NAME="pythonian-CHP-17-ITERM-7839"></A><A NAME="pythonian-CHP-17-ITERM-7840"></A><A NAME="pythonian-CHP-17-ITERM-7841"></A><A NAME="pythonian-CHP-17-ITERM-7842"></A><A NAME="pythonian-CHP-17-ITERM-7843"></A><A NAME="pythonian-CHP-17-ITERM-7844"></A><A NAME="pythonian-CHP-17-ITERM-7845"></A><A NAME="pythonian-CHP-17-ITERM-7846"></A><A NAME="pythonian-CHP-17-ITERM-7847"></A><A NAME="pythonian-CHP-17-ITERM-7848"></A><A NAME="pythonian-CHP-17-ITERM-7849"></A><A NAME="pythonian-CHP-17-ITERM-7850"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>isbuiltin,isclass,iscode, isframe, isfunction, ismethod, ismodule, isroutine</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>isbuiltin(<TT><I>obj</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7841"></A> <A NAME="pythonian-CHP-17-ITERM-7842"></A>
<A NAME="pythonian-CHP-17-ITERM-7843"></A> <A NAME="pythonian-CHP-17-ITERM-7844"></A> <A NAME="pythonian-CHP-17-ITERM-7845"></A>
<A NAME="pythonian-CHP-17-ITERM-7846"></A>Each of these functions accepts a
single argument <TT><I>obj</I></TT> and returns
<TT>True</TT> if <TT><I>obj</I></TT> belongs to
the type indicated in the function name. Accepted objects are,
respectively: built-in (C-coded) functions, class objects, code
objects, frame objects, Python-coded functions (including
<TT>lambda</TT> expressions), methods, modules, and, for
<TT>isroutine</TT>, all methods or functions, either
C-coded or Python-coded. These functions are often used as the
<TT><I>filter</I></TT> argument to
<TT>getmembers</TT>.<A NAME="pythonian-CHP-17-ITERM-7847"></A> <A NAME="pythonian-CHP-17-ITERM-7848"></A>
<A NAME="pythonian-CHP-17-ITERM-7849"></A> <A NAME="pythonian-CHP-17-ITERM-7850"></A></P>

<A NAME="ch17-77032"></A><A NAME="pythonian-CHP-17-ITERM-7851"></A><A NAME="pythonian-CHP-17-ITERM-7852"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>stack</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>stack(<TT><I>context</I></TT>=1)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns a list of six-item tuples. The first tuple is about
<TT>stack</TT>'s caller, the second tuple
is about the caller's caller, and so on. Each
tuple's items, in order, are: frame object,
filename, line number, function name, list of
<TT><I>context</I></TT> source code lines around the
current line, and index of current line within the list.</P>

<P class="docText">For example, suppose that at some point in your program you execute a
statement such as:</P>

<PRE>x.f(  )</PRE>

<P class="docText">and unexpectedly receive an <TT>AttributeError</TT>
informing you that object <TT><I>x</I></TT> has no
attribute named <TT><I>f</I></TT>. This means that object
<TT><I>x</I></TT> is not as you expected, so you want to
determine more about <TT><I>x</I></TT> as a preliminary to
ascertaining why <TT><I>x</I></TT> is that way and what
you should do about it. Change the statement to:</P>

<PRE>try: x.f(  )
except AttributeError:
    import sys, inspect
    sys.stderr.write('x is type %s(%r)\n'%(x,type(x)))
    sys.stderr.write("x's methods are: ")
    for n, v in inspect.getmembers(x, callable):
       sys.stderr.write('%s '%n)
    sys.stderr.write('\n')
    raise</PRE>

<P class="docText">This example uses <TT>sys.stderr</TT> (covered in <A class="docLink" HREF="0596001886_pythonian-chp-8.html#pythonian-CHP-8">Chapter 8</A>), since it's displaying
diagnostic information related to an error, not program results.
Function <TT>getmembers</TT> of module
<TT>inspect</TT> obtains the name of all methods available
on <TT><I>x</I></TT> in order to display them. Of course,
if you need this kind of diagnostic functionality often, you should
package it up into a separate function, such as:</P>

<PRE>import sys, inspect
def show_obj_methods(obj, name, show=sys.stderr.write):
    show('%s is type %s(%r)\n'%(name,obj,type(obj)))
    show("%s's methods are: "%name)
    for n, v in inspect.getmembers(obj, callable):
       show('%s '%n)
    show('\n')</PRE>

<P class="docText">And then the example becomes just:</P>

<PRE>try: x.f(  )
except AttributeError:
    show_obj_methods(x, 'x')
    raise</PRE>

<P class="docText">Good program structure and organization are just as necessary in code
intended for diagnostic and debugging purposes as they are in code
that implements your program's functionality. See
also <A class="docLink" HREF="0596001886_pythonian-chp-6-sect-6.html#pythonian-CHP-6-SECT-6.4">Section 6.6.4</A> in <A class="docLink" HREF="0596001886_pythonian-chp-6.html#pythonian-CHP-6">Chapter 6</A> for a good
technique to use when defining diagnostic and debugging
functions.<A NAME="pythonian-CHP-17-ITERM-7853"></A> <A NAME="pythonian-CHP-17-ITERM-7854"></A></P>


<A NAME="pythonian-CHP-17-SECT-2.2"></A>
<H4 class="docSection2Title">17.2.2 The traceback Module</H4>

<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7855"></A> <A NAME="pythonian-CHP-17-ITERM-7856"></A>
<A NAME="pythonian-CHP-17-ITERM-7857"></A>The <TT>traceback</TT>
module lets you extract, format, and output information about
tracebacks as normally produced by uncaught exceptions. By default,
module <TT>traceback</TT> reproduces the formatting Python
uses for tracebacks. However, module <TT>traceback</TT>
also lets you exert fine-grained control. The module supplies many
functions, but in typical use you will use only one of them.</P>

<A NAME="ch17-77034"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>print_exc</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>print_exc(<TT><I>limit</I></TT>=None, <TT><I>file</I></TT>=sys.stderr)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Call <TT>print_exc</TT> from an exception handler or a
function directly or indirectly called by an exception handler.
<TT>print_exc</TT> outputs to file-like object
<TT><I>file</I></TT> the traceback information that Python
outputs to <TT>stderr</TT> for uncaught exceptions. When
<TT><I>limit</I></TT> is not <TT>None</TT>,
<TT>print_exc</TT> outputs only
<TT><I>limit</I></TT> traceback nesting levels. For
example, when, in an exception handler, you want to cause a
diagnostic message just as if the exception propagated, but actually
stop the exception from propagating any further (so that your program
keeps running, and no further handlers are involved), call
<TT>traceback.print_exc( )</TT>.</P>


<A NAME="pythonian-CHP-17-SECT-2.3"></A>
<H4 class="docSection2Title">17.2.3 The pdb Module</H4>

<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7858"></A> <A NAME="pythonian-CHP-17-ITERM-7859"></A>The
<TT>pdb</TT> module exploits the Python
interpreter's debugging and tracing hooks to
implement a simple, command-line-oriented interactive debugger.
<TT>pdb</TT> lets you set breakpoints, single-step on
sources, examine stack frames, and so on.</P>

<P class="docText">To run some code under <TT>pdb</TT>'s
control, you import <TT>pdb</TT> and then call
<TT>pdb.run</TT>, passing as the single argument a string
of code to execute. To use <TT>pdb</TT> for post-mortem
debugging (meaning debugging of code that terminated by propagating
an exception at an interactive prompt), call <TT>pdb.pm(
)</TT> without arguments. When <TT>pdb</TT> starts, it
first reads text files named <I>.pdbrc</I> in your home
directory and in the current directory. Such files can contain any
<TT>pdb</TT> commands, but most often they use the
<TT>alias</TT> command in order to define useful synonyms
and abbreviations for other commands.</P>

<P class="docText">When <TT>pdb</TT> is in control, it prompts you with the
string '<TT>(Pdb)</TT> ', and you can
enter <TT>pdb</TT> commands. Command
<TT>help</TT> (which you can also enter in the abbreviated
form <TT>h</TT>) lists all available commands. Call
<TT>help</TT> with an argument (separated by a space) to
get help about any specific command. You can abbreviate most commands
to the first one or two letters, but you must always enter commands
in lowercase: <TT>pdb</TT>, like Python itself, is
case-sensitive. Entering an empty line repeats the previous command.
The most frequently used <TT>pdb</TT> commands are the
following.</P>

<A NAME="ch17-77036"></A><A NAME="pythonian-CHP-17-ITERM-7860"></A><A NAME="pythonian-CHP-17-ITERM-7861"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>!</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>! <TT><I>statement</I></TT></pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7860"></A> <A NAME="pythonian-CHP-17-ITERM-7861"></A>Executes
Python statement <TT><I>statement</I></TT> in the
currently debugged context.</P>

<A NAME="ch17-77037"></A><A NAME="pythonian-CHP-17-ITERM-7862"></A><A NAME="pythonian-CHP-17-ITERM-7863"></A><A NAME="pythonian-CHP-17-ITERM-7864"></A><A NAME="pythonian-CHP-17-ITERM-7865"></A><A NAME="pythonian-CHP-17-ITERM-7866"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>alias, unalias</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>alias [ <TT><I>name</I></TT> [ <TT><I>command</I></TT> ] ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT>alias</TT> without arguments lists currently defined
aliases. <TT>alias</TT> <TT><I>name</I></TT>
outputs the current definition of the alias
<TT><I>name</I></TT>. In the full form,
<TT><I>command</I></TT> is any <TT>pdb</TT>
command, with arguments, and may contain <TT>%1</TT>,
<TT>%2</TT>, and so on to refer to arguments passed to the
new alias <TT><I>name</I></TT> being defined, or
<TT>%*</TT> to refer to all such arguments together.
Command <TT>unalias</TT> <TT><I>name</I></TT>
removes an alias.</P>

<A NAME="ch17-77038"></A><A NAME="pythonian-CHP-17-ITERM-7867"></A><A NAME="pythonian-CHP-17-ITERM-7868"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>args, a</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>args</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Lists all actual arguments passed to the function you are currently
debugging.</P>

<A NAME="ch17-77039"></A><A NAME="pythonian-CHP-17-ITERM-7869"></A><A NAME="pythonian-CHP-17-ITERM-7870"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>break, b</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>break [ <TT><I>location</I></TT> [ ,<TT><I>condition</I></TT> ] ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT>break</TT> without arguments lists currently defined
breakpoints and the number of times each breakpoint has triggered.
With an argument, <TT>break</TT> sets a breakpoint at the
given <TT><I>location</I></TT>.
<TT><I>location</I></TT> can be a line number or a
function name, optionally preceded by
<TT><I>filename</I></TT>: to set a
breakpoint in a file that is not the current one or at the start of a
function whose name is ambiguous (i.e., a function that exists in
more than one file). When <TT><I>condition</I></TT> is
present, <TT><I>condition</I></TT> is an expression to
evaluate (in the debugged context) each time the given line or
function is about to execute; execution breaks only when the
expression returns a true value. When setting a new breakpoint,
<TT>break</TT> returns a breakpoint number, which you can
then use to refer to the new breakpoint in any other
breakpoint-related <TT>pdb</TT> command.</P>

<A NAME="ch17-77040"></A><A NAME="pythonian-CHP-17-ITERM-7871"></A><A NAME="pythonian-CHP-17-ITERM-7872"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>clear, cl</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>clear [ <TT><I>breakpoint-numbers</I></TT> ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Clears (removes) one or more breakpoints. <TT>clear</TT>
without arguments removes all breakpoints after asking for
confirmation. To deactivate a breakpoint without removing it, see
<TT>disable</TT>.</P>

<A NAME="ch17-77041"></A><A NAME="pythonian-CHP-17-ITERM-7873"></A><A NAME="pythonian-CHP-17-ITERM-7874"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>condition</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>condition <TT><I>breakpoint-number</I></TT> [ <TT><I>expression</I></TT> ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT>condition</TT> <TT><I>n</I></TT>
<TT><I>expression</I></TT> sets or changes the condition
on breakpoint <TT><I>n</I></TT>.
<TT>condition</TT> <TT><I>n</I></TT>, without
<TT><I>expression</I></TT>, makes breakpoint
<TT><I>n</I></TT> unconditional.</P>

<A NAME="ch17-77042"></A><A NAME="pythonian-CHP-17-ITERM-7875"></A><A NAME="pythonian-CHP-17-ITERM-7876"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>continue, c, cont</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>continue</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Continues execution of the code being debugged, up to a breakpoint if
any.</P>

<A NAME="ch17-77043"></A><A NAME="pythonian-CHP-17-ITERM-7877"></A><A NAME="pythonian-CHP-17-ITERM-7878"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>disable</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>disable [ <TT><I>breakpoint-numbers</I></TT> ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Disables one or more breakpoints. <TT>disable</TT> without
arguments disables all breakpoints (after asking for confirmation).
This differs from <TT>clear</TT> in that the debugger
remembers the breakpoint, and you can reactivate it via
<TT>enable</TT>.</P>

<A NAME="ch17-77044"></A><A NAME="pythonian-CHP-17-ITERM-7879"></A><A NAME="pythonian-CHP-17-ITERM-7880"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>down, d</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>down</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Moves one frame down in the stack (i.e., toward the most recent
function call). Normally, the current position in the stack is at the
bottom (i.e., at the function that was called most recently and is
now being debugged). Therefore, command <TT>down</TT>
can't go further down. However, command
<TT>down</TT> is useful if you have previously executed
command <TT>up</TT>, which moves the current position
upward.</P>

<A NAME="ch17-77045"></A><A NAME="pythonian-CHP-17-ITERM-7881"></A><A NAME="pythonian-CHP-17-ITERM-7882"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>enable</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>enable [ <TT><I>breakpoint-numbers</I></TT> ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Enables one or more breakpoints. <TT>enable</TT> without
arguments enables all breakpoints after asking for confirmation.</P>

<A NAME="ch17-77046"></A><A NAME="pythonian-CHP-17-ITERM-7883"></A><A NAME="pythonian-CHP-17-ITERM-7884"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>ignore</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>ignore <TT><I>breakpoint-number</I></TT> [ <TT><I>count</I></TT> ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Sets the breakpoint's ignore count (to
<TT>0</TT>, if <TT><I>count</I></TT> is
omitted). Triggering a breakpoint whose ignore count is greater than
<TT>0</TT> just decrements the count. Execution stops,
presenting you with an interactive <TT>pdb</TT> prompt,
only when you trigger a breakpoint whose ignore count is
<TT>0</TT>. For example, say that module
<I>fob.py</I> contains the following code:</P>
<PRE>def f(  ):
    for i in range(1000):
        g(i)

def g(i):
    pass</PRE><P class="docText">Now, consider the following interactive <TT>pdb</TT>
session:</P>
<PRE>&gt;&gt;&gt; import pdb
&gt;&gt;&gt; import fob
&gt;&gt;&gt; pdb.run('fob.f(  )')
<span class="docEmphBold">&gt; &lt;string&gt;(0)?(  )</span>
(Pdb) break fob.g
<span class="docEmphBold">Breakpoint 1 at C:\mydir\fob.py:6</span>
(Pdb) ignore 1 500
<span class="docEmphBold">Will ignore next 500 crossings of breakpoint 1</span>.
(Pdb) continue
<span class="docEmphBold">&gt; &lt;string&gt;(1)?(  )</span>
(Pdb) continue
<span class="docEmphBold">&gt; C:\mydir\fob.py(6)g(  )</span>
<span class="docEmphBold">-&gt; pass</span>
(Pdb) print i
<span class="docEmphBold">500</span></PRE><P class="docText">The <TT>ignore</TT> command, as <TT>pdb</TT>
shows in response to it, asks <TT>pdb</TT> to ignore the
next <TT>500</TT> hits on breakpoint <TT>1</TT>,
which we just set at <I>fob.g</I> in the previous
<TT>break</TT> statement. Therefore, when execution finally
stops, function <TT>g</TT> has already been called
<TT>500</TT> times, as we show by printing its argument
<TT>i</TT>, which indeed is now <TT>500</TT>.
Note that the ignore count of breakpoint <TT>1</TT> is now
<TT>0</TT>; if we give another <TT>continue</TT>
and <TT>print</TT> <TT>i</TT>,
<TT>i</TT> will then show as <TT>501</TT>. In
other words, once the ignore count is decremented back to
<TT>0</TT>, execution stops every time the breakpoint is
hit. If we want to skip some more hits, we need to give
<TT>pdb</TT> another <TT>ignore</TT> command, in
order to set the ignore count of breakpoint <TT>1</TT> at
some value greater than <TT>0</TT> yet again.</P>

<A NAME="ch17-77047"></A><A NAME="pythonian-CHP-17-ITERM-7885"></A><A NAME="pythonian-CHP-17-ITERM-7886"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>list, l</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>list [ <TT><I>first</I></TT> [ , <TT><I>last</I></TT> ] ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT>list</TT> without arguments lists <TT>11</TT>
lines centered on the current one, or the next <TT>11</TT>
lines if the previous command was also a <TT>list</TT>. By
giving arguments to the <TT>list</TT> command, you may
explicitly specify the first and last lines to list within the
current file. The <TT>list</TT> command deals with physical
lines, including comments and empty lines, not with logical lines.</P>

<A NAME="ch17-77048"></A><A NAME="pythonian-CHP-17-ITERM-7887"></A><A NAME="pythonian-CHP-17-ITERM-7888"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>next, n</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>next</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Executes the current line, without stepping into any function called
from the current line. However, hitting breakpoints in functions
called directly or indirectly from the current line does stop
execution.</P>

<A NAME="ch17-77049"></A><A NAME="pythonian-CHP-17-ITERM-7889"></A><A NAME="pythonian-CHP-17-ITERM-7890"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>p</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>p <TT><I>expression</I></TT></pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Evaluates <TT><I>expression</I></TT> in the current
context and displays the result.</P>

<A NAME="ch17-77050"></A><A NAME="pythonian-CHP-17-ITERM-7891"></A><A NAME="pythonian-CHP-17-ITERM-7892"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>quit, q</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>quit</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Immediately terminates both <TT>pdb</TT> and the program
being debugged.</P>

<A NAME="ch17-77051"></A><A NAME="pythonian-CHP-17-ITERM-7893"></A><A NAME="pythonian-CHP-17-ITERM-7894"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>return, r</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>return</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Executes the rest of the current function, stopping only at
breakpoints if any.</P>

<A NAME="ch17-77052"></A><A NAME="pythonian-CHP-17-ITERM-7895"></A><A NAME="pythonian-CHP-17-ITERM-7896"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>step, s</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>step</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Executes the current line, stepping into any function called from the
current line.</P>

<A NAME="ch17-77053"></A><A NAME="pythonian-CHP-17-ITERM-7897"></A><A NAME="pythonian-CHP-17-ITERM-7898"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>tbreak</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>tbreak [ <TT><I>location</I></TT> [ ,<TT><I>condition</I></TT> ] ]</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Like <TT>break</TT>, but the breakpoint is temporary (i.e.,
<TT>pdb</TT> automatically removes the breakpoint as soon
as the breakpoint is triggered).</P>

<A NAME="ch17-77054"></A><A NAME="pythonian-CHP-17-ITERM-7899"></A><A NAME="pythonian-CHP-17-ITERM-7900"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>up, u</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>up</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Moves one frame up in the stack (i.e., away from the most recent
function call and toward the calling function).</P>

<A NAME="ch17-77055"></A><A NAME="pythonian-CHP-17-ITERM-7901"></A><A NAME="pythonian-CHP-17-ITERM-7902"></A><A NAME="pythonian-CHP-17-ITERM-7903"></A><A NAME="pythonian-CHP-17-ITERM-7904"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>where, w</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>where</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Shows the stack of frames and indicates the current one (i.e., in
what frame's context command <TT>!</TT>
executes statements, command <TT>args</TT> shows arguments,
command <TT><I>p</I></TT> evaluates expressions,
etc.).<A NAME="pythonian-CHP-17-ITERM-7903"></A>
<A NAME="pythonian-CHP-17-ITERM-7904"></A></P>


<A NAME="pythonian-CHP-17-SECT-2.4"></A>
<H4 class="docSection2Title">17.2.4 Debugging in IDLE</H4>

<P class="docText"><A NAME="pythonian-CHP-17-ITERM-7905"></A> <A NAME="pythonian-CHP-17-ITERM-7906"></A>IDLE, the Interactive DeveLopment
Environment that comes with Python, offers debugging functionality
similar to that of <TT>pdb</TT>, although not quite as
powerful. Thanks to IDLE's GUI, however, you may
find the functionality easier to access. For example, instead of
having to ask for source lists and stack lists explicitly with such
<TT>pdb</TT> commands as <TT>list</TT> and
<TT>where</TT>, you just activate one or more of four
checkboxes in the Debug Control window to see source, stack, locals,
and globals always displayed in the same window at each step.</P>

<P class="docText">To start IDLE's interactive debugger, use menu Debug
<img src="FILES/U2192.GIF" border=0> Debugger in IDLE's *Python Shell*
window. IDLE opens the Debug Control window, outputs
<TT>[DEBUG</TT> <TT>ON]</TT> in the shell window,
and gives you another <TT>&gt;&gt;&gt;</TT> prompt in the
shell window. Keep using the shell window as you normally
would—any command you give at the shell
window's prompt now runs under the debugger. To
deactivate the debugger, use Debug <img src="FILES/U2192.GIF" border=0> Debugger again;
IDLE then toggles the debug state, closes the Debug Control window,
and outputs <TT>[DEBUG</TT> <TT>OFF]</TT> in the
shell window. To control the debugger when the debugger is active,
use the GUI controls in the Debug Control window. You can toggle the
debugger away only when it is not busy actively tracking code:
otherwise, IDLE disables the Quit button in the Debug Control window.</P>



<a href="0596001886_"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0596001886_pythonian-chp-17-sect-1.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596001886_pythonian-chp-17-sect-3.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
