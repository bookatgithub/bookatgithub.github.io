<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="18.3 The HTTP and FTP Protocols"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0596001886_pythonian-chp-18-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596001886_pythonian-chp-18-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonian-CHP-18-SECT-3"></A>
<H3 class="docSection1Title">18.3 The HTTP and FTP Protocols</H3>

<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8144"></A> <A NAME="pythonian-CHP-18-ITERM-8145"></A> <A NAME="pythonian-CHP-18-ITERM-8146"></A>Modules <TT>urllib</TT> and
<TT>urllib2</TT> are most often the handiest ways to access
servers for <I>http</I>, <I>https</I>,
and <I>ftp</I> protocols. The Python standard library
also supplies specific modules to use for these data access
protocols.<A NAME="pythonian-CHP-18-ITERM-8147"></A> <A NAME="pythonian-CHP-18-ITERM-8148"></A> <A NAME="pythonian-CHP-18-ITERM-8149"></A></P>

<A NAME="pythonian-CHP-18-SECT-3.1"></A>
<H4 class="docSection2Title">18.3.1 The httplib Module</H4>

<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8150"></A> <A NAME="pythonian-CHP-18-ITERM-8151"></A> <A NAME="pythonian-CHP-18-ITERM-8152"></A> <A NAME="pythonian-CHP-18-ITERM-8153"></A>
<A NAME="pythonian-CHP-18-ITERM-8154"></A>Module
<TT>httplib</TT> supplies a class
<TT>HTTPConnection</TT> to connect to an HTTP server.</P>

<A NAME="ch18-59-fm2xml"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>HTTPConnection</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>class HTTPConnection(<TT><I>host</I></TT>,<TT><I>port</I></TT>=80)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns an instance <TT><I>h</I></TT> of class
<TT>HTTPConnection</TT>, ready for connection (but not yet
connected) to the given <TT><I>host</I></TT> and
<TT><I>port</I></TT>.</P>

<P class="docText">Instance <TT><I>h</I></TT> supplies several methods, of
which the most frequently used are the following.</P>

<A NAME="ch18-60-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8155"></A><A NAME="pythonian-CHP-18-ITERM-8156"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>close</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>h</I></TT>.close(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Closes the connection to the HTTP server.</P>

<A NAME="ch18-61-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8157"></A><A NAME="pythonian-CHP-18-ITERM-8158"></A><A NAME="pythonian-CHP-18-ITERM-8159"></A><A NAME="pythonian-CHP-18-ITERM-8160"></A><A NAME="pythonian-CHP-18-ITERM-8161"></A><A NAME="pythonian-CHP-18-ITERM-8162"></A><A NAME="pythonian-CHP-18-ITERM-8163"></A><A NAME="pythonian-CHP-18-ITERM-8164"></A><A NAME="pythonian-CHP-18-ITERM-8165"></A><A NAME="pythonian-CHP-18-ITERM-8166"></A><A NAME="pythonian-CHP-18-ITERM-8167"></A><A NAME="pythonian-CHP-18-ITERM-8168"></A><A NAME="pythonian-CHP-18-ITERM-8169"></A><A NAME="pythonian-CHP-18-ITERM-8170"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getresponse</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>h</I></TT>.getresponse(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns an instance <TT><I>r</I></TT> of class
<TT>HTTPResponse</TT>, which represents the response
received from the HTTP server. Call after method
<TT>request</TT> has returned. Instance
<TT><I>r</I></TT> supplies the following attributes and
methods:</P><A NAME="pythonian-CHP-18-ITERM-8159"></A><A NAME="pythonian-CHP-18-ITERM-8160"></A><A NAME="pythonian-CHP-18-ITERM-8161"></A><A NAME="pythonian-CHP-18-ITERM-8162"></A><A NAME="pythonian-CHP-18-ITERM-8163"></A><A NAME="pythonian-CHP-18-ITERM-8164"></A><A NAME="pythonian-CHP-18-ITERM-8165"></A><A NAME="pythonian-CHP-18-ITERM-8166"></A><A NAME="pythonian-CHP-18-ITERM-8167"></A><A NAME="pythonian-CHP-18-ITERM-8168"></A><A NAME="pythonian-CHP-18-ITERM-8169"></A><A NAME="pythonian-CHP-18-ITERM-8170"></A><DL class="docList">
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.getheader(</span></span> <TT><I>name</I></TT>,<TT><I>default</I></TT><span class="docPubcolor"><span class="docMonofont">=None)</span></span> </span></DT>
<DD>
<P class="docList"><A NAME="pythonian-CHP-18-ITERM-8159"></A> <A NAME="pythonian-CHP-18-ITERM-8160"></A>Returns the contents of header
<TT><I>name</I></TT>, or
<TT><I>default</I></TT> if no such header exists.</P>
</DD>
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.msg</span></span> </span></DT>
<DD>
<P class="docList"><A NAME="pythonian-CHP-18-ITERM-8161"></A> <A NAME="pythonian-CHP-18-ITERM-8162"></A>An
instance of class <TT>Message</TT> of module
<TT>mimetools</TT>, covered in <A class="docLink" HREF="0596001886_pythonian-chp-21.html#pythonian-CHP-21">Chapter 21</A>. You can use
<TT><I>r</I></TT><TT>.msg</TT> to access the
response's headers and body.</P>
</DD>
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.read(  )</span></span> </span></DT>
<DD>
<P class="docList"><A NAME="pythonian-CHP-18-ITERM-8163"></A> <A NAME="pythonian-CHP-18-ITERM-8164"></A>Returns
a string that is the body of the server's response.</P>
</DD>
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.reason</span></span> </span></DT>
<DD>
<P class="docList"><A NAME="pythonian-CHP-18-ITERM-8165"></A> <A NAME="pythonian-CHP-18-ITERM-8166"></A>The
string that the server gave as the reason for errors or anomalies. If
the request was successful,
<TT><I>r</I></TT><TT>.reason</TT> could, for
example, be '<TT>OK</TT>'.</P>
</DD>
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.status</span></span> </span></DT>
<DD>
<P class="docList"><A NAME="pythonian-CHP-18-ITERM-8167"></A> <A NAME="pythonian-CHP-18-ITERM-8168"></A>An
integer, the status code that the server returned. If the request was
successful, <TT><I>r</I></TT><TT>.status</TT>
should be between <TT>200</TT> and <TT>299</TT>
according to the HTTP standards. Values between
<TT>400</TT> and <TT>599</TT> are typical error
codes, again according to HTTP standards. For example,
<TT>404</TT> is the error code that a server sends when the
page you request cannot be found.</P>
</DD>
<DT><span class="docPubcolor"><TT><I>r</I></TT><span class="docPubcolor"><span class="docMonofont">.version</span></span> </span></DT>
<DD>
<P class="docList"><TT>10</TT><A NAME="pythonian-CHP-18-ITERM-8169"></A> <A NAME="pythonian-CHP-18-ITERM-8170"></A> if
the server supports only HTTP 1.0, <TT>11</TT> if the
server supports HTTP 1.1.</P>
</DD>
</DL>

<A NAME="ch18-62-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8171"></A><A NAME="pythonian-CHP-18-ITERM-8172"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>request</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>h</I></TT>.request(<TT><I>command</I></TT>,<TT><I>URL</I></TT>,<TT><I>data</I></TT>=None,<TT><I>headers</I></TT>={})</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8171"></A> <A NAME="pythonian-CHP-18-ITERM-8172"></A>Sends
a request to the HTTP server. <TT><I>command</I></TT> is
an HTTP command string, such as '<TT>GET</TT>' or
'<TT>POST</TT>'. <TT><I>URL</I></TT> is an HTTP
selector (i.e., a URL string without the scheme and location
components—just the path component, possibly followed by query
and/or fragment components). <TT><I>data</I></TT>, if not
<TT>None</TT>, is a string sent as the body of the request,
normally meaningful only for such commands as
'<TT>POST</TT>' and '<TT>PUT</TT>'.
<TT>request</TT> computes and sends the Content-Length
header to describe the length of <TT><I>data</I></TT>. To
send other headers, pass them as part of dictionary argument
<TT><I>headers</I></TT>, with the header name as the key
and the header contents as the corresponding value.</P>

<P class="docText">Module <TT>httplib</TT> also supplies class
<TT>HTTPSConnection</TT>, used in exactly the same way as
class <TT>HTTPConnection</TT> but supporting connections
that use protocol <I>https</I> rather than protocol
<I>http</I>.<A NAME="pythonian-CHP-18-ITERM-8173"></A></P>


<A NAME="pythonian-CHP-18-SECT-3.2"></A>
<H4 class="docSection2Title">18.3.2 The ftplib Module</H4>

<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8174"></A> <A NAME="pythonian-CHP-18-ITERM-8175"></A> <A NAME="pythonian-CHP-18-ITERM-8176"></A>
<A NAME="pythonian-CHP-18-ITERM-8177"></A>
<A NAME="pythonian-CHP-18-ITERM-8178"></A>The
<TT>ftplib</TT> module supplies a class
<TT>FTP</TT> to connect to an FTP server.</P>

<A NAME="ch18-64-fm2xml"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>FTP</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>class FTP([<TT><I>host</I></TT>[,<TT><I>user</I></TT>,<TT><I>passwd</I></TT>='']])</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns an instance <TT><I>f</I></TT> of class
<TT>FTP</TT>. When <TT><I>host</I></TT> is
given, implicitly calls
<TT><I>f</I></TT><TT>.connect(</TT><TT><I>host</I></TT><TT>)</TT>.
When <TT><I>user</I></TT> (and optionally
<TT><I>passwd</I></TT>) is also given, implicitly calls
<TT><I>f</I></TT><TT>.login(</TT><TT><I>user</I></TT>,<TT><I>passwd</I></TT><TT>)</TT>
afterward.</P>

<P class="docText">Instance <TT><I>f</I></TT> supplies many methods, of which
the most frequently used are the following.</P>

<A NAME="ch18-65-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8179"></A><A NAME="pythonian-CHP-18-ITERM-8180"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>connect</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.connect(<TT><I>host</I></TT>,<TT><I>port</I></TT>=21)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8179"></A> <A NAME="pythonian-CHP-18-ITERM-8180"></A>Connects to an FTP server on the given
<TT><I>host</I></TT> and <TT><I>port</I></TT>.
Call once per instance <TT><I>f</I></TT>, as
<TT><I>f</I></TT>'s first method call.
Don't call if <TT><I>host</I></TT> was
given on creation.</P>

<A NAME="ch18-66-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8181"></A><A NAME="pythonian-CHP-18-ITERM-8182"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>cwd</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.cwd(<TT><I>pathname</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Sets the current directory on the FTP server to
<TT><I>pathname</I></TT>.</P>

<A NAME="ch18-67-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8183"></A><A NAME="pythonian-CHP-18-ITERM-8184"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>delete</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.delete(<TT><I>filename</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Tells the FTP server to delete a file, and returns a string, the
server's response.</P>

<A NAME="ch18-68-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8185"></A><A NAME="pythonian-CHP-18-ITERM-8186"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>login</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.login(<TT><I>user</I></TT>='anonymous',<TT><I>passwd</I></TT>='')</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Logs in to the FTP server. When <TT><I>user</I></TT> is
'<TT>anonymous</TT>' and <TT><I>passwd</I></TT>
is '', <TT>login</TT> determines the
real user and host and sends
<TT><I>user</I></TT><TT>@</TT><TT><I>host</I></TT>
as the password, as normal anonymous FTP conventions require. Call
once per instance of <TT><I>f</I></TT>, as the first
method call on <TT><I>f</I></TT> after connecting.</P>

<A NAME="ch18-69-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8187"></A><A NAME="pythonian-CHP-18-ITERM-8188"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>mkd</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.mkd(<TT><I>pathname</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Makes a new directory, named <TT><I>pathname</I></TT>, on
the FTP server.</P>

<A NAME="ch18-70-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8189"></A><A NAME="pythonian-CHP-18-ITERM-8190"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>pwd</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.pwd(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the current directory on the FTP server.</P>

<A NAME="ch18-71-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8191"></A><A NAME="pythonian-CHP-18-ITERM-8192"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>quit</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.quit(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8191"></A> <A NAME="pythonian-CHP-18-ITERM-8192"></A>Closes
the connection to the FTP server. Call as the last method call on
<TT><I>f</I></TT>.</P>

<A NAME="ch18-72-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8193"></A><A NAME="pythonian-CHP-18-ITERM-8194"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>rename</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.rename(<TT><I>oldname</I></TT>,<TT><I>newname</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Tells the FTP server to rename a file from
<TT><I>oldname</I></TT> to
<TT><I>newname</I></TT>.</P>

<A NAME="ch18-73-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8195"></A><A NAME="pythonian-CHP-18-ITERM-8196"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>retrbinary</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.retrbinary(<TT><I>command</I></TT>,<TT><I>callback</I></TT>,<TT><I>blocksize</I></TT>=8192,<TT><I>rest</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Retrieves data in binary mode. <TT><I>command</I></TT> is
a string with an appropriate FTP command, typically
'<TT>RETR</TT>
<TT><I>filename</I></TT>'.
<TT><I>callback</I></TT> is a callable that
<TT>retrbinary</TT> calls for each block of data returned,
passing the block of data, a string, as the only argument.
<TT><I>blocksize</I></TT> is the maximum size of each
block of data. When <TT><I>rest</I></TT> is not
<TT>None</TT>, it's the offset in bytes
from the start of the file at which you want to start the retrieval,
if the FTP server supports the '<TT>REST</TT>' command.
When <TT><I>rest</I></TT> is not <TT>None</TT>
and the FTP server does not support the '<TT>REST</TT>'
command, <TT>retrbinary</TT> raises an exception.</P>

<A NAME="ch18-74-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8197"></A><A NAME="pythonian-CHP-18-ITERM-8198"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>retrlines</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.retrlines(<TT><I>command</I></TT>,<TT><I>callback</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-18-ITERM-8197"></A> <A NAME="pythonian-CHP-18-ITERM-8198"></A>Retrieves data in text mode.
<TT><I>command</I></TT> is a string with an appropriate
FTP command, typically '<TT>RETR</TT>
<TT><I>filename</I></TT>' or
'<TT>LIST</TT>'. <TT><I>callback</I></TT> is a
callable that <TT>retrlines</TT> calls for each line of
text returned, passing the line of text, a string, as the only
argument (without the end-of-line marker). When
<TT><I>callback</I></TT> is <TT>None</TT>,
<TT>retrlines</TT> writes the lines of text to
<TT>sys.stdout</TT>.</P>

<A NAME="ch18-75-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8199"></A><A NAME="pythonian-CHP-18-ITERM-8200"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>rmd</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.rmd(<TT><I>pathname</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Removes directory <TT><I>pathname</I></TT> on the FTP
server.</P>

<A NAME="ch18-76-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8201"></A><A NAME="pythonian-CHP-18-ITERM-8202"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>sendcmd</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.sendcmd(<TT><I>command</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Sends string <TT><I>command</I></TT> as a command to the
server and returns the server's response string.
Suitable only for commands that don't open data
connections.</P>

<A NAME="ch18-77-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8203"></A><A NAME="pythonian-CHP-18-ITERM-8204"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>set_pasv</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.set_pasv(<TT><I>pasv</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Sets passive mode on if <TT><I>pasv</I></TT> is true, off
if false. Passive mode defaults to on.</P>

<A NAME="ch18-78-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8205"></A><A NAME="pythonian-CHP-18-ITERM-8206"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>size</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.size(<TT><I>filename</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the size in bytes of the named file on the FTP server, or
<TT>None</TT> if unable to determine the
file's size.</P>

<A NAME="ch18-79-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8207"></A><A NAME="pythonian-CHP-18-ITERM-8208"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>storbinary</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.storbinary(<TT><I>command</I></TT>,<TT><I>file</I></TT>,<TT><I>blocksize</I></TT>=8192)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Stores data in binary mode. <TT><I>command</I></TT> is a
string with an appropriate FTP command, typically
'<TT>STOR</TT>
<TT><I>filename</I></TT>'.
<TT><I>file</I></TT> is a file open in binary mode, which
<TT>storbinary</TT> reads, repeatedly calling
<TT><I>file</I></TT><TT>.read(</TT><TT><I>blocksize</I></TT><TT>)</TT>,
to obtain the data to transfer to the FTP server.</P>

<A NAME="ch18-80-fm2xml"></A><A NAME="pythonian-CHP-18-ITERM-8209"></A><A NAME="pythonian-CHP-18-ITERM-8210"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>storlines</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>f</I></TT>.storlines(<TT><I>command</I></TT>,<TT><I>file</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Stores data in text mode. <TT><I>command</I></TT> is a
string with an appropriate FTP command, typically
'<TT>STOR</TT>
<TT><I>filename</I></TT>'.
<TT><I>file</I></TT> is a file open in text mode, which
<TT>storlines</TT> reads, repeatedly calling
<TT><I>file</I></TT><TT>.readline( )</TT>, to
obtain the data to transfer to the FTP server.</P>

<P class="docText">Here is a typical, simple example of <TT>ftplib</TT> use in
an interactive interpreter session:</P>

<PRE>&gt;&gt;&gt; import ftplib
&gt;&gt;&gt; f = ftplib.FTP('ftp.python.org')
&gt;&gt;&gt; f.login(  )
<B>'230 Anonymous access granted, restrictions apply.'</B>
&gt;&gt;&gt; f.retrlines('LIST')
<B>drwxrwxr-x   4 webmaster webmaster      512 Oct 12  2001 pub</B>
<B>'226 Transfer complete.'</B>
&gt;&gt;&gt; f.cwd('pub')
<B>'250 CWD command successful.'</B>
&gt;&gt;&gt; f.retrlines('LIST')
<B>drwxrwsr-x   2 barry    webmaster      512 Oct 12  2001 jython</B>
<B>lrwx------   1 root     ftp            25 Aug  3  2001 python -&gt; www.python.org/ftp/python</B>
<B>drwxrwxr-x  43 webmaster webmaster     2560 Sep  3 17:22 www.python.org</B>
<B>'226 Transfer complete.'</B>
&gt;&gt;&gt; f.cwd('python')
<B>'250 CWD command successful.'</B>
&gt;&gt;&gt; f.retrlines('LIST')
<B>drwxrwxr-x   2 webmaster webmaster      512 Aug 23  2001 2.0</B>
<B>  [ many result lines snipped ]</B>
<B>drwxrwxr-x   2 webmaster webmaster      512 Aug  2  2001 wpy</B>
<B>'226 Transfer complete.'</B>
&gt;&gt;&gt; f.retrlines('RETR README')
<B>Python Distribution</B>
<B>===================</B>

<B>Most subdirectories have a README or INDEX files explaining the</B>
<B>contents.</B>
<B>  [ many result lines snipped ]</B>
<B>gzipped version of this file, and 'get misc.tar.gz' will fetch a</B>
<B>gzipped tar archive of the misc subdir.</B>
<B>'226 Transfer complete.'</B></PRE>

<P class="docText">In this case, the following far simpler code is equivalent:</P>

<A NAME="pythonian-CHP-18-ITERM-8211"></A><A NAME="pythonian-CHP-18-ITERM-8212"></A><A NAME="pythonian-CHP-18-ITERM-8213"></A><PRE>print urllib.urlopen('ftp://ftp.python.org/pub/python/README').read(  )</PRE>

<P class="docText">However, <TT>ftplib</TT> affords much more detailed control
of FTP operations than <TT>urllib</TT> does. Thus, in some
cases, <TT>ftplib</TT> may be useful for your
programs.<A NAME="pythonian-CHP-18-ITERM-8214"></A> <A NAME="pythonian-CHP-18-ITERM-8215"></A> <A NAME="pythonian-CHP-18-ITERM-8216"></A></P>



<ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0596001886_pythonian-chp-18-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596001886_pythonian-chp-18-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
