<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="2.1 Installing Python from Source Code"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0596001886_pythonian-chp-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596001886_pythonian-chp-2-sect-2.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonian-CHP-2-SECT-1"></A>
<H3 class="docSection1Title">2.1 Installing Python from Source Code</H3>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3542"></A> <A NAME="pythonian-CHP-2-ITERM-3543"></A>
<A NAME="pythonian-CHP-2-ITERM-3544"></A>To
install Python from source code, you need a platform with an
ISO-compliant C compiler and ancillary tools such as
<I>make</I>. On Windows, the normal way to build Python
is with the Microsoft product Visual C++.<A NAME="pythonian-CHP-2-ITERM-3545"></A>
<A NAME="pythonian-CHP-2-ITERM-3546"></A> <A NAME="pythonian-CHP-2-ITERM-3547"></A></P>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3548"></A> <A NAME="pythonian-CHP-2-ITERM-3549"></A>To download
Python source code, visit <A class="docLink" target="_blank" HREF="http://www.python.org/default.htm">http://www.python.org</A> and follow the link
labeled Download. The latest version at the time of this writing is:</P>
<DL class="docList">
<DD><A class="docLink" target="_blank" HREF="http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz">http://www.python.org/ftp/python/2.2.2/Python-2.2.2.tgz</A></DD>
</DL>

<P class="docText">The <I>.tgz</I> file extension is equivalent to
<I>.tar.gz</I> (i.e., a <I>tar</I>
archive of files, compressed by the powerful and popular
<I>gzip</I> compressor).<A NAME="pythonian-CHP-2-ITERM-3550"></A> <A NAME="pythonian-CHP-2-ITERM-3551"></A></P>

<A NAME="pythonian-CHP-2-SECT-1.1"></A>
<H4 class="docSection2Title">2.1.1 Windows</H4>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3552"></A> <A NAME="pythonian-CHP-2-ITERM-3553"></A>
<A NAME="pythonian-CHP-2-ITERM-3554"></A>On Windows,
installing Python from source code can be a chore unless you are
already familiar with Microsoft Visual C++ and used to working at the
Windows command line (i.e., in the text-oriented windows known as
MS-DOS Prompt or Command Prompt, depending on your version of
Windows).</P>

<P class="docText">If the following instructions give you trouble, I suggest you skip
ahead to the material on installing Python from binaries later in
this chapter. It may be a good idea, on Windows, to do an
installation from binaries anyway, even if you also install from
source code. This way, if you notice anything strange while using the
version you installed from source code, you can double-check with the
installation from binaries. If the strangeness goes away, it must
have been due to some quirk in your installation from source code,
and then you know you must double-check the latter.</P>

<P class="docText">In the following sections, for clarity, I assume you have made a new
directory named <I>C:\Py</I> and downloaded
<I>Python-2.2.2.tgz</I> there. Of course, you can
choose to name and place the directory as it best suits you.</P>

<A NAME="pythonian-CHP-2-SECT-1.1.1"></A>
<H5 class="docSection3Title">2.1.1.1 Uncompressing and unpacking the Python source code</H5>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3555"></A>
<A NAME="pythonian-CHP-2-ITERM-3556"></A>
<A NAME="pythonian-CHP-2-ITERM-3557"></A>
<A NAME="pythonian-CHP-2-ITERM-3558"></A>
<A NAME="pythonian-CHP-2-ITERM-3559"></A>You can uncompress and unpack a
<I>.tgz</I> file with programs <I>tar</I>
and <I>gunzip</I>. If you do not have
<I>tar</I> and <I>gunzip</I>, you can
download the collection of utilities ftp://ftp.objectcentral.com/winutils.zip into
<I>C:\Py</I>. If you do not have other ways to unpack a
ZIP file, download ftp://ftp.th-soft.com/UNZIP.EXE into
<I>C:\Py</I>. Open an MS-DOS Prompt window and give the
following commands:</P>

<PRE>C:\&gt; My Documents&gt;<B>cd</B> <B>\Py</B>
C:\Py&gt; <B>unzip</B> <B>winutils</B>
    [unzip lists the files it is unpacking - omitted here]
C:\Py&gt; <B>gunzip</B> <B>Python-2.2.2.tgz</B>
C:\Py&gt; <B>tar</B> <B>xvf</B> <B>Python-2.2.2.tar</B>
    [tar lists the files it is unpacking - omitted here]
C:\Py&gt;</PRE>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3560"></A>
<A NAME="pythonian-CHP-2-ITERM-3561"></A> <A NAME="pythonian-CHP-2-ITERM-3562"></A>Commercial programs
WinZip (<A class="docLink" target="_blank" HREF="http://www.winzip.com/default.htm">http://www.winzip.com</A>)
and PowerArchiver (<A class="docLink" target="_blank" HREF="http://www.powerarchiver.com/default.htm">http://www.powerarchiver.com</A>) can also
uncompress and unpack <I>.tgz</I> archives. Whether via
<I>gunzip</I> and <I>tar</I>, a
commercial program, or some other program, you now have a directory
<I>C:\Py\Python-2.2.2</I>, the root of a tree that
contains the entire standard Python distribution in source form.</P>



<A NAME="pythonian-CHP-2-SECT-1.1.2"></A>
<H5 class="docSection3Title">2.1.1.2 Building the Python source code with Microsoft Visual C++</H5>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3563"></A>Open the workspace file
<I>C:\Py\Python-2.2.2\PCbuild\pcbuild.dsw</I> with
Microsoft Visual C++, for example by starting Windows Explorer, going
to directory <I>C:\Py\Python-2.2.2\PCbuild</I>, and
double-clicking on file <I>pcbuild.dsw</I>.</P>

<P class="docText">Choose Build <img src="FILES/U2192.GIF" border=0> Set Active Configuration
<img src="FILES/U2192.GIF" border=0> python Win32 Release, then Build
<img src="FILES/U2192.GIF" border=0> Build python.exe. Visual C++ builds projects
<I>pythoncore</I> and <I>python</I>,
making files <I>python22.dll</I> and
<I>python.exe</I> in
<I>C:\Py\Python-2.2.2\PCbuild</I>. You can also build
other subprojects (for example with Build <img src="FILES/U2192.GIF" border=0> Batch
Build...). However, to build subprojects
<I>_tkinter</I>, <I>bsddb</I>,
<I>pyexpat</I>, and <I>zlib</I>, you
first need to download other open source packages and install them in
the <I>C:\Py</I> directory. Follow the instructions in
<I>C:\Py\Python-2.2.2\PCbuild\readme.txt</I> if you
want to build every Python package that is in the distribution.</P>



<A NAME="pythonian-CHP-2-SECT-1.1.3"></A>
<H5 class="docSection3Title">2.1.1.3 Building Python for debugging</H5>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3564"></A> <A NAME="pythonian-CHP-2-ITERM-3565"></A>
<A NAME="pythonian-CHP-2-ITERM-3566"></A>You can also, optionally, build the
debug versions, as well as the release versions, of the Python
packages.</P>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3567"></A>
<A NAME="pythonian-CHP-2-ITERM-3568"></A> <A NAME="pythonian-CHP-2-ITERM-3569"></A>With Visual C++, an
executable (<I>.exe</I>) built for release can
interoperate fully only with dynamic load libraries (DLLs) also built
for release, while an executable built for debugging interoperates
fully only with DLLs also built for debugging. Trying to mix and
match can cause program crashes and assorted strangeness. To help you
avoid accidentally mixing parts built for release with others built
for debugging, the Python workspace appends a <I>_d</I>
to the name of debugging executables and DLLs. For example, when you
build for debugging, <I>pythoncore</I> produces
<I>python22_d.dll</I> and <I>python</I>
produces
<I>python22_d.exe</I>.<A NAME="pythonian-CHP-2-ITERM-3570"></A></P>

<P class="docText">What makes the debugging and release Visual C++ builds incompatible
is the choice of runtime library. Executables and DLLs can fully
interoperate only by using the same runtime library, and the runtime
library must in turn be a DLL. You can tweak Project
<img src="FILES/U2192.GIF" border=0> Settings <img src="FILES/U2192.GIF" border=0> C/C++
<img src="FILES/U2192.GIF" border=0> Code Generation <img src="FILES/U2192.GIF" border=0> Use run-time
library, setting all projects to use Multithreaded DLL
(<I>MSVCRT.DLL</I>) (also remove the
<TT>_DEBUG</TT> definition in C/C++ <img src="FILES/U2192.GIF" border=0> Code
Generation <img src="FILES/U2192.GIF" border=0> Preprocessor). I recommend you do this
only if you are experienced with Microsoft Visual C++ and have
special, advanced requirements. Otherwise, resigning yourself to
keeping two separate and distinct release and debugging
"worlds" is the simplest approach.</P>



<A NAME="pythonian-CHP-2-SECT-1.1.4"></A>
<H5 class="docSection3Title">2.1.1.4 Installing after the build</H5>

<P class="docText"><I>python22.dll</I> (or
<I>python22_d.dll</I>, if you want to run a debug-mode
<I>python_d.exe</I>) must be in a directory from which
Windows loads DLLs when needed. Suitable directories depend on your
version of Windows: for example,
<I>c:\windows\system</I> is one possibility. If you
don't copy <I>python22.dll</I> to a
suitable directory, you can run Python only when the current
directory is the directory in which <I>python22.dll</I>
resides.</P>

<P class="docText">Similarly, <I>python.exe</I> must be in a directory in
which Windows looks for executables, normally a directory listed in
the Windows environment variable named <TT>PATH</TT>. How
to set <TT>PATH</TT> and other environment variables
depends on your version of Windows, as mentioned in <A class="docLink" HREF="0596001886_pythonian-chp-3.html#pythonian-CHP-3">Chapter 3</A>. Python can locate other files, such as the
standard library modules, according to various strategies.
<I>C:\Py\Python-2.2.2\PC\readme.txt</I> documents the
various possibilities.</P>



<A NAME="pythonian-CHP-2-SECT-1.1.5"></A>
<H5 class="docSection3Title">2.1.1.5 Building Python for Cygwin</H5>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3571"></A>Python 2.2 is also available as a part of
the free Cygwin Unix-like environment for Windows—see
<A class="docLink" target="_blank" HREF="http://cygwin.com/default.htm">http://cygwin.com/</A> for more
information. Cygwin runs on top of Windows. However, Cygwin is quite
similar to Linux and other free Unix-like environments in many
respects. In particular, Cygwin uses the popular, free
<I>gcc</I> C/C++ compiler and associated tools, such as
<I>make</I>. Building Python from source code on Cygwin
is therefore similar to building from source code on Unix-like
environments, even though Cygwin runs on Windows.<A NAME="pythonian-CHP-2-ITERM-3572"></A> <A NAME="pythonian-CHP-2-ITERM-3573"></A> <A NAME="pythonian-CHP-2-ITERM-3574"></A></P>



<A NAME="pythonian-CHP-2-SECT-1.2"></A>
<H4 class="docSection2Title">2.1.2 Unix-like Platforms</H4>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3575"></A>
<A NAME="pythonian-CHP-2-ITERM-3576"></A>
<A NAME="pythonian-CHP-2-ITERM-3577"></A>On Unix-like platforms, installing Python
from source code is not a particularly complicated procedure. In the
following sections, for clarity, I assume you have created a new
directory named <I>~/Py</I> and downloaded
<I>Python-2.2.2.tgz</I> there. Of course, you can
choose to name and place the directory as it best suits you.</P>

<A NAME="pythonian-CHP-2-SECT-1.2.1"></A>
<H5 class="docSection3Title">2.1.2.1 Uncompressing and unpacking the Python source code</H5>

<P class="docText">You can uncompress and unpack a <I>.tgz</I> file with
programs <I>tar</I> and <I>gunzip</I>. If
you have the popular GNU version of <I>tar</I>, you can
just type the following at a shell prompt:</P>

<PRE>$ <B>cd</B> <B>~/Py</B>
$ <B>tar</B> <B>xzf</B> <B>Python-2.2.2.tgz</B></PRE>

<P class="docText">You now have a directory <I>~/Py/Python-2.2.2</I>, the
root of a tree that contains the entire standard Python distribution
in source form.</P>



<A NAME="pythonian-CHP-2-SECT-1.2.2"></A>
<H5 class="docSection3Title">2.1.2.2 Configuring, building, and testing</H5>

<P class="docText">You will find detailed notes in file
<I>~/Py/Python-2.2.2/README</I> under the heading
"Build instructions," and I
strongly suggest reading those notes. In the simplest case, however,
all you need to get started may be to give the following commands at
a shell prompt:</P>

<PRE>$ <B>cd</B> <B>~/Py/Python-2.2.2</B>
$ <B>./configure</B>
    [configure writes much information - snipped here]
$ <B>make</B>
    [make takes quite a while, and emits much information]</PRE>

<P class="docText">If you run <I>make</I> without running
<I>./configure</I> first, <I>make</I>
will implicitly run <I>./configure</I> for you. When
<I>make</I> finishes, you should test that the Python
you have just built works as expected, as follows:</P>

<PRE>$ <B>make</B> <B>test</B>
    [takes quite a while, emits much information]</PRE>

<P class="docText">Most likely, <I>make</I> <I>test</I> will
confirm that your build is working, but also inform you that some
tests have been skipped because optional modules were missing.</P>

<P class="docText">Some of the modules are platform-specific (e.g., some only work on
machines running SGI's Irix operating system), so
you should not worry about them if your machine just
doesn't support them. However, other modules get
skipped during the build procedure because they depend on other open
source packages that may not be installed on your machine. For
example, module <TT>_tkinter</TT>, needed to run the
Tkinter GUI package covered in <A class="docLink" HREF="0596001886_pythonian-chp-16.html#pythonian-CHP-16">Chapter 16</A>, can be
built only if <I>./configure</I> is able to find an
installation of Tcl/Tk 8.0 or later on your machine. See
<I>~/Py/Python-2.2.2/README</I> for more details, and
also for specific caveats regarding many different Unix and Unix-like
platforms.</P>

<P class="docText">Building from source code lets you tweak your configuration in
several useful ways. For example, you can build Python in a special
way that will help you track down memory leaks if you develop C-coded
Python extensions, covered in <A class="docLink" HREF="0596001886_pythonian-chp-24.html#pythonian-CHP-24">Chapter 24</A>. Again,
<I>~/Py/Python-2.2.2/README</I> is a good source of
information about the configuration options you can use.</P>



<A NAME="pythonian-CHP-2-SECT-1.2.3"></A>
<H5 class="docSection3Title">2.1.2.3 Installing after the build</H5>

<P class="docText">By default, <I>./configure</I> prepares Python for
installation in <I>/usr/local/bin</I> and
<I>/usr/local/lib</I>. You can change these settings by
running <I>./configure</I> with option
<TT>--prefix</TT> before running <I>make</I>.
For example, if you want a private installation of Python in
subdirectory <I>py22</I> of your home directory, run:</P>

<PRE>$ <B>cd</B> <B>~/Py/Python-2.2.2</B>
$ <B>./configure</B> <B>--prefix=~/py22</B></PRE>

<P class="docText">and continue with <I>make</I> as in the previous
section. Once you're done building and testing
Python, to perform the actual installation of all files, run:</P>

<PRE>$ <B>make</B> <B>install</B></PRE>

<P class="docText">The user running <I>make</I>
<I>install</I> must have write permissions on the
target directories. Depending on your choice of target directories
and the permissions set on those directories, you may therefore need
to <I>su</I> to <I>root</I>,
<I>bin</I>, or some other special user when you run
<I>make</I>
<I>install</I>.<A NAME="pythonian-CHP-2-ITERM-3578"></A>
<A NAME="pythonian-CHP-2-ITERM-3579"></A> <A NAME="pythonian-CHP-2-ITERM-3580"></A>
<A NAME="pythonian-CHP-2-ITERM-3581"></A></P>



<A NAME="pythonian-CHP-2-SECT-1.3"></A>
<H4 class="docSection2Title">2.1.3 Apple Macintosh</H4>

<P class="docText"><A NAME="pythonian-CHP-2-ITERM-3582"></A>
<A NAME="pythonian-CHP-2-ITERM-3583"></A>
<A NAME="pythonian-CHP-2-ITERM-3584"></A>Jack Jansen's page on
MacPython, <A class="docLink" target="_blank" HREF="http://www.cwi.nl/~jack/macpython.html">http://www.cwi.nl/~jack/macpython.html</A>, is an
indispensable resource for any Macintosh Python user. The page
includes pointers to specially packaged Python 2.2.2 source code for
Macintosh (requiring the CodeWarrior Pro 7 C compiler), prebuilt
binaries for both Mac OS X and older Mac OS 9, and a wealth of other
Macintosh-specific resources.<A NAME="pythonian-CHP-2-ITERM-3585"></A> <A NAME="pythonian-CHP-2-ITERM-3586"></A></P>



<ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0596001886_pythonian-chp-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596001886_pythonian-chp-2-sect-2.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
