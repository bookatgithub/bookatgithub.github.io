<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="23.3 Parsing XML with DOM"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0596001886_pythonian-chp-23-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596001886_pythonian-chp-23-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonian-CHP-23-SECT-3"></A>
<H3 class="docSection1Title">23.3 Parsing XML with DOM</H3>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9070"></A> <A NAME="pythonian-CHP-23-ITERM-9071"></A>SAX parsing
does not build any structure in memory to represent the XML document.
This makes SAX fast and highly scalable, as your application builds
exactly as little or as much in-memory structure as needed for its
specific tasks. However, for particularly complicated processing
tasks involving reasonably small XML documents, you may prefer to let
the library build in-memory structures that represent the whole XML
document, and then traverse those structures. The XML standards
describe the DOM (Document Object Model) for XML. A DOM object
represents an XML document as a tree whose root is the
<I>document object,</I> while other nodes correspond to
elements, text contents, element attributes, and so
on.<A NAME="pythonian-CHP-23-ITERM-9072"></A></P>

<P class="docText">The Python standard library supplies a minimal implementation of the
XML DOM standard, <TT>xml.dom.minidom</TT>.
<TT>minidom</TT> builds everything up in memory, with the
typical pros and cons of the DOM approach to parsing. The Python
standard library also supplies a different DOM-like approach in
module <TT>xml.dom.pulldom</TT>. <TT>pulldom</TT>
occupies an interesting middle ground between SAX and DOM, presenting
the stream of parsing events as a Python iterator object so that you
do not code callbacks, but rather loop over the events and examine
each event to see if it's of interest. When you do
find an event of interest to your application, you can ask
<TT>pulldom</TT> to build the DOM subtree rooted in that
event's node by calling method
<TT>expandNode</TT>, and then work with that subtree as you
would in <TT>minidom</TT>. Paul Prescod,
<TT>pulldom</TT>'s author and XML and
Python expert, describes the net result as "80% of
the performance of SAX, 80% of the convenience of
DOM." Other DOM parsers are part of the PyXML and
4Suite extension packages, mentioned at the start of this chapter.</P>

<A NAME="pythonian-CHP-23-SECT-3.1"></A>
<H4 class="docSection2Title">23.3.1 The xml.dom Package</H4>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9073"></A>
<A NAME="pythonian-CHP-23-ITERM-9074"></A>
<A NAME="pythonian-CHP-23-ITERM-9075"></A> <A NAME="pythonian-CHP-23-ITERM-9076"></A>The <TT>xml.dom</TT> package
supplies exception class <TT>DOMException</TT> and
subclasses of it to support fine-grained exception handling.
<TT>xml.dom</TT> also supplies a class
<TT>Node</TT>, typically used as a base class for all nodes
by DOM implementations. Class <TT>Node</TT> only supplies
constant attributes giving the codes for node types, such as
<TT>ELEMENT_NODE</TT> for elements,
<TT>ATTRIBUTE_NODE</TT> for attributes, and so on.
<TT>xml.dom</TT> also supplies constant module attributes
with the URIs of important namespaces:
<TT>XML_NAMESPACE</TT>, <TT>XMLNS_NAMESPACE</TT>,
<TT>XHTML_NAMESPACE</TT>, and
<TT>EMPTY_NAMESPACE</TT>.</P>


<A NAME="pythonian-CHP-23-SECT-3.2"></A>
<H4 class="docSection2Title">23.3.2 The xml.dom.minidom Module</H4>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9077"></A> <A NAME="pythonian-CHP-23-ITERM-9078"></A>The <TT>xml.dom.minidom</TT>
module supplies two functions.</P>

<A NAME="ch23-26-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9079"></A><A NAME="pythonian-CHP-23-ITERM-9080"></A><A NAME="pythonian-CHP-23-ITERM-9081"></A><A NAME="pythonian-CHP-23-ITERM-9082"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>parse</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>parse(<TT><I>file</I></TT>,<TT><I>parser</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT><I>file</I></TT> is a filename or a file-like object
open for reading, containing an XML document.
<TT><I>parser</I></TT>, if given, is an instance of a SAX
parser class; otherwise, <TT>parse</TT> generates a default
SAX parser by calling <TT>xml.sax.make_parser( )</TT>.
<TT>parse</TT> returns a <TT>minidom</TT>
document object instance representing the given XML document.</P>

<A NAME="ch23-27-fm2xml"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>parseString</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>parseString(<TT><I>string</I></TT>,<TT><I>parser</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Like <TT>parse</TT>, except that
<TT><I>string</I></TT> is the XML document in string form.</P>

<P class="docText"><TT>xml.dom.minidom</TT> also supplies many classes as
specified by the XML DOM standard. Almost all of these classes
subclass <TT>Node</TT>. Class <TT>Node</TT>
supplies the methods and attributes that all kinds of nodes have in
common. A notable class of module <TT>xml.dom.minidom</TT>
that is not a subclass of <TT>Node</TT> is
<TT>AttributeList</TT>, identified in the DOM standard as
<TT>NamedNodeMap</TT>, which is a mapping that collects the
attributes of a node of class
<TT>Element</TT>.<A NAME="pythonian-CHP-23-ITERM-9083"></A> <A NAME="pythonian-CHP-23-ITERM-9084"></A></P>

<P class="docText">For methods and attributes related to changing and creating XML
documents, see <A class="docLink" HREF="0596001886_pythonian-chp-23-sect-4.html#pythonian-CHP-23-SECT-4">Section 23.4</A> later in this chapter. Here, I present the
classes, methods, and attributes that you use most often when
traversing a DOM tree without changes, normally after the tree has
been built by parsing an XML document. For concreteness and
simplicity, I mention Python classes. However, the DOM specifications
deal strictly with abstract interfaces, never with concrete classes.
Your code must never deal with the class objects directly, only with
instances of those classes. Do not type-test nodes (for example,
don't use <TT>isinstance</TT> on them) and
do not instantiate node classes directly (rather, use the factory
methods covered later in <A class="docLink" HREF="0596001886_pythonian-chp-23-sect-4.html#pythonian-CHP-23-SECT-4">Section 23.4</A>). This is good Python
practice in general, but it's particularly important
here.<A NAME="pythonian-CHP-23-ITERM-9085"></A></P>

<A NAME="pythonian-CHP-23-SECT-3.2.1"></A>
<H5 class="docSection3Title">23.3.2.1 Node objects</H5>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9086"></A> <A NAME="pythonian-CHP-23-ITERM-9087"></A>Each node <TT><I>n</I></TT>
in the DOM tree is an instance of some subclass of
<TT>Node</TT>; therefore <TT><I>n</I></TT>
supplies all attributes and methods that <TT>Node</TT>
supplies, with appropriate overriding implementations if needed. The
most frequently used methods and attributes are as follows.</P>

<A NAME="ch23-29-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9088"></A><A NAME="pythonian-CHP-23-ITERM-9089"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>attributes</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9088"></A> <A NAME="pythonian-CHP-23-ITERM-9089"></A>The
<TT><I>n</I></TT><TT>.attributes</TT> attribute
is either <TT>None</TT> or an
<TT>AttributeList</TT> instance with all attributes of
<TT><I>n</I></TT>.</P>

<A NAME="ch23-30-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9090"></A><A NAME="pythonian-CHP-23-ITERM-9091"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>childNodes</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9090"></A> <A NAME="pythonian-CHP-23-ITERM-9091"></A>The
<TT><I>n</I></TT><TT>.childNodes</TT> attribute
is a list of all nodes that are children of
<TT><I>n</I></TT>, possibly an empty list.</P>

<A NAME="ch23-31-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9092"></A><A NAME="pythonian-CHP-23-ITERM-9093"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>firstChild</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9092"></A> <A NAME="pythonian-CHP-23-ITERM-9093"></A>The
<TT><I>n</I></TT><TT>.firstChild</TT> attribute
is <TT>None</TT> when
<TT><I>n</I></TT><TT>.childNodes</TT> is empty,
otherwise like
<TT><I>n</I></TT><TT>.childNodes[0]</TT>.</P>

<A NAME="ch23-32-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9094"></A><A NAME="pythonian-CHP-23-ITERM-9095"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>hasChildNodes</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>n</I></TT>.hasChildNodes(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Like
<TT>len(</TT><TT><I>n</I></TT><TT>.childNodes)!=0</TT>,
but possibly faster.</P>

<A NAME="ch23-33-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9096"></A><A NAME="pythonian-CHP-23-ITERM-9097"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>isSameNode</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>n</I></TT>.isSameNode(<TT><I>other</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT>True</TT><A NAME="pythonian-CHP-23-ITERM-9096"></A> <A NAME="pythonian-CHP-23-ITERM-9097"></A>
when <TT><I>n</I></TT> and
<TT><I>other</I></TT> refer to the same DOM node,
otherwise <TT>False</TT>. Do not use the normal Python
idiom <TT><I>n</I></TT> <TT>is</TT>
<TT><I>other</I></TT>: a Python DOM implementation is free
to generate multiple <TT>Node</TT> instances that refer to
the same DOM node. Therefore, to check the identity of DOM node
references, always and exclusively use method
<TT>isSameNode</TT>.</P>

<A NAME="ch23-34-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9098"></A><A NAME="pythonian-CHP-23-ITERM-9099"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>lastChild</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9098"></A> <A NAME="pythonian-CHP-23-ITERM-9099"></A>The
<TT><I>n</I></TT><TT>.lastChild</TT> attribute
is <TT>None</TT> when
<TT><I>n</I></TT><TT>.childNodes</TT> is empty,
otherwise like
<TT><I>n</I></TT><TT>.childNodes[-1]</TT>.</P>

<A NAME="ch23-35-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9100"></A><A NAME="pythonian-CHP-23-ITERM-9101"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>localName</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9100"></A> <A NAME="pythonian-CHP-23-ITERM-9101"></A>The
<TT><I>n</I></TT><TT>.localName</TT> attribute
is the local part of <TT><I>n</I></TT>'s
qualified name (relevant when namespaces are involved).</P>

<A NAME="ch23-36-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9102"></A><A NAME="pythonian-CHP-23-ITERM-9103"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>namespaceURI</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9102"></A> <A NAME="pythonian-CHP-23-ITERM-9103"></A>The
<TT><I>n</I></TT><TT>.namespaceURI</TT>
attribute is <TT>None</TT> when
<TT><I>n</I></TT>'s qualified name has no
namespace part, otherwise the namespace's URI.</P>

<A NAME="ch23-37-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9104"></A><A NAME="pythonian-CHP-23-ITERM-9105"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>nextSibling</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9104"></A> <A NAME="pythonian-CHP-23-ITERM-9105"></A>The
<TT><I>n</I></TT><TT>.nextSibling</TT> attribute
is <TT>None</TT> when <TT><I>n</I></TT> is the
last child of <TT><I>n</I></TT>'s parent,
otherwise the next child of
<TT><I>n</I></TT>'s parent.</P>

<A NAME="ch23-38-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9106"></A><A NAME="pythonian-CHP-23-ITERM-9107"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>nodeName</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9106"></A> <A NAME="pythonian-CHP-23-ITERM-9107"></A>The
<TT><I>n</I></TT><TT>.nodeName</TT> attribute is
<TT><I>n</I></TT>'s name string. The
string is a node-specific name when that makes sense for
<TT><I>n</I></TT>'s node type (e.g., the
tag name when <TT><I>n</I></TT> is an
<TT>Element</TT>), otherwise a string starting with
'<TT>#</TT>'.</P>

<A NAME="ch23-39-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9108"></A><A NAME="pythonian-CHP-23-ITERM-9109"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>nodeType</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9108"></A> <A NAME="pythonian-CHP-23-ITERM-9109"></A>The
<TT><I>n</I></TT><TT>.nodeType</TT> attribute is
<TT><I>n</I></TT>'s type code, an integer
that is one of the constant attributes of class
<TT>Node</TT>.</P>

<A NAME="ch23-40-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9110"></A><A NAME="pythonian-CHP-23-ITERM-9111"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>nodeValue</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9110"></A> <A NAME="pythonian-CHP-23-ITERM-9111"></A>The
<TT><I>n</I></TT><TT>.nodeValue</TT> attribute
is <TT>None</TT> when <TT><I>n</I></TT> has no
value (e.g., when <TT><I>n</I></TT> is an
<TT>Element</TT>), otherwise
<TT><I>n</I></TT>'s value (e.g., the text
content when <TT><I>n</I></TT> is an instance of class
<TT>Text)</TT>.</P>

<A NAME="ch23-41-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9112"></A><A NAME="pythonian-CHP-23-ITERM-9113"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>normalize</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>n</I></TT>.normalize(  )</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9112"></A> <A NAME="pythonian-CHP-23-ITERM-9113"></A>Normalizes the entire subtree rooted at
<TT><I>n</I></TT>, merging adjacent
<TT>Text</TT> nodes. Parsing may separate ranges of text in
the XML document into arbitrary chunks; <TT>normalize</TT>
ensures that text ranges remain separate only when there is markup
between them.</P>

<A NAME="ch23-42-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9114"></A><A NAME="pythonian-CHP-23-ITERM-9115"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>ownerDocument</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9114"></A> <A NAME="pythonian-CHP-23-ITERM-9115"></A>The
<TT><I>n</I></TT><TT>.ownerDocument</TT>
attribute is the <TT>Document</TT> instance that contains
<TT><I>n</I></TT>.</P>

<A NAME="ch23-43-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9116"></A><A NAME="pythonian-CHP-23-ITERM-9117"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>parentNode</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9116"></A> <A NAME="pythonian-CHP-23-ITERM-9117"></A>The
<TT><I>n</I></TT><TT>.parentNode</TT> attribute
is <TT><I>n</I></TT>'s parent node in the
DOM tree, or <TT>None</TT> for attribute nodes and nodes
not in the tree.</P>

<A NAME="ch23-44-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9118"></A><A NAME="pythonian-CHP-23-ITERM-9119"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>prefix</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9118"></A>
<A NAME="pythonian-CHP-23-ITERM-9119"></A>The
<TT><I>n</I></TT><TT>.prefix</TT> attribute is
<TT>None</TT> when
<TT><I>n</I></TT>'s qualified name has no
namespace prefix, otherwise the namespace prefix. Note that a name
may have a namespace even if it has no namespace prefix.</P>

<A NAME="ch23-45-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9120"></A><A NAME="pythonian-CHP-23-ITERM-9121"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>previousSibling</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9120"></A> <A NAME="pythonian-CHP-23-ITERM-9121"></A>The
<TT><I>n</I></TT><TT>.previousSibling</TT>
attribute is <TT>None</TT> when
<TT><I>n</I></TT> is the first child of
<TT><I>n</I></TT>'s parent, otherwise the
previous child of <TT><I>n</I></TT>'s
parent.</P>



<A NAME="pythonian-CHP-23-SECT-3.2.2"></A>
<H5 class="docSection3Title">23.3.2.2 Attr objects</H5>

<P class="docText">The <TT>Attr</TT> class is a subclass of
<TT>Node</TT> that represents an attribute of an
<TT>Element</TT>. Besides attributes and methods of class
<TT>Node</TT>, an instance <TT><I>a</I></TT> of
<TT>Attr</TT> supplies the following
attributes.<A NAME="pythonian-CHP-23-ITERM-9122"></A> <A NAME="pythonian-CHP-23-ITERM-9123"></A></P>

<A NAME="ch23-47-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9124"></A><A NAME="pythonian-CHP-23-ITERM-9125"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>ownerElement</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9124"></A> <A NAME="pythonian-CHP-23-ITERM-9125"></A>The
<TT><I>a</I></TT><TT>.ownerElement</TT>
attribute is the <TT>Element</TT> instance of which
<TT><I>a</I></TT> is an attribute.</P>

<A NAME="ch23-48-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9126"></A><A NAME="pythonian-CHP-23-ITERM-9127"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>specified</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9126"></A> <A NAME="pythonian-CHP-23-ITERM-9127"></A>The
<TT><I>a</I></TT><TT>.specified</TT> attribute
is true if <TT><I>a</I></TT> was explicitly specified in
the document, false if obtained by default.</P>



<A NAME="pythonian-CHP-23-SECT-3.2.3"></A>
<H5 class="docSection3Title">23.3.2.3 Document objects</H5>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9128"></A> <A NAME="pythonian-CHP-23-ITERM-9129"></A> <A NAME="pythonian-CHP-23-ITERM-9130"></A>The
<TT>Document</TT> class is a subclass of
<TT>Node</TT> whose instances are returned by the
<TT>parse</TT> and <TT>parseString</TT> functions
of module <TT>xml.dom.minidom</TT>. All nodes in the
document refer to the same <TT>Document</TT> node as their
<TT>ownerDocument</TT> attribute. To check this, you must
use the <TT>isSameNode</TT> method, not Python identity
checking (operator <TT>is</TT>). Besides the attributes and
methods of class <TT>Node</TT>,
<TT><I>d</I></TT> supplies the following attributes and
methods.</P>

<A NAME="ch23-50-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9131"></A><A NAME="pythonian-CHP-23-ITERM-9132"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>doctype</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9131"></A> <A NAME="pythonian-CHP-23-ITERM-9132"></A>The
<TT><I>d</I></TT><TT>.doctype</TT> attribute is
the <TT>DocumentType</TT> instance corresponding to
<TT><I>d</I></TT>'s DTD. This attribute
comes directly from the <TT>!DOCTYPE</TT> declaration in
<TT><I>d</I></TT>'s XML source.</P>

<A NAME="ch23-51-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9133"></A><A NAME="pythonian-CHP-23-ITERM-9134"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>documentElement</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left"></td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9133"></A> <A NAME="pythonian-CHP-23-ITERM-9134"></A>The
<TT><I>d</I></TT><TT>.documentElement</TT>
attribute is the <TT>Element</TT> instance corresponding to
<TT><I>d</I></TT>'s root element.</P>

<A NAME="ch23-52-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9135"></A><A NAME="pythonian-CHP-23-ITERM-9136"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getElementById</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>d</I></TT>.getElementById(<TT><I>elementId</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9135"></A> <A NAME="pythonian-CHP-23-ITERM-9136"></A>Returns the <TT>Element</TT>
instance within the document that has the given ID (what element
attributes are IDs is specified by the DTD), or
<TT>None</TT> if there is no such instance (or the
underlying parser does not supply ID information).</P>

<A NAME="ch23-53-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9137"></A><A NAME="pythonian-CHP-23-ITERM-9138"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getElementsByTagName</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>d</I></TT>.getElementsByTagName(<TT><I>tagName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the list of <TT>Element</TT> instances within the
document whose tag equals string <TT><I>tagName</I></TT>,
in the same order as in the parsed XML document. May be the empty
list. When <TT><I>name</I></TT> is '<TT>*</TT>',
returns the list of all <TT>Element</TT> instances within
the document, with any tag.</P>

<A NAME="ch23-54-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9139"></A><A NAME="pythonian-CHP-23-ITERM-9140"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getElementsByTagNameNS</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>d</I></TT>.getElementsByTagNameNS(<TT><I>namespaceURI</I></TT>,<TT><I>localName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Returns the list of <TT>Element</TT> instances within the
document with the given <TT><I>namespaceURI</I></TT> and
<TT><I>localName</I></TT>, in the order found in the XML
document. May be the empty list. A value of '<TT>*</TT>'
for <TT><I>namespaceURI</I></TT>,
<TT><I>localName</I></TT>, or both matches all values of
the corresponding field.</P>



<A NAME="pythonian-CHP-23-SECT-3.2.4"></A>
<H5 class="docSection3Title">23.3.2.4 Element objects</H5>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9141"></A> <A NAME="pythonian-CHP-23-ITERM-9142"></A>The
<TT>Element</TT> class is a subclass of
<TT>Node</TT> that represents tagged elements. Besides
attributes and methods of <TT>Node</TT>, an instance
<TT><I>e</I></TT> of <TT>Element</TT> supplies
the following methods.</P>

<A NAME="ch23-56-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9143"></A><A NAME="pythonian-CHP-23-ITERM-9144"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getAttribute</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getAttribute(<TT><I>name</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9143"></A> <A NAME="pythonian-CHP-23-ITERM-9144"></A>Returns the value of
<TT><I>e</I></TT>'s attribute with the
given <TT><I>name</I></TT>. Returns the empty string
'' if <TT><I>e</I></TT> has no
attribute with the given <TT><I>name</I></TT>.</P>

<A NAME="ch23-57-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9145"></A><A NAME="pythonian-CHP-23-ITERM-9146"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getAttributeNS</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getAttributeNS(<TT><I>namespaceURI</I></TT>,<TT><I>localName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9145"></A> <A NAME="pythonian-CHP-23-ITERM-9146"></A>Returns the value of
<TT><I>e</I></TT>'s attribute with the
given <TT><I>namespaceURI</I></TT> and
<TT><I>localName</I></TT>.</P>

<A NAME="ch23-58-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9147"></A><A NAME="pythonian-CHP-23-ITERM-9148"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getAttributeNode</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getAttributeNode(<TT><I>name</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9147"></A> <A NAME="pythonian-CHP-23-ITERM-9148"></A>Returns the <TT>Attr</TT>
instance that is <TT><I>e</I></TT>'s
attribute with the given <TT><I>name</I></TT>, or
<TT>None</TT> if no attribute with that name is among
<TT><I>e</I></TT>'s attributes.</P>

<A NAME="ch23-59-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9149"></A><A NAME="pythonian-CHP-23-ITERM-9150"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getAttributeNodeNS</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getAttributeNodeNS(<TT><I>namespaceURI</I></TT>,<TT><I>localName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9149"></A> <A NAME="pythonian-CHP-23-ITERM-9150"></A>Returns the <TT>Attr</TT>
instance that is <TT><I>e</I></TT>'s
attribute with the given <TT><I>namespaceURI</I></TT> and
<TT><I>localName</I></TT>, or <TT>None</TT> if
no such attribute is among
<TT><I>e</I></TT>'s attributes.</P>

<A NAME="ch23-60-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9151"></A><A NAME="pythonian-CHP-23-ITERM-9152"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getElementsByTagName</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getElementsByTagName(<TT><I>tagName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9151"></A>
<A NAME="pythonian-CHP-23-ITERM-9152"></A>Returns the list of
<TT>Element</TT> instances within the subtree rooted at
<TT><I>e</I></TT> whose tag equals string
<TT><I>tagName</I></TT>, in the same order as in the XML
document. <TT><I>e</I></TT> is included in the list that
<TT>getElementsbyTagName</TT> returns if
<TT><I>e</I></TT>'s tag equals
<TT><I>tagName</I></TT>.
<TT>getElementsbyTagName</TT> may return the empty list
when no node in the subtree rooted at <TT><I>e</I></TT>
has a tag equal to <TT><I>tagName</I></TT>. When
<TT><I>tagName</I></TT> is '<TT>*</TT>',
<TT>getElementsbyTagName</TT> returns the list of all
<TT>Element</TT> instances within the subtree, with any
tag, including <TT><I>e</I></TT>.</P>

<A NAME="ch23-61-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9153"></A><A NAME="pythonian-CHP-23-ITERM-9154"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>getElementsByTagNameNS</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.getElementsByTagNameNS(<TT><I>namespaceURI</I></TT>,<TT><I>localName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9153"></A>
<A NAME="pythonian-CHP-23-ITERM-9154"></A>Returns the list of
<TT>Element</TT> instances within the subtree rooted at
<TT><I>e</I></TT>, with the given
<TT><I>namespaceURI</I></TT> and
<TT><I>localname</I></TT>, in the same order as in the XML
document. A value of '<TT>*</TT>' for
<TT><I>namespaceURI</I></TT>,
<TT><I>localname</I></TT>, or both matches all values of
the corresponding field. The list may include
<TT><I>e</I></TT> or may be empty, just as for method
<TT>getElementsByTagName</TT>.</P>

<A NAME="ch23-62-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9155"></A><A NAME="pythonian-CHP-23-ITERM-9156"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>hasAttribute</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.hasAttribute(<TT><I>name</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9155"></A> <A NAME="pythonian-CHP-23-ITERM-9156"></A>True if and only if
<TT><I>e</I></TT> has an attribute with the given
<TT><I>name</I></TT>. If the underlying parser extracts
the relevant information from the DTD,
<TT>hasAttribute</TT> is also true for attributes of
<TT><I>e</I></TT> that have a default value, even when
they are not explicitly specified.</P>

<A NAME="ch23-63-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9157"></A><A NAME="pythonian-CHP-23-ITERM-9158"></A><A NAME="pythonian-CHP-23-ITERM-9159"></A><A NAME="pythonian-CHP-23-ITERM-9160"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>hasAttributeNS</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>e</I></TT>.hasAttributeNS(<TT><I>namespaceURI</I></TT>,<TT><I>localName</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">True if and only if <TT><I>e</I></TT> has an attribute
with the given <TT><I>namespaceURI</I></TT> and
<TT><I>localName</I></TT>. Same as method
<TT>hasAttribute</TT> regarding attributes with default
values from the DTD.<A NAME="pythonian-CHP-23-ITERM-9159"></A> <A NAME="pythonian-CHP-23-ITERM-9160"></A></P>



<A NAME="pythonian-CHP-23-SECT-3.3"></A>
<H4 class="docSection2Title">23.3.3 Parsing XHTML with xml.dom.minidom</H4>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9161"></A>
<A NAME="pythonian-CHP-23-ITERM-9162"></A>The following example uses
<TT>xml.dom.minidom</TT> to perform the same task as in the
previous example for <TT>xml.sax</TT>, fetching a page from
the Web with <TT>urllib</TT>, parsing it, and outputting
the hyperlinks:</P>

<PRE>import xml.dom.minidom, urllib, urlparse

f = urllib.urlopen('http://www.w3.org/MarkUp/')
doc = xml.dom.minidom.parse(f)
as = doc.getElementsByTagName('a')
seen = {}
for a in as:
    value = a.getAttribute('href')
    if value and value not in seen:
        seen[value] = True
        pieces = urlparse.urlparse(value)
        if pieces[0] == 'http' and pieces[1]!='www.w3.org':
            print urlparse.urlunparse(pieces)</PRE>

<P class="docText">In this example, we get the list of all elements with tag
'<TT>a</TT>', and the relevant attribute, if any, for each
of them. We then work in the usual way with the
attribute's value.</P>


<A NAME="pythonian-CHP-23-SECT-3.4"></A>
<H4 class="docSection2Title">23.3.4 The xml.dom.pulldom Module</H4>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9163"></A>
<A NAME="pythonian-CHP-23-ITERM-9164"></A>
<A NAME="pythonian-CHP-23-ITERM-9165"></A> <A NAME="pythonian-CHP-23-ITERM-9166"></A>The
<TT>xml.dom.pulldom</TT> module supplies two functions.</P>

<A NAME="ch23-66-fm2xml"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>parse</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>parse(<TT><I>file</I></TT>,<TT><I>parser</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT><I>file</I></TT> is a filename or a file-like object
open for reading, containing an XML document.
<TT><I>parser</I></TT>, if given, is an instance of a SAX
parser class; otherwise <TT>parse</TT> generates a default
SAX parser by calling <TT>xml.sax.make_parser( )</TT>.
<TT>parse</TT> returns a <TT>pulldom</TT> event
stream instance representing the given XML document.</P>

<A NAME="ch23-67-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9167"></A><A NAME="pythonian-CHP-23-ITERM-9168"></A><A NAME="pythonian-CHP-23-ITERM-9169"></A><A NAME="pythonian-CHP-23-ITERM-9170"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>parseString</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre>parseString(<TT><I>string</I></TT>,<TT><I>parser</I></TT>=None)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText">Like <TT>parse</TT>, except that
<TT><I>string</I></TT> is the XML document in string form.</P>

<P class="docText"><TT>xml.dom.pulldom</TT> also supplies class
<TT>DOMEventStream</TT>, an iterator whose items are pairs
<TT>(</TT><TT><I>event</I></TT>,<TT><I>node</I></TT><TT>)</TT>,
where <TT><I>event</I></TT> is a string giving the event
type, and <TT><I>node</I></TT> is an instance of an
appropriate subclass of class <TT>Node</TT>. The possible
values for <TT><I>event</I></TT> are constant uppercase
strings that are also available as constant attributes of module
<TT>xml.dom.pulldom</TT> with the same names:
<TT>CHARACTERS</TT>, <TT>COMMENT</TT>,
<TT>END_DOCUMENT</TT>, <TT>END_ELEMENT</TT>,
<TT>IGNORABLE_WHITESPACE</TT>,
<TT>PROCESSING_INSTRUCTION</TT>,
<TT>START_DOCUMENT</TT>, and
<TT>START_ELEMENT</TT>.</P>

<P class="docText">An instance <TT><I>d</I></TT> of class
<TT>DOMEventStream</TT> supplies one other important
method.</P>

<A NAME="ch23-68-fm2xml"></A><A NAME="pythonian-CHP-23-ITERM-9171"></A><table width="515" border="0" cellpadding="5">
<tr>
<td align="left"><b><i>expandNode</i></b></td>
<td align="right"></td>
</tr>
</table>
<hr width="515" size="3" noshade="true" align="left" color="black">
<table width="515" border="0" cellpadding="5">
<tr>
<td align="left">
<pre><TT><I>d</I></TT>.expandNode(<TT><I>node</I></TT>)</pre>
</td>
<td align="right"></td>
</tr>
</table>
<P class="docText"><TT><I>node</I></TT> must be the latest instance of
<TT>Node</TT> so far returned by iterating on
<TT><I>d</I></TT>, i.e., the instance of
<TT>Node</TT> returned by the latest call to
<TT><I>d</I></TT><TT>.next( )</TT>.
<TT>expandNode</TT> processes that part of the XML document
stream that corresponds to the subtree rooted at
<TT><I>node</I></TT>, ensuring that you can then access
the subtree with the usual <TT>minidom</TT> approach.
<TT><I>d</I></TT> iterates on itself for the purpose so
that after calling <TT>expandNode</TT>, the next call to
<TT>next</TT> continues right after the subtree thus
expanded.</P>


<A NAME="pythonian-CHP-23-SECT-3.5"></A>
<H4 class="docSection2Title">23.3.5 Parsing XHTML with xml.dom.pulldom</H4>

<P class="docText"><A NAME="pythonian-CHP-23-ITERM-9172"></A>
<A NAME="pythonian-CHP-23-ITERM-9173"></A>The following
example uses <TT>xml.dom.pulldom</TT> to perform the same
task as our previous examples, fetching a page from the Web with
<TT>urllib</TT>, parsing it, and outputting the hyperlinks:</P>

<PRE>import xml.dom.pulldom, urllib, urlparse

f = urllib.urlopen('http://www.w3.org/MarkUp/')
doc = xml.dom.pulldom.parse(f)
seen = {}
for event, node in doc:
    if event=='START_ELEMENT' and node.nodeName=='a':
        doc.expandNode(node)
        value = node.getAttribute('href')
        if value and value not in seen:
            seen[value] = True
            pieces = urlparse.urlparse(value)
            if pieces[0] == 'http' and pieces[1]!='www.w3.org':
                print urlparse.urlunparse(pieces)</PRE>

<P class="docText">In this example, we select only elements with tag
'<TT>a</TT>'. For each of them we request full expansion,
and then proceed just like in the <TT>minidom</TT> example
(i.e., we get the relevant attribute, if any, then work in the usual
way with the attribute's value). The expansion is in
fact not necessary in this specific case, since we do not need to
work with the subtree rooted in each element with tag
'<TT>a</TT>', just with the attributes, and attributes can
be accessed without calling <TT>expandNode</TT>. Therefore,
this example works just as well if you change the call to
<TT>doc.expandNode</TT> into a comment. However, I put the
<TT>expandNode</TT> call in the example to show how this
crucial method of <TT>pulldom</TT> is normally used in
context.<A NAME="pythonian-CHP-23-ITERM-9174"></A> <A NAME="pythonian-CHP-23-ITERM-9175"></A> <A NAME="pythonian-CHP-23-ITERM-9176"></A></P>



<a href="0596001886_"><img src="FILES/pixel.gif" width="1" height="1" border="0"></a><ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0596001886_pythonian-chp-23-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596001886_pythonian-chp-23-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
