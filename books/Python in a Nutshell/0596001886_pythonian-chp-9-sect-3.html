<html><head>
<META http-equiv="Content-Type" content="text/html">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="9.3 String Formatting"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0596001886_pythonian-chp-9-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0596001886_pythonian-chp-9-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top"><A NAME="pythonian-CHP-9-SECT-3"></A>
<H3 class="docSection1Title">9.3 String Formatting</H3>

<P class="docText"><A NAME="pythonian-CHP-9-ITERM-5181"></A>
<A NAME="pythonian-CHP-9-ITERM-5182"></A>In Python, a string-formatting
expression has the syntax:</P>

<PRE><TT><I>format</I></TT> % <TT><I>values</I></TT></PRE>

<P class="docText">where <TT><I>format</I></TT> is a plain or Unicode string
containing format specifiers and <TT><I>values</I></TT> is
any single object or a collection of objects in a tuple or
dictionary. Python's string-formatting operator has
roughly the same set of features as the C language's
<TT>printf</TT> and operates in a similar way. Each format
specifier is a substring of <TT><I>format</I></TT> that
starts with a percent sign (<TT>%</TT>) and ends with one
of the conversion characters shown in <A class="docLink" HREF="#pythonian-CHP-9-TABLE-1">Table 9-1</A>.<A NAME="pythonian-CHP-9-ITERM-5183"></A>
<A NAME="pythonian-CHP-9-ITERM-5184"></A></P>

<A NAME="pythonian-CHP-9-TABLE-1"></A><P><TABLE BORDER="1" CELLSPACING="0" CELLPADDING="1" WIDTH="100%">
<CAPTION><h5 class="docTableTitle">Table 9-1. String-formatting conversion characters</h5></CAPTION><COLGROUP span="3">
<TR>
<TH class="docTableHeader">
<P class="docText">Character</P>
</TH>
<TH class="docTableHeader">
<P class="docText">Output format</P>
</TH>
<TH class="docTableHeader">
<P class="docText">Notes</P>
</TH>
</TR>
<TR>
<TD class="docTableCell">
<P class="docText"><TT>d</TT>, <TT>i</TT></P>
</TD>
<TD class="docTableCell">
<P class="docText">Signed decimal integer</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>u</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Unsigned decimal integer</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>o</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Unsigned octal integer</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>x</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Unsigned hexadecimal integer (lowercase letters)</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>X</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Unsigned hexadecimal integer (uppercase letters)</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>e</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Floating-point value in exponential form (lowercase e for exponent)</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>E</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Floating-point value in exponential form (uppercase E for exponent)</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<P class="docText"><TT>f</TT>, <TT>F</TT></P>
</TD>
<TD class="docTableCell">
<P class="docText">Floating-point value in decimal form</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value must be number</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<P class="docText"><TT>g</TT>, <TT>G</TT></P>
</TD>
<TD class="docTableCell">
<P class="docText">Like <TT>e</TT> or <TT>E</TT> when
<TT><I>exp</I></TT> is greater than 4 or less than the
precision; otherwise like <TT>f</TT> or
<TT>F</TT></P>
</TD>
<TD class="docTableCell">
<P class="docText"><TT><I>exp</I></TT> is the exponent of the number being
converted</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>c</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Single character</P>
</TD>
<TD class="docTableCell">
<P class="docText">Value can be integer or single-character string</P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>r</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">String</P>
</TD>
<TD class="docTableCell">
<P class="docText">Converts any value with <TT>repr</TT></P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>s</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">String</P>
</TD>
<TD class="docTableCell">
<P class="docText">Converts any value with <TT>str</TT></P>
</TD>
</TR>
<TR>
<TD class="docTableCell">
<PRE>%</PRE>
</TD>
<TD class="docTableCell">
<P class="docText">Literal <TT>%</TT> character</P>
</TD>
<TD class="docTableCell">
<P class="docText">Consumes no value</P>
</TD>
</TR>
</COLGROUP>
</TABLE></P>

<P class="docText">Between the <TT>%</TT> and the conversion character, you
can specify a number of optional modifiers, as we'll
discuss shortly.</P>

<P class="docText">The result of a formatting expression is a string that is a copy of
<TT><I>format</I></TT> where each format specifier is
replaced by the corresponding item of
<TT><I>values</I></TT> converted to a string according to
the specifier. Here are some simple examples:</P>

<PRE>x = 42
y = 3.14
z = "george"
print 'result = %d' % x                 # prints: result = 42
print 'answers are: %d %f' % (x,y)      # prints: answers are: 42 3.14
print 'hello %s' % z                    # prints: hello george</PRE>

<A NAME="pythonian-CHP-9-SECT-3.1"></A>
<H4 class="docSection2Title">9.3.1 Format Specifier Syntax</H4>

<P class="docText"><A NAME="pythonian-CHP-9-ITERM-5187"></A>
<A NAME="pythonian-CHP-9-ITERM-5188"></A>A format specifier can include numerous
modifiers that control how the corresponding item in
<TT><I>values</I></TT> is converted to a string. The
components of a format specifier, in order, are:</P>

<UL>
<LI><P class="docList">The mandatory leading <TT>%</TT> character that marks the
start of the specifier</P></LI>
<LI><P class="docList">An optional item name in parentheses (e.g.
<TT>(</TT><TT><I>name</I></TT><TT>)</TT>)<A NAME="pythonian-CHP-9-ITERM-5189"></A> <A NAME="pythonian-CHP-9-ITERM-5190"></A></P><UL>
<LI><P class="docList">Zero or more optional conversion flags:</P></LI>
<LI><P class="docList"><TT>#</TT>, which indicates that the conversion uses an
alternate form (if any exists for its type)<A NAME="pythonian-CHP-9-ITERM-5191"></A> <A NAME="pythonian-CHP-9-ITERM-5192"></A></P></LI>
<LI><P class="docList"><TT>0</TT>, which indicates that the conversion is
zero-padded</P></LI>
<LI><P class="docList"><TT>-</TT>, which indicates that the conversion is
left-justified<A NAME="pythonian-CHP-9-ITERM-5193"></A> <A NAME="pythonian-CHP-9-ITERM-5194"></A>
<A NAME="pythonian-CHP-9-ITERM-5195"></A> <A NAME="pythonian-CHP-9-ITERM-5196"></A></P></LI>
<LI><P class="docList">a space, which indicates that a space is placed before a positive
number</P></LI>
<LI><P class="docList"><TT>+</TT>, which indicates that the numeric sign
(<TT>+</TT> or <TT>-</TT>) is included before any
numeric conversion</P></LI>
</UL></LI>
<LI><P class="docList">An optional minimum width of the conversion, specified using one or
more digits or an asterisk (<TT>*</TT>), which means that
the width is taken from the next item in
<TT><I>values</I></TT><A NAME="pythonian-CHP-9-ITERM-5197"></A> <A NAME="pythonian-CHP-9-ITERM-5198"></A></P></LI>
<LI><P class="docList"><A NAME="pythonian-CHP-9-ITERM-5199"></A> <A NAME="pythonian-CHP-9-ITERM-5200"></A>An
optional precision for the conversion, specified with a dot
(.) followed by zero or more digits or a
<TT>*</TT>, which means that the width is taken from the
next item in <TT><I>values</I></TT></P></LI>
<LI><P class="docList">A mandatory conversion type from <A class="docLink" HREF="#pythonian-CHP-9-TABLE-1">Table 9-1</A></P></LI>
</UL>
<P class="docText">Item names must be given either in all format specifiers in
<TT><I>format</I></TT> or in none of them. When item names
are present, <TT><I>values</I></TT> must be a mapping
(often the dictionary of a namespace, e.g.,
<TT><I>vars</I></TT><TT>( )</TT>), and each item
name is a key in <TT><I>values</I></TT>. In other words,
each format specifier corresponds to the item in
<TT><I>values</I></TT> keyed by the
specifier's item name. When item names are present,
you cannot use <TT>*</TT> in any format specifier.</P>

<P class="docText">When item names are absent, <TT><I>values</I></TT> must be
a tuple; when there is just one item,
<TT><I>values</I></TT> may be the item itself instead of a
tuple. Each format specifier corresponds to an item in
<TT><I>values</I></TT> by position, and
<TT><I>values</I></TT> must have exactly as many items as
<TT><I>format</I></TT> has specifiers (plus one extra for
each width or precision given by <TT>*</TT>). When the
width or precision component of a specifier is given by
<TT>*</TT>, the <TT>*</TT> consumes one item in
<TT><I>values</I></TT>, which must be an integer and is
taken as the number of characters to use as minimum width or
precision of the conversion.</P>


<A NAME="pythonian-CHP-9-SECT-3.2"></A>
<H4 class="docSection2Title">9.3.2 Common String-Formatting Idioms</H4>

<P class="docText"><A NAME="pythonian-CHP-9-ITERM-5201"></A> <A NAME="pythonian-CHP-9-ITERM-5202"></A>It
is quite common for <TT><I>format</I></TT> to contain
several occurrences of <TT>%s</TT> and for
<TT><I>values</I></TT> to be a tuple with exactly as many
items as <TT><I>format</I></TT> has occurrences of
<TT>%s</TT>. The result is a copy of
<TT><I>format</I></TT> where each <TT>%s</TT> is
replaced with <TT>str</TT> applied to the corresponding
item of <TT><I>values</I></TT>. For
example:<A NAME="pythonian-CHP-9-ITERM-5203"></A></P>

<PRE>'%s+%s is %s'%(23,45,68)                # results in: '23+45 is 68'</PRE>

<P class="docText">You can think of <TT>%s</TT> as a fast and concise way to
put together a few values, converted to string form, into a larger
string. For example:</P>

<PRE>oneway = 'x' + str(j) + 'y' + str(j) + 'z'
another = 'x%sy%sz' % (j, j)</PRE>

<P class="docText">After this code is executed, variables <TT>oneway</TT> and
<TT>another</TT> will always be equal, but the computation
of <TT>another</TT>, done via string formatting, is
measurably faster. Which way is clearer and simpler is a matter of
habit: get used to the string-formatting idiom, and it will come to
look simpler and clearer.</P>

<P class="docText"><A NAME="pythonian-CHP-9-ITERM-5204"></A>Apart from <TT>%s</TT>,
other reasonably common format specifiers are those used to format
floating-point values: <TT>%f</TT> for decimal formatting,
<TT>%e</TT> for exponential formatting, and
<TT>%g</TT> for either decimal or exponential formatting,
depending on the number's magnitude. When formatting
floating-point values, you normally specify width and/or precision
modifiers. A width modifier is a number right after the
<TT>%</TT> that gives the minimum width for the resulting
conversion; you generally use a width modifier if
you're formatting a table for display in a
fixed-width font. A precision modifier is a number following a dot
(.) right before the conversion type letter; you
generally use a precision modifier in order to fix the number of
decimal digits displayed for a number, to avoid giving a misleading
impression of excessive precision and wasting display space. For
example:</P>

<PRE>'%.2f'%(1/3.0)                          # results in: '0.33'
'%s'%(1/3.0)                            # results in: '0.333333333333'</PRE>

<P class="docText">With <TT>%s</TT>, you cannot specify how many digits to
display after the decimal point. It is important to avoid giving a
mistaken impression of very high precision when you know that your
numeric results are only accurate to a few digits. Displaying high
precision values might mislead people examining those results into
believing the results are much more accurate than is in fact the
case.<A NAME="pythonian-CHP-9-ITERM-5205"></A>
<A NAME="pythonian-CHP-9-ITERM-5206"></A></P>



<ul></ul>
</td>
</tr>
</table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0596001886_pythonian-chp-9-sect-2.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0596001886_pythonian-chp-9-sect-4.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
