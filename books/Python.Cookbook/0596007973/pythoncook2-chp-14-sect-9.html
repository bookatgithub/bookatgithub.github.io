<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Recipe&nbsp;14.9.&nbsp;Running a Servlet with Jython</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-14-sect-8.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-14-sect-10.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><td valign="top"><a name="pythoncook2-CHP-14-SECT-9"></a>
<h3 class="docSection1Title">Recipe 14.9. Running a Servlet with Jython</h3>

<p class="docText"><span class="docEmphasis">Credit: Brian Zhou</span></p>

<a name="pythoncook2-CHP-14-SECT-9.1"></a>
<h4 class="docSection2Title">Problem</h4>

<p class="docText"><a name="pythoncook2-CHP-14-ITERM-2930"></a> <a name="pythoncook2-CHP-14-ITERM-2931"></a>You need to code a servlet using Jython.</P>


<a name="pythoncook2-CHP-14-SECT-9.2"></a>
<h4 class="docSection2Title">Solution</H4>

<p class="docText">Java (and Jython) are most often deployed server-side, and thus
servlets are a typical way of deploying your code. Jython makes
servlets very easy to use. Here is a tiny "hello
world" example servlet:</p>

<pre>import java, javax, sys
class hello(javax.servlet.http.HttpServlet):
    def doGet(self, request, response):
        response.setContentType("text/html")
        out = response.getOutputStream( )
        print &gt;&gt;out, """&lt;html&gt;
&lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;Hello World from Jython Servlet at %s!
&lt;/body&gt;
&lt;/html&gt;
""" % (java.util.Date( ),)
        out.close( )
        return</pre><BR>



<a name="pythoncook2-CHP-14-SECT-9.3"></a>
<h4 class="docSection2Title">Discussion</H4>

<p class="docText">This recipe is no worse than a typical JSP (Java Server Page) (see
<a class="docLink" target="_blank" href="http://jywiki.sourceforge.net/index.php?JythonServlet">http://jywiki.sourceforge.net/index.php?JythonServlet</a>
for setup instructions). Compare this recipe to the equivalent Java
code: with Python, you're finished coding in the
same time it takes to set up the framework in Java. Most of your
setup work will be strictly related to Tomcat or whichever servlet
container you use. The Jython-specific work is limited to copying
<I>jython.jar</i> to the
<I>WEB-INF/lib</I> subdirectory of your chosen servlet
context and editing <i>WEB-INF/web.xml</i> to add
<tt>&lt;servlet&gt;</tt> and
<tt>&lt;servlet-mapping&gt;</tt> tags so that
<tt>org.python.util.PyServlet</tt> serves the
<i>*.py</i> <tt>&lt;url-pattern&gt;</tt>.</P>

<p class="docText">The key to this recipe (like most other Jython uses) is that your
Jython scripts and modules can import and use Java packages and
classes just as if the latter were Python code or extensions. In
other words, all of the Java libraries that you could use with Java
code are similarly usable with Python (i.e., Jython) code. This
example servlet first uses the standard Java servlet
<tt>response</tt> object to set the resulting
page's content type (to
<tt>text/html</tt>) and to get the output stream.
Afterwards, it can <tt>print</tt> to the output stream,
since the latter is a Python file-like object. To further show off
your seamless access to the Java libraries, you can also use the
<tt>Date</tt> class of the <tt>java.util</tt>
package, incidentally demonstrating how it can be printed as a string
from Jython.</p>


<a name="pythoncook2-CHP-14-SECT-9.4"></a>
<h4 class="docSection2Title">See Also</H4>

<p class="docText">Information on Java servlets at <a class="docLink" target="_blank" href="http://java.sun.com/products/servlet/">http://java.sun.com/products/servlet/</a>;
information on JythonServlet at <a class="docLink" target="_blank" href="http://jywiki.sourceforge.net/index.php?JythonServlet">http://jywiki.sourceforge.net/index.php?JythonServlet</a>.</p>



<UL></ul></TD></TR></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-14-sect-8.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-14-sect-10.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>