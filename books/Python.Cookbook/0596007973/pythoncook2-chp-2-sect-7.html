<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Recipe&nbsp;2.7.&nbsp;Using Random-Access Input/Output</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-2-sect-6.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-2-sect-8.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><td valign="top"><a name="pythoncook2-CHP-2-SECT-7"></a>
<h3 class="docSection1Title" id="409771-892">Recipe 2.7. Using Random-Access Input/Output</h3>

<p class="docText"><span class="docEmphasis">Credit: Luther Blissett</span></p>

<a name="pythoncook2-CHP-2-SECT-7.1"></a>
<h4 class="docSection2Title">Problem</h4>

<p class="docText"><a name="pythoncook2-CHP-2-ITERM-1637"></a>
<a name="pythoncook2-CHP-2-ITERM-1638"></a>You want to read a binary record from
somewhere inside a large file of fixed-length records, without
reading a record at a time to get there.<a name="pythoncook2-CHP-2-ITERM-1639"></a> <a name="pythoncook2-CHP-2-ITERM-1640"></a></P>


<a name="pythoncook2-CHP-2-SECT-7.2"></a>
<h4 class="docSection2Title">Solution</H4>

<p class="docText">The byte offset of the start of a record in the file is the size of a
record, in bytes, multiplied by the progressive number of the record
(counting from 0). So, you can just seek right to the proper spot,
then read the data. For example, to read the seventh record from a
binary file where each record is 48 bytes long:</p>

<pre>thefile = open('somebinfile', 'rb')
record_size = 48
record_number = 6
thefile.seek(record_size * record_number)
buffer = thefile.read(record_size)</pre><BR>


<p class="docText">Note that the <i>record_number</I> of the
<span class="docEmphasis">seventh</span> record is 6: record numbers count from
<span class="docEmphasis">zero</span>!</P>


<a name="pythoncook2-CHP-2-SECT-7.3"></a>
<h4 class="docSection2Title">Discussion</H4>

<p class="docText">This approach works only on files (generally binary ones) defined in
terms of records that are all the same fixed size in bytes; it
doesn't work on normal text files. For clarity, the
recipe shows the file being opened for reading as a binary file by
passing '<tt>rb</tt>' as the second argument to
<tt>open</tt>, just before the <tt>seek</tt>. As
long as the file object is open for reading as a binary file, you can
perform as many <tt>seek</tt> and <tt>read</tt>
operations as you need, before eventually closing the file
againyou don't necessarily open the file just
before performing a <tt>seek</tt> on it.</P>


<a name="pythoncook2-CHP-2-SECT-7.4"></a>
<h4 class="docSection2Title">See Also</h4>

<p class="docText">The section of the <span class="docEmphasis">Library Reference</span> and
<span class="docEmphasis">Python in a Nutshell</span> on file objects;
<span class="docEmphasis">Perl Cookbook</span> recipe 8.12.</p>



<ul></UL></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-2-sect-6.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-2-sect-8.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>