<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Recipe&nbsp;4.3.&nbsp;Returning an Element of a List If It Exists</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-4-sect-2.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-4-sect-4.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><td valign="top"><a name="pythoncook2-CHP-4-SECT-3"></a>
<h3 class="docSection1Title" id="409771-859">Recipe 4.3. Returning an Element of a List If It Exists</h3>

<p class="docText"><span class="docEmphasis">Credit: Nestor Nissen, A. Bass</span></p>

<a name="pythoncook2-CHP-4-SECT-3.1"></a>
<h4 class="docSection2Title">Problem</h4>

<p class="docText"><a name="pythoncook2-CHP-4-ITERM-1804"></a>You have a list
<tt><I>L</i></tt> and an index
<tt><I>i</i></tt>, and you want to get
<tt>L[i]</tt> when <tt><I>i</i></tt> is a valid
index into <tt><I>L</I></tt>; otherwise, you want to get a
default value <tt><i>v</I></tt>. If
<tt><I>L</i></tt> were a dictionary,
you'd use <tt>L.get(i, v)</tt>, but lists
don't have a <tt>get</tt>
method.<a name="pythoncook2-CHP-4-ITERM-1805"></a></p>


<a name="pythoncook2-CHP-4-SECT-3.2"></a>
<h4 class="docSection2Title">Solution</h4>

<p class="docText">Clearly, we need to code a function, and, in this case, the simplest
and most direct approach is the best one:</P>

<pre>def list_get(L, i, v=None):
    if -len(L) &lt;= i &lt; len(L): return L[i]
    else: return v</pre><br>



<a name="pythoncook2-CHP-4-SECT-3.3"></a>
<h4 class="docSection2Title">Discussion</H4>

<p class="docText">The function in this recipe just checks whether
<tt><i>i</I></tt> is a valid index by applying
Python's indexing rule: valid indices are negative
ones down to <tt>-len(L)</tt> inclusive, and non-negative
ones up to <tt>len(L)</tt> exclusive. If almost all calls
to <i>list_get</I> pass a valid index value for
<tt><I>i</i></tt>, you might prefer an alternative
approach:</p>

<pre>def list_get_egfp(L, i, v=None):
    try: return L[i]
    except IndexError: return v</pre><br>


<p class="docText">However, unless a vast majority of the calls pass a valid index, this
alternative (as some time-measurements show) can be up to four times
slower than the <i>list_get</i> function shown in the
solution. Therefore, this "easier to get forgiveness
than permission" (EGFP) approach, although it is
often preferable in Python, cannot be recommended for this specific
case.</p>

<p class="docText">I've also tried quite a few fancy, intricate and
obscure approaches, but, besides being hard to explain and to
understand, they all end up slower than the plain, simple function
<i>list_get</i>. General principle: when you write Python
code, prefer clarity and readability to compactness and
tersenesschoose simplicity over subtlety. You often will be
rewarded with code that runs faster, and invariably, you will end up
with code that is less prone to bugs and is easier to maintain, which
is far more important than minor speed differences in 99.9% of the
cases you encounter in the real world.</p>


<a name="pythoncook2-CHP-4-SECT-3.4"></a>
<h4 class="docSection2Title">See Also</h4>

<p class="docText"><span class="docEmphasis">Language Reference</span> and <span class="docEmphasis">Python in a
Nutshell</span> documentation on list indexing.</p>



<ul></UL></TD></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=pythoncook2-chp-4-sect-2.html><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href=pythoncook2-chp-4-sect-4.html><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>