<HTML
><HEAD
>
<TITLE>[Appendix B] Quick Reference for awk</TITLE>
<META
NAME="DC.title"
CONTENT="sed &amp; awk"><META
NAME="DC.creator"
CONTENT="Dale Dougherty &amp; Arnold Robbins"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T21:06:26Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-225-5"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="index.htm"
TITLE="sed &amp; awk"><LINK
REL="prev"
HREF="appa_03.htm"
TITLE="A.3 Command Summary for sed"><LINK
REL="next"
HREF="appb_02.htm"
TITLE="B.2 Language Summary for awk"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="sed &amp; awk"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/ssrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="appa_03.htm"
TITLE="A.3 Command Summary for sed"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: A.3 Command Summary for sed"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Appendix B</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="appb_02.htm"
TITLE="B.2 Language Summary for awk"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: B.2 Language Summary for awk"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="APPENDIX"
><H1
CLASS="appendix"
><A
CLASS="title"
NAME="SEDAWK-APP-B"
>B. Quick Reference for awk</A
></H1
><DIV
CLASS="htmltoc"
><P
><B
>Contents:</B
><BR><A
CLASS="sect1"
HREF="#SEDAWK-APP-B-SECT-1"
TITLE="B.1 Command-Line Syntax"
>Command-Line Syntax</A
><BR><A
CLASS="sect1"
HREF="appb_02.htm"
TITLE="B.2 Language Summary for awk"
>Language Summary for awk</A
><BR><A
CLASS="sect1"
HREF="appb_03.htm"
TITLE="B.3 Command Summary for awk"
>Command Summary for awk</A
></P
><P
></P
></DIV
><P
CLASS="para"
>This appendix describes the features of the awk scripting language.<A
CLASS="indexterm"
NAME="B.AWK1"
></A
></P
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="SEDAWK-APP-B-SECT-1"
>B.1 Command-Line Syntax</A
></H2
><P
CLASS="para"
>The syntax for invoking awk has two basic forms: <A
CLASS="indexterm"
NAME="AUTOID-12130"
></A
><A
CLASS="indexterm"
NAME="AUTOID-12133"
></A
><A
CLASS="indexterm"
NAME="AUTOID-12135"
></A
></P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
><KBD
CLASS="command"
>awk</KBD
> [<I
CLASS="option"
>-v</I
> <EM
CLASS="emphasis"
>var</EM
>=<EM
CLASS="emphasis"
>value</EM
>] [<I
CLASS="option"
>-F</I
><EM
CLASS="emphasis"
>re</EM
>] [<I
CLASS="option"
>--</I
>] '<EM
CLASS="emphasis"
>pattern</EM
> { <EM
CLASS="emphasis"
>action</EM
> }' <EM
CLASS="emphasis"
>var</EM
>=<EM
CLASS="emphasis"
>value</EM
> <EM
CLASS="emphasis"
>datafile(s)</EM
><BR><KBD
CLASS="command"
>awk</KBD
> [<I
CLASS="option"
>-v</I
> <EM
CLASS="emphasis"
>var</EM
>=<EM
CLASS="emphasis"
>value</EM
>] [<I
CLASS="option"
>-F</I
><EM
CLASS="emphasis"
>re</EM
>] <I
CLASS="option"
>-f</I
> <EM
CLASS="emphasis"
>scriptfile</EM
> [<KBD
CLASS="command"
>--</KBD
>] <EM
CLASS="emphasis"
>var</EM
>=<EM
CLASS="emphasis"
>value</EM
> <EM
CLASS="emphasis"
>datafile(s)</EM
></P
></BLOCKQUOTE
><P
CLASS="para"
>An awk command line consists of the command, the script and the input
filename.  Input is read from the file specified on the command line.
If there is no input file or &quot;-&quot; is specified, then standard input is
read.  The <I
CLASS="option"
>-F</I
> option sets the field separator
(<KBD
CLASS="command"
>FS</KBD
>) to <EM
CLASS="emphasis"
>re</EM
>.</P
><P
CLASS="para"
>The <I
CLASS="option"
>-v</I
> option sets the variable
<EM
CLASS="emphasis"
>var</EM
> to <EM
CLASS="emphasis"
>value</EM
> before
the script is executed. This happens even before the
<KBD
CLASS="command"
>BEGIN</KBD
> procedure is run.  (See the discussion below on
command-line parameters.)</P
><P
CLASS="para"
>Following POSIX argument parsing conventions, the &quot;<I
CLASS="option"
>--</I
>&quot;
option marks the end of command-line options.  Using this option, for
instance, you could specify a <EM
CLASS="emphasis"
>datafile</EM
> that
begins with &quot;-&quot;, which would otherwise be confused with a command-line
option.</P
><P
CLASS="para"
>You can specify a script consisting of
<EM
CLASS="emphasis"
>pattern</EM
> and
<EM
CLASS="emphasis"
>action</EM
> on the command line, surrounded by
single quotes.  Alternatively, you can place the script in a separate
file and specify the name of the <EM
CLASS="emphasis"
>scriptfile</EM
>
on the command line with the <I
CLASS="option"
>-f</I
> option.</P
><P
CLASS="para"
>Parameters can be passed into awk by specifying them on the command
line after the script.  This includes setting system variables such as
<KBD
CLASS="command"
>FS</KBD
>, <KBD
CLASS="command"
>OFS</KBD
>, and
<KBD
CLASS="command"
>RS</KBD
>.  The <EM
CLASS="emphasis"
>value</EM
> can be a
literal, a shell variable ($<EM
CLASS="emphasis"
>var</EM
>) or the
result of a command
(`<EM
CLASS="emphasis"
>cmd</EM
>`); it must be
quoted if it contains spaces or tabs.  Any number of parameters can be
specified.</P
><P
CLASS="para"
>Command-line parameters are not available until the first line of
input is read, and thus cannot be accessed in the
<KBD
CLASS="command"
>BEGIN</KBD
> procedure.  (Older implementations of awk and
nawk would process leading command-line assignments before running the
<KBD
CLASS="command"
>BEGIN</KBD
> procedure. This was contrary to how things
were documented in <CITE
CLASS="citetitle"
>The AWK Programming Language</CITE
>,
which says that they are processed when awk would go to open them as
filenames, i.e., after the <KBD
CLASS="command"
>BEGIN</KBD
> procedure. The
Bell Labs awk was changed to correct this, and the
<I
CLASS="option"
>-v</I
> option was added at the same time, in early
1989.  It is now part of POSIX awk.)  Parameters are evaluated in the
order in which they appear on the command line up until a filename is
recognized.  Parameters appearing after that filename will be
available when the next filename is recognized.</P
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="SEDAWK-APP-B-SECT-1.1"
>B.1.1 Shell Wrapper for Invoking awk</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-12196"
></A
><A
CLASS="indexterm"
NAME="AUTOID-12199"
></A
>Typing a script at the system prompt is only practical for simple,
one-line scripts.  Any script that you might invoke as a command and
reuse can be put inside a shell script.  Using a shell script to
invoke awk makes the script easy for others to use.</P
><P
CLASS="para"
>You can put the command line that invokes awk in a file, giving it a
name that identifies what the script does.  Make that file executable
(using the <KBD
CLASS="command"
>chmod</KBD
> command) and put it in a directory
where local commands are kept.  The name of the shell script can be
typed on the command line to execute the awk script.  This is
preferred for easily used and reused scripts.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-12204"
></A
><A
CLASS="indexterm"
NAME="AUTOID-12207"
></A
>On modern UNIX systems, including Linux, you can use the #! syntax
to create self-contained awk scripts:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
><CODE
CLASS="literal"
>#! /usr/bin/awk -f</CODE
><BR><EM
CLASS="emphasis"
>script</EM
></P
></BLOCKQUOTE
><P
CLASS="para"
>Awk parameters and the input filename can be specified on the command
line that invokes the shell script.  Note that the pathname to use is
system-dependent.</P
></DIV
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="appa_03.htm"
TITLE="A.3 Command Summary for sed"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: A.3 Command Summary for sed"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="sed &amp; awk"
><IMG
SRC="../gifs/txthome.gif"
ALT="sed &amp; awk"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="appb_02.htm"
TITLE="B.2 Language Summary for awk"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: B.2 Language Summary for awk"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>A.3 Command Summary for sed</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>B.2 Language Summary for awk</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="../lrnunix/index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
