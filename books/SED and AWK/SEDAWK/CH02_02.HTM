<HTML
><HEAD
>
<TITLE>[Chapter 2] 2.2 Command-Line Syntax</TITLE>
<META
NAME="DC.title"
CONTENT="sed &amp; awk"><META
NAME="DC.creator"
CONTENT="Dale Dougherty &amp; Arnold Robbins"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T20:49:39Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-225-5"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch02_01.htm"
TITLE="2. Understanding Basic Operations"><LINK
REL="prev"
HREF="ch02_01.htm"
TITLE="2.1 Awk, by Sed and Grep, out of Ed"><LINK
REL="next"
HREF="ch02_03.htm"
TITLE="2.3 Using sed"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="sed &amp; awk"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/ssrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch02_01.htm"
TITLE="2.1 Awk, by Sed and Grep, out of Ed"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 2.1 Awk, by Sed and Grep, out of Ed"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 2<BR>Understanding Basic Operations</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch02_03.htm"
TITLE="2.3 Using sed"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 2.3 Using sed"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="SEDAWK-CH-2-SECT-2"
>2.2 Command-Line Syntax</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-793"
></A
><A
CLASS="indexterm"
NAME="AUTOID-796"
></A
><A
CLASS="indexterm"
NAME="AUTOID-798"
></A
><A
CLASS="indexterm"
NAME="AUTOID-801"
></A
>You invoke sed and awk in much the same way.  The command-line
syntax is:</P
><BLOCKQUOTE
CLASS="blockquote"
><P
CLASS="para"
><CODE
CLASS="replaceable"
><I
>command </I
></CODE
>[<CODE
CLASS="replaceable"
><I
>options</I
></CODE
>] <CODE
CLASS="replaceable"
><I
>script filename</I
></CODE
></P
></BLOCKQUOTE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-810"
></A
><A
CLASS="indexterm"
NAME="AUTOID-812"
></A
><A
CLASS="indexterm"
NAME="AUTOID-814"
></A
><A
CLASS="indexterm"
NAME="AUTOID-816"
></A
>Like almost all UNIX programs, sed and awk can take input from
standard input and send the output to standard output.  If a
<EM
CLASS="emphasis"
>filename</EM
> is specified, input is taken from
that file. The output
contains the processed information.  Standard output is the display
screen, and typically the output from these programs is directed
there.  It can also be sent to a file, using I/O redirection in the
shell, but it must not go to the same file that supplies input to the
program.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-821"
></A
>The <EM
CLASS="emphasis"
>options</EM
> for each command are different.  
We will demonstrate many of these options in upcoming sections. 
(The complete list
of command-line options for sed can be found in <A
CLASS="xref"
HREF="appa_01.htm"
TITLE="Quick Reference for sed"
>Appendix A, Quick Reference for sed</A
>;
the complete list of options for awk is in <A
CLASS="xref"
HREF="appb_01.htm"
TITLE="Quick Reference for awk"
>Appendix B, Quick Reference for awk</A
>.)</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-827"
></A
><A
CLASS="indexterm"
NAME="AUTOID-829"
></A
><A
CLASS="indexterm"
NAME="AUTOID-831"
></A
><A
CLASS="indexterm"
NAME="AUTOID-833"
></A
>The <EM
CLASS="emphasis"
>script</EM
> specifies what instructions to perform. 
If specified on the command line, the script must
be surrounded in single quotes if it contains a space or any
characters that might be interpreted by the shell ($ and * for
instance).  </P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-837"
></A
><A
CLASS="indexterm"
NAME="AUTOID-839"
></A
><A
CLASS="indexterm"
NAME="AUTOID-842"
></A
>One option common to both sed and awk is
the <I
CLASS="option"
>-f</I
> option 
that allows you to specify the name of a script file. 
As a script grows in size, it is convenient to place
it in a file.  Thus, you might invoke sed as follows:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
><CODE
CLASS="literal"
>sed -f</CODE
> <CODE
CLASS="replaceable"
><I
>scriptfile</I
></CODE
> <CODE
CLASS="replaceable"
><I
>inputfile</I
></CODE
></P
></BLOCKQUOTE
><P
CLASS="para"
><A
CLASS="xref"
HREF="ch02_02.htm#SEDAWK-CH-2-FIG-1"
TITLE="How sed and awk work"
>Figure 2.1</A
> shows the basic operation of sed
and awk.  Each program reads one input line at a time from the input
file, makes a copy of the input line, and executes the instructions
specified in the script on that copy.  Thus, changes made to the input
line do not affect the actual input file.</P
><H4
CLASS="figure"
><A
CLASS="title"
NAME="SEDAWK-CH-2-FIG-1"
>Figure 2.1: How sed and awk work</A
></H4
><IMG
CLASS="graphic"
SRC="figs/sed_0201.gif"
ALT="Figure 2.1"><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="SEDAWK-CH-2-SECT-2.1"
>2.2.1 Scripting</A
></H3
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-858"
></A
>A script is where you tell the program what to do.  At least one line of
instruction is required.  Short scripts can be specified on the
command line; longer scripts are usually placed in a file where they
can easily be revised and tested.  In writing a script, keep in mind
the sequence in which instructions will be executed and how each
instruction changes the input line.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-861"
></A
><A
CLASS="indexterm"
NAME="AUTOID-863"
></A
><A
CLASS="indexterm"
NAME="AUTOID-865"
></A
><A
CLASS="indexterm"
NAME="AUTOID-867"
></A
><A
CLASS="indexterm"
NAME="AUTOID-869"
></A
>In sed and awk, each instruction has two parts: a
<EM
CLASS="emphasis"
>pattern</EM
> and a
<EM
CLASS="emphasis"
>procedure</EM
>.  The pattern is a regular
expression delimited with slashes (/).  A procedure specifies
one or more actions to be performed.</P
><P
CLASS="para"
>As each line of input is read, the program reads the first instruction
in the script and checks the <EM
CLASS="emphasis"
>pattern</EM
>
against the current line.  If there is no match, the
<EM
CLASS="emphasis"
>procedure</EM
> is ignored and the next
instruction is read.  If there is a match, then the action or actions
specified in the <EM
CLASS="emphasis"
>procedure</EM
> are followed.
All of the instructions are read, not just the first instruction that
matches the input line.</P
><P
CLASS="para"
>When all the applicable instructions have been interpreted and applied
for a single line, sed outputs the line and repeats the cycle for each
input line.  Awk, on the other hand, does not
<EM
CLASS="emphasis"
>automatically</EM
> output the line; the instructions
in your script control what is finally done with it.</P
><P
CLASS="para"
>The contents of a procedure are very different in sed and awk.  In
sed, the procedure consists of editing commands like those used in the
line editor.  Most commands consist of a single letter.</P
><P
CLASS="para"
>In awk, the procedure consists of programming statements and
functions.  A procedure must be surrounded by braces.</P
><P
CLASS="para"
>In the sections that follow, we'll look at a few scripts that process
a sample mailing list.</P
></DIV
><DIV
CLASS="sect2"
><H3
CLASS="sect2"
><A
CLASS="title"
NAME="SEDAWK-CH-2-SECT-2.2"
>2.2.2 Sample Mailing List</A
></H3
><P
CLASS="para"
>In the upcoming sections, the examples use a sample file, named
<EM
CLASS="emphasis"
>list</EM
>.  It contains a list of names and addresses,
as shown below.</P
><P
CLASS="para"
><BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>$ <CODE
CLASS="userinput"
><B
>cat list</B
></CODE
>
John Daggett, 341 King Road, Plymouth MA
Alice Ford, 22 East Broadway, Richmond VA
Orville Thomas, 11345 Oak Bridge Road, Tulsa OK
Terry Kalkas, 402 Lans Road, Beaver Falls PA
Eric Adams, 20 Post Road, Sudbury MA
Hubert Sims, 328A Brook Road, Roanoke VA
Amy Wilde, 334 Bayshore Pkwy, Mountain View CA
Sal Carpenter, 73 6th Street, Boston MA</PRE
></BLOCKQUOTE
></P
><P
CLASS="para"
>If you like, create this file on your system or use a similar one of
your own making.  Because many of the examples in this chapter are
short and interactive, you can enter them at your keyboard and verify
the results.</P
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch02_01.htm"
TITLE="2.1 Awk, by Sed and Grep, out of Ed"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 2.1 Awk, by Sed and Grep, out of Ed"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="sed &amp; awk"
><IMG
SRC="../gifs/txthome.gif"
ALT="sed &amp; awk"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch02_03.htm"
TITLE="2.3 Using sed"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 2.3 Using sed"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>2.1 Awk, by Sed and Grep, out of Ed</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>2.3 Using sed</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="../lrnunix/index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
