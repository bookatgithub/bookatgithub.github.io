<HTML
><HEAD
>
<TITLE>[Chapter 5] Basic sed Commands</TITLE>
<META
NAME="DC.title"
CONTENT="sed &amp; awk"><META
NAME="DC.creator"
CONTENT="Dale Dougherty &amp; Arnold Robbins"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T20:53:28Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-225-5"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="index.htm"
TITLE="sed &amp; awk"><LINK
REL="prev"
HREF="ch04_05.htm"
TITLE="4.5 Getting to the PromiSed Land"><LINK
REL="next"
HREF="ch05_02.htm"
TITLE="5.2 Comment"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="sed &amp; awk"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/ssrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch04_05.htm"
TITLE="4.5 Getting to the PromiSed Land"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 4.5 Getting to the PromiSed Land"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 5</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_02.htm"
TITLE="5.2 Comment"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 5.2 Comment"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="CHAPTER"
><H1
CLASS="chapter"
><A
CLASS="title"
NAME="SEDAWK-CH-5"
>5. Basic sed Commands</A
></H1
><DIV
CLASS="htmltoc"
><P
><B
>Contents:</B
><BR><A
CLASS="sect1"
HREF="#SEDAWK-CH-5-SECT-1"
TITLE="5.1 About the Syntax of sed Commands"
>About the Syntax of sed Commands</A
><BR><A
CLASS="sect1"
HREF="ch05_02.htm"
TITLE="5.2 Comment"
>Comment</A
><BR><A
CLASS="sect1"
HREF="ch05_03.htm"
TITLE="5.3 Substitution"
>Substitution</A
><BR><A
CLASS="sect1"
HREF="ch05_04.htm"
TITLE="5.4 Delete"
>Delete</A
><BR><A
CLASS="sect1"
HREF="ch05_05.htm"
TITLE="5.5 Append, Insert, and Change"
>Append, Insert, and Change</A
><BR><A
CLASS="sect1"
HREF="ch05_06.htm"
TITLE="5.6 List"
>List</A
><BR><A
CLASS="sect1"
HREF="ch05_07.htm"
TITLE="5.7 Transform"
>Transform</A
><BR><A
CLASS="sect1"
HREF="ch05_08.htm"
TITLE="5.8 Print"
>Print</A
><BR><A
CLASS="sect1"
HREF="ch05_09.htm"
TITLE="5.9 Print Line Number"
>Print Line Number</A
><BR><A
CLASS="sect1"
HREF="ch05_10.htm"
TITLE="5.10 Next"
>Next</A
><BR><A
CLASS="sect1"
HREF="ch05_11.htm"
TITLE="5.11 Reading and Writing Files"
>Reading and Writing Files</A
><BR><A
CLASS="sect1"
HREF="ch05_12.htm"
TITLE="5.12 Quit"
>Quit</A
></P
><P
></P
></DIV
><P
CLASS="para"
>The sed command set consists of 25 commands.  In this chapter, we
introduce four new editing commands: <KBD
CLASS="command"
>d</KBD
> (delete),
<KBD
CLASS="command"
>a</KBD
> (append), <KBD
CLASS="command"
>i</KBD
> (insert), and
<KBD
CLASS="command"
>c</KBD
> (change).  We also look at ways to change the
flow control (i.e., determine which command is executed next) within a
script.<A
CLASS="indexterm"
NAME="CH05.COMM1"
></A
><A
CLASS="indexterm"
NAME="CH05.COMM2"
></A
></P
><DIV
CLASS="sect1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="SEDAWK-CH-5-SECT-1"
>5.1 About the Syntax of sed Commands</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3140"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3143"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3147"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3151"
></A
>Before looking at individual commands, there are a couple of points to
review about the syntax of all sed commands.  We covered most of this
material in the previous chapter.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3156"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3158"
></A
>A line address is optional with any command.  It can be a pattern
described as a regular expression surrounded by slashes, a line
number, or a line-addressing symbol.  Most sed commands can accept two
comma-separated addresses that indicate a range of lines.  For these
commands, our convention is to specify:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
>[<CODE
CLASS="replaceable"
><I
>address</I
></CODE
>]<CODE
CLASS="replaceable"
><I
>command</I
></CODE
></P
></BLOCKQUOTE
><P
CLASS="para"
>A few commands accept only a single line address.  They cannot be
applied to a range of lines.  The convention for them is:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
>[<CODE
CLASS="replaceable"
><I
>line-address</I
></CODE
>]<CODE
CLASS="replaceable"
><I
>command</I
></CODE
></P
></BLOCKQUOTE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3168"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3171"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3174"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3176"
></A
>Remember also that commands can be grouped at the same address by
surrounding the list of commands in braces:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
><CODE
CLASS="replaceable"
><I
>address</I
></CODE
> { <BR>		<CODE
CLASS="replaceable"
><I
>command1</I
></CODE
><BR>		<CODE
CLASS="replaceable"
><I
>command2</I
></CODE
><BR>		<CODE
CLASS="replaceable"
><I
>command3</I
></CODE
><BR>}</P
></BLOCKQUOTE
><P
CLASS="para"
>The first command can be placed on the same line with the opening
brace but the closing brace must appear on its own line.  Each command
can have its own address and multiple levels of grouping are
permitted.  Also, as you can see from the indentation of the commands
inside the braces, spaces, and tabs at the beginning of lines are
permitted.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3186"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3189"
></A
>When sed is unable to understand a command, it prints the message
&quot;Command garbled.&quot;  One subtle syntax error is adding a space after a
command.  This is not allowed; the end of a command must be at the end
of the line.</P
><P
CLASS="para"
>Proof of this restriction is offered by an &quot;undocumented&quot; feature:
multiple sed commands can be placed on the same line if each one is
separated by a semicolon.[1] 
The following example is syntactically correct:</P
><BLOCKQUOTE
CLASS="footnote"
><P
CLASS="para"
>[1] Surprisingly, the use of semicolons to separate commands is not
documented in the POSIX standard.  </P
></BLOCKQUOTE
><BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>n;d</PRE
></BLOCKQUOTE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3196"
></A
>However, putting a space after the <KBD
CLASS="command"
>n</KBD
> command causes
a syntax error.  Putting a space <EM
CLASS="emphasis"
>before</EM
> the
<KBD
CLASS="command"
>d</KBD
> command is okay.</P
><P
CLASS="para"
>Placing multiple commands on the same line is highly discouraged
because sed scripts are difficult enough to read even when each
command is written on its own line.  (Note that the change, insert,
and append commands must be specified over multiple lines and cannot
be specified on the same line.)</P
><A
CLASS="indexterm"
NAME="AUTOID-3202"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3203"
></A
></DIV
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch04_05.htm"
TITLE="4.5 Getting to the PromiSed Land"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 4.5 Getting to the PromiSed Land"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="sed &amp; awk"
><IMG
SRC="../gifs/txthome.gif"
ALT="sed &amp; awk"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_02.htm"
TITLE="5.2 Comment"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 5.2 Comment"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>4.5 Getting to the PromiSed Land</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>5.2 Comment</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="../lrnunix/index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
