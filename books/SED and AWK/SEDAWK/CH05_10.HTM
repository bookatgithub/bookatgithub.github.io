<HTML
><HEAD
>
<TITLE>[Chapter 5] 5.10 Next</TITLE>
<META
NAME="DC.title"
CONTENT="sed &amp; awk"><META
NAME="DC.creator"
CONTENT="Dale Dougherty &amp; Arnold Robbins"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T20:54:31Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-225-5"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch05_01.htm"
TITLE="5. Basic sed Commands"><LINK
REL="prev"
HREF="ch05_09.htm"
TITLE="5.9 Print Line Number"><LINK
REL="next"
HREF="ch05_11.htm"
TITLE="5.11 Reading and Writing Files"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="sed &amp; awk"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/ssrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_09.htm"
TITLE="5.9 Print Line Number"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 5.9 Print Line Number"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 5<BR>Basic sed Commands</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_11.htm"
TITLE="5.11 Reading and Writing Files"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 5.11 Reading and Writing Files"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="SEDAWK-CH-5-SECT-10"
>5.10 Next</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3808"
></A
><A
CLASS="indexterm"
NAME="AUTOID-3810"
></A
>The next command (<KBD
CLASS="command"
>n</KBD
>) outputs the contents of the
pattern space and then reads the next line of input
<EM
CLASS="emphasis"
>without</EM
> returning to the top of the script.  Its
syntax is:</P
><BLOCKQUOTE
CLASS="literallayout"
><P
CLASS="literallayout"
>[<CODE
CLASS="replaceable"
><I
>address</I
></CODE
>]<KBD
CLASS="command"
>n</KBD
></P
></BLOCKQUOTE
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-3819"
></A
>The next command changes the normal flow control, which doesn't output
the contents of the pattern space until the bottom of the script is
reached and which always begins at the top of the script after reading
in a new line.  In effect, the next command causes the next line of
input to replace the current line in the pattern space.  Subsequent
commands in the script are applied to the replacement line, not the
current line.  If the default output has not been suppressed, the
current line is printed before the replacement takes place.</P
><P
CLASS="para"
>Let's look at an example of the next command in which we delete a
blank line only when it follows a pattern matched on the previous
line.  In this case, a writer has inserted a blank line after a
section heading macro (<KBD
CLASS="command"
>.H1</KBD
>).  We want to remove
that blank line without removing all blank lines in the file.  Here's
the sample file:</P
><BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>.H1 &quot;On Egypt&quot;

Napoleon, pointing to the Pyramids, said to his troops: 
&quot;Soldiers, forty centuries have their eyes upon you.&quot;</PRE
></BLOCKQUOTE
><P
CLASS="para"
>The following script removes that blank line:</P
><BLOCKQUOTE
CLASS="screen"
><PRE
CLASS="screen"
>/^\.H1/{
n
/^$/d
}</PRE
></BLOCKQUOTE
><P
CLASS="para"
>You can read this script as follows: &quot;Match any line beginning with
the string `.H1', then print that line and read in the next line.  If
that line is blank, delete it.&quot;  The braces are used to apply multiple
commands at the same address.</P
><P
CLASS="para"
>In a longer script, you must remember that commands occurring
before the next command will not be applied to the new input line, nor
will commands occuring after it be applied to the old input line.</P
><P
CLASS="para"
>You'll see additional examples of the <KBD
CLASS="command"
>n</KBD
> command
in <A
CLASS="xref"
HREF="ch06_01.htm"
TITLE="Advanced sed Commands"
>Chapter 6</A
>, along with a multiline version of
this command.</P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_09.htm"
TITLE="5.9 Print Line Number"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 5.9 Print Line Number"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="sed &amp; awk"
><IMG
SRC="../gifs/txthome.gif"
ALT="sed &amp; awk"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch05_11.htm"
TITLE="5.11 Reading and Writing Files"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 5.11 Reading and Writing Files"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>5.9 Print Line Number</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>5.11 Reading and Writing Files</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="../lrnunix/index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
