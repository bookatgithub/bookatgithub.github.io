<HTML
><HEAD
>
<TITLE>[Chapter 10] 10.8 Limitations</TITLE>
<META
NAME="DC.title"
CONTENT="sed &amp; awk"><META
NAME="DC.creator"
CONTENT="Dale Dougherty &amp; Arnold Robbins"><META
NAME="DC.publisher"
CONTENT="O'Reilly &amp; Associates, Inc."><META
NAME="DC.date"
CONTENT="1998-08-03T21:02:23Z"><META
NAME="DC.type"
CONTENT="Text.Monograph"><META
NAME="DC.format"
CONTENT="text/html"
SCHEME="MIME"><META
NAME="DC.source"
CONTENT="1-56592-225-5"
SCHEME="ISBN"><META
NAME="DC.language"
CONTENT="en-US"><META
NAME="generator"
CONTENT="Jade 1.1/O'Reilly DocBook 3.0 to HTML 4.0"><LINK
REV="made"
HREF="mailto:online-books@oreilly.com"
TITLE="Online Books Comments"><LINK
REL="up"
HREF="ch10_01.htm"
TITLE="10. The Bottom Drawer"><LINK
REL="prev"
HREF="ch10_07.htm"
TITLE="10.7 Debugging"><LINK
REL="next"
HREF="ch10_09.htm"
TITLE="10.9 Invoking awk Using the #! Syntax"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="htmlnav"
><H1
><IMG
SRC="gifs/smbanner.gif"
ALT="sed &amp; awk"
USEMAP="#srchmap"
BORDER="0"></H1
><MAP
NAME="srchmap"
><AREA
SHAPE="RECT"
COORDS="0,0,466,65"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="467,0,514,18"
HREF="../search/ssrch.htm"
ALT="Search this book"></MAP
><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch10_07.htm"
TITLE="10.7 Debugging"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 10.7 Debugging"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><B
><FONT
FACE="ARIEL,HELVETICA,HELV,SANSERIF"
SIZE="-1"
>Chapter 10<BR>The Bottom Drawer</FONT
></B
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch10_09.htm"
TITLE="10.9 Invoking awk Using the #! Syntax"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 10.9 Invoking awk Using the #! Syntax"
BORDER="0"></A
></TD
></TR
></TABLE
>&nbsp;<HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"></DIV
><DIV
CLASS="SECT1"
><H2
CLASS="sect1"
><A
CLASS="title"
NAME="SEDAWK-CH-10-SECT-8"
>10.8 Limitations</A
></H2
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-8848"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8850"
></A
>There are fixed limits within any awk implementation.  The only
trouble is that the documentation seldom reports them.
<A
CLASS="xref"
HREF="ch10_08.htm#SEDAWK-CH-10-TAB-1"
TITLE="Limitations"
>Table 10.1</A
>
lists the limitations as described in <EM
CLASS="emphasis"
>The AWK Programming
Language</EM
>.  These limitations are implementation-specific
but they are good ballpark figures for most systems.</P
><TABLE
CLASS="table"
><CAPTION
CLASS="table"
><A
CLASS="title"
NAME="SEDAWK-CH-10-TAB-1"
>Table 10.1: Limitations</A
></CAPTION
><THEAD
CLASS="thead"
><TR
CLASS="row"
VALIGN="TOP"
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Item</TH
><TH
CLASS="entry"
ALIGN="LEFT"
ROWSPAN="1"
COLSPAN="1"
>Limit</TH
></TR
></THEAD
><TBODY
CLASS="tbody"
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Number of fields per record</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>100</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters per input record</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>3000</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters per output record</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>3000</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters per field</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>1024</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters per printf string</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>3000
<A
CLASS="indexterm"
NAME="AUTOID-8879"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8882"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8885"
></A
>&#13;</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters in literal string</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>400</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Characters in character class</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>400</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Files open</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>15</TD
></TR
><TR
CLASS="row"
VALIGN="TOP"
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>Pipes open</TD
><TD
CLASS="entry"
ROWSPAN="1"
COLSPAN="1"
>1</TD
></TR
></TBODY
></TABLE
><BLOCKQUOTE
CLASS="note"
><P
CLASS="para"
><STRONG
>NOTE:</STRONG
> Despite the number in <A
CLASS="xref"
HREF="ch10_08.htm#SEDAWK-CH-10-TAB-1"
TITLE="Limitations"
>Table 10.1</A
>, experience
has shown that most awks allow you to have more than one open pipe.</P
></BLOCKQUOTE
><P
CLASS="para"
>In terms of numeric values, awk uses double-precision, floating-point
numbers that are limited in size by the machine's architecture.</P
><P
CLASS="para"
>Running into these limits can cause unanticipated problems with
scripts.  In developing examples for the first edition of this book,
Dale thought he'd write a search program that could look for a word or
sequence of words in a single paragraph.  The idea was to read a
document as a series of multiline records and if any of the fields
contained the search term, print the record, which was a
paragraph.  It could be used to search through mail files where blank
lines delimit paragraphs.  The resulting program worked for small test
files.  However, when tried on larger files, the program dumped core
because it encountered a paragraph that was longer than the maximum
input record size, which is 3000 characters.  (Actually, the file
contained an included mail message where blank lines within the
message were prefixed by &quot;&gt;&quot;.)  Thus, when reading multiple lines
as a single record, you better be sure that you don't anticipate
records longer than 3000 characters.  By the way, there is no
particular error message that alerts you to the fact that the problem
is the size of the current record.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-8906"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8908"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8910"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8913"
></A
>Fortunately, gawk and mawk (see <A
CLASS="xref"
HREF="ch11_01.htm"
TITLE="A Flock of awks"
>Chapter 11, A Flock of awks</A
>) don't
have such small limits; for example, the number of fields in a record is
limited in gawk to the maximum value that can be held in a C
<KBD
CLASS="command"
>long</KBD
>, and certainly records can be longer than 3000
characters.  These versions allow you to have more open files and pipes.</P
><P
CLASS="para"
><A
CLASS="indexterm"
NAME="AUTOID-8919"
></A
><A
CLASS="indexterm"
NAME="AUTOID-8921"
></A
>Recent versions of the Bell Labs awk have two options,
<I
CLASS="option"
>-mf</I
> <CODE
CLASS="replaceable"
><I
>N</I
></CODE
> and
<I
CLASS="option"
>-mr</I
> <CODE
CLASS="replaceable"
><I
>N</I
></CODE
>, that allow you to
set the maximum number of fields and the maximum record size on the
command line, as an emergency way to get around the default limits.</P
><P
CLASS="para"
>(Sed implementations also have their own limits, which aren't
documented.  Experience has shown that most UNIX versions of sed have
a limit of 99 or 100 substitute (<KBD
CLASS="command"
>s</KBD
>) commands.)</P
></DIV
><DIV
CLASS="htmlnav"
><P
></P
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><TABLE
WIDTH="515"
BORDER="0"
CELLSPACING="0"
CELLPADDING="0"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch10_07.htm"
TITLE="10.7 Debugging"
><IMG
SRC="../gifs/txtpreva.gif"
ALT="Previous: 10.7 Debugging"
BORDER="0"></A
></TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="book"
HREF="index.htm"
TITLE="sed &amp; awk"
><IMG
SRC="../gifs/txthome.gif"
ALT="sed &amp; awk"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
><A
CLASS="SECT1"
HREF="ch10_09.htm"
TITLE="10.9 Invoking awk Using the #! Syntax"
><IMG
SRC="../gifs/txtnexta.gif"
ALT="Next: 10.9 Invoking awk Using the #! Syntax"
BORDER="0"></A
></TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="172"
>10.7 Debugging</TD
><TD
ALIGN="CENTER"
VALIGN="TOP"
WIDTH="171"
><A
CLASS="index"
HREF="index/idx_0.htm"
TITLE="Book Index"
><IMG
SRC="../gifs/index.gif"
ALT="Book Index"
BORDER="0"></A
></TD
><TD
ALIGN="RIGHT"
VALIGN="TOP"
WIDTH="172"
>10.9 Invoking awk Using the #! Syntax</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="515"
TITLE="footer"><IMG
SRC="../gifs/smnavbar.gif"
USEMAP="#map"
BORDER="0"
ALT="The UNIX CD Bookshelf Navigation"><MAP
NAME="map"
><AREA
SHAPE="RECT"
COORDS="0,0,73,21"
HREF="../index.htm"
ALT="The UNIX CD Bookshelf"><AREA
SHAPE="RECT"
COORDS="74,0,163,21"
HREF="../upt/index.htm"
ALT="UNIX Power Tools"><AREA
SHAPE="RECT"
COORDS="164,0,257,21"
HREF="../unixnut/index.htm"
ALT="UNIX in a Nutshell"><AREA
SHAPE="RECT"
COORDS="258,0,321,21"
HREF="../vi/index.htm"
ALT="Learning the vi Editor"><AREA
SHAPE="RECT"
COORDS="322,0,378,21"
HREF="index.htm"
ALT="sed &amp; awk"><AREA
SHAPE="RECT"
COORDS="379,0,438,21"
HREF="../ksh/index.htm"
ALT="Learning the Korn Shell"><AREA
SHAPE="RECT"
COORDS="439,0,514,21"
HREF="../lrnunix/index.htm"
ALT="Learning the UNIX Operating System"></MAP
></DIV
></BODY
></HTML
>
