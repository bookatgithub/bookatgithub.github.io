<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>mcast_icp_query_timeout</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="appa-77438.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="appa-77440.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="appa-77439"></A><A NAME="squid-APP-A-ITERM-2189"></A><table width="515" border="0" cellpadding="5"><tr><td align="left"><b><i>mcast_icp_query_timeout</i></b></td><td align="right"></td></tr></table><hr width="515" size="3" noshade="true" align="left" color="black"><table width="515" border="0" cellpadding="5"><tr><td align="left"></td><td align="right"></td></tr></table><P class="docText">When you use multicast ICP, Squid doesn't know in
advance how many multicast-capable neighbors are listening for its
messages. Squid determines this by sending periodic probes to the
multicast group and counting the number of replies. Squid uses this
count when waiting for replies to real multicast queries.</P><P class="docText">The
<span class="docEmphasis">mcast_icp_query_timeout</span><A NAME="squid-APP-A-ITERM-2189"></A> directive specifies how long Squid
should wait when counting replies to its fake probe queries. Why not
just use this timeout when sending real multicast ICP queries? The
reason is that Squid might be sending queries to both multicast and
unicast neighbors.</P><P class="docText">The <span class="docEmphasis">mcast_icp_query_timeout</span> directive
essentially controls how long Squid waits for replies to real
multicast queries. Let's say you have an ICP
multicast group with 10 neighbor caches, and that it typically takes
3000 msec for all 10 replies to arrive but only takes 1000 msec to
receive 5 replies. If you set
<span class="docEmphasis">mcast_icp_query_timeout</span> to 1000 msec,
Squid's periodic probes will count 5 neighbors.
Then, for a real multicast ICP query, Squid waits for only 5 replies
from multicast responders. On average, this should take only 1000
milliseconds.</P><P class="docText">Another nice feature of this algorithm is that Squid does the right
thing if, for some reason, all your multicast neighbors stop
responding. In that case, Squid counts zero neighbors and
doesn't wait for any replies from multicast
responders.</P><P><table border="0" bgcolor="black" cellspacing="0" cellpadding="1" width="90%" align="center"><tr><td><table bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="6"><tr><td width="60" valign="top"><img src="images/tip_yellow.gif" width="50" height="54"></td><td valign="top">
<P class="docText">Squid doesn't send multicast HTCP queries.</P>
</td></tr></table></td></tr></table></P><br><A NAME="appa-19-fm2xml"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><COLGROUP span="2"><THEAD></THEAD><TR><TD class="docTableCell">
<P class="docText">Syntax</P>
</TD><TD class="docTableCell">
<PRE>mcast_icp_query_timeout <TT><I>milliseconds</I></TT></PRE>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Default</P>
</TD><TD class="docTableCell">
<PRE>mcast_icp_query_timeout 2000</PRE>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Example</P>
</TD><TD class="docTableCell">
<PRE>mcast_icp_query_timeout 750</PRE>
</TD></TR><TR><TD class="docTableCell">
<P class="docText">Related</P>
</TD><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">icp_port</span>, <span class="docEmphasis">icp_query_timeout</span></P>
</TD></TR></COLGROUP></TABLE></P>
<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="appa-77438.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="appa-77440.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
