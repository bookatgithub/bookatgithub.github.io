<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>D.5 OpenBSD</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-APP-D-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-APP-D-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-APP-D-SECT-5"></A>
<H3 class="docSection1Title">D.5 OpenBSD</H3>

<P class="docText">The results in this section
<A NAME="squid-APP-D-ITERM-2425"></A><A NAME="squid-APP-D-ITERM-2426"></A>are
from OpenBSD Version 3.3 (released May 1, 2003). I built a kernel
with the following notable configuration options:</P>

<PRE>option          MSGMNB=8192
option          MSGMNI=40
option          MSGSEG=512
option          MSGSSZ=64
option          MSGTQL=2048
option          SHMSEG=16
option          SHMMNI=32
option          SHMMAX=2048
option          SHMALL=4096
option          NMBCLUSTERS=32768
option          MAXFILES=8192</PRE>

<P class="docText"><A class="docLink" HREF="#squid-APP-D-TABLE-3">Table D-3</A> and <A class="docLink" HREF="#squid-APP-D-FIG-3">Figure D-3</A>
summarize the OpenBSD results. The choices for OpenBSD are similar to
those for FreeBSD. Unfortunately, however, <span class="docEmphasis">coss</span>
doesn't run on OpenBSD, which lacks the
<I>aio_read( )</I> and <I>aio_write(
)</I> functions.</P>

<A NAME="squid-APP-D-TABLE-3"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table D-3. OpenBSD benchmarking results</h5></CAPTION><COLGROUP span="6"><THEAD><TR><TH class="docTableHeader">
<P class="docText">Storage scheme</P>
</TH><TH class="docTableHeader">
<P class="docText">Filesystem</P>
</TH><TH class="docTableHeader">
<P class="docText">Mount options</P>
</TH><TH class="docTableHeader">
<P class="docText">Throughput</P>
</TH><TH class="docTableHeader">
<P class="docText">Response time</P>
</TH><TH class="docTableHeader">
<P class="docText">Hit ratio</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">diskd(1)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<PRE>async, noatime, softupdate</PRE>
</TD><TD class="docTableCell">
<P class="docText">91.1</P>
</TD><TD class="docTableCell">
<P class="docText">1.45</P>
</TD><TD class="docTableCell">
<P class="docText">56.3</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">diskd(2)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">63.7</P>
</TD><TD class="docTableCell">
<P class="docText">1.44</P>
</TD><TD class="docTableCell">
<P class="docText">56.2</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(1)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<PRE>softupdate</PRE>
</TD><TD class="docTableCell">
<P class="docText">27.6</P>
</TD><TD class="docTableCell">
<P class="docText">1.51</P>
</TD><TD class="docTableCell">
<P class="docText">56.3</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(2)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<PRE>noatime</PRE>
</TD><TD class="docTableCell">
<P class="docText">25.1</P>
</TD><TD class="docTableCell">
<P class="docText">1.52</P>
</TD><TD class="docTableCell">
<P class="docText">56.3</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(3)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">22.7</P>
</TD><TD class="docTableCell">
<P class="docText">1.52</P>
</TD><TD class="docTableCell">
<P class="docText">56.1</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(4)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<PRE>async</PRE>
</TD><TD class="docTableCell">
<P class="docText">22.1</P>
</TD><TD class="docTableCell">
<P class="docText">1.51</P>
</TD><TD class="docTableCell">
<P class="docText">56.6</P>
</TD></TR></COLGROUP></TABLE></P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="squid-APP-D-FIG-3"></A>Figure D-3. OpenBSD filesystem benchmarking traces</H5>
<IMG BORDER="0" WIDTH="478" HEIGHT="345" SRC="images/0596001622/figs/SQ_ad03.gif" ALT="figs/SQ_ad03.gif"></CENTER>

<P class="docText">In general, the OpenBSD results are slightly worse than FreeBSD. This
isn't too surprising, given that the OpenBSD project
emphasizes security and perhaps spends less time on filesystem
performance.</P>

<P class="docText">One odd result is that using the <TT>async</TT> option
(alone) caused a slight decrease in performance for the
<span class="docEmphasis">ufs</span> storage scheme.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-APP-D-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-APP-D-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
