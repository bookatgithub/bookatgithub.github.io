<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>D.6 NetBSD</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-APP-D-SECT-5.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-APP-D-SECT-7.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-APP-D-SECT-6"></A>
<H3 class="docSection1Title">D.6 NetBSD</H3>

<P class="docText">These results come from
<A NAME="squid-APP-D-ITERM-2427"></A><A NAME="squid-APP-D-ITERM-2428"></A><A NAME="squid-APP-D-ITERM-2429"></A>NetBSD
Version 1.6.1 (released April 21, 2003). <A class="docLink" HREF="#squid-APP-D-TABLE-4">Table D-4</A>
and <A class="docLink" HREF="#squid-APP-D-FIG-4">Figure D-4</A> summarize the NetBSD results. NetBSD
actually performs almost the same as OpenBSD. The best configuration
yields about 90 transactions per second. Unfortunately, NetBSD
doesn't support <span class="docEmphasis">coss</span> or
<span class="docEmphasis">aufs</span>. I built a custom kernel with these
options:</P>

<PRE>options         NMBCLUSTERS=32768
options         MAXFILES=8192
options         MSGSSZ=64
options         MSGSEG=512
options         MSGMNB=8192
options         MSGMNI=40
options         MSGTQL=2048</PRE>

<A NAME="squid-APP-D-TABLE-4"></A><P><TABLE CELLSPACING="0" BORDER="1" RULES="all" CELLPADDING="4" WIDTH="100%"><CAPTION><h5 class="docTableTitle">Table D-4. NetBSD benchmarking results</h5></CAPTION><COLGROUP span="6"><THEAD><TR><TH class="docTableHeader">
<P class="docText">Storage scheme</P>
</TH><TH class="docTableHeader">
<P class="docText">Filesystem</P>
</TH><TH class="docTableHeader">
<P class="docText">Mount options</P>
</TH><TH class="docTableHeader">
<P class="docText">Throughput</P>
</TH><TH class="docTableHeader">
<P class="docText">Response time</P>
</TH><TH class="docTableHeader">
<P class="docText">Hit ratio</P>
</TH></TR></THEAD><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">diskd(1)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>softupdate,noatime,async</TT></P>
</TD><TD class="docTableCell">
<P class="docText">90.3</P>
</TD><TD class="docTableCell">
<P class="docText">1.49</P>
</TD><TD class="docTableCell">
<P class="docText">57.2</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">diskd(2)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>softupdate</TT></P>
</TD><TD class="docTableCell">
<P class="docText">73.5</P>
</TD><TD class="docTableCell">
<P class="docText">1.51</P>
</TD><TD class="docTableCell">
<P class="docText">55.8</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">diskd(3)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">60.1</P>
</TD><TD class="docTableCell">
<P class="docText">1.48</P>
</TD><TD class="docTableCell">
<P class="docText">55.9</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(1)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>softupdate,noatime,async</TT></P>
</TD><TD class="docTableCell">
<P class="docText">34.9</P>
</TD><TD class="docTableCell">
<P class="docText">1.51</P>
</TD><TD class="docTableCell">
<P class="docText">56.2</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(2)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">
<P class="docText"><TT>softupdate</TT></P>
</TD><TD class="docTableCell">
<P class="docText">31.7</P>
</TD><TD class="docTableCell">
<P class="docText">1.52</P>
</TD><TD class="docTableCell">
<P class="docText">55.5</P>
</TD></TR><TR><TD class="docTableCell">
<P class="docText"><span class="docEmphasis">ufs(3)</span></P>
</TD><TD class="docTableCell">
<P class="docText">UFS</P>
</TD><TD class="docTableCell">&nbsp;</TD><TD class="docTableCell">
<P class="docText">23.6</P>
</TD><TD class="docTableCell">
<P class="docText">1.53</P>
</TD><TD class="docTableCell">
<P class="docText">55.4</P>
</TD></TR></COLGROUP></TABLE></P>

<CENTER>
<H5 class="docFigureTitle"><A NAME="squid-APP-D-FIG-4"></A>Figure D-4. NetBSD filesystem benchmarking traces</H5>
<IMG BORDER="0" WIDTH="485" HEIGHT="345" SRC="images/0596001622/figs/SQ_ad04.gif" ALT="figs/SQ_ad04.gif"></CENTER>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-APP-D-SECT-5.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-APP-D-SECT-7.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
