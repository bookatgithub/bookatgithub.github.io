<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>15.5 Content Negotiation</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-15-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-15-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-CHP-15-SECT-5"></A>
<H3 class="docSection1Title">15.5 Content Negotiation</H3>

<P class="docText">Recent versions of Squid <A NAME="squid-CHP-15-ITERM-2107"></A><A NAME="squid-CHP-15-ITERM-2108"></A><A NAME="squid-CHP-15-ITERM-2109"></A>support the HTTP/1.1
<TT>Vary</TT> header. This is good news if your backend
server uses content negotiation. It might, for example, send
different responses depending on which web browser makes the request
(e.g., the <TT>User-Agent</TT> header), or based on the
user's language preferences (e.g., the
<TT>Accept-Language</TT> header).</P>

<P class="docText">When the response for a URI varies on some aspect of the request, the
origin (backend) server includes a <TT>Vary</TT> header.
This header contains the list of request headers used to select the
variant. These are the <I>selecting</I> headers. When
Squid receives a response with a <TT>Vary</TT> header, it
includes the selecting header values when it generates the internal
cache key. Thus, a subsequent request with the same values for the
selecting headers may generate a cache hit.</P>

<P class="docText">If you use the <I>—enable-x-accelerator-vary</I>
option when running <I>./configure</I>, Squid looks for a
response header named <TT>X-Accelerator-Vary</TT>. Squid
treats this header exactly like the <TT>Vary</TT> header.
Because this is an extension header, however, it is ignored by
downstream agents. It essentially provides a means for private
content negotiation between Squid and your backend server. In order
to use it you must also modify your server application to send the
header in its responses. I don't know of any
situation in which this header would be useful. If you serve
negotiated responses, you probably want to use the standard
<TT>Vary</TT> header so that all agents know
what's going on.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-15-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-15-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
