<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>3.5 make</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-3-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-3-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-CHP-3-SECT-5"></A>
<H3 class="docSection1Title">3.5 make</H3>

<P class="docText">Once <I>./configure</I> has done <A NAME="squid-CHP-3-ITERM-1170"></A><A NAME="squid-CHP-3-ITERM-1171"></A><A NAME="squid-CHP-3-ITERM-1172"></A>its job, you can simply type
<I>make</I> to begin compiling the source code:</P>

<PRE>% make</PRE>

<P class="docText">Normally, this part goes smoothly. You'll see a lot
of lines that look like this:<sup class="docFootnote"><A class="docLink" HREF="#squid-CHP-3-FNOTE-2">[2]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="squid-CHP-3-FNOTE-2">[2]</A></sup> The
<I>make</I> output used to be much prettier, but such is
the price we pay for advanced compiling tools such as
<I>automake</I>.</p></blockquote>

<PRE>source='cbdata.c' object='cbdata.o' libtool=no  depfile='.deps/cbdata.Po'
tmpdepfile='.deps/cbdata.TPo'  depmode=gcc /bin/sh ../cfgaux/depcomp  gcc -DHAVE_
CONFIG_H -DDEFAULT_CONFIG_FILE=\"/usr/local/squid/etc/squid.conf\" -I. -I. -I../
include -I. -I. -I../include -I../include     -g -O2 -Wall -c 'test -f cbdata.c ||
echo './''cbdata.c
source='client_db.c' object='client_db.o' libtool=no  depfile='.deps/client_db.Po'
tmpdepfile='.deps/client_db.TPo'  depmode=gcc /bin/sh ../cfgaux/depcomp  gcc -DHAVE_
CONFIG_H -DDEFAULT_CONFIG_FILE=\"/usr/local/squid/etc/squid.conf\" -I. -I. -I../
include -I. -I. -I../include -I../include     -g -O2 -Wall -c 'test -f client_db.c ||
echo './''client_db.c
source='client_side.c' object='client_side.o' libtool=no  depfile='.deps/client_side.Po'
tmpdepfile='.deps/client_side.TPo'  depmode=gcc /bin/sh ../cfgaux/depcomp  gcc -
DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\"/usr/local/squid/etc/squid.conf\" -I. -I. -I../
include -I. -I. -I../include -I../include     -g -O2 -Wall -c 'test -f client_side.c ||
echo './''client_side.c
source='comm.c' object='comm.o' libtool=no  depfile='.deps/comm.Po' tmpdepfile='.
deps/comm.TPo'  depmode=gcc /bin/sh ../cfgaux/depcomp  gcc -DHAVE_CONFIG_H -DDEFAULT_
CONFIG_FILE=\"/usr/local/squid/etc/squid.conf\" -I. -I. -I../include -I. -I. -I../
include -I../include     -g -O2 -Wall -c 'test -f comm.c || echo './''comm.c</PRE>

<P class="docText">You may see some compiler warnings. In most cases, it is safe to
ignore these. If you see a lot of them or something that looks really
serious, report it to the developers as described in <A class="docLink" HREF="squid-CHP-16-SECT-5.html#squid-CHP-16-SECT-5">Section 16.5</A>.</P>

<P class="docText">If the compilation gets all the way to the end without any errors,
you can move to the next section, which describes how to install the
programs you just built.</P>

<P class="docText">To verify that compilation was successful, you can run
<I>make</I> again. You should see this output:<sup class="docFootnote"><A class="docLink" HREF="#squid-CHP-3-FNOTE-3">[3]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="squid-CHP-3-FNOTE-3">[3]</A></sup> If <I>make</I> recompiles the source every time you
run it, and there are no errors, your system clock may be set
wrong.</p></blockquote>

<PRE>% make
Making all in lib...
Making all in scripts...
Making all in src...
Making all in fs...
Making all in repl...
'squid' is up to date.
'client' is up to date.
'unlinkd' is up to date.
'cachemgr.cgi' is up to date.
Making all in icons...
Making all in errors...
Making all in auth_modules...</PRE>

<P class="docText">The compilation step may fail for a number of reasons, including:</P>

<DL class="docList"><br><p><DT><I><span class="docPubcolor">Source code bugs</span></I></DT></p>
<DD>
<P class="docList">Usually the Squid source code is thoroughly debugged. However, you
may encounter some bugs or problems that prevent Squid from
compiling. You're more likely to find these sorts of
bugs in the newer development versions. Report these to the
developers.</P>
</DD>
<br><p><DT><I><span class="docPubcolor">Compiler installation problems</span></I></DT></p>
<DD>
<P class="docList">An improperly installed C compiler probably won't be
able to compile Squid or any other moderately sized software package.
Usually, compilers come pre-installed with the operating system, so
you don't have to worry about that. However, if you
attempt to upgrade your compiler after installing the operating
system, you might make a mistake. Never copy a compiler installation
from one machine to another, unless you are absolutely sure about
what you are doing. I feel it is always better to install the
compiler on each machine separately.</P>
</DD>
</DL>

<P class="docText">Always make sure that your compiler's header files
are synchronized with the library files. The header files normally
reside in <I>/usr/include</I>, while libraries are
found in <I>/usr/lib</I>. Linux's
popular RPM system makes it possible to upgrade one, but not the
other. If the libraries are based on different header files, Squid
may not compile.</P>

<P class="docText">If you want to upgrade the compiler on one of the open-source BSD
variants, be sure to run <I>make world</I> from the
<I>/usr/src</I> directory, rather than from the
<I>/usr/src/lib</I> or
<I>/usr/src/include</I> directories.</P>

<P class="docText">Here are some common compilation problems and error messages:</P>

<DL class="docList"><br><p><DT><span class="docPubcolor"><span class="docPubcolor"><span class="docMonofont">Solaris: make[1]: *** [libmiscutil.a] Error 255</span></span></span></DT></p>
<DD>
<P class="docList">This means that <I>./configure</I>
didn't find the <TT>ar</TT> program. Make
sure <I>/usr/ccs/bin</I> is listed in your
<TT>PATH</TT> environment variable. If you
don't have the Sun compiler installed,
you'll need the GNU binutils (<A class="docLink" target="_blank" HREF="http://www.gnu.org/directory/binutils.html">http://www.gnu.org/directory/binutils.html</A>).</P>
</DD>
<br><p><DT><span class="docPubcolor"><span class="docPubcolor"><span class="docMonofont">Linux: storage size of 'rl' isn't known</span></span></span></DT></p>
<DD>
<P class="docList">This happens when the header and library files don't
match, as described earlier. Be sure to upgrade both packages at the
same time.</P>
</DD>
<br><p><DT><span class="docPubcolor"><span class="docPubcolor"><span class="docMonofont">Digital Unix: Don't know how to make EXTRA_libmiscutil_a_SOURCES. Stop</span></span>.</span></DT></p>
<DD>
<P class="docList">Digital Unix's <I>make</I> program
isn't tolerant of the <I>Makefile</I>
produced by the <TT>automake</TT> package. For example,
<I>lib/Makefile.in</I> contains these lines:</P>

<PRE>noinst_LIBRARIES = \
        @LIBDLMALLOC@ \
        libmiscutil.a \
        libntlmauth.a \
        @LIBREGEX@</PRE>

<P class="docList">After substitution, when <I>lib/Makefile</I> is
created, it looks like this:</P>

<PRE>noinst_LIBRARIES = \
         \
        libmiscutil.a \
        libntlmauth.a \
        &lt;TAB&gt;</PRE>

<P class="docList">As shown above, the last line contains an (invisible) TAB character,
which confuses <I>make</I>. You can get past this problem
by installing and using GNU make, or by manually editing
<I>lib/Makefile</I> (and any others exhibiting this
problem) to make it look like this:</P>

<PRE>noinst_LIBRARIES = \
         \
        libmiscutil.a \
        libntlmauth.a</PRE>

</DD>
</DL>
<P class="docText">If you have problems compiling Squid, check the FAQ first. You may
also want to search the Squid web site (use the search box on the
home page). Finally, if you're still stuck, send
email to the <A class="docLink" HREF="mailto:squid-users@squid-cache.org">squid-users@squid-cache.org</A> list.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-3-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-3-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
