<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>4.4 Log File Pathnames</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-4-SECT-3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-4-SECT-5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-CHP-4-SECT-4"></A>
<H3 class="docSection1Title">4.4 Log File Pathnames</H3>

<P class="docText">I'll discuss all the details
<A NAME="squid-CHP-4-ITERM-1193"></A><A NAME="squid-CHP-4-ITERM-1194"></A>of
Squid's log files in <A class="docLink" HREF="squid-CHP-13.html#squid-CHP-13">Chapter 13</A>.
For now the only thing you may need to worry about is where you want
Squid to put its log files. The default location is a directory named
<I>logs</I> under the installation prefix. For example,
if you don't use the <I>—prefix=</I>
option with <I>./configure</I>, the default log file
directory is <I>/usr/local/squid/var/logs</I>.</P>

<P class="docText">You need to make sure <A NAME="squid-CHP-4-ITERM-1195"></A>that
log files are stored on a disk partition with enough space. When
Squid receives a write error for a log file, it exits and restarts.
The primary reason for this behavior is to grab your attention. Squid
wants to make sure you don't miss any important
logging information, especially if your system is being abused or
attacked.</P>

<P class="docText">Squid has three main log files: <I>cache.log</I>,
<I>access.log</I>, and <I>store.log</I>.
The first of these, <I>cache.log</I>, contains
informational
<A NAME="squid-CHP-4-ITERM-1196"></A><A NAME="squid-CHP-4-ITERM-1197"></A><A NAME="squid-CHP-4-ITERM-1198"></A><A NAME="squid-CHP-4-ITERM-1199"></A><A NAME="squid-CHP-4-ITERM-1200"></A><A NAME="squid-CHP-4-ITERM-1201"></A>and
debugging messages. When you start Squid the first few times, you
should closely watch this file. If Squid refuses to run, the reason
is probably at the end of <I>cache.log</I>. Under
normal conditions, this log file doesn't become
large enough to warrant any special attention. Also note that if you
start Squid with the <I>-s</I> option, the important
<I>cache.log</I> messages are also sent to your syslog
daemon. You can change the location for this log file with the
<span class="docEmphasis">cache_log</span> directive:</P>

<PRE>cache_log /squid/logs/cache.log</PRE>

<P class="docText">The <I>access.log</I> file contains a single line for
each client request made to Squid. On average, each line is about 150
bytes. In other words, it takes about 150 MB to log one million
client requests. Use the <span class="docEmphasis">cache_access_log</span>
directive to change the location of this log file:</P>

<PRE>cache_access_log /squid/logs/access.log</PRE>

<P class="docText">If, for some reason, you don't want Squid to log
client requests, you can specify the log file pathname as
<I>/dev/null</I>.</P>

<P class="docText">The <I>store.log</I> file is probably not very useful
to most cache administrators. It contains a record for each object
that enters and leaves the cache. The average record size is
typically 175-200 bytes. However, Squid doesn't
create an entry in <I>store.log</I> for cache hits, so
it contains fewer records than <I>access.log</I>. Use
the <span class="docEmphasis">cache_store_log</span> directive to change the
location:</P>

<PRE>cache_store_log /squid/logs/store.log</PRE>

<P class="docText">You can easily disable <I>store.log</I> altogether by
specifying the location as <TT>none</TT>:</P>

<PRE>cache_store_log none</PRE>

<P class="docText">If you're not careful, Squid's log
files increase in size without limit. Some operating systems enforce
a 2-GB file size limit, even if you have plenty of free disk space.
Exceeding this limit results in a write error, which then causes
Squid to exit. To keep log file sizes reasonable, you should create a
<span class="docEmphasis">cron</span> job that regularly renames and archives the
log files. Squid has a built-in feature to make this easy. See <A class="docLink" HREF="squid-CHP-13-SECT-7.html#squid-CHP-13-SECT-7">Section 13.7</A> for an explanation of log file rotation.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-4-SECT-3.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-4-SECT-5.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
