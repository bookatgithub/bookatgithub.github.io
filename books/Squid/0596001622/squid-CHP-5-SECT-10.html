<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>5.10 Rotating the Log Files</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-5-SECT-9.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-5-SECT-11.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-CHP-5-SECT-10"></A>
<H3 class="docSection1Title">5.10 Rotating the Log Files</H3>

<P class="docText">Squid writes to a number of log files <A NAME="squid-CHP-5-ITERM-1278"></A><A NAME="squid-CHP-5-ITERM-1279"></A>unless you disable them in
<I>squid.conf</I>. You must periodically
<I>rotate</I> the log files to prevent them from
consuming too much disk space. Squid places a lot of importance on
log files and exits with an error message when it
can't write to them. To keep disk space consumption
under control, use the following command in a
<span class="docEmphasis">cron</span> job:</P>

<PRE>% squid -k rotate</PRE>

<P class="docText">For example, this <span class="docEmphasis">crontab</span> entry rotates the logs
every 24 hours, at 4 A.M.:</P>

<PRE>0 4 * * * /usr/local/squid/sbin/squid -k rotate</PRE>

<P class="docText">This command does two things. First, it closes the currently open log
files. Then, it renames the <I>cache.log</I>,
<I>store.log</I>, and <I>access.log</I>
files by appending a numeric extension. For example,
<I>cache.log</I> becomes
<I>cache.log.0</I>, <I>cache.log.0</I>
becomes <I>cache.log.1</I>, and so on, up to the value
of the <span class="docEmphasis">logfile_rotate</span> option.</P>

<P class="docText">Squid keeps only the last <span class="docEmphasis">logfile_rotate</span>
versions of each log file. The older versions are simply removed
during the renaming process. If you want to keep more copies, you
need to increase the <span class="docEmphasis">logfile_rotate</span> limit or
write some custom scripts that move the log files to a different
location.</P>

<P class="docText">See <A class="docLink" HREF="squid-CHP-13-SECT-7.html#squid-CHP-13-SECT-7">Section 13.7</A> for additional information about
rotating log files.</P>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-5-SECT-9.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-5-SECT-11.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
