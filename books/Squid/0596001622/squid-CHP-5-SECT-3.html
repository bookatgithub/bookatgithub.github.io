<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>5.3 Initializing Cache Directories</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-5-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-5-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="squid-CHP-5-SECT-3"></A>
<H3 class="docSection1Title">5.3 Initializing Cache Directories</H3>

<P class="docText">Before running Squid for the <A NAME="squid-CHP-5-ITERM-1248"></A><A NAME="squid-CHP-5-ITERM-1249"></A><A NAME="squid-CHP-5-ITERM-1250"></A>first time, and whenever you
add a new <span class="docEmphasis">cache_dir</span>, you must initialize the
cache directories. The command is simply:</P>

<PRE>% squid -z</PRE>

<P class="docText">For the UFS-related storage schemes (<span class="docEmphasis">ufs</span>,
<span class="docEmphasis">aufs</span>, and <span class="docEmphasis">diskd</span>; see <A class="docLink" HREF="squid-CHP-8.html#squid-CHP-8">Chapter 8</A>), this command creates the subdirectories
needed under each <span class="docEmphasis">cache_dir</span>. You
don't need to worry that Squid will wipe out your
current cache directories (if any).</P>

<P class="docText">Ownership and permissions are a common problem at this stage. Squid
runs under a certain user ID, specified with
<span class="docEmphasis">cache_effective_user</span> in
<I>squid.conf</I>. This user ID must have read and
write permission under each <span class="docEmphasis">cache_dir</span> directory.
If not, you'll see a message like this:</P>

<PRE>Creating Swap Directories
FATAL: Failed to make swap directory /usr/local/squid/var/cache/00:
    (13) Permission denied</PRE>

<P class="docText">In this case, you should make sure that all components of
<I>/usr/local/squid/var/cache</I> are accessible to the
user ID given in <I>squid.conf</I>. The final
component—the <I>cache</I> directory—must
be writable by this user ID as well.</P>

<P class="docText">Cache directory initialization may take a couple of minutes,
depending on the size and number of cache directories, and the speed
of your disk drives. If you want to watch the progress, use the
<I>-X</I> option:</P>

<PRE>% squid -zX</PRE>


<ul></ul></td></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="squid-CHP-5-SECT-2.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="squid-CHP-5-SECT-4.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
