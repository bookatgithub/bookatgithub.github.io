<html><head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="4.6 Coding for Modularity"-->
<link rel="STYLESHEET" type="text/css" href="FILES/style.css">
<link rel="STYLESHEET" type="text/css" href="FILES/docsafari.css">
<style type="text/css">	.tt1    {font-size: 10pt;}</style>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
	<a href="0131429019_ch04lev1sec5.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
	<a href="0131429019_ch05.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><A NAME="ch04lev1sec6"></A>
<H3 class="docSection1Title" id="162593-893">4.6 Coding for Modularity</H3>
<P class="docText"><A NAME="idd1e11145"></A>Modularity is expressed in good code, but it primarily comes from good design. Here are some questions to ask about any code you work on that might help you improve its modularity:</P>
<UL><LI><P class="docList">How many global variables does it have? Global variables are modularity poison, an easy way for components to leak information to each other in careless and promiscuous ways.<sup class="docFootnote"><A class="docLink" HREF="#ch04en08">[8]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="ch04en08">[8]</A></sup> Globals also mean your code cannot be reentrant; that is, multiple instances in the same process are likely to step on each other.</p></blockquote></LI><LI><P class="docList">Is the size of your individual modules in Hatton's sweet spot? If your answer is "No, many are larger", you may have a long-term maintenance problem. Do you know what your own sweet spot is? Do you know what it is for other programmers you are cooperating with? If not, best be conservative and stick to sizes near the low end of Hatton's range.</P></LI><LI><P class="docList">Are the individual functions in your modules too large? This is not so much a matter of line count as it is of internal complexity. If you can't informally describe a function's contract with its callers in one line, the function is probably too large.<sup class="docFootnote"><A class="docLink" HREF="#ch04en09">[9]</A></sup></P><blockquote><p class="docFootnote"><sup><A NAME="ch04en09">[9]</A></sup> Many years ago, I learned from Kernighan &amp; Plauger's <span class="docEmphasis">The Elements of Programming Style</span><A NAME="idd1e11173"></A> a useful rule. Write that one-line comment immediately after the prototype of your function. For <span class="docEmphasis">every</span> function, without exception.</p></blockquote><blockquote>

<p class="docText"><A NAME="idd1e11187"></A>Personally I tend to break up a subprogram when there are too many local variables. Another clue is [too many] levels of indentation. I rarely look at length.</p>
<p class="docText">—Ken Thompson</p></blockquote></LI><LI><P class="docList">Does your code have internal APIs—that is, collections of function calls and data structures that you can describe to others as units, each sealing off some layer of function from the rest of the code? A good API makes sense and is understandable without looking at the implementation behind it. The classic test is this: Try to describe it to another programmer over the phone. If you fail, it is very probably too complex, and poorly designed.</P></LI><LI><P class="docList">Do any of your APIs have more than seven entry points? Do any of your classes have more than seven methods each? Do your data structures have more than seven members?</P></LI><LI><P class="docList">What is the distribution of the number of entry points per module across the project?<sup class="docFootnote"><A class="docLink" HREF="#ch04en10">[10]</A></sup> Does it seem uneven? Do the modules with lots of entry points really need that many? Module complexity tends to rise as the square of the number of entry points, too—yet another reason simple APIs are better than complicated ones.</P><blockquote><p class="docFootnote"><sup><A NAME="ch04en10">[10]</A></sup> A cheap way to collect this information is to analyze the tags files generated by a utility like <span class="docEmphasis">etags</span>(1)<A NAME="idd1e11220"></A> or <span class="docEmphasis">ctags</span>(1)<A NAME="idd1e11227"></A>.</p></blockquote></LI></UL>
<P class="docText">You might find it instructive to compare these with our checklist of questions about transparency<A NAME="idd1e11239"></A>, and discoverability<A NAME="idd1e11243"></A> in <A class="docLink" HREF="0131429019_ch06.html#ch06">Chapter 6</A>.</P>

<ul></ul></td></tr></table>
<td></td>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<td class="tt1"><a href="NFO/lib.html">[ Team LiB ]</a></td><td valign="top" class="tt1" align="right">
          <a href="0131429019_ch04lev1sec5.html"><img src="FILES/btn_prev.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
          <a href="0131429019_ch05.html"><img src="FILES/btn_next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</td></table>
</body></html>
