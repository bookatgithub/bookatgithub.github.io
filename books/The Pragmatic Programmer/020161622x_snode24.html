<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Reversibility"-->
<LINK REL="stylesheet" href="FILES/proquestM.css">
</HEAD>
<BODY link="#354278" vlink="#000066" alink="#000080" topmargin="0">
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="020161622x_snode23.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="020161622x_snode25.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
<FONT><h3>Reversibility</h3>
			<p><i>Nothing is more dangerous than an idea if it's the only one you have.</I></P>

			<P><I></i>
				<b>Emil-Auguste Chartier, <i>Propos sur</i>
					<I>la religion,</I> 1938</B></P>

			<p>Engineers prefer simple, single solutions to problems. Math tests that allow you to proclaim with great confidence that <i>x =</i> 2 are much more comfortable than fuzzy, warm essays about the myriad causes of the French Revolution. Management tends to agree with the engineers: single, easy answers fit nicely on spreadsheets and project plans.</p>

			<P>If only the real world would cooperate! Unfortunately, while <I>x</I> is 2 today, it may need to be 5 tomorrow, and 3 next week. Nothing is forever—and if you rely heavily on some fact, you can almost guarantee that it <I>will</i> change.</p>

			<p>There is always more than one way to implement something, and there is usually more than one vendor available to provide a third-party product. If you go into a project hampered by the myopic notion that there is only <i>one</i> way to do it, you may be in for an unpleasant surprise. Many project teams have their eyes forcibly opened as the future unfolds:</p>

			<blockquote>
				<p><i>"But you said we'd use database XYZ! We are 85% done coding the project, we can't change now!" the programmer protested. "Sorry, but our company decided to standardize on database PDQ instead—for all projects. It's out of my hands. We'll just have to recode. All of you will be working weekends until further notice."</i></p>
			</BLOCkquotE>
			<p>Changes don't have to be that Draconian, or even that immediate. But as time goes by, and your project progresses, you may find yourself stuck in an untenable position. With every critical decision, the project team commits to a smaller target—a narrower version of reality that has fewer options.</P>

			<p>By the time many critical decisions have been made, the target becomes so small that if it moves, or the wind changes direction, or a butterfly in Tokyo flaps its wings, you miss.<foNT SIZe="1"><sup><A HREf="#FOOTNOTE-4">[4]</a></suP></FONt>
 And you may miss by a huge amount.</p>
<blOCKQuote><font size="1">
<p class="footnote">
<suP><A NAme="FOOTNOTE-4">[4]</a></suP>
Take a nonlinear, or chaotic, system and apply a small change to one of its inputs. You may get a large and often unpredictable result. The clichéd butterfly flapping its wings in Tokyo could be the start of a chain of events that ends up generating a tornado in Texas. Does this sound like any projects you know?</p>
</Font></BLOCKquotE>

				
			<P>The problem is that critical decisions aren't easily reversible.</P>

			<P>Once you decide to use this vendor's database, or that architectural pattern, or a certain deployment model (client-server versus standalone, for instance), you are committed to a course of action that cannot be undone, except at great expense.</p>

			<h4>Reversibility</h4>
				<p>Many of the topics in this book are geared to producing flexible, adaptable software. By sticking to their recommendations—especially the <I>DRY</I> principle (page 26), decoupling (page 138), and use of metadata (page 144)—we don't have to make as many critical, irreversible decisions. This is a good thing, because we don't always make the best decisions the first time around. We commit to a certain technology only to discover we can't hire enough people with the necessary skills. We lock in a certain third-party vendor just before they get bought out by their competitor. Requirements, users, and hardware change faster than we can get the software developed.</P>

				<P>Suppose you decide, early in the project, to use a relational database from vendor A. Much later, during performance testing, you discover that the database is simply too slow, but that the object database from vendor B is faster. With most conventional projects, you'd be out of luck. Most of the time, calls to third-party products are entangled throughout the code. But if you <i>really</i> abstracted the idea of a database out—to the point where it simply provides persistence as a service—then you have the flexibility to change horses in midstream.</p>

				<p>Similarly, suppose the project begins as a client-server model, but then, late in the game, marketing decides that servers are too expensive for some clients, and they want a stand-alone version. How hard would that be for you? Since it's just a deployment issue, it <I>shouldn't take more than a few days.</I> If it would take longer, then you haven't thought about reversibility. The other direction is even more interesting. What if the stand-alone product you are making needs to be deployed in a client-server or <I>n</I>-tier fashion? <i>That shouldn't be hard either.</i></p>

				<p>The mistake lies in assuming that any decision is cast in stone—and in not preparing for the contingencies that might arise. Instead of carving decisions in stone, think of them more as being written in the sand at the beach. A big wave can come along and wipe them out at any time.</p>

				<div class="note"><p class="notetitle"><b>Tip 14</B></P><P>

					<P>There Are No Final Decisions</p>

				</p></div>
<Br>
<Br>

			
			<h4>Flexible Architecture</h4>
				<P>While many people try to keep their <I>code</I> flexible, you also need to think about maintaining flexibility in the areas of architecture, deployment, and vendor integration.</P>

				<P>Technologies such as CORBA can help insulate portions of a project from changes in development language or platform. Is the performance of Java on that platform not up to expectations? Recode the client in C++, and nothing else needs to change. Is the rules engine in C++ not flexible enough? Switch over to a Smalltalk version. With a CORBA architecture, you have to take a hit only for the component you are replacing; the other components shouldn't be affected.</p>

				<p>Are you developing for Unix? Which one? Do you have all of the portability concerns addressed? Are you developing for a particular version of Windows? Which one—3.1, 95, 98, NT, CE, or 2000? How hard will it be to support other versions? If you keep decisions soft and pliable, it won't be hard at all. If you have poor encapsulation, high coupling, and hard-coded logic or parameters in the code, it might be impossible.</p>

				<p>Not sure how marketing wants to deploy the system? Think about it up front and you can support a stand-alone, client-server, or <I>n</I>-tier model just by changing a configuration file. We've written programs that do just that.</P>

				<P>Normally, you can simply hide a third-party product behind a well-defined, abstract interface. In fact, we've always been able to do so on any project we've worked on. But suppose you couldn't isolate it that cleanly. What if you had to sprinkle certain statements liberally throughout the code? Put that requirement in metadata, and use some automatic mechanism, such as Aspects (see page 39) or Perl, to insert the necessary statements into the code itself. Whatever mechanism you use, <i>make it reversible.</i> If something is added automatically, it can be taken out automatically as well.</p>

				<p>No one knows what the future may hold, especially not us! So enable your code to rock-n-roll: to "rock on" when it can, to roll with the punches when it must.</P>

				<H5>Related sections include:</H5>
					<Ul>
<li><p><A href="020161622x_snode55.html">Decoupling and the Law of Demeter</a></p>
</li>
<li><p><a href="020161622x_snode56.html">Metaprogramming</a></p>
</li>
<li><p><A href="020161622x_snode58.html">It's Just a View</a></p>

						</li>
</Ul>
				
				<H5>Challenges</h5>
					<ul>
<LI><P>Time for a little quantum mechanics with Schrödinger's cat. Suppose you have a cat in a closed box, along with a radioactive particle. The particle has exactly a 50% chance of fissioning into two. If it does, the cat will be killed. If it doesn't, the cat will be okay. So, is the cat dead or alive? According to Schrödinger, the correct answer is <I>both.</I> Every time a sub-nuclear reaction takes place that has two possible outcomes, the universe is cloned. In one, the event occurred, in the other it didn't. The cat's alive in one universe, dead in another. Only when you open the box do you know which universe <i>you</i> are in.</p>

							<p>No wonder coding for the future is difficult.</P>

							<P>But think of code evolution along the same lines as a box full of Schrödinger's cats: every decision results in a different version of the future. How many possible futures can your code support? Which ones are more likely? How hard will it be to support them when the time comes?</P>

							<P>Dare you open the box?</p>

						</li>
</uL>
				
			
		</FONt>
 
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="020161622x_snode23.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="020161622x_snode25.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
</BODY></HTML>