<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<!--SafClassName="docSection1Title"--><!--SafTocEntry="Shell Games"-->
<LINK REL="stylesheet" href="FILES/proquestM.css">
</HEAD>
<BODY link="#354278" vlink="#000066" alink="#000080" topmargin="0">
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="020161622x_snode31.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="020161622x_snode33.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
<FONT><h3>Shell Games</h3>
			<p>Every woodworker needs a good, solid, reliable workbench, somewhere to hold work pieces at a convenient height while he or she works them. The workbench becomes the center of the wood shop, the craftsman returning to it time and time again as a piece takes shape.</p>

			<P>For a programmer manipulating files of text, that workbench is the command shell. From the shell prompt, you can invoke your full repertoire of tools, using pipes to combine them in ways never dreamt of by their original developers. From the shell, you can launch applications, debuggers, browsers, editors, and utilities. You can search for files, query the status of the system, and filter output. And by programming the shell, you can build complex macro commands for activities you perform often.</P>

			<P>For programmers raised on GUI interfaces and integrated development environments (IDEs), this might seem an extreme position. After all, can't you do everything equally well by pointing and clicking?</P>

			<p>The simple answer is "no." GUI interfaces are wonderful, and they can be faster and more convenient for some simple operations. Moving files, reading MIME-encoded e-mail, and typing letters are all things that you might want to do in a graphical environment. But if you do all your work using GUIs, you are missing out on the full capabilities of your environment. You won't be able to automate common tasks, or use the full power of the tools available to you. And you won't be able to combine your tools to create customized <i>macro tools</i>. A benefit of GUIs is WYSIWYG—what you see is what you get. The disadvantage is WYSIAYG—what you see is <i>all</I> you get.</P>

			<P>GUI environments are normally limited to the capabilities that their designers intended. If you need to go beyond the model the designer provided, you are usually out of luck—and more often than not, you <I>do</i> need to go beyond the model. Pragmatic Programmers don't just cut code, or develop object models, or write documentation, or automate the build process—we do <i>all</i> of these things. The scope of any one tool is usually limited to the tasks that the tool is expected to perform. For instance, suppose you need to integrate a code preprocessor (to implement design-by-contract, or multi-processing pragmas, or some such) into your IDE. Unless the designer of the IDE explicitly provided hooks for this capability, you can't do it.</p>

			<P>You may already be comfortable working from the command prompt, in which case you can safely skip this section. Otherwise, you may need to be convinced that the shell is your friend.</P>

			<P>As a Pragmatic Programmer, you will constantly want to perform ad hoc operations—things that the GUI may not support. The command line is better suited when you want to quickly combine a couple of commands to perform a query or some other task. Here are a few examples.</P>

			<p><b><i>Find all</i> .<i>c</i>
					<i>files modified more recently than your Makefile.</i></b></p>

			<p><table bordER="1" CEllspaCiNg="0" ceLLPADding="1" WIDTh="100%">
<colGROUp aliGN="left" SPan="2">
<tr>
<td valign="top">
<font size="2">Shell…</FONT></td>
<td vAlIgn="top">
<fONT SIze="2">
								<prE CLAss="monofont">
find . -name ' *.c' -newer Makefile -print
</prE>
							</FONt></td>
</tR>
<TR>
<Td valign="top">
<font size="2">GUI…..</font></tD>
<TD Valign="top">
<FoNt siZE="2">Open the Explorer, navigate to the correct directory, click on the Makefile, and note the modification time. Then bring up Tools/Find, and enter <TT Class="monofont">*.c</TT> for the file specification. Select the date tab, and enter the date you noted for the Makefile in the first date field. Then hit OK.
</FOnt></td>
</TR>
</COlgroUP>
</TAble></p>

			<p><b><i>Construct a zip/tar archive of my source.</i></b></p>

			<p><table bordER="1" CEllspaCiNg="0" ceLLPADding="1" WIDTh="100%">
<colGROUp aliGN="left" SPan="2">
<tr>
<td valign="top">
<font size="2">Shell…</FONT></td>
<td vAlIgn="top">
<fONT SIze="2">
								<prE CLAss="monofont">
zip archive.zip *.h *.c      -<i>or</i>-
tar cvf archive.tar *.h *.c
</PRE>
							</Font></tD>
</TR>
<Tr>
<td valign="top">
<font size="2">GUI…..</fonT></TD>
<Td valiGn="top">
<Font SIZE="2">Bring up a ZIP utility (such as the shareware WinZip [<A href="020161622x_snode86.html#48">URL 41</A>], select "Create New Archive," enter its name, select the source directory in the add dialog, set the filter to <TT Class="monofont">"* .c",</TT> click "Add," set the filter to <TT clasS="monofont">"* .h",</TT> click "Add," then close the archive.¨
</Font></td>
</tr>
</colgroup>
</table></P>

			<P><B><I>Which Java files have not been changed in the last week?</i></b></p>

			<p><tAbLe boRDER="1" CellsPACIng="0" ceLLPAddinG="1" WIDth="100%">
<colgroup align="left" span="2">
<tR>
<TD Valign="top">
<FoNt siZE="2">Shell…</FONt></td>
<tD VALign="top">
<fONT Size="2">
								<pRE CLass="monofont">
find . -name '*.java' -mtime +7 -print
</pre>
							</font></td>
</tr>
<tr>
<td vaLIGN="top">
<font sIzE="2">GUI…..</fonT></TD>
<TD valiGN="top">
<FOnt siZE="2">Click and navigate to "Find files," click the "Named" field and type in "*.java", select the "Date Modified" tab. Then select "Between." Click on the starting date and type in the starting date of the beginning of the project. Click on the ending date and type in the date of a week ago today (be sure to have a calendar handy). Click on "Find Now."</FOnt></td>
</TR>
</COlgroup>
</table></p>

			<p><b><i>Of those files, which use the</i></b>
				<i><tt CLASs="monofont">awt</tt></i><b>
					<I>libraries?</i></B></p>

			<p><tABLE BordeR="1" CELlspaCING="0" cellPADDing="1" width="100%">
<colgroup aligN="left" SPAn="2">
<tr>
<td VaLign="top">
<FONT Size="2">Shell…</fONT></Td>
<td vALIGn="top">
<fonT SIZe="2">
								<pre class="monofont">
find . -name '*.java' -mtime +7 -print |
     xargs grep 'java.awt'
</pre>
							</font></td>
</tr>
<TR>
<TD valigN="top">
<fOnt sIZE="2">GUI…..</FOnt></td>
<TD VAlign="top">
<FONT size="2">Load each file in the list from the previous example into an editor and search for the string "java.awt". Write down the name of each file containing a match.</FONT></td>
</tr>
</colgroup>
</table></p>

			<p>Clearly the list could go on. The shell commands may be obscure or terse, but they are powerful and concise. And, because shell commands can be combined into script files (or command files under Windows systems), you can build sequences of commands to automate things you do often.</p>

			<DIV Class="note"><p ClAss="notetitle"><b>Tip 21</B></P><P>

				<P>Use the Power of Command Shells</P>

			</p></div>
<BR>
<BR>

			<p>Gain familiarity with the shell, and you'll find your productivity soaring. Need to create a list of all the unique package names explicitly imported by your Java code? The following stores it in a file called "list."</p>

			<prE>
				
    grep '^import ' *.java |
      sed -e's/.*import  *//' -e's/;.*$//' |
      sort -u &gt;list
</PRE>

			<p>If you haven't spent much time exploring the capabilities of the command shell on the systems you use, this might appear daunting. However, invest some energy in becoming familiar with your shell and things will soon start falling into place. Play around with your command shell, and you'll be surprised at how much more productive it makes you.</p>

			<h4>Shell Utilities and Windows Systems</h4>
				<P>Although the command shells provided with Windows systems are improving gradually, Windows command-line utilities are still inferior to their Unix counterparts. However, all is not lost.</P>

				<P>Cygnus Solutions has a package called Cygwin [<A href="020161622x_snode86.html#36">URL 31</a>]. As well as providing a Unix compatibility layer for Windows, Cygwin comes with a collection of more than 120 Unix utilities, including such favorites as <tt class="monofont">1s, grep,</tt> and <tt clasS="monofont">find.</TT> The utilities and libraries may be downloaded and used for free, but be sure to read their license.<Font siZe="1"><Sup><a HREF="#FOOTNOTE-3">[3]</A></sup></fONT>
The Cygwin distribution comes with the Bash shell.</P>
<blocKQUOte><foNT SIze="1">
<p class="footnote">
<sup><a name="FOOTNOTE-3">[3]</a></sup>
The GNU General Public License [<A href="020161622x_snode86.html#66">URL 57</a>] is a kind of legal virus that Open Source developers use to protect their (and your) rights. You should spend some time reading it. In essence, it says that you can use and modify GPL'd software, but if you distribute any modifications they must be licensed according to the GPL (and marked as such), and you must make source available. That's the virus part—whenever you derive a work from a GPL'd work, your derived work must also be GPL'd. However, it does not limit you in any way when simply using the tools—the ownership and licensing of software developed using the tools are up to you.</p>
</foNt></BlocKQUOTe>

					
				<p><taBLE CellsPACIng="0" wiDTH="90%" Border="1"><tr><td><center><h2>
Using Unix Tools Under Windows</h2></cenTER>
					<P>We love the availability of high-quality Unix tools under Windows, and use them daily. However, be aware that there are integration issues. Unlike their Ms-dos counterparts, these utilities are sensitive to the case of filenames, so <tt claSs="monofont">ls a*.bat</Tt> won't find <tt CLASS="monofont">AUTOEXEC.BAT.</tt> You may also come across problems with filenames containing spaces, and with differences in path separators. Finally, there are interesting problems when running Ms-dos programs that expect Ms-DOS-style arguments under the Unix shells, For examples, the Java utilities from JavaSoft use a colon as their CLASSPATH separators under Unix, but use a semicolon under MS-DOS. As a result, a Bash or ksh script that runs on a Unix box will run identically under Windows, but the command line it passes to Java will be interpreted incorrectly.</p>

				</tD></TR></Table></P>

				<P>Alternatively, David Korn (of Korn shell fame) has put together a package called uwin. This has the same aims as the Cygwin distribution—it is a Unix development environment under Windows. UWIN comes with a version of the Korn shell. Commercial versions are available from Global Technologies, Ltd. [<A href="020161622x_snode86.html#35">URL 30</a>]. In addition, AT&amp;T allows free downloading of the package for evaluation and academic use. Again, read their license before using.</P>

				<P>Finally, Tom Christiansen is (at the time of writing) putting together <I>Perl Power Tools,</I> an attempt to implement all the familiar Unix utilities portably, in Perl [<a href="020161622x_snode86.html#37">URL 32</a>],</p>

				<h5>Related sections include:</h5>
					<ul>
<li><p><a href="020161622x_snode77.html">Ubiquitous Automation</a></P>

						</LI>
</Ul>
				
				<h5>Challenges</h5>
					<ul>
<Li><P>Are there things that you're currently doing manually in a GUI? Do you ever pass instructions to colleagues that involve a number of individual "click this button,"
								"select this item" steps? Could these be automated?</p>
</li>
<LI><P>Whenever you move to a new environment, make a point of finding out what shells are available. See if you can bring your current shell with you.</P>
</Li>
<li><p>Investigate alternatives to your current shell. If you come across a problem your shell can't address, see if an alternative shell would cope better.</P>

						</LI>
</Ul>
				
			
		</fonT>
 
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#CCCCCC">
<td><font color="black" size=1>I l<font color="#FF0000">@</font>ve RuBoard</td>
<td valign="top" class="v2" align="right"><a href="020161622x_snode31.html"><img src="FILES/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a> <a href="020161622x_snode33.html"><img src="FILES/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></td></table>
</BODY></HTML>