<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Exercises</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch20.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="ch19lev1sec4"></a>
<h3 id="title-IDA0EFII" class="docSection1Title">Exercises</h3>
<a name="ch19lev2sec16"></a>
<h4 id="title-IDADFFII" class="docSection2Title">Exercise 1</h4>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch19qa1q1"></a><b></b></td><td><p class="docText">For each of the following errors, write a simple test case containing the error, and try to compile it. In the error messages, look for the key words that relate to the error in the code.</p>
<div style="font-weight:bold"><ol class="docList" type="1"><li><div style="font-weight:normal"><p class="docList">Attempting to construct a <tt>regex_iterator</tt> object by passing a pair of iterators whose character type is different from the <tt>regex_iterator</tt> type's character type</p></div></li><LI><div style="font-weight:normal"><p class="docList">Attempting to construct a <tt>regex_iterator</tt> object by passing a regular expression object whose element type or traits type is different from the <tt>regex_iterator</tt> type's element type or traits type</p></div></LI><li><div style="font-weight:normal"><p class="docList">Attempting to construct a <tt>regex_token_iterator</tt> object by passing a pair of iterators whose character type is different from the <tt>regex_-token_iterator</tt> type's character type</p></div></LI><LI><div style="font-weight:normal"><p class="docList">Attempting to construct a <tt>regex_token_iterator</tt> object by passing a regular expression object whose element type or traits type is different from the <tt>regex_token_iterator</tt> type's element type or traits type</p></div></li><li><div style="font-weight:normal"><p class="docList">Attempting to construct a <tt>regex_token_iterator</tt> object by passing a field specifier as a pointer to <tt>int</tt> instead of an array of <tt>int</tt></p></div></LI><LI><div style="font-weight:normal"><p class="docList">Attempting to decrement a <tt>regex_iterator</tt> object</P></div></LI><li><div style="font-weight:normal"><p class="docList">Attempting to decrement a <tt>regex_token_iterator</tt> object</p></div></LI></ol></div>
</TD></tr></table></p>

<a name="ch19lev2sec17"></a>
<H4 id="title-IDA3HFII" class="docSection2Title">Exercise 2</H4>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch19qa2q1"></a><b></b></TD><td><p class="docText">In the first part of this chapter, I mentioned that it's a little hard to reuse the brute-force loop. In this exercise, we look at a couple of possible approaches to reuse and at doing the same thing with regular expression iterators.</P>
<div style="font-weight:bold"><ol class="docList" type="1"><li><div style="font-weight:normal"><p class="docList">Write a program that has a copy of the code of the <tt>search</tt> function in <a class="docLink" href="ch19lev1sec1.html#ch19ex08">Example 19.8</a>. Change the search function so that for a successful match, it shows the contents of the first capture group instead of the entire match. Now use the function to copy to <tt>cout</tt> all text that occurs between the tags <tt>&quot;&lt;CODE&gt;&quot;</tt> and <tt>&quot;&lt;/CODE&gt;&quot;</tt><sup class="docFootnote"><a class="docLink" href="#ch19fn4">[4]</a></sup> in an HTML file of your choosing.<sup class="docFootnote"><a class="docLink" href="#ch19fn5">[5]</a></sup></p><blockquote><p class="docFootnote"><sup><a name="ch19fn4">[4]</a></sup> That is, search for text matching the regular expression <tt>&quot;&lt;CODE&gt;(.*?)&lt;/CODE&gt;&quot;</tt>; for each successful match, write out the contents of capture group 1.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch19fn5">[5]</a></sup> <span class="docEmphasis">Hint:</span> Read the entire text file into a string object by creating an <tt>if stream</tt> object to read the file and a <tt>basic_ostringstream</tt> object to build the string, and inserting the buffer returned by the <tt>ifstream's</tt> member function rdbuf() into the <tt>basic_ostringstream</tt> object.</p></blockquote></div></li><li><div style="font-weight:normal"><p class="docList">Now write another program that has a copy of the code of the <tt>search</tt> function in <a class="docLink" href="ch19lev1sec1.html#ch19ex08">Example 19.8</a>. Change the search function into a template function with a template type parameter named <tt>Fn</tt> and an additional function call argument, <tt>Fn func</tt>. Also replace the code that shows the match by inserting it into <tt>cout</tt> with a call to <tt>func(match)</tt>. Now use the function for the same search as in the preceding part of this exercise.<sup class="docFootnote"><a class="docLink" href="#ch19fn6">[6]</a></sup></p><blockquote><p class="docFootnote"><sup><a name="ch19fn6">[6]</a></sup> You'll have to write a callable type whose function call operator takes a <tt>match_results</tt> object and copies the first capture group to <tt>cout</tt>.</p></blockquote></div></li><li><div style="font-weight:normal"><p class="docList">Write a program that uses a <tt>regex_iterator</tt> object to do the same search.</p></div></li><li><div style="font-weight:normal"><p class="docList">Write a program that uses a <tt>regex_token_iterator</tt> object to do the same search.</p></div></li><li><div style="font-weight:normal"><p class="docList">Now change all four programs to copy to <tt>cout</tt> all text that occurs between the tags <tt>&quot;&lt;CODE&gt;&quot;</tt> and <tt>&quot;&lt;/CODE&gt;&quot;</tt> or between the tags <tt>&quot;&lt;PRE&gt;&quot;</tt> and <tt>&quot;&lt;/PRE&gt;&quot;</tt>.<sup class="docFootnote"><a class="docLink" href="#ch19fn7">[7]</a></sup></p><blockquote><p class="docFootnote"><sup><a name="ch19fn7">[7]</a></sup> That is, search for text matching the regular expression <tt>&quot;&lt;(CODE|PRE)&gt;(.*?)&lt;/\1&gt;&quot;</tt>; for each successful match, write out the contents of capture group 2.</p></blockquote></div></LI></ol></div>
</td></TR></table></p>

<a name="ch19lev2sec18"></a>

<h4 id="title-IDANMFII" class="docSection2Title">Exercise 3</H4>
<P><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch19qa3q1"></a><b></b></td><TD><p class="docText">Use a pair of <tt>regex_iterator</tt> objects to search for valid host-names<sup class="docFootnote"><a class="docLink" href="#ch19fn8">[8]</a></sup> in an HTML file, and use the utility function you wrote for <a class="docLink" href="#ch19lev2sec17">Exercise 2</a> in <a class="docLink" href="ch18.html#ch18">Chapter 18</a> to show the contents of each successful match.</P><blockquote><p class="docFootnote"><sup><a name="ch19fn8">[8]</a></sup> See <a class="docLink" href="#ch19lev2sec17">Exercise 2</a> in <a class="docLink" href="ch17.html#ch17">Chapter 17</a> for a suitable regular expression.</P></blockquote></TD></tr></table></p>

<a name="ch19lev2sec19"></a>
<H4 id="title-IDAGOFII" class="docSection2Title">Exercise 4</H4>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><TD align="right" class="docText" width="50"><a name="ch19qa4q1"></a><B></b></td><td><p class="docText">Write a program that uses a pair of <tt>regex_token_iterator</tt> objects to extract data fields from a comma-separated file. Don't forget to allow for spaces and tabs before and after each comma.<sup class="docFootnote"><a class="docLink" href="#ch19fn9">[9]</a></sup></p><blockquote><p class="docFootnote"><sup><a name="ch19fn9">[9]</a></sup> <span class="docEmphasis">Hint:</span> Write a regular expression that describes the separator, and use an iterator that shows the text that doesn't match the separator.</p></blockquote></TD></tr></table></P>

<a name="ch19lev2sec20"></a>
<h4 id="title-IDAFPFII" class="docSection2Title">Exercise 5</h4>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch19qa5q1"></a><b></b></td><td><p class="docText">Write a program that puts the integer values 1 and 4 into a <tt>vector&lt;int&gt;</tt> and passes that vector as the field specifier in the constructor of a <tt>regex_token_iterator</tt> object. Use that object to search for your favorite regular expression. Now put the same values into an array of <tt>int</tt>, pass that array to the constructor, and repeat the search. What happens if the field index is higher than the index of the last capture group in the regular expression? What happens if you repeat a field index in the initializer?</p></td></tr></table></p>

<a name="ch19lev2sec21"></a>
<h4 id="title-IDAFQFII" class="docSection2Title">Exercise 6</h4>
<p><table border="0" cellspacing="16" cellpadding="0"><tr valign="top"><td align="right" class="docText" width="50"><a name="ch19qa6q1"></a><b></b></TD><td><p class="docText">HTML cross-references have the form <tt>&lt;A HREF=&quot;reference&quot;&gt; text&lt;/A&gt;&quot;</tt> and <tt>&lt;A NAME=&quot;reference&quot;&gt;text&lt;/A&gt;&quot;</tt>. The first is a link, and the second is the target of a link. In both cases, the reference is in quotes. Write a program that uses a pair of <tt>regex_token_iterator</tt> objects to search for cross-references in an HTML file and shows, for each cross-reference, either <tt>&quot;HREF=&quot;</tt> or <tt>&quot;NAME=&quot;</tt>, as appropriate, followed by text of the reference.</P></td></tr></table></P>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch19lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch20.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>