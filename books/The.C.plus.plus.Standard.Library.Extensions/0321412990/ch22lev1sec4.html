<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 22.4.&nbsp; Text Conversions</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch22lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch22lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a href="31031536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch22lev1sec4"></a>

<h3 id="title-IDA0VTTF" class="docSection1Title">22.4. Text Conversions</h3>
<p class="docText"><a name="iddle1747"></a><a name="iddle1748"></a><a name="iddle1749"></a><a name="iddle1751"></a><a name="iddle1752"></a><a name="iddle1753"></a><a name="iddle1754"></a><a name="iddle1755"></a><a name="iddle1756"></a><a name="iddle1772"></a><a name="iddle1875"></a><a name="iddle1876"></a><a name="iddle1877"></a><a name="iddle1879"></a><a name="iddle1880"></a><a name="iddle1881"></a><a name="iddle1882"></a><a name="iddle1883"></a><a name="iddle1884"></a>The C99 Standard provides a set of functions for converting arrays of <tt>char</tt> and arrays of <tt>wchar_t</tt> to numeric values of various types. The names and return types of these functions are given in <a class="docLink" href="#ch22table05">Table 22.5</a>. The ones that are new in C99 are marked with an asterisk.</p>
<a name="ch22table05"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><h5 class="docTableTitle">Table 22.5. Text-Conversion Functions for Character Arrays</h5></caption><colgroup align="left" span="3"><col width="200"><col width="150"><col width="150"></colgroup><thead><tr><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Function Name</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Function Name</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Return Type</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtof*</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstof*</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>float</tt>
</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtod</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstod</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>double</tt>
</p></TD></TR><tr><td class="bottomBorder" align="left" valign="top"><p class="docText"><tt>strtold*</tt></P></TD><td class="bottomBorder" align="left" valign="top"><p class="docText"><tt>wcstold*</tt></p></td><td class="bottomBorder" align="left" valign="top"><p class="docText"><tt>long double</tt>
</P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtol</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstol</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>long int</tt>
</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtoul</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstoul</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>unsigned long int</tt>
</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtoll*</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstoll*</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>_Longlong</tt>
</P></TD></TR><tr><td class="bottomBorder" align="left" valign="top"><p class="docText"><tt>strtoull*</tt></P></TD><td class="bottomBorder" align="left" valign="top"><p class="docText"><tt>wcstoull*</tt></p></TD><TD class="bottomBorder" align="left" valign="top"><p class="docText"><tt>_ULonglong</tt>
</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtoimax*</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstoimax*</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>intmax_t</tt>
</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>strtoumax*</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>wcstoumax*</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>uintmax_t</tt>
</p></td></tr></table></P><br>
<p class="docText">Declarations of the functions in the last two rows are in the header <tt>&lt;cint-types&gt;</tt>. For the rest, declarations of the <tt>strXXX</tt> functions are in the header <tt>&lt;cstdlib&gt;</tt>, and of the <tt>wcsXXX</tt> functions, the header <tt>&lt;cwchar&gt;</tt>.</P>
<p class="docText">These functions all have similar signatures, differing in the character type that they take and the numeric type that they return. When the name begins with <tt>str</tt>, the function's character type is <tt>char</tt>; when it begins with <tt>wcs</tt>, the character type is <tt>wchar_t</tt>. If we represent the character type by <tt>Elem</tt> and the return type by <tt>Ret</tt>, the signatures of all these functions look like this:</p>
<div class="docText"><pre>   <span class="docEmphasis">// INTEGER CONVERSIONS:</span>
Ret xxxtoRet(const Elem *s,Elem **endptr,int base);
   <span class="docEmphasis">// FLOATING-POINT CONVERSIONS:</span>
Ret xxxtoRet(const Elem *s,Elem ** endptr);
</pre></div><br>
<p class="docText">Each of these <span class="docEmphasis">text-conversion functions</span> converts the initial sequence of characters in the string <tt>s</tt> to an equivalent value <tt>x</tt> of type <tt>Ret</tt>. If <tt>endptr</tt> is not a null pointer, the function stores a pointer to the unconverted remainder of the string in <tt>*endptr</tt>. The function then returns <tt>x</tt>. If the string does not match a valid pattern, the value of <tt>x</tt> is 0, and the value, if any, stored in <tt>*endptr</tt> is <tt>s</tt>.</P>
<p class="docText">When the return type is an integer type, the conversion is done in the base indicated by the argument <tt>base</tt>. If the equivalent value is too large to <a name="iddle1147"></a><a name="iddle1522"></a><a name="iddle1673"></a><a name="iddle1750"></a><a name="iddle1757"></a><a name="iddle1878"></a><a name="iddle1885"></a>represent as type <tt>Ret</tt>, the function stores the value of <tt>ERANGE</tt> in <tt>errno</tt> and returns either the maximum value that can be represented by the type <tt>Ret</tt> if <tt>x</tt> is positive or the minimum value if <tt>x</tt> is negative.</P>
<p class="docText">When the return type is a floating-point type, the conversion is done in base 10. If a range error occurs, the functions behave as described in <a class="docLink" href="ch12lev1sec5.html#ch12lev1sec5">Section 12.5</a>.</p>

<a href="31031536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch22lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch22lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>