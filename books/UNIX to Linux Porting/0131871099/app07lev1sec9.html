<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section G.9.&nbsp; Logical Volume Management</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app07lev1sec8.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app07lev1sec10.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><TR><td valign="top"><a name="app07lev1sec9"></a>

<H3 id="610536-808" class="docSection1Title">G.9. <a name="iddle2441"></a><a name="iddle1774"></a>Logical Volume Management</h3>
<p class="docText"><a class="docLink" href="#app07table10">Tables G-10</a> and <a class="docLink" href="#app07table11">G-11</a> show differences in Linux and Solaris logical volume management and configuration tasks.<a name="d0e131853"></a><a name="d0e131854"></a></P>
<a name="app07table10"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><h5 class="docTableTitle">Table G-10. <sup class="docFootnote"><a class="docLink" href="#app07tn10">[*]</a></sup> Logical Volume Management</h5></caption><colgroup align="left" span="3"><col width="150"><col width="150"><col width="200"></colgroup><thead><tr><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Volume Management Task</P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Solaris</P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Linux</P></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Initialize a disk for VM</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Create partition area/size: <tt>metainit</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Create partition area/size: <tt>pvcreate mkraid, mdadm</tt></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Create a volume or volume group (VG)</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metainit volumename raidtype devices...</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvcreate LVname vgcreate VGname devicename mkraid, mdadm</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Enable the volume or volume group</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvchange -a y LVname<br>vgchange -a y VGname<br>raidstart</tt></P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Disable the volume or volume group</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvchange -a n LVname<br>vgchange -a n VGname<BR>raidstop, mdadm</tt></P></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Delete the volume or volume group</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaclear</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvremove LVname <br>vgremove VGname</tt></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Add a device to the volume or volume group</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metattach or metainit</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvextend LVname <br>vgextend VGname <br>newdevname</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Delete a device from the volume or volume group</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metadetach</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvreduce LVname <br>vgreduce VGname <br>devicename <BR>raidreconf</tt></p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Create a soft partition or logical volume (no RAID)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metainit -p</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvcreate -Lsize <br>-nLVname VGname</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Create a soft partition or logical volume (RAID 0)</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">metainit with RAID 0 on devices first, and then <tt>metainit -p</tt> to create the soft partition volume</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvcreate -iNumOfStripes -IStripeSize -nLVname VGname mdadm, mkraid</tt></P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Create a soft partition or logical volume on a specific device</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but the second <tt>metainit -p</tt> has the device name at the end of the command line</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Same as above, but add the device name to the end of the command line</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Delete a soft partition or logical volume</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaclear</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvremove /dev/VGname/ LVname raidreconf</tt></p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Extend a volume or logical volume</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metattach volume [size or devicename]</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lvextend -Lsize /dev/VGname/LVname raidreconf</tt></P></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Extend a file system after volume has been grown</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>growfs</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Red Hat ext2/ext3: <tt>resize2fs</tt> SUSE ext2: <tt>resize2fs</tt> Red Hat reiser: <tt>resize_reiserfs</tt> Note: View the man pages for unmount requirements, and check whether the online version is available.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Reduce a volume or logical volume</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metadetach</tt> <span class="docEmphasis"><tt>Volname devicename</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">ext2: <tt>resize2fs lvreduce</tt> reiser: <tt>resize_reiserfs lvreduce</tt> Note: View the man pages for unmount requirements.</P></td></tr></table></p><br><blockquote><p class="docFootnote"><sup><a name="app07tn10">[*]</a></sup> Table A-17 of IBM Redbook</p></blockquote>

<p class="docText"></p><a name="app07table11"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><h5 class="docTableTitle">Table G-11. <sup class="docFootnote"><a class="docLink" href="#app07tn11">[*]</a></sup> <a name="iddle1146"></a><a name="iddle2442"></a>Logical Volume Management Commands</h5></caption><colgroup align="left" span="3"><col width="150"><col width="150"><col width="200"></colgroup><thead><tr><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Volume Management Task</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Solaris</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Linux</p></th></TR></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Set up or display metadb</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metadb</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgdisplay, lvdisplay, lsraid</tt></p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">Display metadevice status</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metastat</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgdisplay, lvdisplay cat /proc/mdstat</tt></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Initialize raw devices to metadevices</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metainit</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>pvcreate</tt></P></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Attach metadevices</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metattach</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgchange, lvchange</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Detach metadevices</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metadetach</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgchange, lvchange</tt></P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Clear and remove metadevices</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaclear</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgremove, lvremove</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Replace a metadevice</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metareplace</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>raidreconf</tt></P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Rename a volume</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metarename</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>raidreconf</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Check metadevice ID configuration</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metadevadm</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>mdadm</tt></p></td></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Manage hot spares</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metahs</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>mdadm, raidhotadd, raidhotremove</tt></P></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Set submirrors offline</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaoffline</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>mdadm</tt></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Set submirrors online</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaonline</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>mdadm</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Change volume parameters</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaparam</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgchange, lvchange</tt></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Back up volume group metadata</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgcfgbackup</tt></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Recover soft partition configuration information</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metarecover</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgcfgrestore</tt></p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Set up root filesystem for mirroring</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaroot</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">Administer disk sets for sharing</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>metaset</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Resynchronize volume during reboot</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>metasync</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">Expand a filesystem size</p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>growfs</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>vgextend, lvextend, resize2fs, resize_ reiserfs, raidreconf</tt></p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><a name="d0e132554"></a><a name="d0e132555"></a>Start up the kernel metadevice modules</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">/etc/system</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">Set the default number of available volumes</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">/kernel/drv/md.conf</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">/etc/sysconfig/lvm <br>/etc/raidtab</p></td></tr></table></p><br><blockquote><p class="docFootnote"><sup><a name="app07tn11">[*]</a></sup> Table A-18 of IBM Redbook</p></blockquote>

</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app07lev1sec8.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=app07lev1sec10.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>