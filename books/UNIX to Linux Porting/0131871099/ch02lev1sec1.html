<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 2.1.&nbsp; Compilers</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch02lev1sec1"></a>
<H3 id="588026-838" class="docSection1Title">2.1. Compilers</H3>
<p class="docText">One of the assessment questions in <a class="docLink" href="ch01.html#ch01">Chapter 1</a>, &quot;Porting Project Considerations,&quot; asks what programming language the application to be ported is written in. The question tries to ascertain whether the application can be compiled by any of the supported<sup class="docFootnote"><a class="docLink" href="#ch02fn2">[2]</a></sup> compilers on Linux. The most popular compiler in Linux and in the open-source community today is the <a name="iddle1441"></a>GNU Compiler Collection (<a name="iddle1170"></a>GCC)<a name="d0e3049"></a>. Initially, when the open-source movement started, the term <a name="iddle1169"></a><a name="iddle1388"></a><a name="iddle1387"></a>GCC referred to the <a name="iddle1438"></a>GNU C Compiler (<tt>gcc</tt>)<a name="d0e3074"></a><a name="d0e3075"></a>. Today, because of its overwhelming popularity, GCC is now an integrated distribution of compilers that include several major programming languages, including C, C++, FORTRAN, COBOL, and Java.<sup class="docFootnote"><a class="docLink" href="#ch02fn3">[3]</a></sup></P><blockquote><p class="docFootnote"><sup><a name="ch02fn2">[2]</a></sup> One of the questions we are often asked is this: Does Linux support the RPG language? Unfortunately, the answer is no. The best solution today is to convert RPG applications to Java applications.</P></blockquote><blockquote><p class="docFootnote"><sup><a name="ch02fn3">[3]</a></sup> GCC also includes support for Objective C and Ada.</p></blockquote>
<a name="ch02lev2sec1"></a>
<h4 id="title-IDAT1AYY" class="docSection2Title">2.1.1. GNU gcc C Compiler</h4>
<p class="docText"><tt>gcc</tt> supports the ANSI C version of the C standard, although support for the most recent version is not yet complete. These standards are as follows:</P>
<UL><LI><p class="docList">ANSI C standard (1990 ISO C and C94/C95)</P></LI><li><p class="docList">C99 ISO C standard (support not complete)<sup class="docFootnote"><a class="docLink" href="#ch02fn4">[4]</a></sup>.</P><blockquote><p class="docFootnote"><sup><a name="ch02fn4">[4]</a></sup> GCC has incomplete support for C99. See <a class="docLink" target="_blank" href="http://gcc.gnu.org/gcc-3.4/c99status.html">http://gcc.gnu.org/gcc-3.4/c99status.html</a></p></blockquote></li></UL>
<p class="docText"><tt>gcc</tt> has a number of compiler flags to allow the user to select the desired standard. If no standard is specified, the default is <tt>-std=gnu89</tt>; this will change to <tt>-std=gnu99</tt> in some future release when the C99 support is complete.</P>
<p class="docText">Most of the compiler support routines used by GCC are present in <tt><a name="iddle1688"></a>libgcc</tt>, with the exception of the <tt>freestanding</tt> environment<a name="d0e3132"></a>. When the <tt>-ffreestanding</tt> compiler flag is turned on, users are required to provide their own version of <tt>memcpy, memove, memset</tt>, and <tt>memcmp</tt>.</p>
<p class="docText">For any given input file, the filename suffix determines what kind of compilation is done:</p>
<ul><li><p class="docList"><tt>file.c</tt></P><p class="docList">C source code that must be preprocessed</p></li><li><p class="docList"><tt>file.i</tt></p><p class="docList">C source code that should not be preprocessed</P></LI><li><p class="docList"><tt>file.m</tt></p><p class="docList">Objective-C source code (note that you must link with the library <tt>libobjc.a</tt> to make an Objective-C program work)</p></li><li><p class="docList"><tt>file.mi</tt></p><p class="docList">Objective-C source code that should not be preprocessed</p></li><li><p class="docList"><tt>file.h</tt></p><p class="docList">C header file (not to be directly compiled or linked)</p></li></ul>
<p class="docText">The command-line options of the GCC family of compilers differ from other proprietary compilers. Many options for GCC compilers have multiletter names; therefore, multiple single-letter options may <span class="docEmphasis">not</span> be grouped: <tt>-dr</tt> is different from <tt>-d-r</tt>. In addition, many options have long names starting with <tt>-f</tt> or <tt>-W</tt> (for example, <tt>-fforce-mem</tt>, <tt>-fstrength-reduce</tt>, <tt>-Wformat</tt>, and so on). Most of these have both positive and negative forms; the negative form of <tt>-ffoo</tt> would be <tt>-fno-foo</tt>.<a name="d0e3227"></a><a name="d0e3228"></a><a name="d0e3229"></a></p>
<p class="docText">More than 100 command-line options can be passed to <tt>gcc</tt>. More than likely, you will use only a few. The following is a typical compile line for <tt>gcc</tt> compiler invocation:</P>
<div class="docText"><pre>gcc &lt;additional flags here &gt; -c main.c  o main.o
</pre></div><br>
<p class="docText">Here are some examples of <tt>gcc</tt> options controlling the kind of output it produces:</p>
<div class="docText"><pre>-c  compile or assemble source files but do not link.
-S  output is in the form of assembler code.
-E  output is in the form of preprocessed source code.
-v  print the commands executed to run the stages of compilation.
--help  print the description of command-line options.
</pre></div><br>

<a name="ch02lev2sec2"></a>
<H4 id="title-IDABEDI1" class="docSection2Title">2.1.2. <a name="iddle1120"></a><a name="iddle1173"></a><a name="iddle1446"></a>GNU g++ (C++ ) Compiler</H4>
<p class="docText">Starting with GNU <tt>g++</tt> version 3.4.0, GNU <tt>g++</tt> claims to be <span class="docEmphasis">much</span> closer to the ISO/ANSI C++ standards.<sup class="docFootnote"><a class="docLink" href="#ch02fn5">[5]</a></sup> GNU <tt>g++</tt> ships with the standard <tt>libstdc++</tt>. C++ source files conventionally use one of these suffixes: <tt>.C, .cc, .cpp, .c++, .cp</tt>, or <tt>.cxx</tt>; preprocessed C++ files use the suffix <tt>.ii</tt>. GCC recognizes files with these names and compiles them as C++ programs even if you call the compiler the same way as for compiling C programs (usually with the name <tt>gcc</tt>).<a name="d0e3314"></a></P><blockquote><p class="docFootnote"><sup><a name="ch02fn5">[5]</a></sup> <a class="docLink" target="_blank" href="http://gcc.gnu.org/gcc-3.4/changes.html#cplusplus">http://gcc.gnu.org/gcc-3.4/changes.html#cplusplus</a></P></blockquote>
<p class="docText">However, C++ programs often require class libraries as well as a compiler that understands the C++ language. Under some circumstances, you might want to compile programs from standard input, or otherwise without a suffix that flags them as C++ programs. <tt>g++</tt> is a program that calls GCC with the default language set to C++, and automatically specifies linking against the C++ library. On many systems, the executable <tt>g++</tt> is also installed with the name <tt>c++</tt>.</P>
<p class="docText">When you compile C++ programs, you may specify many of the same command-line options that you use for compiling programs in any language, or command-line options meaningful for C and related languages, or options that are meaningful only for C++ programs.</p>
<p class="docText">You can use most of the GNU compiler options when using the <tt>g++</tt> compiler, but some options are meaningful only for C++ programs. <a class="docLink" href="#ch02table01">Table 2-1</a> shows a few useful <tt>g++</tt> options.</p>
<a name="ch02table01"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><H5 class="docTableTitle">Table 2-1. Sample g++ Options</H5></caption><colgroup align="left" span="2"><col width="190"><col width="310"></colgroup><thead><TR><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">GNU g++ Options</P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Description</P></th></tr></thead><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-fcheck-new</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Check that the pointer returned by operator <tt>new</tt> is non-null before attempting to modify the storage allocated.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-fno-elide-constructors</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">The C++ standard allows an implementation to omit creating a temporary object that is used only to initialize another object of the same type. Specifying this option disables that optimization and forces g++ to call the copy constructor in all cases.</p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-ffor-scope-fno-for-scope</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">If <tt>-ffor-scope</tt> is specified, the scope of variables declared in a <tt>for-init-statement</tt> is limited to the <tt>for</tt> loop itself, as specified by the C++ standard. If <tt>-fno-for-scope</tt> is specified, the scope of variables declared in a <tt>for-init-statement</tt> extends to the end of the enclosing scope, as was the case in old versions of g++ and other (traditional) implementations of C++. The default if neither flag is given is to follow the standard, but to allow and give a warning for old-style code that would otherwise be invalid or have different behavior.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-fno-rtti</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Disable generation of information about every class with virtual functions for use by the C++ runtime type identifier features (<tt>dynamic_cast</tt> and <tt>typeid</tt>). If you do not use those parts of the language, you can save some space by using this flag. Note that exception handling uses the same information, but it generates it as needed.</p></TD></tr></table></p><br>
<p class="docText">You will use the following command to compile a typical C++ program under GNU:<a name="d0e3452"></a><a name="d0e3453"></a></P>
<div class="docText"><pre>g++ &lt;additional options here&gt; -c firstClass.C o firstClass.o
</pre></div><BR>

<a name="ch02lev2sec3"></a>
<H4 id="title-IDALVATH" class="docSection2Title">2.1.3. GNU <a name="iddle1168"></a><a name="iddle1386"></a>g77 FORTRAN</H4>
<p class="docText"><a name="iddle1172"></a><a name="iddle1445"></a>GNU FORTRAN consists of a compiler, runtime libraries, and debugger support. It supports ANSI FORTRAN 77 conformance, plus popular extensions to <a name="iddle1363"></a>FORTRAN, including some ANSI/ISO FORTRAN 90 features.<a name="d0e3495"></a></P>
<p class="docText">The <tt>libf2c</tt> library is distributed with GNU FORTRAN for the convenience of its users but is not part of GNU FORTRAN. It contains the procedures needed by FORTRAN programs while they are running.</p>
<p class="docText">GNU FORTRAN, or <tt>g77</tt>, is designed initially as a free replacement for, or alternative to, the UNIX <tt>f77</tt> command and was designed to fit in well with the other GNU compilers and tools. For example, in a GNU FORTRAN installation, <tt>gcc</tt> recognizes FORTRAN source files by name, just like it does with C and C++ source files.<sup class="docFootnote"><a class="docLink" href="#ch02fn6">[6]</a></sup>. It knows to use the FORTRAN compiler named <tt>f771</tt>, instead of <tt>cc1</tt> or <tt>cc1plus</tt>, to compile FORTRAN files. The non-FORTRAN-related operation of <tt>gcc</tt> is generally unaffected by installing the GNU FORTRAN version of <tt>gcc</tt>. However, without the installed version of <tt>gcc</tt> being the GNU FORTRAN version, <tt>gcc</tt> will not be able to compile and link FORTRAN programsand because <tt>g77</tt> uses <tt>gcc</tt> to do most of the actual work, neither will <tt>g77</tt>!</p><blockquote><p class="docFootnote"><sup><a name="ch02fn6">[6]</a></sup> .f, .for, and .FOR are file extensions that are recognized as FORTRAN source and must not be preprocessed. .F, .fpp, and .FPP are file extensions that are recognized as FORTRAN source and must be preprocessed</p></blockquote>
<p class="docText">Because the <tt>g77</tt> command is essentially just a front end for the <tt>gcc</tt> command, FORTRAN users will normally use <tt>g77</tt> rather than <tt>gcc</tt>, because <tt>g77</tt> knows how to specify the libraries needed to link with FORTRAN programs (<tt>libf2c</tt> and <tt>lm</tt>). <tt>g77</tt> can still compile and link programs and source files written in other languages, just like <tt>gcc</tt>.</P>
<p class="docText">As of the writing of this book, an effort is underway to replace FORTRAN 77, <tt>g77</tt>, with GNU FORTRAN (<tt>gfortran</tt>) or FORTRAN 95. Although <tt>gfortran</tt><sup class="docFootnote"><a class="docLink" href="#ch02fn7">[7]</a></sup> is available for download and use, it is still considered to be in (public) beta testing, and has been since February 17, 1995. GNU recommends you continue to use <tt>g77</tt> for all new development until they officially release <tt>gfortran</tt>.<a name="d0e3602"></a><a name="d0e3603"></a><a name="d0e3604"></a><a name="d0e3605"></a></P><blockquote><p class="docFootnote"><sup><a name="ch02fn7">[7]</a></sup> <a class="docLink" target="_blank" href="http://gcc.gnu.org/fortran/">http://gcc.gnu.org/fortran/</a></P></blockquote>

<a name="ch02lev2sec4"></a>
<H4 id="title-IDAZ0ATH" class="docSection2Title">2.1.4. <a name="iddle1443"></a>GNU Compiler for Java<sup class="docFootnote"><a class="docLink" href="#ch02fn8">[8]</a></sup>
</H4><blockquote><p class="docFootnote"><sup><a name="ch02fn8">[8]</a></sup> <a class="docLink" target="_blank" href="http://gcc.gnu.org/java/">http://gcc.gnu.org/java/</a></p></blockquote>
<p class="docText"><a name="iddle1171"></a><a name="iddle1393"></a>GCJ is a portable, optimizing, ahead-of-time compiler for the Java Programming Language<a name="d0e3634"></a><a name="d0e3635"></a>. It can compile the following:<a name="d0e3637"></a></P>
<ul><li><p class="docList">Java source code directly to native machine code</P></LI><li><p class="docList">Java source code to Java bytecode (class files)</p></li><li><p class="docList">Java bytecode to native machine code</P></li></ul>
<p class="docText">Applications are compiled and linked with the GCJ runtime, <tt><a name="iddle1689"></a>libgcj</tt><a name="d0e3662"></a>. Included within <tt>libgcj</tt> are the core class libraries, a garbage collector, and a bytecode interpreter. One feature of <tt>libgcj</tt> is that it can dynamically load and interpret class files, resulting in a Java application that is a mix of compiled and interpreted objects or classes.</p>
<p class="docText">Debugging support for GCJ applications is available using recent versions of the GNU debugger, GDB.<sup class="docFootnote"><a class="docLink" href="#ch02fn9">[9]</a></sup> A short tutorial on using GDB to debug GCJ-compiled applications is available at <a class="docLink" target="_blank" href="http://gcc.gnu.org/java/gdb.html">http://gcc.gnu.org/java/gdb.html</a>.</p><blockquote><p class="docFootnote"><sup><a name="ch02fn9">[9]</a></sup> The latest version as of this writing is version 6.3.</P></blockquote>

<a name="ch02lev2sec5"></a>
<H4 id="title-IDAN4ATH" class="docSection2Title">2.1.5. GNU <a name="iddle1132"></a>Cobol</h4>
<p class="docText">In 1999, a GNU project named <a name="iddle1392"></a>GCC for COBOL was started to create a COBOL 85-compliant compiler for GNU/Linux and other operating systems<a name="d0e3699"></a>. At the time of this writing, the compiler was not yet ready for production use. For more information about the GNU COBOL project, refer to <a class="docLink" target="_blank" href="http://www.gnu.org/software/cobol/cobolforgcc.html">www.gnu.org/software/cobol/cobolforgcc.html</a>.<a name="d0e3704"></a></p>
<p class="docText">Other open-source and commercially available COBOL compilers support Linux. One open-source COBOL compiler is called <a name="iddle2479"></a>TinyCOBOL.<sup class="docFootnote"><a class="docLink" href="#ch02fn10">[10]</a></sup> For commercially available COBOL compilers, there are Acucobol-GT from Acucorp (<a class="docLink" target="_blank" href="http://www.acucorp.com">www.acucorp.com</a>) and <a name="iddle1835"></a>Micro Focus Object Cobol Developer Suite from Micro Focus (<a class="docLink" target="_blank" href="http://www.microfocus.com">www.microfocus.com</a>).<a name="d0e3731"></a><a name="d0e3732"></a></p><blockquote><p class="docFootnote"><sup><a name="ch02fn10">[10]</a></sup> <a class="docLink" target="_blank" href="http://tiny-cobol.sourceforge.net/index.php">http://tiny-cobol.sourceforge.net/index.php</a></p></blockquote>

<a name="ch02lev2sec6"></a>
<h4 id="title-IDATJBTH" class="docSection2Title">2.1.6. Compilers from Other Sources</h4>
<p class="docText">Several other compilers for Linux are available from different vendors for C++, FORTRAN, COBOL, and <a name="iddle1650"></a>Java. Intel offers compilers for C++ and FORTRAN.<sup class="docFootnote"><a class="docLink" href="#ch02fn11">[11]</a></sup> <a name="iddle1580"></a>IBM offers the XL C/C++ compilers for Linux running on POWER.<sup class="docFootnote"><a class="docLink" href="#ch02fn12">[12]</a></sup> Micro Focus offers a COBOL compiler for Linux.<sup class="docFootnote"><a class="docLink" href="#ch02fn13">[13]</a></sup><a name="d0e3766"></a></p><blockquote><p class="docFootnote"><sup><a name="ch02fn11">[11]</a></sup> <a class="docLink" target="_blank" href="http://www.intel.com/cd/software/products/asmo-na/eng/compilers/219760.htm">www.intel.com/cd/software/products/asmo-na/eng/compilers/219760.htm</a></p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch02fn12">[12]</a></sup> <a class="docLink" target="_blank" href="http://www-306.ibm.com/software/awdtools/xlcpp/features/linux/xlcpp-linux.html">www-306.ibm.com/software/awdtools/xlcpp/features/linux/xlcpp-linux.html</a></p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch02fn13">[13]</a></sup> <a class="docLink" target="_blank" href="http://www.microfocus.com/products/finder/targenvunix.asp">www.microfocus.com/products/finder/targenvunix.asp</a></p></blockquote>
<p class="docText">The porting chapters for Solaris, AIX, and HP-UX cover more of the differences between the respective native platform compilers and the GNU C and C++ compilers.</p>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>