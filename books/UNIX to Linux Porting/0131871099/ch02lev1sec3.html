<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 2.3.&nbsp; Build Environment</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch02lev1sec3"></a>
<H3 id="title-IDATICI0" class="docSection1Title">2.3. <a name="iddle1087"></a>Build Environment</H3>
<p class="docText">The assessment of the application continues by examining its build environment. When porting applications, it is important to see what tools are used to build the application. In most circumstances, you will find that the build tools used on other UNIX platforms will have similar counterparts on Linux. When examining the build environment, it is also necessary to take note of the build process. Some build processes are straightforward, and others are complex. Complex build processes add to porting difficulty and should be factored in when creating the schedules for the project.<a name="d0e3867"></a></P>
<a name="ch02lev2sec7"></a>
<H4 id="title-IDANJCI0" class="docSection2Title">2.3.1. <a name="iddle1088"></a><a name="iddle1414"></a>gmake</h4>
<p class="docText">The <tt>make</tt> development tool in Linux is the GNU <tt>make</tt> or <tt>gmake</tt>. As of this writing, the latest version of <tt>gmake</tt> is version 3.8, which this section is based on. The <tt>gmake</tt> home page is located at <a class="docLink" target="_blank" href="http://www.gnu.org/software/make/">www.gnu.org/software/make/</a>. Note that <tt>gmake</tt> 3.8 is also available on Solaris, AIX, and HP-UX. Porting the build environment from other UNIX platforms to Linux means using <tt>gmake</tt> and making sure the <a name="iddle1796"></a>makefiles to build the application are correctly ported to build all necessary application modules.<a name="d0e3917"></a><a name="d0e3918"></a><a name="d0e3919"></a></p>
<p class="docText">Because <tt>gmake</tt> conforms to the POSIX standard similarities between other UNIX operating platforms, makefiles and GNU makefiles abound. However, there are still some differences, which are covered in more detail in Chapters <a class="docLink" href="ch04.html#ch04">4</a>, <a class="docLink" href="ch05.html#ch05">5</a> and <a class="docLink" href="ch06.html#ch06">6</a>.</p>

<a name="ch02lev2sec8"></a>
<H4 id="title-IDAVMCI0" class="docSection2Title">2.3.2. <a name="iddle1089"></a><a name="iddle1420"></a>GNU Binutils</H4>
<p class="docText">The development tool chain for Linux is made up of other GNU tools known as the GNU binutils. The most commonly used tool in the GNU binutils is the GNU linker, <tt><a name="iddle1670"></a>ld</tt>, and the GNU assembler, <tt>as</tt>.<a name="d0e3964"></a><a name="d0e3965"></a></P>
<a name="ch02lev3sec1"></a>
<H5 id="title-IDANOCI0" class="docSection3Title">2.3.2.1. The <a name="iddle1094"></a><a name="iddle1426"></a><a name="iddle1452"></a>GNU ld</H5>
<p class="docText">Running <tt>ld</tt> is usually the last step when compiling source code to produce a program executable. The <tt>ld</tt> command is responsible for combining object and archive files as well as for reconciling symbol references within the program executable. The GNU linker provides more diagnostic information than other linkers. Although other linkers simply abandon execution when an error is encountered, the GNU <tt>ld</tt> tries to continue execution whenever possible to further identify the cause of the error.</P>
<p class="docText">Although GNU <tt>ld</tt> has a lot of features to offer, including the use of <span class="docEmphasis">linker scripts,</span> most of the discussion around GNU <tt>ld</tt> focuses on the linker command-line options. A simple command-line option that shows how <tt>ld</tt> links an object file follows:</p>
<div class="docText"><pre>$ ld -o <span class="docEmphasis">output</span> /lib/crt0.o foo.o -lc
</pre></div><br>
<p class="docText">This tells <tt>ld</tt> to produce a file called output as the result of linking the file /lib/crt0.o with foo.o and the library <tt>libc.a</tt>, which will come from the standard search directories.</P>
<p class="docText">GNU <tt>ld</tt> can also be invoked indirectly through a GNU compiler, such as <tt>gcc</tt>. When invoking indirectly, all command-line options to the linker must be prefixed by the <tt>-Wl</tt> option, as in the following example:</P>
<div class="docText"><pre>$ gcc -Wl,--startgroup foo.o bar.o -Wl,--endgroup
</pre></div><br>
<p class="docText">GNU <tt>ld</tt> supports many options that are compatible with linker options from other operating systems such <a name="iddle1074"></a>as Solaris, AIX, and HP-UX. In each of the main porting chapters for the different operating systems (Chapters <a class="docLink" href="ch04.html#ch04">4</a>, <a class="docLink" href="ch05.html#ch05">5</a> and <a class="docLink" href="ch06.html#ch06">6</a>), GNU <tt>ld</tt> options are compared side by side so that the porting engineer has a reference of what linker flags to use when porting from other platforms.<a name="d0e4078"></a><a name="d0e4079"></a><a name="d0e4080"></a><a name="d0e4081"></a></p>
<p class="docText">For more information about the <tt>ld</tt> options, consult the latest GNU <tt>ld</tt> manual, available from <a class="docLink" target="_blank" href="http://www.gnu.org/software/binutils/manual/ld-2.9.1/ld.html">www.gnu.org/software/binutils/manual/ld-2.9.1/ld.html</a>.</p>


<a name="ch02lev2sec9"></a>
<h4 id="title-IDA0TCI0" class="docSection2Title">2.3.3. The <a name="iddle1093"></a><a name="iddle1419"></a><a name="iddle1425"></a>GNU as</H4>
<p class="docText">GNU <tt>as</tt> is a family of assemblers. If you use (or have used) the GNU assembler on one architecture, you should find a fairly similar environment when you use it on another architecture. Each version has much in common with the others, including object file formats, most assembler directives (often called pseudo-ops), and assembler syntax.</p>
<p class="docText"><tt>as</tt> is primarily intended to assemble the output of the GNU C compiler <tt>gcc</tt> for use by the linker <tt>ld</tt>. Nevertheless, GNU has tried to make <tt>as</tt> assemble correctly everything that other assemblers for the same machine would assemble. Any exceptions are documented explicitly in the Machine Dependent Features of the GNU <tt>as</tt> manual.<sup class="docFootnote"><a class="docLink" href="#ch02fn15">[15]</a></sup> This does not mean that <tt>as</tt> always uses the same syntax as another assembler for the same architecture; for example, GNU is aware of several incompatible versions of the 680x0 assembly language syntax.</p><blockquote><p class="docFootnote"><sup><a name="ch02fn15">[15]</a></sup> <a class="docLink" target="_blank" href="http://www.gnu.org/software/binutils/manual/gas-2.9.1/html_mono/as.html">www.gnu.org/software/binutils/manual/gas-2.9.1/html_mono/as.html</a></p></blockquote>
<p class="docText">Unlike older assemblers, <tt>as</tt> is designed to assemble a source program in one pass of the source file. This has a subtle impact on the <tt>.org</tt> directive.</p>
<p class="docText">The GNU assembler can be configured to produce several alternative object file formats. For the most part, this does not affect how you write assembly language programs, but directives for debugging symbols are typically different in different file formats. For instance, on some Intel machines (80960, for example), <tt>as</tt> can be configured to produce either a COFF or an a.out format. On other machines, <tt>as</tt> can be configured to produce either a COFF or a b.out format. On HPPA systems, <tt>as</tt> can be configured to produce either SOM or ELF. The default format on Linux systems is ELF.</P>
<p class="docText">After the assembler invocation <tt>as</tt>, the command line may contain options and filenames. Options may appear in any order, and may be before, after, or between filenames. The order of filenames is significant.<a name="d0e4180"></a><a name="d0e4181"></a><a name="d0e4182"></a><a name="d0e4183"></a></P>
<p class="docText">A command-line argument that begins with a <a name="iddle1569"></a>hyphen (<tt>-</tt>) is an option<a name="d0e4195"></a>. Each option changes the behavior of <tt>as</tt>. No option changes the way another option works. An option is a <tt>-</tt> followed by one or more letters; the case of the letter is important. The following shows the syntax used by <tt>as</tt>:</p>
<div class="docText"><pre>as <a name="iddle1014"></a>f o foo.o foo.s
as --help
</pre></div><br>
<p class="docText">The command-line argument of <tt>--</tt> (two hyphens) by itself names the standard input file explicitly as one of the files for <tt>as</tt> to assemble. The following example shows the syntax for <tt>--</tt>:<a name="d0e4229"></a></p>
<div class="docText"><pre>as -- [files]
</pre></div><br>
<p class="docText">Some options expect exactly one filename to follow them. The filename may either immediately follow the option's letter (compatible with older assemblers) or it may be the next command argument (GNU standard). These two command lines are equivalent:</p>
<div class="docText"><pre>as -o my-object-file.o mumble.s
as -omy-object-file.o mumble.s
</pre></div><br>
<p class="docText">For more details on each command-line option, refer to the GNU <tt>as</tt> documentation available from <a class="docLink" target="_blank" href="http://www.gnu.org/software/binutils/manual/gas-2.9.1/as.html">www.gnu.org/software/binutils/manual/gas-2.9.1/as.html</a>.</p>
<p class="docText">Another useful feature of GCC is to invoke the GNU assembler from the <tt>gcc</tt> compiler. To do this, you use the following command:</p>
<div class="docText"><pre>gcc -c -g -O -Wa,-alh,-L file.c
</pre></div><br>
<p class="docText">The assembler arguments must be separated from each other (and the <tt>-Wa</tt>) by commas. The preceding command causes a listing to be emitted to standard output with high-level messaging on an assembly source. Notice that two options (<tt>-alh</tt> and <tt>L</tt>) are passed on to <tt>as</tt> with one invocation of <tt>Wa</tt>. Also, the <tt>c</tt> option is needed so that the file is compiled without linking.</p>
<p class="docText">Other tools included in the binutils package are as follows:</p>
<ul><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1018"></a><a name="iddle1090"></a><a name="iddle1422"></a>addr2line</tt>.</span> Translates program addresses into filenames and line numbers<a name="d0e4321"></a><a name="d0e4322"></a><a name="d0e4323"></a>. Given an address and an executable, it uses the debugging information in the executable to figure out which filename and line number <a name="iddle1073"></a><a name="iddle1091"></a><a name="iddle1423"></a>are associated with a given address.<a name="d0e4347"></a><a name="d0e4348"></a><a name="d0e4349"></a></p></LI><li><p class="docText"><span class="docEmphStrong"><tt>ar</tt>.</span> A utility program that creates, modifies, and extracts from archives. An archive is a single file holding a collection of other files in a structure that makes it possible to retrieve the original individual files (called members of the archive). An archive holds libraries of relocatable object files.</p></li><LI><p class="docText"><span class="docEmphStrong"><a name="iddle1424"></a><a name="iddle1126"></a><a name="iddle1092"></a><tt>c++filt</tt>.</span><a name="d0e4387"></a><a name="d0e4388"></a><a name="d0e4389"></a> A program that decodes or demangles low-level names into user-level names so that the linker can keep overloaded functions from clashing. Software developers use <tt>c++filt</tt> to demangle function names when debugging C++ applications.</P></LI><LI><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1095"></a><a name="iddle1427"></a><a name="iddle1873"></a>nlmconv</tt>.</span> Converts object code into an NLM (Netware Loadable Module)<a name="d0e4424"></a><a name="d0e4425"></a><a name="d0e4426"></a>. Not used in Linux.</P></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1096"></a><a name="iddle1428"></a><a name="iddle1874"></a>nm</tt>.</span> Lists the symbols from object files.<a name="d0e4457"></a><a name="d0e4458"></a><a name="d0e4459"></a></p></LI><LI><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1097"></a><a name="iddle1429"></a><a name="iddle1887"></a>objcopy</tt>.</span> A utility that copies the contents of an object file to another<a name="d0e4489"></a><a name="d0e4490"></a><a name="d0e4491"></a>. It can write the destination object file in a format different from that of the source object file.</P></LI><LI><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1098"></a><a name="iddle1430"></a><a name="iddle1888"></a>objdump</tt>.</span> A utility that displays information about one or more object files<a name="d0e4522"></a><a name="d0e4523"></a><a name="d0e4524"></a>. Information displayed by <tt>objdump</tt> is mostly useful to programmers who are working on the compilation tools, as opposed to programmers who just want their program to compile and work.</p></LI><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1099"></a><a name="iddle1431"></a><a name="iddle2095"></a>ranlib</tt>.</span> Generates an index to the contents of an archive and stores it in the archive<a name="d0e4558"></a><a name="d0e4559"></a><a name="d0e4560"></a>. The index lists each symbol defined by each member of an archive that is a relocatable object file.</p></LI><LI><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1100"></a><a name="iddle1432"></a><a name="iddle2100"></a>readelf</tt>.</span> Displays information from any ELF format object file<a name="d0e4591"></a><a name="d0e4592"></a><a name="d0e4593"></a>. This program performs a similar function to <tt>objdump</tt>, but it can display more details.</p></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1101"></a><a name="iddle1433"></a><a name="iddle2214"></a>size</tt>.</span> A utility that lists the section<sup class="docFootnote"><a class="docLink" href="#ch02fn16">[16]</a></sup> sizesand the total sizefor each of the object files' or archive files' <tt>objfile</tt> in its argument list. One line of output is generated for each object file or each module in an archive.<blockquote><p class="docFootnote"><sup><a name="ch02fn16">[16]</a></sup> A section is a range of addresses within an object file that may contain data that is treated the same for some particular purpose<a name="d0e4630"></a><a name="d0e4631"></a><a name="d0e4632"></a>. An object file written by <tt>as</tt> has at least three sectionsnamely, text, data, and bss.</p></blockquote></P></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1102"></a><a name="iddle1434"></a><a name="iddle2306"></a>strings</tt>.</span> Prints the printable character sequences that are at least four characters long (or the number given with the options) and are followed by an unprintable character.<a name="d0e4671"></a><a name="d0e4672"></a><a name="d0e4673"></a></p></li><LI><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1103"></a><a name="iddle1435"></a><a name="iddle2307"></a>strip</tt>.</span> Discards symbols from object files<a name="d0e4703"></a><a name="d0e4704"></a><a name="d0e4705"></a>. Object files may include archives.</P></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle1104"></a><a name="iddle1436"></a><a name="iddle2529"></a>windres</tt>.</span> A compiler for Windows resource files (not used in Linux).<a name="d0e4736"></a><a name="d0e4737"></a><a name="d0e4738"></a></p></li></ul>
<p class="docText">For more detailed information about the GNU binutils, refer to <a class="docLink" target="_blank" href="http://www.gnu.org/software/binutils/">www.gnu.org/software/binutils/</a>.</p>

<a name="ch02lev2sec10"></a>
<h4 id="title-IDAKVDI0" class="docSection2Title">2.3.4. Integrated Development Environment</h4>
<p class="docText">In some instances, some applications are built using <a name="iddle1617"></a>integrated development environments (<a name="iddle1105"></a><a name="iddle1602"></a>IDEs)<a name="d0e4771"></a><a name="d0e4772"></a><a name="d0e4773"></a>. For those who need to use an IDE for C, C++, or Java, an open-source IDE called Eclipse<sup class="docFootnote"><a class="docLink" href="#ch02fn17">[17]</a></sup> is available. Eclipse is an open-extensible IDE that works well when developing applications. You can download it from <a class="docLink" target="_blank" href="http://www.eclipse.org/">www.eclipse.org/</a>. Another open-source IDE for Java that works on Linux is <a name="iddle1868"></a>NetBeans<a name="d0e4787"></a>. You can download it from <a class="docLink" target="_blank" href="http://www.netbeans.org">www.netbeans.org</a>.</p><blockquote><p class="docFootnote"><sup><a name="ch02fn17">[17]</a></sup> Eclipse plug-ins for C/C++ are also available.</p></blockquote>


<a href="9001536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec2.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch02lev1sec4.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>