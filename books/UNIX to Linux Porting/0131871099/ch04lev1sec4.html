<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 4.4.&nbsp; Linker</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch04lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch04lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch04lev1sec4"></a>

<H3 id="title-IDAB2UA1" class="docSection1Title">4.4. Linker</H3>
<p class="docText">The GNU Linker (<tt>ld</tt>) is a major part of the GNU binutils (<a class="docLink" target="_blank" href="http://sourceware.org/binutils/">http://sourceware.org/binutils/</a>), the facility to compile and link programs in Linux. The latest version of the GNU Linker is 2.15. Binutils have been ported to many UNIX variants as well as Windows.</P>
<p class="docText">Both the <a name="iddle1735"></a>Solaris and Linux <a name="iddle2248"></a>linkers work with files that conform to the executable and linking format (ELF)<a name="d0e18392"></a>. <a class="docLink" href="#ch04table06">Table 4-6</a> compares Solaris and GNU <tt>ld</tt> linker options.</P>
<a name="ch04table06"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><h5 class="docTableTitle">Table 4-6. Linker Options Comparison</h5></caption><colgroup align="left" span="3"><col width="150"><col width="150"><col width="150"></colgroup><thead><TR><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Solaris ld option</P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">GNU ld<sup class="docFootnote"><a class="docLink" href="#ch04tn13">[13]</a></sup></P></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Description<sup class="docFootnote"><a class="docLink" href="#ch04tn14">[14]</a></sup></P></th></TR></thead><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-64</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Creates a 64-bit object.</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-a</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-static</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Produces an executable object file in static mode only.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-b</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A (see comment)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">With this option, the linker does no (see comment) special processing for relocations that reference symbols in shared objects. There is no exact match in GNU <tt>ld</tt>, but it can be achieved by not using <tt>-fPIC</tt>/<tt>-fpic</tt> compiler options.</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B direct</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Establishes direct binding information by recording the relationship between each symbol reference and the dependency that provides the definition.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B dynamic|static</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Bdynamic, -Bstatic</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Governs library inclusion.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B eliminate</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Causes any global symbols not assigned to a version definition to be eliminated from the symbol table.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B group</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Bgroup</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Establishes a shared object and its dependencies as a group.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B local</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A (see comment)</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Causes any global symbols not assigned to a version definition to be reduced local. In GNU <tt>ld</tt>, this can only be achieved using the wildcard matching in a version definition file.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B reduce</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">When generating a relocatable object, causes the reduction of symbolic information defined by any version definitions.</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-B symbolic</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Bsymbolic</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">In dynamic mode, when building a shared object, binds references to global symbols to their definitions, if available, within object.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-c</tt> <span class="docEmphasis"><tt>name</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-c</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Records the configuration file name for use at runtime.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-C</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>--demangle[=</tt><span class="docEmphasis"><tt>style</tt></span><tt>]</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Demangles C++ symbol names displayed in diagnostic messages.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-d y|n</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-dy, -dn</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Uses dynamic|static linking.</P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-D</tt> <span class="docEmphasis"><tt>token</tt></span>, . . .</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Prints debugging information, as specified by each token, to the standard error.</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-e</tt> <span class="docEmphasis"><tt>epsym</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-e</tt> <span class="docEmphasis"><tt>enTRy</tt></span>, <tt>--enTRy=</tt><span class="docEmphasis"><tt>entry</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Sets the entry point address for the output file to be the symbol <span class="docEmphasis">epsym.</span></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-f</tt> <span class="docEmphasis"><tt>name</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-f</tt> <span class="docEmphasis"><tt>name</tt></span>, <tt>--auxiliary</tt> <span class="docEmphasis"><tt>name</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Specifies that the symbol table of the shared object is used as an auxiliary filter on the symbol table of the shared object specified by <span class="docEmphasis"><tt>name</tt></span>.</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-F</tt> <span class="docEmphasis"><tt>name</tt></span></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-F</tt> <span class="docEmphasis"><tt>name</tt></span>, <tt>--filter</tt> <span class="docEmphasis"><tt>name</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Specifies that the symbol table of the shared object is used as a filter on the symbol table of the shared object specified by <span class="docEmphasis"><tt>name</tt></span>.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-G</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-shared</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Produces a shared object. Undefined symbols are allowed.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-h</tt> <span class="docEmphasis"><tt>name</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-soname</tt> <span class="docEmphasis"><tt>name</tt></span></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Records <span class="docEmphasis"><tt>name</tt></span> in the object's dynamic section. <span class="docEmphasis"><tt>name</tt></span> is recorded in any dynamic objects that are linked with this object rather than the object's file system name.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-i</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Ignores <tt>LD_LIBRARY_PATH</tt>.</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-l</tt> <span class="docEmphasis"><tt>name</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>--dynamic-<a name="iddle2249"></a>linker</tt> <span class="docEmphasis"><tt>name</tt></span><a name="d0e18906"></a></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">When building an executable, uses <span class="docEmphasis"><tt>name</tt></span> as the path name of the interpreter to be written into the program header.</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-l</tt> <span class="docEmphasis"><tt>x</tt></span></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-l</tt><span class="docEmphasis"><tt>x</tt></span></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Searches a library <tt>libx.so</tt> or <tt>libx.a</tt>.</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-L</tt> <span class="docEmphasis"><tt>path</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-L</tt><span class="docEmphasis"><tt>path</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Adds <span class="docEmphasis"><tt>path</tt></span> to the library search directories.</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-m</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-M</tt> (see comment)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Produces a memory map or listing of the input/output sections, together with any nonfatal multiply-defined symbols, on the standard output. GNU <tt>ld -M</tt> option outputs similar information but in a different format.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-M</tt> <span class="docEmphasis"><tt>mapfile</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>--version-script</tt> <span class="docEmphasis"><tt>file</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Reads <span class="docEmphasis">mapfile</span> as a text file of directives to <tt>ld</tt>.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-N</tt> <span class="docEmphasis"><tt>string</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A (see comment)</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">This option causes a <tt>DT_NEEDED</tt> enTRy to be added to the <tt>.dynamic</tt> section of the object being built. The value of the <tt>DT_NEEDED</tt> string is the <tt>string</tt> that is specified on the command line. There is no exact match in GNU <tt>ld</tt>. You will have to link against a shared object with this string as the name.</P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-o</tt> <span class="docEmphasis"><tt>outfile</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-o</tt> <span class="docEmphasis"><tt>output</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Produces an output object file that is named outfile.</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-p</tt> <span class="docEmphasis"><tt>auditlib</tt></span></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Identifies an audit library, <tt>auditlib</tt>. This audit library is used to audit the object being created at runtime.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-P</tt> <span class="docEmphasis"><tt>auditlib</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Identifies an audit library, <tt>auditlib</tt>. This audit library is used to audit the dependencies of the object being created at runtime.</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Q y|n</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A (see comment)</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Under <tt>-Q y</tt>, an <tt>ident</tt> string is added to the <tt>.comment</tt> section of the output file. <tt>-Q n</tt> suppresses version identification. This option is ignored by the GNU <tt>ld</tt>. To achieve this, you could use the <tt>#ident</tt> directive or the linker script.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-r</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-r, --relocatable</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Combines relocatable object files to produce one relocatable object file.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-R</tt> <span class="docEmphasis"><tt>path</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-rpath</tt> <span class="docEmphasis"><tt>path</tt></span></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">A colon-separated list of directories used to specify library search directories to the runtime linker.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-s</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-S, -s</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Strips symbolic information from the output file. In GNU <tt>ld</tt>, the <tt>-s</tt> option omits all symbol information, whereas the <tt>-S</tt> option omits only debugger symbol information.</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-S</tt> <span class="docEmphasis"><tt>supportlib</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">The shared object <tt>supportlib</tt> is loaded with the link-editor and given information regarding the linking process.</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-t</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Turns off the warning for multiply-defined symbols that have different sizes or different alignments.</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-u</tt> <span class="docEmphasis"><tt>symname</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-u</tt> <span class="docEmphasis"><tt>symname</tt></span> <tt>--undefined=</tt><span class="docEmphasis"><tt>symname</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Enters <tt>symname</tt> as an undefined symbol in the symbol table.</p></td></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-V</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-V, --version, -v</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Outputs a message giving information about the version of <tt>ld</tt> being used.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Y P</tt>, <span class="docEmphasis"><tt>dirlist</tt></span></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-Y</tt> <span class="docEmphasis"><tt>dirlist</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Changes the default directories used for finding libraries.</P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z absexec</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Specifies that references to external absolute symbols should be resolved immediately instead of being left for resolution at runtime.</P></TD></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z allextract|defaultextract|weakextract</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Alters the extraction criteria of objects from any archives that follow.</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z combreloc</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z combreloc</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Combines multiple relocation sections.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z defs|nodefs</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z defs</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z defs</tt> forces a fatal error if any undefined symbols remain at the end of the link. The <tt>-z nodefs</tt> option allows undefined symbols.</P></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z direct|nodirect</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Enables or disables direct binding to any dependencies that follow on the command line.</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z endfiltee</tt></P></td><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Marks a filtee so that when processed by a filter, the filtee terminates any further filtee searches by the filter.</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z finiarray=</tt><span class="docEmphasis"><tt>function</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Appends an entry to the <tt>.finiarray</tt> section of the object being built. If no <tt>.finiarray</tt> section is present, a section is created.</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z groupperm|nogroupperm</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Assigns or unassigns each dependency that follows to a unique group.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z ignore|record</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Ignores, or records, dynamic dependencies that are not referenced as part of the <a name="iddle2250"></a>link-edit.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z initarray=</tt><span class="docEmphasis"><tt>function</tt></span></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Appends an entry to the <tt>.initarray</tt> section of the object being built. If no <tt>.initarray</tt> section is present, a section is created.</P></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z initfirst</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z initfirst</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object so that its runtime initialization occurs before the runtime initialization of any other objects brought into the process at the same time.</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z interpose</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z interpose</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as an interposer.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z lazyload|nolazyload</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Enables or disables the marking of dynamic dependencies to be lazily loaded.</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z ld32=</tt><span class="docEmphasis"><tt>arg1, arg2,...</tt></span> <tt>-z ld64=</tt><span class="docEmphasis"><tt>arg1, arg2,...</tt></span></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Provides a means of defining any link-editor argument, so that the argument is only interpreted, respectively, by the 32-bit class or 64-bit class of the link-editor.</P></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z loadfltr</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z loadfltr</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks a filter to indicate that filtees must be processed immediately at runtime.</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z muldefs</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z muldefs</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Allows multiple symbol definitions.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nocompstrtab</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Disables the compression of ELF string tables.</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodefaultlib</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodefaultlib</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object so that the runtime default library search path, used after any <tt>LD_LIBRARY_PATH</tt> or runpaths, is ignored.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodelete</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodelete</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as nondeletable at runtime.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodlopen</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodlopen</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as not available to <tt>dlopen()</tt>, either as the object specified by the <tt>dlopen()</tt>, or as any form of dependency required by the object specified by the <tt>dlopen()</tt>.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodump</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nodump</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as not available to <tt>dldump()</tt>.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z nopartial</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Partially initialized symbols that are defined within the input relocatable object files are expanded in the output file being generated.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z noversion</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Does not record any versioning sections.</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z now</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z now</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as requiring non-lazy runtime binding.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z origin</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z origin</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Marks the object as requiring immediate <tt>$ORIGIN</tt> processing at runtime.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z preinitarray=</tt><span class="docEmphasis"><tt>function</tt></span></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Appends an entry to the <tt>.preinitarray</tt> section of the object being built.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z redlocsym</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Eliminates all local symbols except for the <span class="docEmphasis"><tt>SECT</tt></span> symbols from the symbol table <tt>SHT_SYMTAB</tt>.</P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z rescan</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Rescans the archive files that are provided to the link-edit.</p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z text</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Forces a fatal error if any relocations against nonwritable, allocatable sections remain.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><a name="d0e19906"></a><tt>-z textoff</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Allows relocations against all allocatable sections, including nonwritable ones.</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>-z textwarn</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Lists a warning if any relocations against nonwritable, allocatable sections remain.</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">-z verbose</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Provides additional warning diagnostics during a link-edit.</p></TD></TR></table></p><br><blockquote><p class="docFootnote"><sup><a name="ch04tn13">[13]</a></sup> <a class="docLink" target="_blank" href="http://sources.redhat.com/binutils/docs-2.15/ld/Options.html#Options">http://sources.redhat.com/binutils/docs-2.15/ld/Options.html#Options</a></p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch04tn14">[14]</a></sup> Sun's ld man page (<a class="docLink" target="_blank" href="http://docs.sun.com/app/docs/doc/816-5165/6mbb0m9js?a=view">http://docs.sun.com/app/docs/doc/816-5165/6mbb0m9js?a=view</a>)</p></blockquote>
<a name="ch04lev2sec17"></a>

<H4 id="title-IDAPWWA1" class="docSection2Title">4.4.1. <a name="iddle2252"></a>Export Maps</h4>
<p class="docText">Export maps enable users to tell the linker explicitly which symbols to export from the generated object. Both the <a name="iddle1329"></a>Solaris and GNU <a name="iddle1732"></a>linkers support export maps<a name="d0e19986"></a>. To generate a shared object with this method, the user has to pass the name of the map file with the <tt>-version-script</tt> option of the linker:<a name="d0e19991"></a></p>
<div class="docText"><pre>%gcc -shared -o bar.so bar.c -fPIC -Wl,--version-script=bar.map
</pre></div><br>
<p class="docText">The file bar.map can contain text like this:</p>
<div class="docText"><pre>{
      global: index;
      local: *;
};
</pre></div><BR>

<a name="ch04lev2sec18"></a>
<H4 id="title-IDAEZWA1" class="docSection2Title">4.4.2. <a name="iddle2254"></a>Linker Tools</h4>
<p class="docText">Solaris has various linker tools such as <tt>elfdump, lari, nm, dump, ldd, pvs</tt>, and <tt>elf</tt>. GNU binutils offer similar tools. Refer to <a class="docLink" href="ch02.html#ch02">Chapter 2</a> for more information about GNU binutils.</p>
<p class="docText"><a class="docLink" href="#ch04table07">Table 4-7</a> provides a comparison of Solaris linker tools and their equivalents on Linux.<a name="d0e20043"></a></p>

<p class="docText"></p><a name="ch04table07"></a><p><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 4-7. Linker Tools</h5></caption><colgroup align="left" span="3"><col width="150"><col width="150"><col width="150"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">Solaris Tools</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Linux Equivalence</p></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Description</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>elfdump</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>readelf, objdump</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Dumps selected parts of an object file.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>lari</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">N/A</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Link analysis of runtime interfaces.</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>nm</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>nm</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Prints name list of an object file.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>dump</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>objdump, readelf</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Dumps selected parts of an object file.</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ldd</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ldd</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Lists dynamic dependencies of executable files or shared objects.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>pvs</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>readelf -V</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Displays the internal version information of dynamic objects.</P></TD></TR></table></P><br>

<a name="ch04lev2sec19"></a>
<H4 id="title-IDAY5WA1" class="docSection2Title">4.4.3. <a name="iddle2255"></a>Shared Libraries</h4>
<p class="docText">Linux currently uses <a name="iddle1260"></a>ELF (<a name="iddle1324"></a>Executable Linkage Format) binary format<a name="d0e20213"></a><a name="d0e20214"></a>. The only difference between generating an application and a shared library is in the final link command. The option <tt>-shared</tt> for GNU <tt>ld</tt> tells the linker to create a shared library rather than an application.<a name="d0e20222"></a></p>
<p class="docText">To create shared libraries in <a name="iddle2148"></a>Solaris:</P>
<div class="docText"><pre>cc -o libfoo.so -G -K pic foo.c
</pre></div><BR>
<p class="docText">To create shared libraries in Linux:</p>
<div class="docText"><pre>gcc -o libfoo.so -shared -fpic foo.c
</pre></div><br>
<p class="docText">In Solaris, when one wants to record a soname to a shared object itself, use the <tt>-h</tt> option:</p>
<div class="docText"><pre>cc -o libfoo.so -G -K pic -h libfoo.so.1 foo.c
</pre></div><br>
<p class="docText">The equivalent on Linux is this:</P>
<div class="docText"><pre>gcc -o libfoo.so -shared -fpic -Wl,-soname=libfoo.so.1 foo.c
</pre></div><br>
<p class="docText">or</p>
<div class="docText"><pre>gcc -o libfoo.so -shared -fpic -Wl,-hlibfoo.so.1 foo.c
</pre></div><br>
<p class="docText">The <tt><a name="iddle1142"></a><a name="iddle1233"></a>dump</tt> command in Solaris is equivalent to the <tt><a name="iddle1147"></a>objdump</tt> command in Linux<a name="d0e20304"></a><a name="d0e20305"></a><a name="d0e20306"></a>. The following example shows how the soname recording can be displayed using the <tt>objdump</tt> command in Linux:<a name="d0e20311"></a><a name="d0e20312"></a><a name="d0e20313"></a><a name="d0e20314"></a></p>
<div class="docText"><pre>#<a name="iddle1889"></a>objdump -x libGLU.so.1.3 | grep SONAME
          SONAME    libGLU.so.1
</pre></div><BR>

<a name="ch04lev2sec20"></a>
<H4 id="title-IDABHXA1" class="docSection2Title">4.4.4. <a name="iddle2253"></a>Library Versioning</h4>
<p class="docText">In <a class="docLink" href="ch03.html#ch03">Chapter 3</a>, &quot;Analysis,&quot; we provide information about how library versioning is implemented in Linux. Although the external versioning in Solaris is the same as that in Linux, there are some differences in how the symbol versioning works in Solaris and Linux.<a name="d0e20351"></a></p>
<p class="docText">Solaris symbol versioning works well in coping with the compatible changes in the shared libraries. When there is an incompatible change, the only way to deal with it in Solaris is to fall back to the external versioning (that is, incrementing the major version number in the soname). Linux symbol versioning can be used to handle incompatible changes. With this, it is not necessary to increase the major version number every time you make an incompatible change to your library. In Linux, it is possible to have multiple definitions of a given symbol (the associated version must differ). Also, the application linked with the versioned shared library contains not only a list of the required version, but also records for each symbol which symbol version was used and from which library the definition came. How to take advantage of this advantage in Linux is, however, beyond the scope of this book. For more information about symbol versioning, refer to the paper by Ulrich Drepper titled &quot;How to Write Shared Libraries,&quot; located at <a class="docLink" target="_blank" href="http://people.redhat.com/~drepper">http://people.redhat.com/~drepper</a>. In addition, the paper by David J. Brown and Karl Runge titled &quot;Library Interface Versioning in Solaris and Linux&quot; is a good source for the library versioning comparison between Solaris and Linux.</p>

<a name="ch04lev2sec21"></a>
<h4 id="title-IDATIXA1" class="docSection2Title">4.4.5. Dynamic <a name="iddle1237"></a><a name="iddle1718"></a>Linker (or <a name="iddle2116"></a><a name="iddle2117"></a>Runtime Linker)</h4>
<p class="docText">Both the Solaris <a name="iddle2251"></a>dynamic linker and Linux dynamic linker load library dependencies breadth first<a name="d0e20401"></a>. That is, first the dependencies of the executable are added in the order listed in its dynamic section. Then the dependencies of the first dependency are added in the same fashion. More information about the Linux dynamic linker is provided in <a class="docLink" href="ch03.html#ch03">Chapter 3</a>.<a name="d0e20409"></a><a name="d0e20410"></a><a name="d0e20411"></a></p>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch04lev1sec3.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch04lev1sec5.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>