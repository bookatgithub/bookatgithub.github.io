<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 5.13.&nbsp; Signals</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec12.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec14.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a href="9001536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a><a name="ch05lev1sec13"></a>
<H3 id="title-IDA2ZK5JB" class="docSection1Title">5.13. <a name="iddle1056"></a>Signals</H3>
<p class="docText">A signal is an indication that an event has occurred. Typically, a process that receives a signal handles that signal through either a default mechanism or a signal handler. POSIX defines a set of signals and signal-handling functions that are implemented in Linux. This section compares and contrasts signal support between Linux 2.6 and AIX.<a name="d0e51463"></a></P>
<a name="ch05lev2sec46"></a>

<H4 id="title-IDA10K5JB" class="docSection2Title">5.13.1. <a name="iddle1057"></a><a name="iddle2180"></a>Signal Actions</h4>
<p class="docText">Each signal has an associated default action associated with it. A default action is what the Linux kernel does for the process when a signal arrives for that process. The default actions are as follows:<a name="d0e51492"></a><a name="d0e51493"></a></p>
<ul><LI><p class="docText"><span class="docEmphStrong">Process Termination.</span> Process is terminated.</P></LI><LI><p class="docText"><span class="docEmphStrong">Process Coredump.</span> Process is terminated and coredump may be produced.<sup class="docFootnote"><a class="docLink" href="#ch05fn19">[19]</a></sup><blockquote><p class="docFootnote"><sup><a name="ch05fn19">[19]</a></sup> In certain Linux systems, coredumping is turned off by default. To turn it on, use the <tt>ulimit c</tt> command.</P></blockquote></p></LI><li><p class="docText"><span class="docEmphStrong">Process Stopped.</span> Process is stopped.</p></LI><LI><p class="docText"><span class="docEmphStrong">Process Ignore Signal.</span> Process ignores the signal.</p></li></ul>
<p class="docText">A process can also install a signal handler to run when a signal is delivered to it. The signal handler takes the place of the default action associated with each signal.</p>
<p class="docText">Signals occur as a consequence of an event. Here are some examples that can cause a signal to be sent to a process:</P>
<ul><li><p class="docList">A program error such as dividing by 0 or accessing an invalid address</p></li><LI><p class="docList">A child process terminating</P></li><li><p class="docList">A timer expiring</p></li><li><p class="docList">A user requesting to interrupt or terminate a process</p></li></ul>

<a name="ch05lev2sec47"></a>
<h4 id="title-IDAU4K5JB" class="docSection2Title">5.13.2. <a name="iddle1058"></a><a name="iddle2181"></a>Simple Signals</h4>
<p class="docText">The simplest signal-handling function Linux supports is the original ISO C standard <tt>signal()</tt> API. It allows the calling process to change the action for a particular signal, to either ignore or restore the default signal action, or install a function that is called when that particular signal is received by the process.</p>
<p class="docText">This section defines the <tt>signal()</tt> APIs available in GNU/Linux and the differences compared to <a name="iddle2167"></a><a name="iddle2210"></a>AIX.<a name="d0e51609"></a></p>
<a name="ch05lev3sec144"></a>

<h5 id="title-IDAEJL5JB" class="docSection3Title">5.13.2.1. AIX Prototype</h5>
<div class="docText"><pre>#include &lt;signal.h&gt;
int sigaction (int Signal, struct sigaction *Action, struct sigaction *OAction);
int sigprocmask (int How, const sigset_t *Set, sigset *OSet);
int sigpending (sigset_t *Set);
int sigsuspend (const sigset_t *SignalMask);
int sigpause (int SignalMask);
</pre></div><BR>

<a name="ch05lev3sec145"></a>
<h5 id="title-IDAWJL5JB" class="docSection3Title">5.13.2.2. Linux Prototype</h5>
<div class="docText"><pre>#include &lt;signal.h&gt;
int sigaction(int signum, const struct sigaction *act, struct sigaction
*oldact);
int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);
int sigpending(sigset_t *set);
int sigsuspend(const sigset_t *mask);
int sigpause(int sigmask);
</pre></div><br>

<a name="ch05lev3sec146"></a>
<H5 id="title-IDAIKL5JB" class="docSection3Title">5.13.2.3. Detail Comparison</H5>
<p class="docText">**Not Compatible**</P>
<p class="docText">Signal values are different between AIX and Linux.</P>
<p class="docText">The remaining documentation is taken from the Linux man page.</P>
<p class="docText">The <tt>sigaction</tt> system call is used to change the action taken by a process on receipt of a specific signal.</p>
<p class="docText"><span class="docEmphasis"><tt>signum</tt></span> specifies the signal and can be any valid signal except <tt>SIGKILL</tt> and <tt>SIGSTOP</tt>.</p>
<p class="docText">If <span class="docEmphasis"><tt>act</tt></span> is non-null, the new action for signal <span class="docEmphasis"><tt>signum</tt></span> is installed from <span class="docEmphasis"><tt>act</tt></span>. If <span class="docEmphasis"><tt>oldact</tt></span> is non-null, the previous action is saved in <span class="docEmphasis"><tt>oldact</tt></span>.</p>
<p class="docText">The <tt>sigaction</tt> structure is defined as something like this:</P>
<div class="docText"><pre>struct sigaction {
 void (*sa_handler)(int);
 void (*sa_sigaction)(int, siginfo_t *, void *);
 sigset_t sa_mask;
 int sa_flags;
 void (*sa_restorer)(void);
}
</pre></div><BR>
<p class="docText">On some architectures, a union is involved; do not assign to both <span class="docEmphasis"><tt>sa_handler</tt></span> and <span class="docEmphasis"><tt>sa_sigaction</tt></span>.</P>
<p class="docText">The <span class="docEmphasis"><tt>sa_restorer</tt></span> element is obsolete and should not be used. POSIX does not specify an <span class="docEmphasis"><tt>sa_restorer</tt></span> element.</P>
<p class="docText"><span class="docEmphasis"><tt>sa_handler</tt></span> specifies the action to be associated with <span class="docEmphasis"><tt>signum</tt></span> and may be <tt>SIG_DFL</tt> for the default action, <tt>SIG_IGN</tt> to ignore this signal, or a pointer to a signal-handling function.</P>
<p class="docText"><span class="docEmphasis"><tt>sa_mask</tt></span> gives a mask of signals that should be blocked during execution of the signal handler. In addition, the signal that triggered the handler will be blocked, unless the <tt><a name="iddle2119"></a>SA_NODEFER</tt> or <tt><a name="iddle2120"></a>SA_NOMASK</tt> flags are used.<a name="d0e51762"></a><a name="d0e51763"></a></p>
<p class="docText"><span class="docEmphasis"><tt>sa_flags</tt></span> specifies a set of flags that modify the behavior of the signal-handling process. It is formed by the bitwise OR of zero or more of the following:</P>
<ul><li><p class="docList"><tt><a name="iddle2118"></a>SA_NOCLDSTOP</tt><a name="d0e51781"></a></P><p class="docList">If <span class="docEmphasis"><tt>signum</tt></span> is <tt>SIGCHLD</tt>, do not receive notification when child processes stop (that is, when child processes receive one of <tt>SIGSTOP, SIGTSTP, SIGTTIN</tt>, or <tt>SIGTTOU</tt>).</P></li><li><p class="docList"><tt><a name="iddle2121"></a>SA_ONESHOT</tt> or <tt><a name="iddle2123"></a>SA_RESETHAND</tt><a name="d0e51814"></a><a name="d0e51815"></a></p><p class="docList">Restore the signal action to the default state once the signal handler has been called.</p></LI><li><p class="docList"><tt><a name="iddle2122"></a>SA_ONSTACK</tt><a name="d0e51828"></a></p><p class="docList">Call the signal handler on an alternate signal stack provided by <span class="docEmphasis"><tt>sigaltstack</tt></span>. If an alternate stack is not available, the default stack will be used.</p></li><LI><p class="docList"><tt><a name="iddle2124"></a>SA_RESTART</tt><a name="d0e51845"></a></P><p class="docList">Provide behavior compatible with BSD signal semantics by making certain system calls restartable across signals.</p></li><li><p class="docList"><tt>SA_NOMASK</tt> or <tt>SA_NODEFER</tt></p><p class="docList">Do not prevent the signal from being received from within its own signal handler.</p></li><li><p class="docList"><tt><a name="iddle2125"></a>SA_SIGINFO</tt><a name="d0e51869"></a></p><p class="docList">The signal handler takes three arguments, not one. In this case, <span class="docEmphasis"><tt>sa_sigaction</tt></span> should be set rather than <span class="docEmphasis"><tt>sa_handler</tt></span>. (The <span class="docEmphasis"><tt>sa_sigaction</tt></span> field was added in Linux 2.1.86.)</p></li></ul>
<p class="docText">The <span class="docEmphasis"><tt>siginfo_t</tt></span> parameter to <span class="docEmphasis"><tt>sa_sigaction</tt></span> is a struct with the following elements:<a name="d0e51898"></a><a name="d0e51899"></a></p>
<div class="docText"><pre>siginfo_t {
 int si_signo;      /* Signal number */
 int si_errno;      /* An errno value */
 int <a name="iddle2215"></a>si_code;       /* Signal code */
 pid_t si_pid;      /* Sending process ID */
 uid_t si_uid;      /* Real user ID of sending process */
 int si_status;     /* Exit value or signal */
 clock_t si_utime;  /* User time consumed */
 clock_t si_stime;  /* System time consumed */
 sigval_t si_value; /* Signal value */
 int si_int;         /* POSIX.1b signal */
 void * si_ptr;      /* POSIX.1b signal */
 void * si_addr;    /* Memory location which caused fault */
 int si_band;       /* Band event */
 int si_fd;          /* File descriptor */
}
</pre></div><br>
<p class="docText"><span class="docEmphasis"><tt>si_signo</tt></span>, <span class="docEmphasis"><tt>si_errno</tt></span>, and <span class="docEmphasis"><tt>si_code</tt></span> are defined for all signals. The rest of the struct may be a union, so one should only read the fields that are meaningful for the given signal. <tt>Kill</tt>, POSIX.1b signals, and <tt>SIGCHLD</tt> fill in <span class="docEmphasis"><tt>si_pid</tt></span> and <span class="docEmphasis"><tt>si_uid</tt></span>. <tt>SIGCHLD</tt><span class="docEmphStrong"></span> also fills<span class="docEmphStrong"></span> in <span class="docEmphasis"><tt>si_status</tt></span>, <span class="docEmphasis"><tt>si_utime</tt></span><span class="docEmphasis">,</span> and <span class="docEmphasis"><tt>si_stime</tt></span>. <span class="docEmphasis"><tt>si_int</tt></span> and <span class="docEmphasis"><tt>si_ptr</tt></span> are specified by the sender of the POSIX.1b signal. <tt>SIGILL, SIGFPE, SIGSEGV</tt>, and <tt>SIGBUS</tt> fill in <span class="docEmphasis"><tt>si_addr</tt></span> with the address of the fault. <tt>SIGPOLL</tt> fills in <span class="docEmphasis"><tt>si_band</tt></span> and <span class="docEmphasis"><tt>si_fd</tt></span>.<a name="d0e51988"></a></p>
<p class="docText"><span class="docEmphasis"><tt>si_code</tt></span> indicates why this signal was sent. It is a value, not a bitmask. <a class="docLink" href="#ch05table08">Table 5-8</a> lists the values possible for any signal.</P>

<p class="docText"></p><a name="ch05table08"></a><p><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 5-8. Values of si_code as Implemented in Linux 2.6</H5></caption><colgroup align="left" span="3"><col width="100"><col width="100"><col width="300"></colgroup><thead><TR><th class="thead" scope="col" align="left" valign="top"><p class="docText">Signal</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Linux si_code<sup class="docFootnote"><a class="docLink" href="#ch05fn20">[20]</a></sup></P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Description</P></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGILL</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_ILLOPC</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Illegal opcode.</P></td></tr><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_ILLOPN</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Illegal operand.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_ILLADR</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Illegal addressing mode.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_ILLTRP</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Illegal trap.</P></td></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_PRVOPC</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Privileged opcode.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_PRVREG</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Privileged register.</p></TD></TR><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_COPROC</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Coprocessor error.</p></td></TR><TR><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>ILL_BADSTK</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Internal stack error.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText">Unknown error.</p></td></tr><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText">Break instruction trap.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGFPE</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_INTDIV</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Integer divide by 0.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_INTOVF</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Integer overflow.</p></TD></TR><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_FLTDIV</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Floating-point divide by 0.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_FLTOVF</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Floating-point overflow.</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_FLTUND</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Floating-point underflow.</P></TD></TR><TR><td class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_FLTRES</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Floating-point invalid operation.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>FPE_FLTINV</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Subscript out of range.</P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGSEGV</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SEGV_MAPERR</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Address not mapped to object.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SEGV_ACCERR</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Invalid permissions for mapped object.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGBUS</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>BUS_ADRALN</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Bus error.</p></TD></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>BUS_ADRERR</tt></p></td><td class="docTableCell" align="left" valign="top">&nbsp;</TD></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>BUS_OBJERR</tt></P></td><td class="docTableCell" align="left" valign="top">&nbsp;</td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTRAP</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>trAP_BRKPT</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Process breakpoint.</p></TD></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>TRAP_TRACE</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Process trace trap.</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGCHLD</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_EXITED</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Child has exited.</P></TD></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_KILLED</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Child was killed.</p></TD></TR><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_DUMPED</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Child terminated abnormally.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_TRAPPED</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Traced child has trapped.</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_STOPPED</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Child has stopped.</P></TD></TR><TR><td class="docTableCell" align="left" valign="top">&nbsp;</TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>CLD_CONTINUED</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Stopped child has continued.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGPOLL</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_IN</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Data input available.</p></td></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_OUT</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Output buffers available.</p></td></tr><tr><TD class="docTableCell" align="left" valign="top">&nbsp;</td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_MSG</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Input message available.</P></TD></TR><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_ERR</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">I/O error.</P></td></TR><tr><td class="docTableCell" align="left" valign="top">&nbsp;</TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_PRI</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">High-priority input available.</p></TD></tr><tr><td class="docTableCell" align="left" valign="top">&nbsp;</td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>POLL_HUP</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Device disconnected.</p></td></tr></table></p><br><blockquote><p class="docFootnote"><sup><a name="ch05fn20">[20]</a></sup> Referenced from bits/sigingo.h</p></blockquote>
<p class="docText">The <tt><a name="iddle2205"></a>sigprocmask</tt> call is used to change the list of currently blocked <a name="iddle1059"></a><a name="iddle2211"></a>signals<a name="d0e52585"></a>. The behavior of the call is dependent on the value of <span class="docEmphasis"><tt>how</tt></span>, as follows:</p>
<ul><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle2207"></a>SIG_BLOCK</tt>.</span> The set of blocked signals is the union of the current set and the <span class="docEmphasis"><tt>set</tt></span> argument.<a name="d0e52611"></a></p></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle2209"></a>SIG_UNBLOCK</tt>.</span> The signals in <span class="docEmphasis"><tt>set</tt></span> are removed from the current set of blocked signals<a name="d0e52630"></a>. It is legal to attempt to unblock a signal that is not blocked.</P></li><li><p class="docText"><span class="docEmphStrong"><tt><a name="iddle2208"></a>SIG_SETMASK</tt>.</span> The set of blocked signals is set to the argument <span class="docEmphasis"><tt>set</tt></span>.<a name="d0e52650"></a></p></LI></UL>
<p class="docText">If <span class="docEmphasis"><tt>oldset</tt></span> is non-null, the previous value of the signal mask is stored in <span class="docEmphasis"><tt>oldset</tt></span>.</P>
<p class="docText">The <tt>sigpending</tt> call allows the examination of pending signals (ones that have been raised while blocked). The signal mask of pending signals is stored in <span class="docEmphasis"><tt>set</tt></span>.</P>
<p class="docText">The <tt>sigsuspend</tt> call temporarily replaces the signal mask for the process with that given by <span class="docEmphasis"><tt>mask</tt></span> and then suspends the process until a signal is received.</P>

<a name="ch05lev3sec147"></a>

<h5 id="title-IDA2PM5JB" class="docSection3Title">5.13.2.4. Return Value</h5>
<p class="docText">The functions <tt>sigaction, sigprocmask</tt>, and <tt>sigpending</tt> return 0 on success and 1 on error. The function <tt>sigsuspend</tt> always returns 1, normally with the error <tt>EINTR</tt>.</p>

<a name="ch05lev3sec148"></a>
<H5 id="title-IDAUQM5JB" class="docSection3Title">5.13.2.5. Errors</H5>
<UL><LI><p class="docText"><span class="docEmphStrong"><tt>EINVAL</tt>.</span> An invalid <a name="iddle1300"></a>signal was specified.<a name="d0e52731"></a> This will also be generated if an attempt is made to change the action for <tt>SIGKILL</tt> or <tt>SIGSTOP</tt>, which cannot be caught.</P></li><LI><p class="docText"><span class="docEmphStrong"><tt>EFAULT</tt>.</span> <span class="docEmphasis"><tt>act</tt></span>, <span class="docEmphasis"><tt>oldact</tt></span>, <span class="docEmphasis"><tt>set</tt></span>, <span class="docEmphasis"><tt>oldset</tt></span>, or <span class="docEmphasis"><tt>mask</tt></span> point to memory that is not a valid part of the process address space.</p></li><LI><p class="docText"><span class="docEmphStrong"><tt>EINTR</tt>.</span> System call was interrupted.</P></li></ul>

<a name="ch05lev3sec149"></a>
<h5 id="title-IDAHTM5JB" class="docSection3Title">5.13.2.6. <a name="iddle2176"></a>Signal Values</h5>
<p class="docText">Signal values are defined differently between Linux and AIX. Linux signals are essentially a fully contained subset of AIX signals. The only exception is <tt>SIGSTKFLT</tt>. No code was found in the Linux kernel to implement the <tt>SIGSTKFLT</tt> signal. <a class="docLink" href="#ch05table09">Table 5-9</a> shows the differences in signal values between AIX and Linux.<a name="d0e52802"></a></P>
<a name="ch05table09"></a><p><table cellspacing="0" FRAME="hsides" RULES="none" cellpadding="5"><caption><h5 class="docTableTitle">Table 5-9. Linux and AIX Signal Values</h5></caption><colgroup align="left" span="3"><col width="100"><col width="100"><col width="300"></colgroup><thead><tr><th class="thead" scope="col" align="left" valign="top"><p class="docText">Signal</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">Linux</P></th><th class="thead" scope="col" align="left" valign="top"><p class="docText">AIX</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGHUP</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">1</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGINT</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">2</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">2</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGQUIT</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">3</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">3</P></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGILL</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">4</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">4</p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTRAP</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">5</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">5</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGABRT</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">6</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">6</p></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGIOT</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText">6</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">6</P></TD></TR><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGBUS</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">7</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">10</p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGFPE</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">8</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">8</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGKILL</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText">9</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">9</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGUSR1</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>10</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>30</tt></p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGSEGV</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>11</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>11</tt></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGUSR2</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>12</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>31</tt></P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGPIPE</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>13</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>13</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGALRM</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>14</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>14</tt></P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTERM</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>15</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>15</tt></p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGSTKFLT</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>16</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Undefined</p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGCLD</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>17</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>20</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGCHLD</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>17</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>20</tt></p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGCONT</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>18</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>19</tt></P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGSTOP</tt></P></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>19</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>17</tt></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTSTP</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>20</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>18</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTTI</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>21</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>21</tt></p></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGTTOU</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>22</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>22</tt></p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGURG</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>23</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>16</tt></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGXCPU</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>24</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>24</tt></p></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGXFSZ</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>25</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>25</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGVTALRM</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>26</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>34</tt></P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGPROF</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>27</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>32</tt></P></td></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGWINCH</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>28</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>28</tt></P></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGPOLL</tt></P></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>29</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>23</tt></p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGIO</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>29</tt></p></td><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>23</tt></p></td></tr><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGPWR</tt></P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>30</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>29</tt></P></TD></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>SIGSYS</tt></p></TD><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>31</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>12</tt></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText"><tt>_NSIG</tt></p></td><td class="docTableCell" align="left" valign="top"><p class="docText"><tt>64</tt></p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Undefined</p></td></tr></table></p><br>
<p class="docText">Implementation of correct and reliable signals has been in place for many years now, where an installed signal handler remains persistent and is not reset by the kernel.<a name="d0e53456"></a><a name="d0e53457"></a> The POSIX standards provided a fairly well-defined set of interfaces for using signals in code, and today the Linux implementation of signals is fully POSIX-compliant.<a name="d0e53459"></a></p>



<a href="9001536.html"><img src="images/pixel.jpg" alt="" width="1" height="1" border="0"></a></TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec12.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec14.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>