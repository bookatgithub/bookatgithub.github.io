<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Section 5.2.&nbsp; General Differences</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
<br><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="ch05lev1sec2"></a>
<H3 id="588026-909" class="docSection1Title">5.2. General Differences</H3>
<p class="docText">A common misconception is that the more familiar you are with the code you are porting, the more successful the port will be. In fact, first and foremost, your biggest advantage is how familiar you are with the source build environment. Familiarity with the code is second, although not required. On the other hand, not being familiar with the ported code will not hinder the porting effort. Instead, having a good knowledge of ANSI C/C++, ISO, and POSIX standards will give you a greater advantage than knowing the code. These skills are needed to help you assess and troubleshoot the code when you have to make surgical and strategic changes in the existing code. This section will help you build on those analytical skills so that you make the correct changes when necessary.</P>
<p class="docText">Although both <a name="iddle1106"></a><a name="iddle1121"></a><a name="iddle1439"></a>AIX and GNU <a name="iddle1040"></a><a name="iddle1945"></a>claim to adhere to ANSI, ISO, and POSIX standards, there are some differences<a name="d0e34395"></a><a name="d0e34396"></a><a name="d0e34397"></a><a name="d0e34398"></a><a name="d0e34399"></a>. This section covers those differences between the two platforms and their development environments. Although some example codes are used to clarify points, most of the material covered in this section relates to differences in system calls, compiler and linker invocation, and library creation.</P>
<a name="ch05lev2sec4"></a>
<h4 id="title-IDAJKD4Y" class="docSection2Title">5.2.1. C Language</h4>
<p class="docText">Both the AIX C compiler and GCC support the ANSI C (ANSI/ISO 9899-1990) standard, but syntax and semantics differences may still prevent an error-free compilation in Linux. Within GCC other standards can be selected by using the <tt>-ansi, -std=89</tt>, or <tt>-std=iso9899:1990</tt> options.</p>

<a name="ch05lev2sec5"></a>
<H4 id="title-IDA0KD4Y" class="docSection2Title">5.2.2. <a name="iddle1041"></a>C++ Language<a name="d0e34430"></a></H4>
<p class="docText">Starting with GNU <tt>g++</tt> version 3.4.0, GNU <tt>g++</tt> claims<sup class="docFootnote"><a class="docLink" href="#ch5fn3">[3]</a></sup> to be <span class="docEmphasis">much</span> closer to the ISO/ANSI C++ standards. This means, among other things, that a lot of invalid constructs that used to be accepted in previous versions will now be rejected. The AIX <tt>xlC</tt> <a name="iddle1946"></a>(C++) compiler implements the latest ANSI C++ standards (including the Standard Template Library, STL) in libC.<a name="d0e34460"></a> A GNU <tt>g++</tt> compilers implements the latest ANSI C++ standards and STL in the <tt>libstdc++</tt> library. For both AIX and GNU, to use the STL you just include the appropriate template library. Overall, this means that although some differences do exist between AIX and GNU, there are minimal differences in standards compliance when migrating from the latest version of AIX C++ to GNU <tt>g++</tt>. In short, applications written with standards in mind are easier to migrate than those that are not.</P><blockquote><p class="docFootnote"><sup><a name="ch5fn3">[3]</a></sup> http://gcc.gnu.org/gcc-3.4/changes.html#cplusplus</P></blockquote>

<a name="ch05lev2sec6"></a>
<H4 id="title-IDACND4Y" class="docSection2Title">5.2.3. <a name="iddle1042"></a><a name="iddle1947"></a>GNU C/C++ Language</h4>
<p class="docText">The GNU Compiler Collection (<tt>gcc</tt>) is available for AIX. Applications compiled with <tt>gcc</tt> on AIX make <a name="iddle1113"></a>porting and migration easier on Linux<a name="d0e34511"></a>. You should be careful when using different versions of the GCC compiler when migrating from AIX to Linux. Applications that compile cleanly on older versions of GCC might not compile as well on new versions because of changes in programming standards, specifically in the C++ language.<a name="d0e34513"></a><a name="d0e34514"></a></P>

<a name="ch05lev2sec7"></a>

<h4 id="title-IDAOPD4Y" class="docSection2Title">5.2.4. <a name="iddle1043"></a><a name="iddle1948"></a>Java Language</h4>
<p class="docText">The <a name="iddle1652"></a><a name="iddle2472"></a>AIX SDK for the Java platform provides the Java 2 (version 1.4) programming tools and runtime environment<a name="d0e34563"></a><a name="d0e34564"></a>. The Java environment is available for Linux through the Blackdown Java SDK (<a class="docLink" target="_blank" href="http://www.blackdown.org">www.blackdown.org</a>). As of this writing, Blackdown has released Java version 1.4.2 and is working on release version 1.5. Other Linux Java SDKs are available for download from Sun and IBM Web sites.<a name="d0e34569"></a><a name="d0e34570"></a></P>

<a name="ch05lev2sec8"></a>
<H4 id="title-IDAQ0D4Y" class="docSection2Title">5.2.5. <a name="iddle1048"></a><a name="iddle1953"></a>Threads</h4>
<p class="docText">AIX 5L supports the POSIX threads implementation. Previous versions of AIX prior to release 5L supported DCE pthreads. Applications using DCE threads will need some major changes to use POSIX threads on Linux. Refer to <a class="docLink" href="ch05lev1sec16.html#ch05lev1sec16">Section 5.16</a>, Posix Threads, for more information on differences between AIX and Linux.<a name="d0e34602"></a><a name="d0e34603"></a></p>

<a name="ch05lev2sec9"></a>
<h4 id="title-IDAK2D4Y" class="docSection2Title">5.2.6. <a name="iddle1047"></a><a name="iddle1952"></a><a name="iddle2297"></a>Standards Comparison</h4>
<p class="docText">Almost all Linux distributors acknowledge the values that standardization and portability provide, and work with the various Linux implementers/maintainers to meet those standards. The primary Linux industry standard is the <a name="iddle1759"></a>Linux Standard Base (<a name="iddle1778"></a>LSB), which is a project overseen by the Free Standards Group (<a name="iddle1364"></a>FSG)<a name="d0e34650"></a><a name="d0e34651"></a><a name="d0e34652"></a>. The <a name="iddle1782"></a>LSB (whose most recent version at this time is LSB 3.0) is based heavily on the IEEE POSIX and Open Group Single UNIX Specification standards, but also documents those places where Linux is not UNIX- or POSIX-compatible<a name="d0e34659"></a>. Most (and all the major) Linux distributors have certified to the LSB.</P>
<p class="docText">The LSB, in addition to providing a source code API specification, also provides a binary interface (ABI) specification for each of several common Linux hardware platforms. The goal of the ABI is to ensure binary portability (for LSB-portable applications) between Linux distributions on that hardware platform. Distributors must certify to the ABI as well as the API. <a name="iddle1608"></a>Independent Service Vendors (<a name="iddle1649"></a>ISVs) can also certify their applications as &quot;LSB portable&quot; using tools provided by the FSG.<a name="d0e34674"></a><a name="d0e34675"></a></p>
<p class="docText">Although there is standardization within Linux, Linux itself is not totally compliant with either the IEEE POSIX or Open Group SUS specifications. This means that applications that may be totally portable under these common commercial UNIX standards may still need some work to move successfully to Linux. Still, considerably less work would be required than for an application that meets no standards at all or that uses AIX-specific UNIX extensions.</p>
<p class="docText"><a class="docLink" href="#ch05table01">Table 5-1</a> compares AIX supported standards to the Linux supported standards based on the LSB specification version 2.0.1.</p>
<a name="ch05table01"></a><p><table cellspacing="0" FRAME="hsides" RULES="groups" cellpadding="5"><caption><H5 class="docTableTitle">Table 5-1. Supported Standards on AIX and Linux</H5></caption><colgroup align="left" span="3"><col width="180"><col width="120"><col width="200"></colgroup><thead><tr><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Standard</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">AIX</p></th><th class="bottomBorder thead" scope="col" align="left" valign="top"><p class="docText">Linux</p></th></tr></thead><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IEEE POSIX 1003.1-2001 Base Function</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported as described in the LSB</p></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IEEE POSIX 1003.1 Threads (pthreads)</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">Single UNIX Specification Base function (sometimes known as XPG5 or XPG6)</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported as described in the LSB</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IEEE POSIX 1003.1b Real-time scheduler, clocks and timers, asynchronous I/O, semaphores, memory locking, message queues, real-time signals, shared memory</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Asynchronous I/O, real-time signals, shared memory, semaphores</P></TD></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IEEE POSIX 1003.4a Draft 4 User Threads</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">On earlier release of AIX prior to 5L only</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Not supported</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">IEEE POSIX 1003.1-2001 (Commands and Utilities)</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></TD></TR><tr><td class="docTableCell" align="left" valign="top"><p class="docText">System V Interface Definition (SVID3)</p></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></TD><TD class="docTableCell" align="left" valign="top"><p class="docText">Referenced<sup class="docFootnote"><a class="docLink" href="#ch5fn4">[4]</a></sup></p></TD></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">File System Directory Layout</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">System V.4 (SVR4)</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Filesystem Hierarchy Standard, <a class="docLink" target="_blank" href="http://www.pathname.com/fhs/">www.pathname.com/fhs/</a></p></td></tr><tr><TD class="docTableCell" align="left" valign="top"><p class="docText">X11 Window System, Font Server, and Clients</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">X11R6.3</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">X11R6.4</p></td></tr><tr><td class="docTableCell" align="left" valign="top"><p class="docText">OSF/Motif</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">V2.1</p></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported through third-party libraries (see lesstif, <a class="docLink" target="_blank" href="http://www.lesstif.org">www.lesstif.org</a>)<sup class="docFootnote"><a class="docLink" href="#ch5fn5">[5]</a></sup></p></td></TR><TR><TD class="docTableCell" align="left" valign="top"><p class="docText">RPC function interfaces NFS+ Diskless and ONC+, NFS+, version 4.2</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></td><TD class="docTableCell" align="left" valign="top"><p class="docText">Supported Referenced standards, SVID Issue 4, SVID Issue 3</P></TD></TR><TR><td class="docTableCell" align="left" valign="top"><p class="docText">OSF/Motif Application Environment Specification (AES)</P></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported through third-party products<sup class="docFootnote"><a class="docLink" href="#ch5fn6">[6]</a></sup></p></td></tr><TR><td class="docTableCell" align="left" valign="top"><p class="docText">LP64, 64-bit data model</p></td><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</P></TD><td class="docTableCell" align="left" valign="top"><p class="docText">Supported</p></td></tr></table></p><br><blockquote><p class="docFootnote"><sup><a name="ch5fn4">[4]</a></sup> A referenced standard means that not all interfaces within the standard are supported.</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch5fn5">[5]</a></sup> Not included within the LSB specification</p></blockquote><blockquote><p class="docFootnote"><sup><a name="ch5fn6">[6]</a></sup> See Open Motif, <a class="docLink" target="_blank" href="http://www.opengroup.org/openmotif/faq.html">www.opengroup.org/openmotif/faq.html</a></p></blockquote>
<p class="docText">With the exception of IEEE POSIX 1003.4a Draft 4 user threads, both AIX and Linux fully support standards.<sup class="docFootnote"><a class="docLink" href="#ch5fn7">[7]</a></sup> Draft 4 user threads are DCE threads, which are an earlier version of POSIX threads. Because over the years AIX has been available longer than Linux, some earlier versions of AIX support DCE threads, whereas Linux support of threads starts with Native POSIX Threads Library (NPTL), which claims to be more compliant with regular POSIX threads. NPTL is discussed in detail in <a class="docLink" href="ch03.html#ch03">Chapter 3</a>, &quot;Analysis.&quot;<a name="d0e34952"></a><a name="d0e34953"></a><a name="d0e34954"></a></p><blockquote><p class="docFootnote"><sup><a name="ch5fn7">[7]</a></sup> Conflicts between ISO/IEC 9945 (POSIX) and the LSB</p></blockquote>


</TD></TR></table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec1.html><img src="images/prev.gif" width="60" height="17" border="0" align="absmiddle" alt="Previous Page"></a>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href=ch05lev1sec3.html><img src="images/next.gif" width="60" height="17" border="0" align="absmiddle" alt="Next Page"></a>
</div></td></tr></table>
</body></html>