<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Group and Ungroup</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="databaseid-CHP-5-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="databaseid-CHP-5-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a name="databaseid-CHP-5-SECT-5"></a>
<h3 class="docSection1Title" >Group and Ungroup</h3>
<a name="IDX-CHP-5-0421"></a>
<p class="docText">Recall from <a class="docLink" href="databaseid-CHP-2.html#databaseid-CHP-2">Chapter 2</a> that relations with relation-valued attributes (RVAs for short) are legal. <a class="docLink" href="#databaseid-CHP-5-FIG-1">Figure 5-1</a> shows relations R1 and R4 from <a class="docLink" href="databaseid-CHP-2-SECT-2.html#databaseid-CHP-2-FIG-1">Figures 2-1</a>and <a class="docLink" href="databaseid-CHP-2-SECT-2.html#databaseid-CHP-2-FIG-2">2-2</a> in that chapter; R4 has an RVA and R1 doesn't, but the two relations clearly convey the same information.</p>
<a name="databaseid-CHP-5-FIG-1"></a><p><center>
<h5 class="docFigureTitle">Figure 5-1. Relations R1 and R4 from <a class="docLink" href="databaseid-CHP-2-SECT-2.html#databaseid-CHP-2-FIG-1">Figures 2-1</a> and <a class="docLink" href="databaseid-CHP-2-SECT-2.html#databaseid-CHP-2-FIG-2">2-2</a> in <a class="docLink" href="databaseid-CHP-2.html#databaseid-CHP-2">Chapter 2</a></h5>
<img border="0" alt=""  width="229" height="253" SRC="images/0596100124/figs/databaseid_05_01.gif"></center></p><br>
<p class="docText">Of course, we need a way to map between relations without RVAs and relations with them, and that's the purpose of the GROUP<a name="IDX-CHP-5-0422"></a> and UNGROUP<a name="IDX-CHP-5-0423"></a> operators. I don't want to go into a lot of detail on those operators here; let me just say that, given relations R1 and R4 as shown in <a class="docLink" href="#databaseid-CHP-5-FIG-1">Figure 5-1</a>, respectively, the expression:</p>
<pre>
  R1 GROUP ( { PNO } AS PNO_REL )
</pre><br>

<p class="docText">will produce R4, and the expression:</p>
<pre>
  R4 UNGROUP ( PNO_REL )
</pre><BR>

<p class="docText">will produce R1. SQL has no direct counterpart to these operators.</p>
<p class="docText">By the way: if R4 includes exactly one tuple for supplier number S <span class="docEmphasis">x</span>, say, and if the PNO_REL value in that tuple is empty, then the result of the foregoing UNGROUP will contain no tuple at all for supplier number S <span class="docEmphasis">x</span>. For further details, I refer you to my book <span class="docEmphasis">An Introduction to Database Systems</span>, Eighth Edition (Addison-Wesley, 2004) or the book <span class="docEmphasis">Databases, Types, and the Relational Model: The Third Manifesto</span>, Third Edition (Addison-Wesley, 2006), by Hugh Darwen and myself.</p>
<p class="docText">And by the way again: you might be wondering what operations on relations with RVAs look like. Well, operations on <span class="docEmphasis">any</span> relation, when they refer to some attribute <span class="docEmphasis">A</span> of that relation of type <span class="docEmphasis">T</span>, say, typically involve what we might call "suboperations" on values of that attribute <span class="docEmphasis">A</span> that are, precisely, operations that have been defined in connection with that type <span class="docEmphasis">T</span>. So if <span class="docEmphasis">T</span> is a relation type, those "suboperations" are operations that have been defined in connection with relation types—which is to say, they're essentially the relational operations (join and the rest) described in the present chapter! See <a class="docLink" href="databaseid-CHP-5-SECT-11.html#databaseid-CHP-5-SECT-11.1.27">Exercises 5-27</a> through <a class="docLink" href="databaseid-CHP-5-SECT-11.html#databaseid-CHP-5-SECT-11.1.30">5-30</a> at the end of this chapter.</p>

<ul></UL></TD></tr></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="databaseid-CHP-5-SECT-4.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="databaseid-CHP-5-SECT-6.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
