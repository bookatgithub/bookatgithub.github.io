<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Exercises</title>
<link rel="STYLESHEET" type="text/css" href="images/style.css">
<link rel="STYLESHEET" type="text/css" href="images/docsafari.css">
</head>
<body >
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="databaseid-CHP-6-SECT-8.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="databaseid-CHP-7.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
<br>
<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><TD valign="top"><a name="databaseid-CHP-6-SECT-9"></a>
<H3 class="docSection1Title">Exercises</h3>
<a name="databaseid-CHP-6-SECT-9.1"></a>
<h4 class="docSection2Title"></h4>
<a name="databaseid-CHP-6-SECT-9.1.1"></a>
<h5 class="docSection3Title">Exercise 6-1.</H5>
<p class="docText">Define the terms <span class="docEmphasis">type constraint</span> and <span class="docEmphasis">database constraint</span>. When are such constraints checked? What happens if the check fails?</p>

<a name="databaseid-CHP-6-SECT-9.1.2"></a>
<H5 class="docSection3Title">Exercise 6-2</h5>
<p class="docText">State <span class="docEmphasis">The Golden Rule</span><span class="docEmphasis"></span>.</P>

<a name="databaseid-CHP-6-SECT-9.1.3"></a>
<H5 class="docSection3Title">Exercise 6-3</H5>
<p class="docText">What do you understand by the terms <span class="docEmphasis">attribute constraint</span>; <span class="docEmphasis">tuple constraint</span>; <span class="docEmphasis">relvar constraint</span>; <span class="docEmphasis">"the" database constraint</span>; <span class="docEmphasis">"the" relvar constraint</span>; <span class="docEmphasis">single-relvar constraint</span>; <span class="docEmphasis">multi-relvar constraint?</span></P>

<a name="databaseid-CHP-6-SECT-9.1.4"></a>
<h5 class="docSection3Title">Exercise 6-4</h5>
<p class="docText">Distinguish between possible and physical representations.</p>

<a name="databaseid-CHP-6-SECT-9.1.5"></a>
<h5 class="docSection3Title">Exercise 6-5</h5>
<p class="docText">Explain as carefully as you can (a) what a selector is and (b) what a THE_ operator is.</p>

<a name="databaseid-CHP-6-SECT-9.1.6"></a>
<h5 class="docSection3Title">Exercise 6-6</h5>
<p class="docText">Suppose the only legal CITY values are London, Paris, Rome, Athens, Oslo, Stockholm, Madrid, and Amsterdam. Define a type called CITY that satisfies this constraint. Is there a way to impose the same constraint without an explicit CITY type? If so, compare and contrast the different approaches.</p>

<a name="databaseid-CHP-6-SECT-9.1.7"></a>
<h5 class="docSection3Title">Exercise 6-7</h5>
<p class="docText">Throughout this book I assume that SNO is a user-defined type. Give a definition for this type. Assume that the only legal supplier numbers are ones that can be represented by a character string of at least two characters, of which the first is an "S" and the remainder denote a decimal integer in the range 1 to 9999.</p>

<a name="databaseid-CHP-6-SECT-9.1.8"></a>
<h5 class="docSection3Title">Exercise 6-8</h5>
<p class="docText">A <I>line segment</i> is a straight line connecting two points in the euclidean plane. Give a corresponding type definition.</p>

<a name="databaseid-CHP-6-SECT-9.1.9"></a>
<h5 class="docSection3Title">Exercise 6-9</h5>
<p class="docText">Can you think of a type for which we might want to specify two different possreps? If there are two or more possreps for the same type, does it make sense for each to include a type constraint?</P>

<a name="databaseid-CHP-6-SECT-9.1.10"></a>
<H5 class="docSection3Title">Exercise 6-10</h5>
<p class="docText">Can you think of an example of a type for which different possreps have different numbers of components?</P>

<a name="databaseid-CHP-6-SECT-9.1.11"></a>
<H5 class="docSection3Title">Exercise 6-11</H5>
<p class="docText">Which operations might cause constraints C1-C8 from the body of the chapter to be violated?</p>

<a name="databaseid-CHP-6-SECT-9.1.12"></a>
<H5 class="docSection3Title">Exercise 6-12</H5>
<p class="docText">Constraint C1 (for example) had the property that it could be checked for a given tuple by examining just that tuple in isolation; constraint C4 (for example) did not. What is it, formally, that accounts for this difference? What's the pragmatic significance, if any, of this difference?</P>

<a name="databaseid-CHP-6-SECT-9.1.13"></a>
<H5 class="docSection3Title">Exercise 6-13</H5>
<p class="docText">Can you give a <span class="docEmphStrong">Tutorial D</span> database constraint that's <span class="docEmphasis">exactly</span> equivalent to the specification KEY{SNO} for relvar S?</P>

<a name="databaseid-CHP-6-SECT-9.1.14"></a>
<h5 class="docSection3Title">Exercise 6-14</h5>
<p class="docText">Give an SQL formulation of constraint C7 from the body of the chapter.</P>

<a name="databaseid-CHP-6-SECT-9.1.15"></a>
<H5 class="docSection3Title">Exercise 6-15</h5>
<p class="docText">Give an SQL formulation of constraint C8 from the body of the chapter.</p>

<a name="databaseid-CHP-6-SECT-9.1.16"></a>
<h5 class="docSection3Title">Exercise 6-16</h5>
<p class="docText">Using <span class="docEmphStrong">Tutorial D</span> and/or SQL, write constraints for the suppliers-and-parts database to express the following requirements:</P>
<div style="font-weight:bold"><ol class="docList" type="a"><li><div style="font-weight:normal"><p class="docList">All red parts must weigh less than 50 pounds.</P></div></li><LI><div style="font-weight:normal"><p class="docList">Every London supplier must supply part P2.</P></div></LI><LI><div style="font-weight:normal"><p class="docList">No two suppliers can be located in the same city.</p></div></li><li><div style="font-weight:normal"><p class="docList">At most one supplier can be located in Athens at any one time.</p></div></li><li><div style="font-weight:normal"><p class="docList">There must exist at least one London supplier.</p></div></li><li><div style="font-weight:normal"><p class="docList">At least one red part must weigh less than 50 pounds.</p></div></li><li><div style="font-weight:normal"><p class="docList">The average supplier status must be at least 10.</p></div></li><LI><div style="font-weight:normal"><p class="docList">No shipment can have a quantity more than double the average of all such quantities.</p></div></li><li><div style="font-weight:normal"><p class="docList">No supplier with maximum status can be located in the same city as any supplier with minimum status.</p></div></LI><LI><div style="font-weight:normal"><p class="docList">Every part must be located in a city in which there is at least one supplier.</p></div></LI><LI><div style="font-weight:normal"><p class="docList">Every part must be located in a city in which there is at least one supplier of that part.</P></div></li><LI><div style="font-weight:normal"><p class="docList">Suppliers in London must supply more different kinds of parts than suppliers in Paris.</P></div></LI><LI><div style="font-weight:normal"><p class="docList">Suppliers in London must supply more parts in total than suppliers in Paris.</P></div></LI></ol></div>
<p class="docText">In each case, state which operations might cause the constraint to be violated.</p>

<a name="databaseid-CHP-6-SECT-9.1.17"></a>
<h5 class="docSection3Title">Exercise 6-17</H5>
<p class="docText">In a footnote in the section "<a class="docLink" href="databaseid-CHP-6-SECT-6.html#databaseid-CHP-6-SECT-6">Constraints and Predicates</a>," I said that if the values S1 and London appeared together in some tuple, then it might mean (among many other possible interpretations) that supplier S1 doesn't have an office in London. Actually, this particular interpretation is extremely unlikely. Why? (<span class="docEmphasis">Hint:</span> Remember the Closed World Assumption.)</P>

<a name="databaseid-CHP-6-SECT-9.1.18"></a>
<h5 class="docSection3Title">Exercise 6-18</h5>
<p class="docText">Suppose no "cascade delete" rule is stated declaratively for suppliers and shipments. Write a <span class="docEmphStrong">Tutorial D</span> statement that will delete some specified supplier and all shipments for that supplier in a single operation.</p>

<a name="databaseid-CHP-6-SECT-9.1.19"></a>
<h5 class="docSection3Title">Exercise 6-19</H5>
<p class="docText">Using the syntax sketched for transition constraints in the section "<a class="docLink" href="databaseid-CHP-6-SECT-7.html#databaseid-CHP-6-SECT-7">Miscellaneous Issues</a>," write transition constraints to express the following requirements:</p>
<div style="font-weight:bold"><ol class="docList" type="a"><LI><div style="font-weight:normal"><p class="docList">Suppliers in Athens can move only to London or Paris, and suppliers in London can move only to Paris.</p></div></LI><LI><div style="font-weight:normal"><p class="docList">The total shipment quantity for a given part can never decrease.</P></div></LI><li><div style="font-weight:normal"><p class="docList">The total shipment quantity for a given supplier cannot be reduced in a single update to less than half its current value. (What do you think the qualification "in a single update" means here? Why is it important? <span class="docEmphasis">Is</span> it important?)</p></div></li></ol></div>

<a name="databaseid-CHP-6-SECT-9.1.20"></a>
<h5 class="docSection3Title">Exercise 6-20</h5>
<p class="docText">Distinguish between correctness and consistency.</p>

<a name="databaseid-CHP-6-SECT-9.1.21"></a>
<h5 class="docSection3Title">Exercise 6-21</h5>
<p class="docText">Do you think the following is or should be a valid <span class="docEmphStrong">Tutorial D</span> TYPE statement?</p>
<pre>
  TYPE TTT POSSREP { ... CONSTRAINT FALSE } ;
</pre><br>


<a name="databaseid-CHP-6-SECT-9.1.22"></a>
<h5 class="docSection3Title">Exercise 6-22</h5>
<p class="docText">Do you think the following is or should be a valid <span class="docEmphStrong">Tutorial D</span> CONSTRAINT statement?</p>
<pre>
  CONSTRAINT FFF FALSE ;
</pre><br>


<a name="databaseid-CHP-6-SECT-9.1.23"></a>
<H5 class="docSection3Title">Exercise 6-23</h5>
<p class="docText">Investigate any SQL product that might be available to you. What semantic optimization does it support, if any?</p>

<a name="databaseid-CHP-6-SECT-9.1.24"></a>
<h5 class="docSection3Title">Exercise 6-24</h5>
<p class="docText">Why do you think SQL fails to support type constraints? What are the consequences of this state of affairs?</P>

<a name="databaseid-CHP-6-SECT-9.1.25"></a>
<H5 class="docSection3Title">Exercise 6-25</h5>
<a name="IDX-CHP-6-0509"></a><a name="IDX-CHP-6-0510"></a>
<p class="docText">The discussion in this chapter of types in general, and type constraints in particular, tacitly assumed that types were all (a) scalar and (b) user-defined. Do the concepts discussed apply equally well to nonscalar types and/or system-defined types?</P>



<UL></UL></td></TR></table>
<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#e6e6e6">
<tr style="background-image: url(images/tile_back.gif);">
<td class="v2" align="left" width="30%">
<a href="databaseid-CHP-6-SECT-8.html"><img src="images/previous.gif" width="70" height="19" border="0" align="absmiddle" alt="Previous Section"></a>
</td>
<td class="v2" align="center" width="40%">
<a href="main.html" style="color:white;text-decoration:none;text-underline:none">&nbsp;&lt;&nbsp;Day Day Up&nbsp;&gt;&nbsp;</a>
</td>
<td class="v2" align="right" width="30%">
<a href="databaseid-CHP-7.html"><img src="images/next.gif" width="70" height="19" border="0" align="absmiddle" alt="Next Section"></a>
</td>
</tr>
</table>
</body>
</html>
